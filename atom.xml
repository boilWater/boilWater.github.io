<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>JackJin&#39;s åšå®¢</title>
  <subtitle>ä¸€ä½è„šè¸å®åœ°ï¼Œæ‹¥æœ‰æ¢¦æƒ³çš„90åï¼Œæƒ³è¦ä¸€ç›´åŠªåŠ›è¿½ä¸Šä½ ï¼</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-08-25T09:29:18.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>JackJin</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOS-é•œå¤´é‡‡é›†(AVCaptureDevice)</title>
    <link href="http://yoursite.com/2017/08/17/iOS-%E9%95%9C%E5%A4%B4%E9%87%87%E9%9B%86(AVCaptureDevice)/"/>
    <id>http://yoursite.com/2017/08/17/iOS-é•œå¤´é‡‡é›†(AVCaptureDevice)/</id>
    <published>2017-08-17T09:42:32.000Z</published>
    <updated>2017-08-25T09:29:18.000Z</updated>
    
    <content type="html">&lt;p&gt;æ‰¿æ¥ä¸Šä¸€ç¯‡åšæ–‡å°ç¼–è®²è¿°åœ¨é•œå¤´é‡‡é›†è¿‡ç¨‹æ‰€éœ€çŸ¥è¯†ç‚¹å’Œ &lt;code&gt;AVCaptureSession&lt;/code&gt; åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œæœ¬ç¯‡åšæ–‡å°†è¦è®²è¿° &lt;code&gt;AVCaptureDevice&lt;/code&gt; ç›¸å…³ä½¿ç”¨æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾ä¸ºæœ¬åšæ–‡å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-02f3ce2f37fba73c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;AVCaptureDeviceåšæ–‡å†™ä½œæ€ç»´å¯¼å›¾.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;AVCaptureDevice&quot;&gt;&lt;a href=&quot;#AVCaptureDevice&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDevice&quot;&gt;&lt;/a&gt;AVCaptureDevice&lt;/h1&gt;&lt;p&gt;AVCaptureDevice åœ¨è¿™ä¸ªé‡‡é›†è¿‡ç¨‹ä¸­ç›¸å½“äºåœ¨å‘ç”µè¿‡ç¨‹ä¸­â€œå‘ç”µè®¾å¤‡â€ï¼Œæä¾›å®ç°æ‘„åƒå¤´å’Œéº¦å…‹é£ç›¸å…³åˆå§‹åŒ–ã€‚è€Œä¸”å¯ä»¥å¯¹æ‘„åƒå¤´è¿›è¡Œä¸€äº›åŸºæœ¬è®¾ç½®ï¼Œä¾‹å¦‚ï¼šé—ªå…‰ç¯ã€æ‰‹ç”µç­’ã€èšç„¦ã€æ›å…‰ã€ç™½å¹³è¡¡ç­‰ä¸€äº›åŸºæœ¬è®¾ç½®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AVCaptureDevice å®ç°æ‘„åƒå¤´åˆå§‹åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ &lt;code&gt;AVCaptureDevice&lt;/code&gt; åˆå§‹åŒ–å‰éœ€è¦å¯¹é•œå¤´ç”³è¯·æƒé™ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; ([&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; authorizationStatusForMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusAuthorized&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//è·å–æˆæƒæˆåŠŸ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusNotDetermined&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//ç›®å‰ç”¨æˆ·ä¸ºé€‰æ‹©&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            dispatch_suspend(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.sessionQueue);&lt;span class=&quot;comment&quot;&gt;//self.seaaionQueue æ˜¯ä¸²è¡Œçº¿ç¨‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; requestAccessForMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt; completionHandler:^(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; granted) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!granted) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.setupResult = FYCameraCaptureSetupResultNotAuthorized;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                dispatch_resume(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.sessionQueue);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;//å¤„ç†å…¶ä½™æƒ…å†µ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¯·æ±‚ç¡¬ä»¶çš„è·å–çŠ¶æ€ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusNotDetermined&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//ç”¨æˆ·æš‚æ—¶æ²¡æœ‰åšç›¸å…³é€‰ç€&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusRestricted&lt;/span&gt;    = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//æ²¡æœ‰æ”¹åª’ä½“ç±»å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusDenied&lt;/span&gt;        = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//ç”¨æˆ·æ‹’ç»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusAuthorized&lt;/span&gt;    = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//ç”¨æˆ·å…è®¸&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨è·å–å¯¹ &lt;code&gt;AVCaptureDevice&lt;/code&gt; ä½¿ç”¨å…è®¸çš„æƒ…å†µä¸­ï¼Œå¯ä»¥è·å–ä¸Šé¢å››ä¸­æƒ…å†µã€‚å¯ä»¥ä¾æ¬¡å¯¹ä¸Šé¢ä¸‰ç§æƒ…å†µè¿›è¡Œå¤„ç†ã€‚ä¸‹é¢ğŸ‘‡åˆ—å‡ºåˆå§‹æ–¹æ³•ã€‚ &lt;/p&gt;
&lt;p&gt;1ï¼‰ &lt;code&gt;AVCaptureDevice&lt;/code&gt;åŸºæœ¬åˆå§‹æ–¹æ³•&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ–¹æ³•(1)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *videoDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ–¹æ³•(2)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *videoDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithDeviceType:&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInDuoCamera&lt;/span&gt; mediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt; position:&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionBack&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;2ï¼‰&lt;code&gt;AVCaptureDevice&lt;/code&gt; å®ç°é•œå¤´è‡ªåŠ¨å˜ç„¦&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceType&lt;/span&gt;&amp;gt; *deviceType = @[&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInWideAngleCamera&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInDualCamera&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceDiscoverySession&lt;/span&gt; *videoDeviceDiscoverySession = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceDiscoverySession&lt;/span&gt; discoverySessionWithDeviceTypes:deviceType mediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt; position:&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionUnspecified&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å– devices &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *&amp;gt; *devices = videoDeviceDiscoverySession.devices;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;AVCaptureDeviceDiscoverySession&lt;/code&gt; è·å– &lt;code&gt;AVCaptureDevice&lt;/code&gt; è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;AVCaptureDeviceType&lt;/code&gt;ã€‚&lt;br&gt;ä¸‹é¢åˆ—å‡º &lt;code&gt;AVCaptureDeviceType&lt;/code&gt; ç§ç±»ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//AVCaptureDeviceType ç§ç±»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInMicrophone&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºéº¦å…‹é£&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInWideAngleCamera&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºå¹¿è§’ç›¸æœº&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInTelephotoCamera&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºæ¯”å¹¿è§’ç›¸æœºæ›´é•¿çš„ç„¦è·ã€‚åªæœ‰ä½¿ç”¨ AVCaptureDeviceDiscoverySession å¯ä»¥ä½¿ç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInDualCamera&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºå˜ç„¦çš„ç›¸æœºï¼Œå¯ä»¥å®ç°å¹¿è§’å’Œå˜ç„¦çš„è‡ªåŠ¨åˆ‡æ¢ã€‚ä½¿ç”¨åŒAVCaptureDeviceTypeBuiltInTelephotoCamera ä¸€æ ·ã€‚&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInDuoCamera&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//iOS 10.2 è¢« AVCaptureDeviceTypeBuiltInDualCamera æ›¿æ¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨é‡Šï¼š&lt;code&gt;iOS 10.2&lt;/code&gt; ä¹‹åæ·»åŠ è‡ªåŠ¨å˜ç„¦åŠŸèƒ½, è€Œä¸”åœ¨æŸ¥æ‰¾è‡ªåŠ¨å˜ç„¦é•œå¤´æ—¶éœ€è¦é‡‡ç”¨ &lt;code&gt;AVCaptureDeviceDiscoverySession&lt;/code&gt; è¿›è¡ŒæŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AVCaptureDevice&lt;/code&gt; å®ç°çš„é€šçŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡åˆ—å‡ºé€šçŸ¥çš„ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Notification type &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceWasConnectedNotification&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//è®¾å¤‡è¢«é“¾æ¥æ—¶å‘å‡ºé€šçŸ¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceWasDisconnectedNotification&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//è®¾å¤‡è¢«å»å»é™¤æ—¶å‘å‡ºé€šçŸ¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceSubjectAreaDidChangeNotification&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//è®¾å¤‡ä¸­åœºæ™¯æ”¹å˜æ—¶å‘å‡ºé€šçŸ¥ï¼Œæ—¢é¢„è§ˆå‘ç”Ÿå˜åŒ–&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AVCaptureDevice&lt;/code&gt; çš„ä½ç½®&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionUnspecified&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;//ä¸ç¡®å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionBack&lt;/span&gt;        = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//åç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionFront&lt;/span&gt;       = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//å‰ç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å¦‚æœåˆå§‹çš„ AVMediaType æ˜¯ AVMediaTypeVideo è¡¨ç¤ºå‰ç½®å’Œåç½®æ‘„åƒå¤´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;AVCaptureDeviceFlash-é—ªå…‰ç¯&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceFlash-é—ªå…‰ç¯&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceFlash(é—ªå…‰ç¯)&quot;&gt;&lt;/a&gt;AVCaptureDeviceFlash(é—ªå…‰ç¯)&lt;/h4&gt;&lt;p&gt;åœ¨å…‰çº¿ä¸è¶³çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å¼€å¯å±å¹•çš„é—ªå…‰ç¯æ¥è¿›è¡Œè¡¥å…‰ã€‚ä¾¿äºé•œå¤´å¯ä»¥æ•æ‰æ›´å¥½çš„åœºæ™¯ï¼Œæ‹æ‘„å‡ºå¥½çš„ç…§ç‰‡å’Œè§†é¢‘ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;iOS 10_0&lt;/code&gt;ä¹‹å‰é—ªå…‰ç¯è®¾ç½®&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *errorProperty = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device hasFlash]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isFlashAvailable]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isFlashModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeOn&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; result = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result = [device lockForConfiguration:&amp;amp;errorProperty];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (result) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                [device setFlashMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeOn&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : CONFIGURATION CAPTURE DEVICE FLASH FAILURE, ERROR CODE:%ld&quot;&lt;/span&gt;, (&lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt;)errorProperty.code);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : FLASH IS UNAVAILABLE BECAUSE THE DEVCICE OVERHEATS&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : SOFTWARE DEVICE HAVE NO FLASH&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;iOS 10_0&lt;/code&gt;ä¹‹åè®¾ç½®&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *outputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.outputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureOutput&lt;/span&gt; *output &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; outputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([output isMemberOfClass:[&lt;span class=&quot;built_in&quot;&gt;AVCapturePhotoOutput&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;AVCapturePhotoOutput&lt;/span&gt; *photoOutput = (&lt;span class=&quot;built_in&quot;&gt;AVCapturePhotoOutput&lt;/span&gt; *)output;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; flashSupported = [[photoOutput supportedFlashModes] containsObject:@(&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeAuto&lt;/span&gt;)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (flashSupported) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;AVCapturePhotoSettings&lt;/span&gt; *photoSettings = photoOutput.photoSettingsForSceneMonitoring;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            photoSettings.flashMode = &lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeAuto&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : PHOTOOUTPUT CAN NOT SUPPORT AVCAPTUREMODE TYPE&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡åˆ—å‡ºé—ªå…‰ç¯ç±»å‹ï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeOff&lt;/span&gt;  = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é—ªå…‰ç¯å…³é—­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeOn&lt;/span&gt;   = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é—ªå…‰ç¯å¼€å¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeAuto&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é—ªå…‰ç¯è‡ªåŠ¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;å¤ªå›°äº†ï¼Œæ™šä¸Šè·‘ 10 å…¬é‡Œã€‚ç›®å‰ğŸ‘éƒ½çä¸å¼€ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨ iPhone 6s å¼€å§‹ï¼Œå¦‚æœæ˜¯å‰ç½®æ‘„åƒå¤´å¹¶ä¸”å¼€å¯é—ªå…‰ç¯ï¼Œå¯ä»¥å®ç°å±å¹•é—ªå…‰ç¯è¡¥å…‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;AVCaptureDeviceTorch-æ‰‹ç”µç­’&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceTorch-æ‰‹ç”µç­’&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceTorch(æ‰‹ç”µç­’)&quot;&gt;&lt;/a&gt;AVCaptureDeviceTorch(æ‰‹ç”µç­’)&lt;/h4&gt;&lt;p&gt;åœ¨å…‰çº¿ä¸æ˜¯å¾ˆæš—çš„æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥ç”¨æ‰‹æœºçš„ LED ç¯å½“åšæ‰‹ç”µç­’ä½¿ç”¨ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device hasTorch]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isFlashAvailable]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isTorchModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOn&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; result = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result = [device lockForConfiguration:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (result) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                [device setTorchMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOn&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : CONFIGURATION DEVICE TORCH FAIL AND ERROR CODE %ld&quot;&lt;/span&gt;, (&lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt;)error.code);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Torch light&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result = [device setTorchModeOnWithLevel:&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt; error:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!result) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : DEVICE SET TORCH FAILURE AND ERROR CODE %ld&quot;&lt;/span&gt;, error.code);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : DEVICE CAN NO SUPPORT TORCH&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : SOFTHARE DEVICE TORCH IS UNAVAILABLE BECAUSE OVERHEATS&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : SOFFHARE DEVICE HAS NO TORCH&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢åˆ—å‡º &lt;code&gt;Torch&lt;/code&gt; ç±»å‹ï¼Œä½¿ç”¨æ–¹æ³•å’Œé—ªå…³ç¯ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOff&lt;/span&gt;  = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//å…³é—­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOn&lt;/span&gt;   = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//æ‰“å¼€&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeAuto&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//è‡ªåŠ¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;AVCaptureDeviceFocus-èšç„¦&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceFocus-èšç„¦&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceFocus(èšç„¦)&quot;&gt;&lt;/a&gt;AVCaptureDeviceFocus(èšç„¦)&lt;/h4&gt;&lt;p&gt;å®ç°æ‘„åƒå¤´èšç„¦æœ‰ä¸¤ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é•œå¤´ä½ç½®(AVCaptureFocusMode)&lt;/li&gt;
&lt;li&gt;èŒƒå›´çƒ§è‹—(AVCaptureAutoFocusRangeRestriction)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1ï¼‰é•œå¤´ä½ç½®(AVCaptureFocusMode)&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isFocusModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeAutoFocus&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device lockForConfiguration:&amp;amp;error]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [device setFocusMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeAutoFocus&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è®¾ç½®èšç„¦åœ¨è®¾å¤‡åæ ‡çš„ä¸­ç‚¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (device.focusPointOfInterestSupported) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            device.focusPointOfInterest = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°ä»£ç å®ç°èšç„¦åœ¨è®¾å¤‡åæ ‡ ä¸­å¿ƒä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡åˆ—å‡ºå®ç°èšç„¦è®¾ç½®ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeLocked&lt;/span&gt;              = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é”å®šå½“å‰é•œå¤´ä½ç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeAutoFocus&lt;/span&gt;           = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é•œå¤´è‡ªåŠ¨è°ƒç„¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeContinuousAutoFocus&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é•œå¤´è¿ç»­è‡ªåŠ¨è°ƒç„¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;AVCaptureDeviceExposure-æ›å…‰&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceExposure-æ›å…‰&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceExposure(æ›å…‰)&quot;&gt;&lt;/a&gt;AVCaptureDeviceExposure(æ›å…‰)&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isExposureModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeAutoExpose&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device lockForConfiguration:&amp;amp;error]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         [device setExposureMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeAutoExpose&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šè¿°ä»£ç å®ç°è‡ªåŠ¨è°ƒèŠ‚æ›å…‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢åˆ—å‡ºç›¸å…³æ›å…‰è®¾ç½®ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeLocked&lt;/span&gt;                            = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é”å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeAutoExpose&lt;/span&gt;                        = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//è‡ªåŠ¨å¯¹ç„¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeContinuousAutoExposure&lt;/span&gt;            = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//å®ç°è¿ç»­è‡ªåŠ¨å¯¹ç„¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeCustom&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NS_ENUM_AVAILABLE_IOS&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;_0) = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é€šè¿‡ ISO å’Œ æ›å…‰æ—¶é—´å®ç°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;AVCaptureDeviceWhiteBalance-ç™½å¹³è¡¡&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceWhiteBalance-ç™½å¹³è¡¡&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceWhiteBalance(ç™½å¹³è¡¡)&quot;&gt;&lt;/a&gt;AVCaptureDeviceWhiteBalance(ç™½å¹³è¡¡)&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;ç±»å‹è®¾ç½®(AVCaptureWhiteBalanceMode)&lt;/li&gt;
&lt;li&gt;RGBå…·ä½“å€¼(AVCaptureWhiteBalanceGains)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1ï¼‰ç±»å‹è®¾ç½®ç™½å¹³è¡¡&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isWhiteBalanceModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeAutoWhiteBalance&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device lockForConfiguration:&amp;amp;error]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         [device setWhiteBalanceMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeAutoWhiteBalance&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°å®ç°ç™½å¹³è¡¡è‡ªåŠ¨è°ƒæ•´è®¾ç½®ï¼Œä¸‹é¢ğŸ‘‡åˆ—å‡ºç™½å¹³è¡¡ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeLocked&lt;/span&gt;                     = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeAutoWhiteBalance&lt;/span&gt;           = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeContinuousAutoWhiteBalance&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2ï¼‰RGB å€¼è®¾ç½®ç™½å¹³è¡¡&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; maxWhiteBalance = device.maxWhiteBalanceGain;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; redGain =  MIN(&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;, maxWhiteBalance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; greenGain = MIN(&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;, maxWhiteBalance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; blueGain = MIN(&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;, maxWhiteBalance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceGains&lt;/span&gt; whiteBalanceGains = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     redGain,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     greenGain,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     blueGain&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [device setWhiteBalanceModeLockedWithDeviceWhiteBalanceGains:whiteBalanceGains completionHandler:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;é¢å¤–é™„åŠ åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#é¢å¤–é™„åŠ åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;é¢å¤–é™„åŠ åŠŸèƒ½&quot;&gt;&lt;/a&gt;é¢å¤–é™„åŠ åŠŸèƒ½&lt;/h4&gt;&lt;p&gt;é™„åŠ åŠŸèƒ½ï¼šå¯ä»¥è·å– &lt;code&gt;AVCaptureDevice&lt;/code&gt; ä¸€äº›ç›¸å…³çš„å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è§†é¢‘å½•åˆ¶è¿‡ç¨‹ä¸­ &lt;code&gt;min&lt;/code&gt; å’Œ &lt;code&gt;max&lt;/code&gt; çš„å¸§ç‡å’Œå¸§æ—¶é—´é—´éš”ã€‚ &lt;/li&gt;
&lt;li&gt;æ›å…‰ &lt;code&gt;ISO&lt;/code&gt; çš„ &lt;code&gt;min&lt;/code&gt; å’Œ &lt;code&gt;max&lt;/code&gt; å€¼å’Œæ›å…‰æ—¶é—´çš„ &lt;code&gt;min&lt;/code&gt; å’Œ &lt;code&gt;max&lt;/code&gt; å€¼ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;è¾“å…¥çš„ç‹¬ä¸€çš„ &lt;code&gt;ID&lt;/code&gt; å’Œè¾“å…¥æºçš„è®¾å¤‡ åå­—ï¼ˆ&lt;code&gt;localizedName&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturedevice?changes=latest_minor&amp;amp;language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureDevice&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturedeviceposition&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureDevicePosition&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturetorchmode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureTorchMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcaptureflashmode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureFlashMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturefocusmode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureFocusMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcaptureexposuremode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureExposureMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturewhitebalancemode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureWhiteBalanceMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://support.vsco.co/hc/en-us/articles/203226980-Advanced-Camera-Controls-for-iOS-Setting-Manual-White-Balance&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Camera Controls for iOS: Setting Manual White Balance&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å‘å¸ƒï¼š2017/8/15 23:16:32 æ˜ŸæœŸäºŒ&lt;br&gt;ç¬¬äºŒæ¬¡å‘å¸ƒï¼š2017/8/16 00:17:59 æ˜ŸæœŸä¸‰&lt;br&gt;ç¬¬ä¸‰æ¬¡å‘å¸ƒï¼š2017/8/16 20:53:56 æ˜ŸæœŸä¸‰&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æ‰¿æ¥ä¸Šä¸€ç¯‡åšæ–‡å°ç¼–è®²è¿°åœ¨é•œå¤´é‡‡é›†è¿‡ç¨‹æ‰€éœ€çŸ¥è¯†ç‚¹å’Œ &lt;code&gt;AVCaptureSession&lt;/code&gt; åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œæœ¬ç¯‡åšæ–‡å°†è¦è®²è¿° &lt;code&gt;AVCaptureDevice&lt;/code&gt; ç›¸å…³ä½¿ç”¨æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾ä¸ºæœ¬åšæ–‡å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-02f3ce2f37fba73c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;AVCaptureDeviceåšæ–‡å†™ä½œæ€ç»´å¯¼å›¾.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS-é•œå¤´é‡‡é›†(Camera capture &amp; AVCaptureSession)</title>
    <link href="http://yoursite.com/2017/08/11/iOS-Camera%20Capture%20(iOS%20%E9%95%9C%E5%A4%B4%E9%87%87%E9%9B%86)/"/>
    <id>http://yoursite.com/2017/08/11/iOS-Camera Capture (iOS é•œå¤´é‡‡é›†)/</id>
    <published>2017-08-10T16:07:15.000Z</published>
    <updated>2017-08-25T09:26:48.000Z</updated>
    
    <content type="html">&lt;p&gt;iPhone æ‰‹æœºåœ¨å›¾ç‰‡æ‹ç…§å’Œè§†é¢‘å½•åˆ¶æ–¹é¢æœ‰å¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼Œå°ç¼–è®¤ä¸ºå¦‚æœå¾ˆå¥½ä½¿ç”¨ iPhone æ‹æ‘„å‡ºå¾ˆå¥½ç…§ç‰‡ &amp;amp; å½•åˆ¶å¾ˆæœ‰è¶£çš„è§†é¢‘ã€‚æœ¬ç« å°†è¯¦ç»†è®²è§£ &lt;code&gt;AVCaptureSession&lt;/code&gt; ï¼Œå¹¶æœ€åç»™å‡º &lt;code&gt;FYCameraKit&lt;/code&gt; é¡¹ç›®Demoã€‚&lt;br&gt;ä¸‹é¢å°ç¼–ä¸ºå¤§å®¶è®²è§£ iOS æ‹ç…§å’Œè§†é¢‘å½•åˆ¶åŠŸèƒ½å®ç°ï¼Œä¸‹å›¾æ˜¯é•œå¤´é‡‡é›†éœ€è¦çš„ç±»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-b727b7f54b3df9bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Camera Capture (iOS é•œå¤´é‡‡é›†).png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;æ€»ä½“ä»‹ç»&quot;&gt;&lt;a href=&quot;#æ€»ä½“ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;æ€»ä½“ä»‹ç»&quot;&gt;&lt;/a&gt;æ€»ä½“ä»‹ç»&lt;/h2&gt;&lt;p&gt;åœ¨æ•´ä¸ªé•œå¤´é‡‡é›†è¿‡ç¨‹å°ç¼–æŠŠæ•´ä¸ªè¿‡ç¨‹æ¯”ä½œæˆ‘ä»¬å¸¸è§å‘ç”µè¿‡ç¨‹ï¼šå‡æ˜¯é€šè¿‡ç‰¹å®šçš„æ­¥éª¤å®ç°å¾—åˆ°æœ€åçš„äº§ç‰©ã€‚ä¸‹é¢ğŸ‘‡åšè¯¦ç»†è§£é‡Šï¼š&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureSession-å‘ç”µæœº&quot;&gt;&lt;a href=&quot;#AVCaptureSession-å‘ç”µæœº&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureSession (å‘ç”µæœº)&quot;&gt;&lt;/a&gt;AVCaptureSession (å‘ç”µæœº)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureSession&lt;/code&gt; ï¼šä½œä¸ºéŸ³è§†é¢‘æ•æ‰ä¼šè¯ï¼ŒæŠŠé•œå¤´å’Œéº¦å…‹é£æ•æ‰åˆ°çš„éŸ³è§†é¢‘æºè¾“å‡ºåˆ°è®¾å¤‡ä¸­ã€‚&lt;br&gt;æç¤ºï¼šå¯ä»¥æœ‰å¤šä¸ªè¾“å…¥å’Œè¾“å‡ºã€‚&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureDevice-å‘ç”µè®¾å¤‡&quot;&gt;&lt;a href=&quot;#AVCaptureDevice-å‘ç”µè®¾å¤‡&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDevice (å‘ç”µè®¾å¤‡)&quot;&gt;&lt;/a&gt;AVCaptureDevice (å‘ç”µè®¾å¤‡)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureDevice&lt;/code&gt;ï¼šè¾“å…¥è®¾å¤‡ï¼ŒåŒ…æ‹¬ï¼šæ‘„åƒå¤´å’Œéº¦å…‹é£ã€‚å¯ä»¥é€šè¿‡è®¾ç½®ä¸€äº›å‚æ•°æ¥è°ƒèŠ‚è®¾å¤‡é‡‡é›†æ•ˆæœï¼ˆä¾‹å¦‚ï¼šæ›å…‰ï¼Œç™½å¹³è¡¡å’Œèšç„¦ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureInput-æ°´é£èƒ½æº&quot;&gt;&lt;a href=&quot;#AVCaptureInput-æ°´é£èƒ½æº&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureInput (æ°´é£èƒ½æº)&quot;&gt;&lt;/a&gt;AVCaptureInput (æ°´é£èƒ½æº)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureInput&lt;/code&gt;ï¼šè¾“å…¥æ•°æ®ç®¡ç†å¯¹è±¡ï¼Œç»è¿‡ AVCaptureDevice å®ç°åˆå§‹åŒ–ï¼Œç„¶åæ·»åŠ åˆ° AVCaptureSession (å‘ç”µæœº) ä¸­è¿›è¡Œç›¸åº”çš„è¾“å‡ºã€‚&lt;br&gt;å­ç±»ï¼š&lt;code&gt;AVCaptureDeviceInput&lt;/code&gt;ã€&lt;code&gt;AVCaptureScreenInput&lt;/code&gt;å’Œ&lt;code&gt;AVCaptureMetadataInput&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureOutput-ç”µåŠ›&quot;&gt;&lt;a href=&quot;#AVCaptureOutput-ç”µåŠ›&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureOutput (ç”µåŠ›)&quot;&gt;&lt;/a&gt;AVCaptureOutput (ç”µåŠ›)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureOut&lt;/code&gt;ï¼šæ•°æ®è¾“å‡ºç®¡ç†ï¼Œé€šè¿‡ AVCaptureSession ä¸­è¾“å‡ºã€‚å¯ä»¥é€šè¿‡ç›¸å…³çš„åè®®å®å¯¹åº”çš„æ•°æ®è¾“å‡ºã€‚&lt;br&gt;å­ç±»ï¼š&lt;code&gt;AVCaptureFileOutput&lt;/code&gt;ã€&lt;code&gt;AVCapturePhotoOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureStillImageOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureVideoDataOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureAudioDataOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureAudioPreviewOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureDepthDataOutput&lt;/code&gt;å’Œ&lt;code&gt;AVCaptureMetadataOutput&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureVideoPreviewLayer-å‘ç”µé¢„è§ˆ&quot;&gt;&lt;a href=&quot;#AVCaptureVideoPreviewLayer-å‘ç”µé¢„è§ˆ&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureVideoPreviewLayer (å‘ç”µé¢„è§ˆ)&quot;&gt;&lt;/a&gt;AVCaptureVideoPreviewLayer (å‘ç”µé¢„è§ˆ)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureVideoPreviewLayer&lt;/code&gt;ï¼šå¯ä»¥æ”¯æŒåœ¨æ‹æ‘„è¿‡ç¨‹ä¸­è¿›è¡Œç›¸å…³çš„é¢„è§ˆï¼Œåªéœ€è¦åœ¨åˆå§‹æ—¶å®ç°å¯¹åº”çš„ AVCaptureSession å³å¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è§†é¢‘å½•åˆ¶&quot;&gt;&lt;a href=&quot;#è§†é¢‘å½•åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;è§†é¢‘å½•åˆ¶&quot;&gt;&lt;/a&gt;è§†é¢‘å½•åˆ¶&lt;/h2&gt;&lt;p&gt;ä¸‹é¢å±•ç¤ºåœ¨è‹¹æœå®˜æ–¹å¼€å‘æ–‡æ¡£ç»™å‡ºçš„å›¾ï¼š&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-4cbf9ba736afdb69.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Video Capture(iOS è§†é¢‘å½•åˆ¶).png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;è§†é¢‘å½•åˆ¶æ€»æ¦‚&quot;&gt;&lt;a href=&quot;#è§†é¢‘å½•åˆ¶æ€»æ¦‚&quot; class=&quot;headerlink&quot; title=&quot;è§†é¢‘å½•åˆ¶æ€»æ¦‚&quot;&gt;&lt;/a&gt;è§†é¢‘å½•åˆ¶æ€»æ¦‚&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åˆ›å»º &lt;code&gt;AVCaptureSession&lt;/code&gt; å¯¹è±¡&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;AVCaptureDevice&lt;/code&gt; é™æ€æ–¹æ³•è·å–è®¾å¤‡å¸¸ä½¿ç”¨è®¾å¤‡ï¼Œä¾‹å¦‚ï¼šæ‹ç…§å’Œå½•åƒéœ€è¦çš„æ‘„åƒå¤´ï¼Œå½•éŸ³æ‰€éœ€çš„éº¦å…‹é£&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨è¾“å…¥è®¾å¤‡ &lt;code&gt;AVCaptureDevice&lt;/code&gt; åˆå§‹åŒ– &lt;code&gt;AVCaptureDeviceInput&lt;/code&gt; å¯¹è±¡&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–è¾“å‡ºæ•°æ®ç®¡ç†å¯¹è±¡ï¼Œæ‹ç…§è¿›è¡Œåˆå§‹åŒ– &lt;code&gt;AVCaptureStillImageOutput&lt;/code&gt; å¯¹è±¡ï¼Œæ‹ç…§åˆå§‹åŒ– &lt;code&gt;AVCaptureMovieFileOutput&lt;/code&gt; å¯¹è±¡&lt;/li&gt;
&lt;li&gt;å°†æ•°æ®è¾“å…¥å¯¹è±¡ &lt;code&gt;AVCaptureDeviceInput&lt;/code&gt;  å’Œæ•°æ®è¾“å‡ºå¯¹è±¡   &lt;code&gt;AVCaptureDeviceOutput&lt;/code&gt;  æ·»åŠ åˆ°åª’ä½“ä¼šè¯ç®¡ç†å¯¹è±¡   &lt;code&gt;AVCaptureSession&lt;/code&gt; ä¸­&lt;/li&gt;
&lt;li&gt;åˆ›å»ºé¢„è§ˆçš„å›¾å±‚   &lt;code&gt;AVCaptureVideoPreviewLayer&lt;/code&gt;   æŒ‡å®šåª’ä½“ä¼šè¯ï¼Œæ·»åŠ å›¾å±‚åˆ°å®¹å™¨ï¼Œè°ƒç”¨  &lt;code&gt;AVCaptureSession&lt;/code&gt;  ä¸­çš„ &lt;code&gt;StartRunning&lt;/code&gt;  æ–¹æ³•å¼€å§‹æ•æ‰&lt;/li&gt;
&lt;li&gt;å°†æ•æ‰åˆ°å†…å®¹ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;è¯¦è§£é•œå¤´é‡‡é›†ç±»&quot;&gt;&lt;a href=&quot;#è¯¦è§£é•œå¤´é‡‡é›†ç±»&quot; class=&quot;headerlink&quot; title=&quot;è¯¦è§£é•œå¤´é‡‡é›†ç±»&quot;&gt;&lt;/a&gt;è¯¦è§£é•œå¤´é‡‡é›†ç±»&lt;/h2&gt;&lt;h3 id=&quot;AVCaptureSession&quot;&gt;&lt;a href=&quot;#AVCaptureSession&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureSession&quot;&gt;&lt;/a&gt;AVCaptureSession&lt;/h3&gt;&lt;p&gt;å°ç¼–æŸ¥çœ‹ &lt;code&gt;AVCaptureSession.h&lt;/code&gt;æ–‡ä»¶çœ‹åˆ°ï¼Œåœ¨é•œå¤´é‡‡é›†çš„è¿‡ç¨‹ä¸­æœ‰ä¸¤ç§å®ç°æ–¹å¼ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ç³»ç»Ÿ &lt;code&gt;AVCaptureSession&lt;/code&gt;è‡ªåŠ¨é…ç½®è¾“å…¥å’Œè¾“å‡º&lt;/li&gt;
&lt;li&gt;æ‰‹åŠ¨é…ç½®è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å¯¹åº”å…³ç³»&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ï¼ˆ1ï¼‰ AVCaptureSession åˆå§‹åŒ–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;AVCaptureSession&lt;/code&gt; è‡ªåŠ¨é…ç½®è¾“å…¥å’Œè¾“å‡ºä¹‹é—´å¯¹åº”å…³ç³»&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureSession&lt;/span&gt; *captureSession = [[&lt;span class=&quot;built_in&quot;&gt;AVCaptureSession&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *audioCaptureDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeAudio&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *audioInput = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; deviceInputWithDevice:audioCaptureDevice error:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[captureSession beginConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (audioInput) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//// Handle the failure.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [captureSession commitConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([captureSession canAddInput:audioInput]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [captureSession addInput:audioInput];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Handle the failure.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [captureSession commitConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢ä»£ç æ˜¯ &lt;code&gt;AVCaptureSession&lt;/code&gt; è¿›è¡Œåˆå§‹åŒ–å¹¶ä¸”å®ç°åˆå§‹åŒ–éº¦å…‹é£è¿›è¡Œç›¸å…³éŸ³é¢‘å½•åˆ¶ï¼Œå¹¶æ·»åŠ åˆ° &lt;code&gt;AVCaptureSession&lt;/code&gt;ä¸­ã€‚&lt;br&gt;&lt;code&gt;beginConfiguration&lt;/code&gt; &amp;amp; &lt;code&gt;commitConfiguration&lt;/code&gt; åœ¨è¿›è¡Œé…ç½® &lt;code&gt;AVCaptureSession&lt;/code&gt; çš„ç›¸å…³å±æ€§å€¼æ—¶éœ€è¦å¯¹è¿™ä¸¤ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯æˆå¯¹å‡ºç°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰‹åŠ¨é…ç½® &lt;code&gt;AVCaptureSession&lt;/code&gt; è¾“å…¥å’Œè¾“å‡ºä¹‹é—´å¯¹åº”å…³ç³»&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureSession&lt;/span&gt; *session = [[&lt;span class=&quot;built_in&quot;&gt;AVCaptureSession&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [session beginConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *videoDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *videoInput = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; deviceInputWithDevice:videoDevice error:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!videoInput) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//handle configuration video device&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureInputPort&lt;/span&gt; *videoPort = videoInput.ports[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *audioDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeAudio&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *audioInput = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; deviceInputWithDevice:audioDevice error:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!videoInput) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//handle configuration audio device&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureInputPort&lt;/span&gt; *audioPort = audioInput.ports[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureInputPort&lt;/span&gt; *&amp;gt; *inputPorts = @[videoPort, audioPort];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureVideoDataOutput&lt;/span&gt; *videoDataOutput = [[&lt;span class=&quot;built_in&quot;&gt;AVCaptureVideoDataOutput&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureConnection&lt;/span&gt; *connection = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureConnection&lt;/span&gt; connectionWithInputPorts:inputPorts output:videoDataOutput];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([session canAddConnection:connection]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [session addConnection:connection];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//handle session can not add AVCaptureConnection&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [session commitConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [session commitConfiguration];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢ğŸ‘†ä»£ç æ˜¯ä½¿ç”¨ &lt;code&gt;AVCaptureConnection&lt;/code&gt;å®ç°åœ¨ &lt;code&gt;AVCaptureSession&lt;/code&gt; ä½¿è¾“å…¥å’Œè¾“å‡ºè¿›è¡Œè‡ªå·±é…ç½®ã€‚&lt;br&gt;è¯¦ç»†çš„ç»†èŠ‚ä¼šåœ¨ &lt;code&gt;FYCameraKit&lt;/code&gt; è¿›è¡Œè¯¦ç»†çš„è®²è§£ã€‚ &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨é‡Šï¼š&lt;br&gt;1ï¼‰åªæœ‰åœ¨è°ƒç”¨ &lt;code&gt;beginConfiguration&lt;/code&gt; æ—¶æˆ‘ä»¬å¯¹ &lt;code&gt;AVCaptureSession&lt;/code&gt; é…ç½®æ‰ä¼šè¢«çœŸæ­£å¼€å§‹ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ï¼ˆ2ï¼‰ AVCaptureSession ä¸­æ–­&lt;/p&gt;
&lt;p&gt;åœ¨éŸ³è§†é¢‘å½•åˆ¶è¿‡ç¨‹ä¸­å¯èƒ½å¯¹å› ä¸ºç”µè¯å¯¼è‡´ä¸­æ–­ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æä¾›ä¸­æ–­ç»“æŸåè·å–ä¸­æ–­äº§ç”Ÿçš„åŸå› ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ³¨å†Œä¸­æ–­ç›‘å¬ &amp;amp; åˆ é™¤ç›‘å¬&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç›‘å¬æ³¨å†Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] addObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; selector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(handleCaptureSession:) name:&lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionEndedNotification&lt;/span&gt; object:_session];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç›‘å¬æ¸…é™¤   &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] removeObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; name:&lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionEndedNotification&lt;/span&gt; object:_session];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;ä»ä¼ é€’çš„ &lt;code&gt;userInfo&lt;/code&gt; é€šè¿‡å…³é”® &lt;code&gt;key&lt;/code&gt; è·å–åŸå› ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonKey&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;è·å–å…·ä½“çš„ä¸­æ–­åŸå› ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NS_ENUM&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReason&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceNotAvailableInBackground&lt;/span&gt;               = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//ä»åå°è¿è¡Œå¼€å¯ cameraï¼Œä¸å¤Ÿ iOS 9.0 ä¹‹åä¸æä¾›ä¸­æ–­ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonAudioDeviceInUseByAnotherClient&lt;/span&gt;                   = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//éŸ³é¢‘è½¯è½¯ä»¶è¢«å ç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceInUseByAnotherClient&lt;/span&gt;                   = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//è§†é¢‘è½¯ä»¶è¢«å ç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceNotAvailableWithMultipleForegroundApps&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//å…¨å±æˆ–è€…æ˜¯å½•åˆ¶å±å¹•å˜åŒ–&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;ç›‘å¬äº‹ä»¶çš„å¤„ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)handleCaptureSession:(&lt;span class=&quot;built_in&quot;&gt;NSNotification&lt;/span&gt; *)notification &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReason&lt;/span&gt; reason = [[notification.userInfo objectForKey:&lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonKey&lt;/span&gt;] unsignedIntegerValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; (reason) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceNotAvailableInBackground&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;comment&quot;&gt;//handle device not available background&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonAudioDeviceInUseByAnotherClient&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;comment&quot;&gt;//handle that audio was occupied  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceInUseByAnotherClient&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;comment&quot;&gt;//handle that video was occupied  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceNotAvailableWithMultipleForegroundApps&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;comment&quot;&gt;//handle that UI was multiple&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å®ç°æ‹ç…§å’Œè§†é¢‘å½•åˆ¶çš„ &lt;code&gt;FYCameraKit&lt;/code&gt; çš„ä¸‹è½½åœ°å€ï¼š &lt;a href=&quot;https://github.com/boilWater/FYCameraKit&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;FYCameraKit&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturesession?changes=latest_minor&amp;amp;language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureSession&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturedevice&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureDevice&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcaptureconnection?changes=latest_minor&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureConnection&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å‘å¸ƒï¼š2017/8/10 20:49:21 æ˜ŸæœŸå››&lt;br&gt;ç¬¬äºŒæ¬¡å‘å¸ƒï¼š2017/8/10 23:36:34 æ˜ŸæœŸå››&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;iPhone æ‰‹æœºåœ¨å›¾ç‰‡æ‹ç…§å’Œè§†é¢‘å½•åˆ¶æ–¹é¢æœ‰å¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼Œå°ç¼–è®¤ä¸ºå¦‚æœå¾ˆå¥½ä½¿ç”¨ iPhone æ‹æ‘„å‡ºå¾ˆå¥½ç…§ç‰‡ &amp;amp; å½•åˆ¶å¾ˆæœ‰è¶£çš„è§†é¢‘ã€‚æœ¬ç« å°†è¯¦ç»†è®²è§£ &lt;code&gt;AVCaptureSession&lt;/code&gt; ï¼Œå¹¶æœ€åç»™å‡º &lt;code&gt;FYCameraKit&lt;/code&gt; é¡¹ç›®Demoã€‚&lt;br&gt;ä¸‹é¢å°ç¼–ä¸ºå¤§å®¶è®²è§£ iOS æ‹ç…§å’Œè§†é¢‘å½•åˆ¶åŠŸèƒ½å®ç°ï¼Œä¸‹å›¾æ˜¯é•œå¤´é‡‡é›†éœ€è¦çš„ç±»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-b727b7f54b3df9bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Camera Capture (iOS é•œå¤´é‡‡é›†).png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS-è§†é¢‘å¤§çº²æ€»ç»“</title>
    <link href="http://yoursite.com/2017/06/09/iOS-%E8%A7%86%E9%A2%91%E5%A4%A7%E7%BA%B2%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2017/06/09/iOS-è§†é¢‘å¤§çº²æ€»ç»“/</id>
    <published>2017-06-08T16:31:48.000Z</published>
    <updated>2017-06-13T15:30:57.000Z</updated>
    
    <content type="html">&lt;p&gt;æœ¬æ¬¡åšå®¢æ€è·¯æ¥è‡ªä¸å…¬å¸çš„ä¸€æ¬¡æŠ€æœ¯åˆ†äº«ã€‚å‰æ®µæ—¶é—´è¢«å…¬å¸å§”æ´¾åšè§†é¢‘ç›¸å…³çš„å¼€å‘ï¼Œå°±æŠŠè§†é¢‘æ€»ä½“å†…å®¹æ¢³ç†ä¸€ä¸‹å½“åšå¤‡å¿˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æœ¬åšæ–‡çš„å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-bbdb773a30fc44a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-è§†é¢‘å¤§çº²æ€»ç»“.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;æµåª’ä½“æ•°æ®æ¥æ”¶åˆ°æ’­æ”¾&quot;&gt;&lt;a href=&quot;#æµåª’ä½“æ•°æ®æ¥æ”¶åˆ°æ’­æ”¾&quot; class=&quot;headerlink&quot; title=&quot;æµåª’ä½“æ•°æ®æ¥æ”¶åˆ°æ’­æ”¾&quot;&gt;&lt;/a&gt;æµåª’ä½“æ•°æ®æ¥æ”¶åˆ°æ’­æ”¾&lt;/h2&gt;&lt;p&gt;åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­æˆ‘ä»¬æ¥æ”¶åˆ°ç›¸å…³åª’ä½“æ•°æ®è¦ç»è¿‡ä¸€äº›åˆ—çš„å¤„ç†æ¥å®ç°å¯¹åª’ä½“æ•°æ®çš„æ’­æ”¾ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-aab07b57fde17c34.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS è§†é¢‘æ’­æ”¾æµç¨‹å›¾.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºæˆ‘ä»¬åœ¨è·å–æµåª’ä½“åè®®éœ€è¦ç»è¿‡ä¸€ä¸‹å¤„ç†æ–¹å¼ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è§£åè®® â€”&amp;gt; è§£å°è£…  â€”&amp;gt; éŸ³è§†é¢‘çš„è§£ç  ï¼ˆå®ç°éŸ³è§†é¢‘åŒæ­¥ &amp;amp; æ’­æ”¾ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;æµåª’ä½“æ•°æ®è§£æ&quot;&gt;&lt;a href=&quot;#æµåª’ä½“æ•°æ®è§£æ&quot; class=&quot;headerlink&quot; title=&quot;æµåª’ä½“æ•°æ®è§£æ&quot;&gt;&lt;/a&gt;æµåª’ä½“æ•°æ®è§£æ&lt;/h3&gt;&lt;p&gt;åœ¨è·å–æµåª’ä½“æ•°æ®åï¼Œè¦å¯¹å…¶è¿›è¡Œåè®®çš„è§£ææ¥è·å–å°è£…çš„åª’ä½“æ•°æ®è¿›è¡Œæ’­æ”¾ã€‚æˆ‘ä»¬å¸¸è§çš„åè®®ï¼š&lt;code&gt;HTTP&lt;/code&gt;ã€&lt;code&gt;RTMP&lt;/code&gt;å’Œ&lt;code&gt;MMS&lt;/code&gt;åª’ä½“åè®®&lt;/p&gt;
&lt;h4 id=&quot;åè®®ç®€ä»‹&quot;&gt;&lt;a href=&quot;#åè®®ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;åè®®ç®€ä»‹&quot;&gt;&lt;/a&gt;åè®®ç®€ä»‹&lt;/h4&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;HTTPï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyperText Transfer Protocolï¼‰æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ï¼ˆç”¨æˆ·ï¼‰å’ŒæœåŠ¡ç«¯ï¼ˆç½‘ç«™ï¼‰è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/è¶…æ–‡æœ¬ä¼ è¾“åè®®&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;RTMPï¼šå®æ—¶ä¿¡æ¯ä¼ è¾“åè®®ï¼ˆReal Time Message Protocolï¼‰åŸºäºTCPå®ç°æŒä¹…é“¾æ¥å’Œä½å»¶è¿Ÿé€šä¿¡ã€‚æµåˆ†è§£æˆç‰‡ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯è®¾ç½®å¤§å°ï¼ˆéŸ³ï¼š64ï¼Œè§†é¢‘ï¼š128ï¼‰ã€‚&lt;br&gt;&lt;a href=&quot;http://mingyangshang.github.io/2016/03/06/RTMPåè®®/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€1ï¼š&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://translate.google.co.jp/translate?hl=zh-CN&amp;amp;sl=en&amp;amp;u=https://en.wikipedia.org/wiki/Real-Time_Messaging_Protocol&amp;amp;prev=search&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€2ï¼š&lt;/a&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;MMSï¼šä¸²æµåª’ä½“ä¼ é€åè®®ï¼ˆMicrosoft Media Serverï¼‰ç”¨æ¥è®¿é—®å¹¶æµå¼æ¥å— Windows Media æœåŠ¡å™¨ä¸­ .asf æ–‡ä»¶åè®®ã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/MMS_(åè®®&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;)&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;HLSï¼šæµåª’ä½“ç½‘ç»œä¼ è¾“åè®®ï¼ˆHTTP Live Streamingï¼‰æŠŠæ•°æ®æºåˆ†è§£ä¸ºåŸºäº HTTP çš„ç‰‡æ®µï¼Œæ¯æ¬¡ä¸‹è½½ä¸€äº›ã€‚ä¸‹è½½æ•°æ®ä¹‹å‰éœ€è¦ä¸€ä¸ªåŒ…å«æ•°æ®çš„ m3u8 playlistæ–‡ä»¶æ¥æŸ¥æ‰¾å¯ç”¨çš„åª’ä½“æµã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/HTTP_Live_Streaming&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;RTPï¼šå®æ—¶ä¼ è¾“åè®®ï¼ˆReal-time Transport Protocolï¼‰è¢«è®¾ç½®ä¸ºå¤šæ’­åè®®ï¼Œå’Œ RTP åè®®ã€RTP æ§åˆ¶åè®®ä¸€èµ·ä½¿ç”¨ã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/å®æ—¶ä¼ è¾“åè®®&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;RTCPï¼šå®æ—¶ä¼ è¾“æ§åˆ¶åè®®ï¼ˆReal-time Transport Protocolï¼‰æœé›†åª’ä½“é“¾æ¥ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸º RTP æä¾›æœåŠ¡è´¨é‡åé¦ˆã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/å®æ—¶ä¼ è¾“æ§åˆ¶åè®®&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;RTSPï¼šå®æ—¶æµåè®®ï¼Œç”¨äºå»ºç«‹å’Œæ§åˆ¶ç»ˆç«¯ä¹‹é—´çš„åª’ä½“ä¼šè¯ï¼Œå’Œ RTP ã€RTCP ç»“åˆçš„ï¼Œåª’ä½“æµä¼ è¾“ã€‚&lt;br&gt;&lt;a href=&quot;https://translate.google.co.jp/translate?hl=zh-CN&amp;amp;sl=en&amp;amp;u=https://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol&amp;amp;prev=search&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h3 id=&quot;åª’ä½“å°è£…æ ¼å¼&quot;&gt;&lt;a href=&quot;#åª’ä½“å°è£…æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;åª’ä½“å°è£…æ ¼å¼&quot;&gt;&lt;/a&gt;åª’ä½“å°è£…æ ¼å¼&lt;/h3&gt;&lt;p&gt;åª’ä½“å°è£…å°±æ˜¯æŠŠè§†é¢‘æ•°æ®å’ŒéŸ³é¢‘æ•°æ®è¿›è¡ŒæŒ‰ç…§ä¸€å®šçš„æ ¼å¼è¿›è¡Œå°è£…ã€‚æˆ‘ä»¬å¸¸è§çš„å°è£…æ ¼å¼ï¼š&lt;code&gt;AVI&lt;/code&gt;ã€&lt;code&gt;MP4&lt;/code&gt;ã€&lt;code&gt;TS&lt;/code&gt;ã€&lt;code&gt;FLV&lt;/code&gt;ã€&lt;code&gt;MKV&lt;/code&gt;å’Œ&lt;code&gt;RMVB&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;åª’ä½“å°è£…æ ¼å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#åª’ä½“å°è£…æ ¼å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;åª’ä½“å°è£…æ ¼å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;åª’ä½“å°è£…æ ¼å¼ç®€ä»‹&lt;/h4&gt;&lt;p&gt;ä¸‹é¢æ˜¯å¯¹åª’ä½“å°è£…æ ¼å¼çš„æ•´ç†å’Œç®€ä»‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-0491caa322fa42c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;åª’ä½“å°è£…æ ¼å¼æ•´ç†.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;éŸ³è§†é¢‘ç¼–ç æ ¼å¼&quot;&gt;&lt;a href=&quot;#éŸ³è§†é¢‘ç¼–ç æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;éŸ³è§†é¢‘ç¼–ç æ ¼å¼&quot;&gt;&lt;/a&gt;éŸ³è§†é¢‘ç¼–ç æ ¼å¼&lt;/h3&gt;&lt;p&gt;åœ¨éŸ³è§†é¢‘å½•åˆ¶å®Œæˆåä¸ºæ–¹ä¾¿ä¼ è¾“éœ€è¦å¯¹å…¶è¿›è¡Œç¼–ç å‹ç¼©å¤„ç†ï¼Œæˆ‘ä»¬å¸¸è§çš„éŸ³è§†é¢‘ç¼–ç æ ¼å¼ï¼š&lt;/p&gt;
&lt;p&gt;è§†é¢‘ç¼–ç æ ¼å¼ï¼š&lt;code&gt;H.264&lt;/code&gt;ã€&lt;code&gt;H.265(HEVC)&lt;/code&gt;ã€&lt;code&gt;MPEG4&lt;/code&gt;ã€&lt;code&gt;MPEG2&lt;/code&gt;ã€&lt;code&gt;VP9&lt;/code&gt;ã€&lt;code&gt;VP8&lt;/code&gt;å’Œ&lt;code&gt;VC-1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;éŸ³é¢‘ç¼–ç æ ¼å¼ï¼š&lt;code&gt;AAC&lt;/code&gt;ã€&lt;code&gt;AC-3&lt;/code&gt;ã€&lt;code&gt;MP3&lt;/code&gt;å’Œ&lt;code&gt;WMP&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&quot;è§†éŸ³é¢‘ç¼–ç æ ¼å¼&quot;&gt;&lt;a href=&quot;#è§†éŸ³é¢‘ç¼–ç æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è§†éŸ³é¢‘ç¼–ç æ ¼å¼&quot;&gt;&lt;/a&gt;è§†éŸ³é¢‘ç¼–ç æ ¼å¼&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-1e3ce321225f5706.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;è§†éŸ³é¢‘ç¼–ç æ ¼å¼.png&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;ç¼–ç æ ¼å¼åœ°å€&quot;&gt;&lt;a href=&quot;#ç¼–ç æ ¼å¼åœ°å€&quot; class=&quot;headerlink&quot; title=&quot;ç¼–ç æ ¼å¼åœ°å€&quot;&gt;&lt;/a&gt;ç¼–ç æ ¼å¼åœ°å€&lt;/h4&gt;&lt;p&gt;ä¸‹é¢æ˜¯ç¼–ç æ ¼å¼åœ°å€ï¼š&lt;/p&gt;
&lt;p&gt;H.264 :&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/H.264/MPEG-4_AVC&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://zh.wikipedia.org/wiki/H.264/MPEG-4_AVC&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€2&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://abson.github.io/2016/11/15/æ·±å…¥æµ…å‡ºç†è§£è§†é¢‘ç¼–ç H264ç»“æ„/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://abson.github.io/2016/11/15/æ·±å…¥æµ…å‡ºç†è§£è§†é¢‘ç¼–ç H264ç»“æ„/&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;H.265 :&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;www.4k123.com/thread-6369-1-1.html&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;AACï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;www.4k123.com/thread-6369-1-1.html&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;AC-3ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;blog.csdn.net/leixiaohua1020/article/details/11822737&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;MP3ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;https://zh.wikipedia.org/zh-hans/MP3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://zh.wikipedia.org/zh-hans/MP3&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;è§£ç ç®€ä»‹&quot;&gt;&lt;a href=&quot;#è§£ç ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;è§£ç ç®€ä»‹&quot;&gt;&lt;/a&gt;è§£ç ç®€ä»‹&lt;/h3&gt;&lt;p&gt;åœ¨è§†é¢‘æ’­æ”¾è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦å¯¹è§†é¢‘è¿›è¡Œè§£ç å¤„ç†ï¼Œå¸¸è§çš„è§£ç æ–¹å¼ï¼šç¡¬è§£ç å’Œè½¯è§£ç ã€‚&lt;/p&gt;
&lt;h4 id=&quot;è§£ç æ–¹å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#è§£ç æ–¹å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;è§£ç æ–¹å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;è§£ç æ–¹å¼ç®€ä»‹&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-b70e26b3769a95c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;è½¯è§£ç &amp;amp;ç¡¬è§£ç å¯¹æ¯”.png&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;ç¼–ç èµ„æ–™åœ°å€&quot;&gt;&lt;a href=&quot;#ç¼–ç èµ„æ–™åœ°å€&quot; class=&quot;headerlink&quot; title=&quot;ç¼–ç èµ„æ–™åœ°å€&quot;&gt;&lt;/a&gt;ç¼–ç èµ„æ–™åœ°å€&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¡†æ¶åç§°&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;èµ„æ–™åœ°å€-1&lt;/th&gt;
&lt;th&gt;èµ„æ–™åœ°å€-2&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;AVFoundation&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;http://yoferzhang.com/post/20160803AVFoundation01Introduction/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://yoferzhang.com/post/20160803AVFoundation01Introduction/&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;http://www.superqq.com/blog/2015/08/24/avfoundation-gpuimage-find/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.superqq.com/blog/2015/08/24/avfoundation-gpuimage-find/&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VideoToolBox&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;http://www.4k123.com/thread-6369-1-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.4k123.com/thread-6369-1-1.html&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FFMpeg&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;blog.csdn.net/leixiaohua1020/article/category/1360795&lt;/td&gt;
&lt;td&gt;www.tuicool.com/articles/22A7na3&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;CPU&lt;/code&gt; &amp;amp; &lt;code&gt;GPU&lt;/code&gt; çš„å‚è€ƒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¡†æ¶åç§°&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;èµ„æ–™åœ°å€-1&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CPU&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/ä¸­å¤®å¤„ç†å™¨&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://zh.wikipedia.org/wiki/ä¸­å¤®å¤„ç†å™¨&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GPU&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;https://zh.wikipedia.org/zh/åœ–å½¢è™•ç†å™¨&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://zh.wikipedia.org/zh/åœ–å½¢è™•ç†å™¨&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;AVFoundation-æ¡†æ¶ä»‹ç»&quot;&gt;&lt;a href=&quot;#AVFoundation-æ¡†æ¶ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;AVFoundation æ¡†æ¶ä»‹ç»&quot;&gt;&lt;/a&gt;AVFoundation æ¡†æ¶ä»‹ç»&lt;/h3&gt;&lt;p&gt;AVFoundation å¯ä»¥ç”¨æ¥æ’­æ”¾å’Œåˆ›å»ºåŸºäºæ—¶é—´è§†å¬åª’ä½“çš„æ¡†æ¶ä¹‹ä¸€ï¼Œæä¾›åŸºäºæ—¶é—´çš„è§†å¬æ•°æ®è¯¦ç»†çš„ Objective-Cä¸Šçš„æ¥å£ã€‚&lt;/p&gt;
&lt;h4 id=&quot;AVFoundation-åŠŸèƒ½ä»‹ç»&quot;&gt;&lt;a href=&quot;#AVFoundation-åŠŸèƒ½ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;AVFoundation åŠŸèƒ½ä»‹ç»&quot;&gt;&lt;/a&gt;AVFoundation åŠŸèƒ½ä»‹ç»&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;AVFoundation&lt;/code&gt; å¯ä»¥å®ç°è§†é¢‘çš„æ’­æ”¾ã€ç¼–è¾‘ã€é™æ€åª’ä½“çš„æ•æ‰ã€è¾“å‡ºå’Œæ—¶é—´åª’ä½“çš„è¡¨ç°ç­‰åŠŸèƒ½ï¼Œå¦‚æœä»…ä»…æ˜¯æ’­æ”¾ç”µå½±çš„è¯å¯ä»¥ä½¿ç”¨ &lt;code&gt;AVKit&lt;/code&gt;æ¡†æ¶ã€‚ &lt;/p&gt;
&lt;h4 id=&quot;AVFoundation-æ¥å£ä»‹ç»&quot;&gt;&lt;a href=&quot;#AVFoundation-æ¥å£ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;AVFoundation æ¥å£ä»‹ç»&quot;&gt;&lt;/a&gt;AVFoundation æ¥å£ä»‹ç»&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-c3069ae787712d75.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-AVFoundation-AVMutableComposition-AVAssetTrack.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-ed13785f38e3a77c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-AVFoundation-AVMutableComposition-AVMutableAudioMix.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-1ee84500bda738b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-AVFoundation-AVMutableComposition-AVMutableVideoComposition.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-9993bccb095d6642.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-AVFoundation-AVMutableComposition-AVAssetExportSession.png&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;AVFoundation-ç±»ç»§æ‰¿å…³ç³»&quot;&gt;&lt;a href=&quot;#AVFoundation-ç±»ç»§æ‰¿å…³ç³»&quot; class=&quot;headerlink&quot; title=&quot;AVFoundation ç±»ç»§æ‰¿å…³ç³»&quot;&gt;&lt;/a&gt;AVFoundation ç±»ç»§æ‰¿å…³ç³»&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/boilWater/boilWater.github.io/tree/master/Images/PPT&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å…¬å¸åˆ†äº« PPT ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ¬¡åšå®¢æ€è·¯æ¥è‡ªä¸å…¬å¸çš„ä¸€æ¬¡æŠ€æœ¯åˆ†äº«ã€‚å‰æ®µæ—¶é—´è¢«å…¬å¸å§”æ´¾åšè§†é¢‘ç›¸å…³çš„å¼€å‘ï¼Œå°±æŠŠè§†é¢‘æ€»ä½“å†…å®¹æ¢³ç†ä¸€ä¸‹å½“åšå¤‡å¿˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æœ¬åšæ–‡çš„å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-bbdb773a30fc44a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-è§†é¢‘å¤§çº²æ€»ç»“.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†</title>
    <link href="http://yoursite.com/2017/05/31/NSError(%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF)/"/>
    <id>http://yoursite.com/2017/05/31/NSError(é”™è¯¯ä¿¡æ¯)/</id>
    <published>2017-05-31T06:35:13.000Z</published>
    <updated>2017-06-01T09:51:07.000Z</updated>
    
    <content type="html">&lt;p&gt;å¼€å‘è¿‡è¿‡ç¨‹ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å¼‚å¸¸é—®é¢˜&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-ebec37c09e21ba91.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOSå¼‚å¸¸.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot;&gt;&lt;a href=&quot;#iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot; class=&quot;headerlink&quot; title=&quot;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot;&gt;&lt;/a&gt;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&lt;/h1&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°å¼‚å¸¸ï¼Œå¯¹å¼‚å¸¸çš„å¤„ç†ä¸€èˆ¬é‡‡ç”¨æ‰“å°æˆ–è€…ç›´æ¥æŠ›å‡ºã€‚è¿™æ ·ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•è¿‡ç¨‹æœ‰æ‰€å‚è€ƒï¼Œè€Œä¸”æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹å¼‚å¸¸äº§ç”Ÿçš„ä½ç½®ä¿¡æ¯&lt;/p&gt;
&lt;h3 id=&quot;NSError-é”™è¯¯ä¿¡æ¯&quot;&gt;&lt;a href=&quot;#NSError-é”™è¯¯ä¿¡æ¯&quot; class=&quot;headerlink&quot; title=&quot;NSError(é”™è¯¯ä¿¡æ¯)&quot;&gt;&lt;/a&gt;NSError(é”™è¯¯ä¿¡æ¯)&lt;/h3&gt;&lt;h4 id=&quot;é‡‡ç”¨NSErrorçš„æƒ…å†µ&quot;&gt;&lt;a href=&quot;#é‡‡ç”¨NSErrorçš„æƒ…å†µ&quot; class=&quot;headerlink&quot; title=&quot;é‡‡ç”¨NSErrorçš„æƒ…å†µ&quot;&gt;&lt;/a&gt;é‡‡ç”¨NSErrorçš„æƒ…å†µ&lt;/h4&gt;&lt;p&gt;  ä½¿ç”¨ &lt;code&gt;NSError&lt;/code&gt; çš„å½¢å¼å¯ä»¥æŠŠç¨‹åºä¸­å¯¼è‡´é”™è¯¯åŸå› å›æŠ¥ç»™è°ƒç”¨è€…ï¼Œè€Œä¸”ä½¿ç¨‹åºæ­£å¸¸è¿è¡Œä¸ä¼šé€ æˆå¥”æºƒçš„åæœ&lt;/p&gt;
&lt;h4 id=&quot;NSErroråŒ…å«çš„å†…å®¹&quot;&gt;&lt;a href=&quot;#NSErroråŒ…å«çš„å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;NSErroråŒ…å«çš„å†…å®¹&quot;&gt;&lt;/a&gt;NSErroråŒ…å«çš„å†…å®¹&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NSError&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;NSObject&lt;/span&gt; &amp;lt;&lt;span class=&quot;title&quot;&gt;NSCopying&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;NSSecureCoding&lt;/span&gt;&amp;gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@private&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *_reserved;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; _code;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *_domain;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *_userInfo;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSError _code&lt;/code&gt;ï¼ˆé”™è¯¯ç ï¼Œ ç±»å‹ &lt;code&gt;NSInteger&lt;/code&gt;)  ï¼š ç‹¬æœ‰çš„é”™è¯¯ä»£ç ï¼ŒæŒ‡æ˜åœ¨æŸä¸ªèŒƒå›´å†…å…·ä½“å‘ç”Ÿçš„é”™è¯¯ã€‚å¯èƒ½æ˜¯ä¸€ç³»åˆ—çš„é”™è¯¯çš„é›†åˆï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ Enum æ¥å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSError *_domain&lt;/code&gt; (é”™è¯¯èŒƒå›´ï¼Œç±»å‹ &lt;code&gt;NSString&lt;/code&gt;) ï¼šé”™è¯¯å‘ç”ŸèŒƒå›´ï¼Œé€šå¸¸ä½¿ç”¨ä¸€ä¸ªç‰¹æœ‰çš„å…¨å±€å˜é‡æ¥å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSError *_userInfo&lt;/code&gt; (ç”¨æˆ·ä¿¡æ¯ï¼Œç±»å‹ &lt;code&gt;NSDictionary&lt;/code&gt;) ï¼šæœ‰å…³é”™è¯¯çš„é¢å¤–ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«ä¸€æ®µâ€œæœ¬åœ°åŒ–çš„æè¿°â€ï¼Œè¿˜å¯èƒ½åŒ…å«å¯¼è‡´æ­¤é”™è¯¯å‘ç”Ÿçš„å¦ä¸€ä¸ªé”™è¯¯ã€‚userInfo å¯ä»¥æè¿°ä¸ºä¸€æ¡é”™è¯¯çš„é“¾æ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;NSErrorä½¿ç”¨çš„ä¸¤ç§æƒ…å†µ&quot;&gt;&lt;a href=&quot;#NSErrorä½¿ç”¨çš„ä¸¤ç§æƒ…å†µ&quot; class=&quot;headerlink&quot; title=&quot;NSErrorä½¿ç”¨çš„ä¸¤ç§æƒ…å†µ&quot;&gt;&lt;/a&gt;NSErrorä½¿ç”¨çš„ä¸¤ç§æƒ…å†µ&lt;/h4&gt;&lt;p&gt;   åœ¨æ–¹æ³•å®ç°æˆ–è€…æ˜¯ API è®¾è®¡æ—¶ï¼Œæˆ‘ä»¬å¯¹ &lt;code&gt;NSError&lt;/code&gt; çš„ä½¿ç”¨æƒ…å½¢æœ‰ä¸¤ç§ï¼šåœ¨åè®®ä¸­ä¼ é€’å’Œâ€œè¾“å‡ºå‚æ•°â€è¿”å›ç»™è°ƒç”¨è€…&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡å§”æ‰˜åè®®æ¥ä¼ é€’é”™è¯¯&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)connection:(&lt;span class=&quot;built_in&quot;&gt;NSURLConnection&lt;/span&gt; *)connection withError:(&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *)error;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é€šè¿‡ä»£ç†åè®®çš„æ–¹å¼å¯ä»¥æŠŠé”™è¯¯æŠ¥å‘Šä¿¡æ¯ä¼ é€’&lt;/p&gt;
&lt;p&gt;  2.â€œè¾“å‡ºå‚æ•°â€è¿”å›ç»™è°ƒç”¨è€…&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)doSomething:(&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; **)error;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é”™è¯¯çš„ä¿¡æ¯ä½œä¸ºä¸€ä¸ªæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘é”™è¯¯çš„å¯¹è±¡ï¼‰&lt;/p&gt;
&lt;h3 id=&quot;throw-NSException-å¼‚å¸¸æŠ›å‡º&quot;&gt;&lt;a href=&quot;#throw-NSException-å¼‚å¸¸æŠ›å‡º&quot; class=&quot;headerlink&quot; title=&quot;@throw NSException (å¼‚å¸¸æŠ›å‡º)&quot;&gt;&lt;/a&gt;@throw NSException (å¼‚å¸¸æŠ›å‡º)&lt;/h3&gt;&lt;h4 id=&quot;é‡‡ç”¨-throw-æƒ…å†µ&quot;&gt;&lt;a href=&quot;#é‡‡ç”¨-throw-æƒ…å†µ&quot; class=&quot;headerlink&quot; title=&quot;é‡‡ç”¨ @throw æƒ…å†µ&quot;&gt;&lt;/a&gt;é‡‡ç”¨ @throw æƒ…å†µ&lt;/h4&gt;&lt;p&gt;åœ¨ APP è¿è¡ŒæœŸé—´é‡åˆ°é—®é¢˜ï¼Œéœ€è¦å¯¹é—®é¢˜è¿›è¡Œæ“ä½œç»ˆæ­¢ç¨‹åºæŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;@throw&lt;/code&gt; æ¥è¿›è¡Œ&lt;/p&gt;
&lt;h4 id=&quot;é‡‡ç”¨-throw-å¯èƒ½äº§ç”Ÿé—®é¢˜&quot;&gt;&lt;a href=&quot;#é‡‡ç”¨-throw-å¯èƒ½äº§ç”Ÿé—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é‡‡ç”¨ @throw å¯èƒ½äº§ç”Ÿé—®é¢˜&quot;&gt;&lt;/a&gt;é‡‡ç”¨ @throw å¯èƒ½äº§ç”Ÿé—®é¢˜&lt;/h4&gt;&lt;p&gt;åœ¨å¼‚å¸¸æŠ›å‡ºå®ä¾‹ä¸­ï¼Œå¦‚æœæŠ›å‡ºå¼‚å¸¸ã€‚åœ¨å®ç°æŠ›å‡ºå¼‚å¸¸çš„ä»£ç åé¢çš„æ‰§è¡Œé‡Šæ”¾èµ„æºå°±ä¸ä¼šæ‰§è¡Œï¼Œè¿™æ ·æœ«å°¾çš„å¯¹è±¡å°±ä¸ä¼šè¢«é‡Šæ”¾ã€‚å¦‚æœæƒ³è¦ç”Ÿæˆâ€œå¼‚å¸¸å®‰å…¨â€çš„ä»£ç ï¼Œå¯ä»¥è®¾ç½®ç¼–è¯‘å™¨çš„æ ‡å¿— &lt;code&gt;-fobjc-arc-exceptions&lt;/code&gt; æ¥è¿›è¡Œå®ç°ã€‚ä¸è¿‡å°†è¦ä¸€å¦‚åŠ ä¸€äº›é¢å¤–çš„ä»£ç ï¼Œåœ¨ä¸æŠ›å‡ºå¼‚å¸¸æ—¶ä¹Ÿä¼šæ‰§è¡Œä»£ç ã€‚&lt;br&gt;åœ¨ä¸ä½¿ç”¨ ARC æ—¶ä¹Ÿå¾ˆéš¾å®ç°å¼‚å¸¸æŠ›å‡ºæƒ…å†µä¸‹å¯¹å†…å­˜è¿›è¡Œé‡Šæ”¾ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; * error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; success = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; doSomething:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(error &amp;amp;&amp;amp; success) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;@throw&lt;/span&gt;[&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; â€¦];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[success release];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŒ‰ç…§ä¸Šé¢ğŸ‘†å®ç°å½“åœ¨å¼‚å¸¸æŠ›å‡ºçš„è¿‡ç¨‹æ—¶ï¼Œsuccess è¿˜æ¥ä¸åŠé‡Šæ”¾ã€‚æ‰€ä»¥è¦è§£å†³ä¸Šé¢çš„é—®é¢˜å¯ä»¥åœ¨å¼‚å¸¸æŠ›å‡ºä¹‹å‰å¯¹ success è¿›è¡Œé‡Šæ”¾ï¼Œä½†æ˜¯å½“éœ€è¦é‡Šæ”¾çš„èµ„æºæœ‰å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œè¿™æ ·æ“ä½œèµ·æ¥å°±æ¯”è¾ƒå¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¼‚å¸¸æŠ›å‡ºå¯ä»¥ä½¿ç”¨åœ¨ æŠ½è±¡çš„åŸºç±» å®ä¾‹æ–¹æ³•ä¸­è¿›è¡Œè°ƒç”¨ã€‚å¦‚æœåŸºç±»ä¸­çš„æ–¹æ³•ä¸è¢« &lt;code&gt;override&lt;/code&gt; å°±è®¾ç½®æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å®ä¾‹æ–¹æ³•è¢«é‡å†™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;try-catch-finally-å¼‚å¸¸æ•æ‰&quot;&gt;&lt;a href=&quot;#try-catch-finally-å¼‚å¸¸æ•æ‰&quot; class=&quot;headerlink&quot; title=&quot;@try @catch @finally (å¼‚å¸¸æ•æ‰)&quot;&gt;&lt;/a&gt;@try @catch @finally (å¼‚å¸¸æ•æ‰)&lt;/h3&gt;&lt;h4 id=&quot;é‡‡ç”¨-try-catch-finally-æƒ…å†µ&quot;&gt;&lt;a href=&quot;#é‡‡ç”¨-try-catch-finally-æƒ…å†µ&quot; class=&quot;headerlink&quot; title=&quot;é‡‡ç”¨ @try @catch @finally æƒ…å†µ&quot;&gt;&lt;/a&gt;é‡‡ç”¨ @try @catch @finally æƒ…å†µ&lt;/h4&gt;&lt;p&gt;ä¸ªäººæ„Ÿè§‰ @try @catch @finally æ˜¯ @throw NSException çš„åŠ å¼ºç‰ˆã€‚å‰è€…å¯ä»¥å®ç°å¯¹å¼‚å¸¸çš„æ•æ‰ï¼Œç›¸å…³å¼‚å¸¸çš„è¾“å‡ºï¼Œå’Œå¼‚å¸¸è¾“å‡ºåæ‰§è¡Œçš„ @finally ç›¸å…³çš„å…·ä½“æ“ä½œã€‚åè€…æ˜¯å¯¹å…·ä½“æ•´ç† NSExpection æŠ›å‡ºï¼Œå¹¶æ²¡æœ‰å‰è€…æ¯”è¾ƒå®Œå–„çš„æµç¨‹åŒ–æ“ä½œæ­¥éª¤ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨åŸºç±»ä¸­å®ç° @throw è¿›è¡Œè®¾ç½® å¿…é¡» override åŸºç±»ä¸­çš„å®ä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆæ•è·å¼‚å¸¸çš„æ–¹æ³•ä¸­ä½¿ç”¨ @try @catch @finallyã€‚ä¾‹å¦‚ï¼šNSArrayï¼ŒNSDictionary åˆå§‹å˜é‡ä½¿ç”¨å­—é¢é‡æ¥è·å–å€¼æ—¶ï¼Œéœ€è¦åˆ¤æ–­è¿”å›æ•°æ®æ˜¯å¦ä¸º nil æ¥é˜²æ­¢ APP Crashã€‚ &lt;/p&gt;
&lt;h4 id=&quot;äº§ç”Ÿé—®é¢˜å’Œè§£å†³æ–¹å¼&quot;&gt;&lt;a href=&quot;#äº§ç”Ÿé—®é¢˜å’Œè§£å†³æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;äº§ç”Ÿé—®é¢˜å’Œè§£å†³æ–¹å¼&quot;&gt;&lt;/a&gt;äº§ç”Ÿé—®é¢˜å’Œè§£å†³æ–¹å¼&lt;/h4&gt;&lt;p&gt;å½“ä½¿ç”¨ &lt;code&gt;@try @catch @finally&lt;/code&gt; æ—¶ï¼Œæœ‰ä¸¤ç§æƒ…å†µ &lt;code&gt;MRC&lt;/code&gt; å’Œ &lt;code&gt;ARC&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MRC&lt;/code&gt;ï¼ˆiOS 5 ä¹‹å‰ï¼‰ çš„ç¯å¢ƒä¸­ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥å±•ç¤ºä¸ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SomeClass *someClass = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       someClass = [[SomeClass alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [someClass doSomeThingsThatMayThrow];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(â€¦ â€¦);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     [someClass release];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ ARC çš„ç¯å¢ƒä¸­ï¼Œä¸Šé¢çš„ä»£ç å±•ç¤ºä¸ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SomeClass *someClass = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       someClass = [[SomeClass alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [someClass doSomeThingsThatMayThrow];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt;( â€¦ ) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(â€¦ â€¦);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºåœ¨ MRC çš„æƒ…å½¢ä¸‹å¯ä»¥å®ç°å¯¹äºå†…å­˜çš„é‡Šæ”¾ï¼Œåœ¨ ARC çš„æƒ…å½¢ä¸‹ä¼šç³»ç»Ÿä¼šå®ç°å¯¹å†…å­˜çš„é‡Šæ”¾? è¿™æ ·å‘æ­£ç¡®å—ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç­”æ¡ˆæ˜¯ï¼šARC ä¸ä¼šè‡ªåŠ¨å¤„ç†ï¼Œå› ä¸ºå¦‚æœè¦å®ç°è‡ªåŠ¨å¤„ç†å¯èƒ½è¦åŠ å…¥å¤§é‡çš„ä»£ç ï¼Œæ‰å¯ä»¥æ¸…æ¥šå¯¹è±¡å®ç°æŠ›å‡ºå¼‚å¸¸æ—¶å°†å…¶æ¸…ç†ã€‚ä½†æ˜¯å¦‚æœåŠ å…¥ä»£ç å°±ä¼šå½±å“è¿è¡Œæ—¶çš„æ€§èƒ½ï¼Œåœ¨æ­£å¸¸è¿è¡Œæ—¶ä¹Ÿä¼šå¦‚æ­¤ã€‚&lt;br&gt;å¦‚æœåœ¨å½“å‰å®ç°ä¸­å¼€å¯ &lt;code&gt;-fobjc-arc-exception&lt;/code&gt; çš„æ¨¡å¼å¯ä»¥å®ç°åœ¨ &lt;code&gt;@try @catch @finally&lt;/code&gt; åœ¨å¼‚å¸¸æƒ…å†µä¸‹å®ç°å¯¹æœªé‡Šæ”¾çš„å¯¹è±¡è¿›è¡Œå†…å­˜çš„é‡Šæ”¾ç®¡ç†&lt;/p&gt;
&lt;h4 id=&quot;try-catch-finally-çš„-C-æºç &quot;&gt;&lt;a href=&quot;#try-catch-finally-çš„-C-æºç &quot; class=&quot;headerlink&quot; title=&quot;@try@catch@finally çš„ C++ æºç &quot;&gt;&lt;/a&gt;@try@catch@finally çš„ C++ æºç &lt;/h4&gt;&lt;p&gt;æŸ¥çœ‹å¼‚å¸¸æŠ›å‡ºçš„æºç ï¼š&lt;br&gt;å»ºç«‹é¡¹ç›®åœ¨ &lt;code&gt;main.m&lt;/code&gt; æ–‡ä»¶ä¸­å®ç°ä¸‹é¢ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; argc, &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; * argv[]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ‰“å¼€ç»ˆç«¯åœ¨ &lt;code&gt;main.m&lt;/code&gt; ç»ˆç«¯çš„æ–‡ä»¶å¤¹è·¯å¾„æ‰§è¡Œä¸‹é¢çš„è¯­å¥&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;clang -x objective-c -rewrite-objc -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk main.m&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¼šç”Ÿæˆæ–‡ä»¶ &lt;code&gt;main.cpp&lt;/code&gt; çš„æ–‡ä»¶ï¼Œå¯ä»¥æ‰“å¼€æŸ¥çœ‹æ–‡ &lt;code&gt;@try @catch @fianlly&lt;/code&gt;&lt;/p&gt;
&lt;h5 id=&quot;NSExpection-å±æ€§å†…å®¹&quot;&gt;&lt;a href=&quot;#NSExpection-å±æ€§å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;NSExpection å±æ€§å†…å®¹&quot;&gt;&lt;/a&gt;NSExpection å±æ€§å†…å®¹&lt;/h5&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;__attribute__((__objc_exception__))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#ifndef _REWRITER_typedef_NSException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#define _REWRITER_typedef_NSException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_object &lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &amp;#123;&amp;#125; _objc_exc_NSException;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSException_IMPL&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSObject_IMPL&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSObject_IVARS&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//å®ä¾‹å˜é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *name;                      &lt;span class=&quot;comment&quot;&gt;//exception çš„åå­—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *reason;                    &lt;span class=&quot;comment&quot;&gt;//exception äº§ç”Ÿçš„åŸå› &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *userInfo;              &lt;span class=&quot;comment&quot;&gt;//exception å±•ç¤ºä½¿ç”¨è¯¦ç»†çš„ä¿¡æ¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; reserved;                         &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;NSError-å±æ€§å†…å®¹&quot;&gt;&lt;a href=&quot;#NSError-å±æ€§å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;NSError å±æ€§å†…å®¹&quot;&gt;&lt;/a&gt;NSError å±æ€§å†…å®¹&lt;/h5&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#ifndef _REWRITER_typedef_NSError&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#define _REWRITER_typedef_NSError&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_object &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &amp;#123;&amp;#125; _objc_exc_NSError;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSError_IMPL&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSObject_IMPL&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSObject_IVARS&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//å®ä¾‹å˜é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *_reserved;                     &lt;span class=&quot;comment&quot;&gt;//å®ä¾‹è°ƒç”¨çš„æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; _code;                     &lt;span class=&quot;comment&quot;&gt;//error é”™è¯¯ç &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *_domain;                   &lt;span class=&quot;comment&quot;&gt;//error é”™è¯¯å‘ç”ŸèŒƒå›´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *_userInfo;             &lt;span class=&quot;comment&quot;&gt;//error é”™è¯¯æè¿°çš„å…·ä½“ä¿¡æ¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢åœ¨ &lt;code&gt;main.m&lt;/code&gt; ä¸­ä½¿ç”¨ &lt;code&gt;Clang&lt;/code&gt; è§£æ &lt;code&gt;@try @catch @finally&lt;/code&gt; åœ¨ C++ ç¯å¢ƒä¸­è§£æ&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;æ²¡æœ‰å‚æ•°&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;æœ‰å‚æ•°&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h5 id=&quot;æ²¡æœ‰å‚æ•°&quot;&gt;&lt;a href=&quot;#æ²¡æœ‰å‚æ•°&quot; class=&quot;headerlink&quot; title=&quot;æ²¡æœ‰å‚æ•°&quot;&gt;&lt;/a&gt;æ²¡æœ‰å‚æ•°&lt;/h5&gt;&lt;p&gt;åœ¨æ²¡æœ‰å‚æ•°çš„æƒ…å†µä¸‹&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç»è¿‡ Clang è§£æåæºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;volatile&lt;/span&gt; _rethrow = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		         &lt;span class=&quot;comment&quot;&gt;//å¼‚å¸¸æ•è·&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    &amp;#125; catch (_objc_exc_NSException *_exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		         &lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception = (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt;*)_exception; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		         &lt;span class=&quot;comment&quot;&gt;//æ•è·å¼‚å¸¸ï¼Œå¹¶è¿›è¡ŒæŠ›å‡º&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	catch (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	     _rethrow = e;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	  &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; _FIN &amp;#123; _FIN(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; reth) : rethrow(reth) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		~_FIN() &amp;#123; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (rethrow) objc_exception_throw(rethrow); &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; rethrow;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125; _fin_force_rethow(_rethrow);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		   &lt;span class=&quot;comment&quot;&gt;//å¼‚å¸¸æŠ›å‡ºåæ‰§è¡Œçš„ finally çš„å†…å®¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; IMAGE_INFO &amp;#123; &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; version; &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; flag; &amp;#125; _OBJC_IMAGE_INFO = &amp;#123; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;æœ‰å‚æ•°&quot;&gt;&lt;a href=&quot;#æœ‰å‚æ•°&quot; class=&quot;headerlink&quot; title=&quot;æœ‰å‚æ•°&quot;&gt;&lt;/a&gt;æœ‰å‚æ•°&lt;/h5&gt;&lt;p&gt;åœ¨æœ‰å‚æ•°çš„æƒ…å†µä¸‹&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *dic = @&amp;#123;&lt;span class=&quot;string&quot;&gt;@&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;@&quot;liang&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          &lt;span class=&quot;string&quot;&gt;@&quot;last name&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;@&quot;bai&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          &lt;span class=&quot;string&quot;&gt;@&quot;dream&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;@&quot;to be a bussinessman&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          &lt;span class=&quot;string&quot;&gt;@&quot;work&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;@&quot;IT&quot;&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *salaryLiterals = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *salaryAtIndex = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        salaryAtIndex = [dic objectForKey:&lt;span class=&quot;string&quot;&gt;@&quot;salary&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        salaryLiterals = dic[&lt;span class=&quot;string&quot;&gt;@&quot;salary&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;error name is %@, reason : %@, userInfo : %@&quot;&lt;/span&gt;, exception.name, exception.reason, exception.userInfo);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç»è¿‡ Clang è§£æåæºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *dic = ((&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *(*)(Class, SEL, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; ObjectType *, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; *, &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt;))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)(objc_getClass(&lt;span class=&quot;string&quot;&gt;&quot;NSDictionary&quot;&lt;/span&gt;), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;dictionaryWithObjects:forKeys:count:&quot;&lt;/span&gt;), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; *)__NSContainer_literal(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;U, (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_1,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_3, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_5, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_7).arr,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; *)__NSContainer_literal(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;U, (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_0, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_2,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_4,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_6).arr, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;U);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *salary = __null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;volatile&lt;/span&gt; _rethrow = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//ä½¿ç”¨ volatile ä¿®é¥°çš„ _rethrow è®°å½•å¼‚å¸¸çš„å±€éƒ¨å˜é‡ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			        salary = ((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;  _Nullable (*)(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;, SEL, KeyType))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)dic, sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;objectForKeyedSubscript:&quot;&lt;/span&gt;), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			  (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_8);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    catch (_objc_exc_NSException *_exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		     &lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception = (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt;*)_exception; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		     &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;((&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_9,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		            ((&lt;span class=&quot;built_in&quot;&gt;NSExceptionName&lt;/span&gt; (*)(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;, SEL))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)exception, sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;)), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		            ((&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; * _Nullable (*)(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;, SEL))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)exception, sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;reason&quot;&lt;/span&gt;)), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		            ((&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; * _Nullable (*)(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;, SEL))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)exception, sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;userInfo&quot;&lt;/span&gt;)));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		catch (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    _rethrow = e;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		 &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			 &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; _FIN &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			    _FIN(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; reth) : rethrow(reth) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				~_FIN() &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (rethrow) objc_exception_throw(rethrow); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; rethrow;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			 &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			 _fin_force_rethow(_rethrow);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			    salary = __null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		 &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; IMAGE_INFO &amp;#123; &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; version; &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; flag; &amp;#125; _OBJC_IMAGE_INFO = &amp;#123; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;æ€»ç»“ï¼š&quot;&gt;&lt;a href=&quot;#æ€»ç»“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“ï¼š&quot;&gt;&lt;/a&gt;æ€»ç»“ï¼š&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;ï¼ˆ1ï¼‰é‡åˆ°å¥”æºƒé—®é¢˜æˆ–è€…æ˜¯é”™è¯¯é—®é¢˜ï¼Œä¼˜å…ˆä½¿ç”¨ &lt;code&gt;NSError&lt;/code&gt; æ¥å¯¹å¥”æºƒå’Œé”™è¯¯è¿›è¡Œå°è£…ï¼Œç„¶åä½¿ç”¨ &lt;code&gt;NSLog&lt;/code&gt; å¯¹å…¶è¿›è¡Œæ‰“å°&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰&lt;code&gt;@try @catch @finally&lt;/code&gt; åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ &lt;code&gt;MRC&lt;/code&gt; ä¸­å¦‚æœå˜é‡è¾ƒå¤šå¯èƒ½ä¼šæ¼æ‰å±€éƒ¨å˜é‡å†…å­˜é‡Šæ”¾é—®é¢˜å’Œ &lt;code&gt;ARC&lt;/code&gt; ä¸­å¦‚æœæŠ›å‡ºé—®é¢˜ï¼Œä¸ä¼šè‡ªåŠ¨å¯¹å±€éƒ¨å˜é‡é‡Šæ”¾ï¼ˆå¼€å¯ &lt;code&gt;-fobjc-arc-expections&lt;/code&gt; æ¨¡å¼ä¼šè¿›è¡Œé‡Šæ”¾ï¼Œä½†æ˜¯å¼•å…¥ä»£ç å¯¹æ€§èƒ½æœ‰æ‰€å½±å“ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å¼€å‘è¿‡è¿‡ç¨‹ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å¼‚å¸¸é—®é¢˜&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-ebec37c09e21ba91.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOSå¼‚å¸¸.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot;&gt;&lt;a href=&quot;#iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot; class=&quot;headerlink&quot; title=&quot;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot;&gt;&lt;/a&gt;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&lt;/h1&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS-Responder Chain (å“åº”é“¾)</title>
    <link href="http://yoursite.com/2017/05/15/iOS-Responder%20Chain/"/>
    <id>http://yoursite.com/2017/05/15/iOS-Responder Chain/</id>
    <published>2017-05-14T16:12:14.000Z</published>
    <updated>2017-06-01T07:48:51.000Z</updated>
    
    <content type="html">&lt;p&gt;å·¥ä½œæ¥è¿‘ä¸€å¹´ï¼Œå¾ˆä¹…æ²¡æœ‰æ›´æ–°åšå®¢ã€‚å·¥ä½œä¸­å­¦åˆ°å¾ˆå¤šçŸ¥è¯†ç‚¹åé¢å°†èŠ±æ—¶é—´æ•´ç†ï¼Œä½œä¸ºå¯¹ä¸€å¹´çŸ¥è¯†å­¦ä¹ çš„æ€»ç»“ï¼š&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æœ¬ç¯‡åšå®¢çš„å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-56a34538a5ab0e6b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Responder Chain.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;iOS-Responder-Chain-å“åº”é“¾&quot;&gt;&lt;a href=&quot;#iOS-Responder-Chain-å“åº”é“¾&quot; class=&quot;headerlink&quot; title=&quot;iOS-Responder Chain (å“åº”é“¾)&quot;&gt;&lt;/a&gt;iOS-Responder Chain (å“åº”é“¾)&lt;/h1&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;äººä¸è®¡ç®—æœºäº¤äº’&quot;&gt;&lt;a href=&quot;#äººä¸è®¡ç®—æœºäº¤äº’&quot; class=&quot;headerlink&quot; title=&quot;äººä¸è®¡ç®—æœºäº¤äº’&quot;&gt;&lt;/a&gt;äººä¸è®¡ç®—æœºäº¤äº’&lt;/h2&gt;&lt;p&gt;ç›®å‰è®¡ç®—æœºåœ¨æˆ‘ä»¬ç”Ÿæ´»ä¸­æ‰®æ¼”å¾ˆé‡è¦çš„è§’è‰²ï¼Œæˆ‘ä»¬ä¸è®¡ç®—æœºä¹‹é—´çš„äº¤äº’ä¹Ÿå¾ˆæ™®éã€‚å¤šæ•°æƒ…å†µä½¿ç”¨æœ€å¤šçš„æ˜¯ PC å’Œ ç§»åŠ¨ç«¯ï¼Œè€Œä¸¤ç§äº¤äº’æ–¹å¼æœ‰å¾ˆå¤§çš„ä¸åŒ&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;PC ä¸äººçš„äº¤äº’&lt;/li&gt;
&lt;li&gt;ç§»åŠ¨ç«¯ä¸äººçš„äº¤äº’&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;a)  åœ¨ PC ç«¯æˆ‘ä»¬é€šè¿‡é”®ç›˜ã€é¼ æ ‡ç­‰æ¥å¯¹ç•Œé¢çš„å†…å®¹è¿›è¡Œæ“ä½œå’Œå®Œæˆç›¸å…³çš„ä»»åŠ¡&lt;/p&gt;
&lt;p&gt;bï¼‰åœ¨ç§»åŠ¨ç«¯æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰‹æŒ‡å¯¹ç•Œé¢å†…å®¹è¿›è¡Œç‚¹å‡»æ§ä»¶å’Œå®ç°ç›¸åº”çš„æ“ä½œ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è¿™é‡Œæå‡ºä¸€ä¸ªç–‘é—®ï¼ŒPC ç«¯æˆ‘ä»¬é€šè¿‡ç‚¹å‡»å¯ä»¥å®ç°æ§ä»¶çš„ç›¸å…³æ“ä½œã€‚ä½†æ˜¯ç§»åŠ¨ç«¯æˆ‘ä»¬æ‰‹æŒ‡ç‚¹å‡»æ§ä»¶æ˜¯æ€ä¹ˆè¢«æ£€æµ‹ç‚¹å‡»çš„ä½ç½®ã€ä¼ é€’ä¿¡æ¯å’Œåšå‡ºç›¸åº”çš„æ“ä½œå‘¢ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿™é‡Œå¼•å…¥ä¸€ä¸ªæ¦‚å¿µï¼šResponder Chain (å“åº”è€…é“¾)&lt;/p&gt;
&lt;h2 id=&quot;Responder-Chain-å“åº”è€…é“¾&quot;&gt;&lt;a href=&quot;#Responder-Chain-å“åº”è€…é“¾&quot; class=&quot;headerlink&quot; title=&quot;Responder Chain (å“åº”è€…é“¾)&quot;&gt;&lt;/a&gt;Responder Chain (å“åº”è€…é“¾)&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;NSResponder.h å¤´æ–‡ä»¶çš„æºç &lt;/li&gt;
&lt;li&gt;UIKit æ§ä»¶ä¹‹é—´çš„ç»§æ‰¿å…³ç³»&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&quot;NSResponder-h-å¤´æ–‡ä»¶çš„æºç &quot;&gt;&lt;a href=&quot;#NSResponder-h-å¤´æ–‡ä»¶çš„æºç &quot; class=&quot;headerlink&quot; title=&quot;NSResponder.h å¤´æ–‡ä»¶çš„æºç &quot;&gt;&lt;/a&gt;NSResponder.h å¤´æ–‡ä»¶çš„æºç &lt;/h5&gt;&lt;p&gt;åœ¨æˆ‘ä»¬ç‚¹å‡»æ‰‹æœºå±å¹•çš„ä¸€ä¸ªæ§ä»¶æ—¶ï¼Œä¸ Responder Chain (å“åº”è€…é“¾)ä¹‹é—´è”ç³»ç´§å¯†ã€‚ä¸‹é¢æ˜¯å°ç¼–åœ¨ &lt;code&gt;UIKit&lt;/code&gt; æ¡†æ¶ä¸­æ‰¾åˆ°ç›¸åº”ç›¸å…³çš„ä»£ç ï¼Œå¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;UIResponder&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;NSObject&lt;/span&gt; &amp;lt;&lt;span class=&quot;title&quot;&gt;UIResponderStandardEditActions&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@property&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;nonatomic&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;readonly&lt;/span&gt;, nullable) &lt;span class=&quot;built_in&quot;&gt;UIResponder&lt;/span&gt; *nextResponder;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (nullable &lt;span class=&quot;built_in&quot;&gt;UIResponder&lt;/span&gt;*)nextResponder;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@property&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;nonatomic&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;readonly&lt;/span&gt;) &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; canBecomeFirstResponder;    &lt;span class=&quot;comment&quot;&gt;// default is NO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)canBecomeFirstResponder;    &lt;span class=&quot;comment&quot;&gt;// default is NO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)becomeFirstResponder;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@property&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;nonatomic&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;readonly&lt;/span&gt;) &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; canResignFirstResponder;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)canResignFirstResponder;    &lt;span class=&quot;comment&quot;&gt;// default is YES&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resignFirstResponder;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@property&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;nonatomic&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;readonly&lt;/span&gt;) &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; isFirstResponder;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)isFirstResponder;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesBegan:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UITouch&lt;/span&gt; *&amp;gt; *)touches withEvent:(nullable &lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesMoved:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UITouch&lt;/span&gt; *&amp;gt; *)touches withEvent:(nullable &lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesEnded:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UITouch&lt;/span&gt; *&amp;gt; *)touches withEvent:(nullable &lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesCancelled:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UITouch&lt;/span&gt; *&amp;gt; *)touches withEvent:(nullable &lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesEstimatedPropertiesUpdated:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UITouch&lt;/span&gt; *&amp;gt; *)touches &lt;span class=&quot;built_in&quot;&gt;NS_AVAILABLE_IOS&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;_1);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)pressesBegan:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UIPress&lt;/span&gt; *&amp;gt; *)presses withEvent:(nullable &lt;span class=&quot;built_in&quot;&gt;UIPressesEvent&lt;/span&gt; *)event &lt;span class=&quot;built_in&quot;&gt;NS_AVAILABLE_IOS&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;_0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)pressesChanged:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UIPress&lt;/span&gt; *&amp;gt; *)presses withEvent:(nullable &lt;span class=&quot;built_in&quot;&gt;UIPressesEvent&lt;/span&gt; *)event &lt;span class=&quot;built_in&quot;&gt;NS_AVAILABLE_IOS&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;_0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)pressesEnded:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UIPress&lt;/span&gt; *&amp;gt; *)presses withEvent:(nullable &lt;span class=&quot;built_in&quot;&gt;UIPressesEvent&lt;/span&gt; *)event &lt;span class=&quot;built_in&quot;&gt;NS_AVAILABLE_IOS&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;_0);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)pressesCancelled:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UIPress&lt;/span&gt; *&amp;gt; *)presses withEvent:(nullable &lt;span class=&quot;built_in&quot;&gt;UIPressesEvent&lt;/span&gt; *)event &lt;span class=&quot;built_in&quot;&gt;NS_AVAILABLE_IOS&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;_0);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¸Šé¢ &lt;code&gt;&amp;lt;UIKit/UIResponder.h&amp;gt;&lt;/code&gt; çš„æ–‡ä»¶ä¸­æˆ‘ä»¬å¯ä»¥çœ‹å‡º &lt;code&gt;UIResponder&lt;/code&gt; çš„ç±»å¯ä»¥å®ç° &lt;code&gt;Touch&lt;/code&gt; å’Œ &lt;code&gt;Press&lt;/code&gt; ç›¸å…³æ“ä½œçš„åšå‡ºç›‘å¬&lt;/p&gt;
&lt;h5 id=&quot;UIKit-æ§ä»¶ä¹‹é—´çš„ç»§æ‰¿å…³ç³»&quot;&gt;&lt;a href=&quot;#UIKit-æ§ä»¶ä¹‹é—´çš„ç»§æ‰¿å…³ç³»&quot; class=&quot;headerlink&quot; title=&quot;UIKit æ§ä»¶ä¹‹é—´çš„ç»§æ‰¿å…³ç³»&quot;&gt;&lt;/a&gt;UIKit æ§ä»¶ä¹‹é—´çš„ç»§æ‰¿å…³ç³»&lt;/h5&gt;&lt;p&gt;ä¸‹é¢æ˜¯å°ç¼–å¯¹ &lt;code&gt;UIKit&lt;/code&gt; æ¡†æ¶ä¸­ç‚¹å‡»ç›¸åº”æ§ä»¶æœ‰å…³ &lt;code&gt;Class&lt;/code&gt; (ç±»)ç»§æ‰¿å…³ç³»æ•´ç†ï¼Œå¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-faaebfb7fe3a7067.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Responder Chain-UIKit.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”±ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œåœ¨ç•Œé¢ä¸Šæˆ‘ä»¬å¹³æ—¶ä½¿ç”¨æ§ä»¶æ—¶é€šè¿‡ç»§æ‰¿ &lt;code&gt;UIResponder&lt;/code&gt; æ¥å®ç°å¯¹ç•Œé¢ &lt;code&gt;Touch&lt;/code&gt; å’Œ &lt;code&gt;Press&lt;/code&gt; ç›¸å…³æ“ä½œçš„åšå‡ºç›‘å¬&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å“åº”é“¾çš„åˆ›å»º&quot;&gt;&lt;a href=&quot;#å“åº”é“¾çš„åˆ›å»º&quot; class=&quot;headerlink&quot; title=&quot;å“åº”é“¾çš„åˆ›å»º&quot;&gt;&lt;/a&gt;å“åº”é“¾çš„åˆ›å»º&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ§åˆ¶å™¨ä¸­çš„ &lt;code&gt;View&lt;/code&gt; æ ‘çŠ¶ç»“æ„&lt;/li&gt;
&lt;li&gt;ç‚¹å‡»ç›¸åº”çš„æµ‹è¯•&amp;amp;æ‰“å°&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&quot;æ§åˆ¶å™¨ä¸­çš„-View-æ ‘çŠ¶ç»“æ„&quot;&gt;&lt;a href=&quot;#æ§åˆ¶å™¨ä¸­çš„-View-æ ‘çŠ¶ç»“æ„&quot; class=&quot;headerlink&quot; title=&quot;æ§åˆ¶å™¨ä¸­çš„ View æ ‘çŠ¶ç»“æ„&quot;&gt;&lt;/a&gt;æ§åˆ¶å™¨ä¸­çš„ &lt;code&gt;View&lt;/code&gt; æ ‘çŠ¶ç»“æ„&lt;/h5&gt;&lt;p&gt;åœ¨æ‰‹æœºçš„ GUI ä¸­æˆ‘ä»¬å¤šæ•°æƒ…å†µä¸‹ä½¿ç”¨ &lt;code&gt;UIViewController&lt;/code&gt; å’Œ &lt;code&gt;UINavigationViewController&lt;/code&gt; æ§åˆ¶å™¨æ¥å®ç°ç•Œé¢æ§ä»¶çš„ç®¡ç†ï¼Œå…¶ä¸­ä»¥æ§åˆ¶å™¨çš„ &lt;code&gt;View&lt;/code&gt; ä¸ºç•Œé¢æ˜¾ç¤ºåˆ›å»ºå’Œæ·»åŠ æ§ä»¶ï¼Œæœ€åå½¢æˆ &lt;code&gt;View&lt;/code&gt; çš„æ§ä»¶æ ‘çŠ¶ç»“æ„&lt;/p&gt;
&lt;p&gt;GUI æ‰‹æœºç•Œé¢ä¸­ï¼Œæˆ‘ä»¬çŸ¥é“ &lt;code&gt;UIView&lt;/code&gt; ä¸­ç”¨ &lt;code&gt;property&lt;/code&gt; (å±æ€§) &lt;code&gt;superView&lt;/code&gt; å¯ä»¥ç”¨æ¥æ·»åŠ æ–°çš„ &lt;code&gt;UIView&lt;/code&gt; åˆ°å½“å‰çš„ &lt;code&gt;View&lt;/code&gt; ä¸­ï¼Œæ·»åŠ çš„å­ç±» &lt;code&gt;View&lt;/code&gt; ä¸­ &lt;code&gt;property&lt;/code&gt; (å±æ€§) &lt;code&gt;nextResponder&lt;/code&gt; å¯ä»¥æŒ‡å‘çˆ¶ç±» &lt;code&gt;View&lt;/code&gt; çš„ &lt;code&gt;property&lt;/code&gt; (å±æ€§) &lt;code&gt;superView&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;æ¯ä¸€ä¸ª  &lt;code&gt;ViewController&lt;/code&gt; ä¸­æœ‰ &lt;code&gt;property&lt;/code&gt;(å±æ€§) &lt;code&gt;view&lt;/code&gt; -&amp;gt; æ—¢&lt;code&gt;self.view&lt;/code&gt; æ¥è¿›è¡Œæ·»åŠ å­ç±» &lt;code&gt;View&lt;/code&gt;ï¼ŒåŒæ ·ï¼š&lt;code&gt;view&lt;/code&gt; çš„ &lt;code&gt;property&lt;/code&gt; (å±æ€§) é€šè¿‡   &lt;code&gt;property&lt;/code&gt; (å±æ€§) &lt;code&gt;nextResponder&lt;/code&gt; æ¥æŒ‡å‘   &lt;code&gt;ViewController&lt;/code&gt; &lt;/p&gt;
&lt;p&gt;ä¸‹å›¾æ˜¯ &lt;code&gt;View&lt;/code&gt; åˆå§‹åŒ–å¸ƒå±€ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-ff79d6261a13c062.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Responder Chain-View-Front.png&quot;&gt;&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-bbfe167edcd04fed.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Responder Chain-View-Hierarchy.png&quot;&gt;&lt;/p&gt;
&lt;h5 id=&quot;ç‚¹å‡»ç›¸åº”çš„æµ‹è¯•-amp-æ‰“å°&quot;&gt;&lt;a href=&quot;#ç‚¹å‡»ç›¸åº”çš„æµ‹è¯•-amp-æ‰“å°&quot; class=&quot;headerlink&quot; title=&quot;ç‚¹å‡»ç›¸åº”çš„æµ‹è¯•&amp;amp;æ‰“å°&quot;&gt;&lt;/a&gt;ç‚¹å‡»ç›¸åº”çš„æµ‹è¯•&amp;amp;æ‰“å°&lt;/h5&gt;&lt;p&gt;åœ¨å®šä¹‰çš„ ViewA1 ä¸­é‡å†™&lt;code&gt;touch&lt;/code&gt;æ–¹æ³•ï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesBegan:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;UITouch&lt;/span&gt; *&amp;gt; *)touches withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIResponder&lt;/span&gt; *next = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; nextResponder];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableString&lt;/span&gt; *prefix  = &lt;span class=&quot;string&quot;&gt;@&quot;&quot;&lt;/span&gt;.mutableCopy;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;while&lt;/span&gt; (&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; != next) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%@%@&quot;&lt;/span&gt;, prefix, [next class]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [prefix appendString:&lt;span class=&quot;string&quot;&gt;@&quot;--&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        next = [next nextResponder];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç‚¹å‡» &lt;code&gt;ViewA1&lt;/code&gt; å¾—åˆ°çš„æ‰“å°ç»“æœï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-08&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;12.278&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;19441&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;727956&lt;/span&gt;] ViewA0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-08&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;12.278&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;19441&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;727956&lt;/span&gt;] --ViewA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-08&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;12.278&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;19441&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;727956&lt;/span&gt;] ----&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-08&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;12.279&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;19441&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;727956&lt;/span&gt;] ------ViewController&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-08&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;12.279&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;19441&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;727956&lt;/span&gt;] --------&lt;span class=&quot;built_in&quot;&gt;UIWindow&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-08&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;12.279&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;19441&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;727956&lt;/span&gt;] ----------&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-08&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;23&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;55&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;12.280&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;19441&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;727956&lt;/span&gt;] ------------AppDelegate&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŸºäºä¸Šé¢ï¼šå°ç¼–ä»ä¸Šé¢ä»£ç æ‰“å°çš„ç»“æœå¯ä»¥éªŒè¯ï¼Œå­ View çš„ property(å±æ€§) &lt;code&gt;nextResponder&lt;/code&gt; æŒ‡å‘çˆ¶ Viewï¼Œçˆ¶ç±»çš„ View çš„property(å±æ€§) &lt;code&gt;nextResponder&lt;/code&gt; æœ€åæŒ‡å‘ ViewController &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å¦‚ä½•æ‰¾æ‰“ç¬¬ä¸€å“åº”è€…&quot;&gt;&lt;a href=&quot;#å¦‚ä½•æ‰¾æ‰“ç¬¬ä¸€å“åº”è€…&quot; class=&quot;headerlink&quot; title=&quot;å¦‚ä½•æ‰¾æ‰“ç¬¬ä¸€å“åº”è€…&quot;&gt;&lt;/a&gt;å¦‚ä½•æ‰¾æ‰“ç¬¬ä¸€å“åº”è€…&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ¢æµ‹å™¨ &lt;code&gt;Hit - Test&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;å¯»æ‰¾ç¬¬ä¸€ç›¸åº”çš„æ¢æµ‹çŒœæƒ³&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&quot;æ¢æµ‹å™¨-Hit-Test&quot;&gt;&lt;a href=&quot;#æ¢æµ‹å™¨-Hit-Test&quot; class=&quot;headerlink&quot; title=&quot;æ¢æµ‹å™¨ Hit - Test&quot;&gt;&lt;/a&gt;æ¢æµ‹å™¨ &lt;code&gt;Hit - Test&lt;/code&gt;&lt;/h5&gt;&lt;p&gt;åœ¨å“åº”é“¾æŸ¥æ‰¾è¿‡ç¨‹ä¸­ï¼Œæœ‰ä¸¤ä¸ªå‡½æ•°èµ·åˆ°å¾ˆé‡è¦çš„ä½œç”¨&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)hitTest:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)pointInside:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å“åº”é“¾åˆ›å»ºçš„æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬åœ¨æŠŠå¯»æ‰¾å“åº”è€…çš„è¿‡ç¨‹ç§°ä¸ºï¼š&lt;code&gt;Hit - Testing View&lt;/code&gt; åœ¨å¯»æ‰¾ç›¸åº” View çš„è¿‡ç¨‹ç§°ä¸ºï¼š&lt;code&gt;Hit - Test&lt;/code&gt;&lt;br&gt;æˆ‘ä»¬æŠŠ &lt;code&gt;Hit - Test&lt;/code&gt; å¯ä»¥æ¯”ä½œä¸€ä¸ªæ¢æµ‹å™¨ï¼Œé€šè¿‡è¿™ä¸ªæ¢æµ‹å™¨æ¥æ£€æµ‹æ‰‹æŒ‡ç‚¹å‡»åœ¨å“ªä¸ª &lt;code&gt;UIView&lt;/code&gt; ä¸Šé¢ &lt;/p&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢çš„ç»§æ‰¿å…³ç³»å’Œç‚¹å‡»åæ‰“å°å‡ºçš„ç»“æœå¯ä»¥çœ‹åˆ°ï¼Œå½“æˆ‘ä»¬ç‚¹å‡»ç•Œé¢ &lt;code&gt;UIApplication&lt;/code&gt; å°±ä¼šè°ƒç”¨ &lt;code&gt;hitTest: withEvent&lt;/code&gt; æŸ¥çœ‹ç‚¹å‡»æ˜¯å¦åœ¨ &lt;code&gt;UIWindow&lt;/code&gt; ä¸­å¦‚æœä¸åœ¨å°±è¿”å› &lt;code&gt;nil&lt;/code&gt; , å¦‚æœåœ¨ &lt;code&gt;UIWindow&lt;/code&gt; ä¹Ÿä¼šè°ƒç”¨ &lt;code&gt;hitTest: withEvent&lt;/code&gt; å¯¹&lt;code&gt;UIWindow&lt;/code&gt; ä¸­ &lt;code&gt;subViews&lt;/code&gt; è¿›è¡Œæ¢æµ‹&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;hitTest: withEvent&lt;/code&gt; åœ¨æ¢æµ‹è¿‡ç¨‹ä¸­é‡‡ç”¨æˆ‘ä»¬æ¯”è¾ƒå¸¸è§ é€’å½’çš„æ–¹å¼æ¥æŸ¥æ‰¾ç‚¹å‡» &lt;code&gt;UIView&lt;/code&gt;ï¼Œ é€šè¿‡æˆ‘ä»¬åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­æœ€åè¢«åˆå§‹åŒ–çš„æ”¾åœ¨æœ€ä¸Šé¢&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ç‚¹å‡» &lt;code&gt;ViewA1&lt;/code&gt; æ¥è¿›è¡ŒéªŒè¯ä¸‹ä¸€ä¸ª &lt;code&gt;nextResponder&lt;/code&gt; è¿‡ç¨‹ä¸­åœ¨æ¯ä¸€ä¸ª &lt;code&gt;View&lt;/code&gt;é‡å†™ &lt;code&gt;hitTest&lt;/code&gt; å¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)hitTest:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.isUserInteractionEnabled || &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.hidden || &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.alpha &amp;lt;= &lt;span class=&quot;number&quot;&gt;0.01&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ResponderChain : %@&quot;&lt;/span&gt;, [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; class]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; pointInside:point withEvent:event]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *subView &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.subviews reverseObjectEnumerator]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; converPoin = [subView convertPoint:point fromView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *hitTestView = [subView hitTest:converPoin withEvent:event];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (hitTestView) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ViewA : hitTestView -&amp;gt; %@&quot;&lt;/span&gt;, [hitTestView class]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; hitTestView;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç‚¹å‡» &lt;code&gt;ViewA1&lt;/code&gt; å¾—åˆ°æ‰“å°çš„ç»“æœå¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;05.968&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;1197&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;22554&lt;/span&gt;] ResponderChain : ViewB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;05.969&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;1197&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;22554&lt;/span&gt;] ResponderChain : ViewA&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;05.969&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;1197&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;22554&lt;/span&gt;] ResponderChain : ViewA0&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;07&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;42&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;05.969&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;1197&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;22554&lt;/span&gt;] ResponderChain : ViewA1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h5 id=&quot;å¯»æ‰¾ç¬¬ä¸€ç›¸åº”çš„æ¢æµ‹çŒœæƒ³&quot;&gt;&lt;a href=&quot;#å¯»æ‰¾ç¬¬ä¸€ç›¸åº”çš„æ¢æµ‹çŒœæƒ³&quot; class=&quot;headerlink&quot; title=&quot;å¯»æ‰¾ç¬¬ä¸€ç›¸åº”çš„æ¢æµ‹çŒœæƒ³&quot;&gt;&lt;/a&gt;å¯»æ‰¾ç¬¬ä¸€ç›¸åº”çš„æ¢æµ‹çŒœæƒ³&lt;/h5&gt;&lt;p&gt;æ ¹æ®æ‰“å°çš„ç»“æœï¼Œæˆ‘ä»¬å¯ä»¥éªŒè¯ç‚¹å‡»å…·ä½“æŸ¥æ‰¾çš„æµç¨‹å¦‚ä¸‹å›¾æ‰€ç¤ºï¼šï¼ˆå®ä¾‹æ˜¯ç‚¹å‡» viewA1ï¼‰&lt;br&gt;UIApplication â€”&amp;gt; UIWindow  â€”&amp;gt; viewB â€”&amp;gt; viewA â€”&amp;gt; viewA0 â€”&amp;gt; viewA1&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-4b1f59d1c65500ba.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Responder Chain-Hit-Testing-View.png&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;åˆ©ç”¨å“åº”è€…åœ¨åº”ç”¨ä¸­çš„ä½“ç°&quot;&gt;&lt;a href=&quot;#åˆ©ç”¨å“åº”è€…åœ¨åº”ç”¨ä¸­çš„ä½“ç°&quot; class=&quot;headerlink&quot; title=&quot;åˆ©ç”¨å“åº”è€…åœ¨åº”ç”¨ä¸­çš„ä½“ç°&quot;&gt;&lt;/a&gt;åˆ©ç”¨å“åº”è€…åœ¨åº”ç”¨ä¸­çš„ä½“ç°&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;æ”¹å˜æ§ä»¶çš„ç›¸åº”èŒƒå›´&lt;/li&gt;
&lt;/ul&gt;
&lt;h5 id=&quot;æ”¹å˜æ§ä»¶çš„ç›¸åº”èŒƒå›´&quot;&gt;&lt;a href=&quot;#æ”¹å˜æ§ä»¶çš„ç›¸åº”èŒƒå›´&quot; class=&quot;headerlink&quot; title=&quot;æ”¹å˜æ§ä»¶çš„ç›¸åº”èŒƒå›´&quot;&gt;&lt;/a&gt;æ”¹å˜æ§ä»¶çš„ç›¸åº”èŒƒå›´&lt;/h5&gt;&lt;p&gt;æˆ‘ä»¬å¯ä»¥åˆ©ç”¨ &lt;code&gt;hitTest&lt;/code&gt; æ ¹æ® &lt;code&gt;point&lt;/code&gt; æ–¹å¼æ¥é‡æ–°è®¾ç½® &lt;code&gt;ponit&lt;/code&gt; çš„ç‚¹å‡»ç›¸åº”çš„èŒƒå›´å¤§å°&lt;br&gt;åœ¨ ViewB1 ä¸­å®ç°ç‚¹å‡»ç›¸åº”èŒƒå›´åœ¨å¸ƒå±€æ˜¾ç¤ºåŸºç¡€ä¸Šä¸‹å·¦å³æ‹“å±• 10 pxï¼Œå®ç°ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)hitTest:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.isUserInteractionEnabled || &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.isHidden || &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.alpha &amp;lt;= &lt;span class=&quot;number&quot;&gt;0.01&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ResponderChain : %@&quot;&lt;/span&gt;, [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; class]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; touchRect = &lt;span class=&quot;built_in&quot;&gt;CGRectInset&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds, &lt;span class=&quot;number&quot;&gt;-10&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;-10&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;CGRectContainsPoint&lt;/span&gt;(touchRect, point)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *subView &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.subviews reverseObjectEnumerator]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; converPoint = [subView convertPoint:point fromView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *hitTestView = [subView hitTest:converPoint withEvent:event];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (hitTestView) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ViewB1 : hitTestView -&amp;gt; %@&quot;&lt;/span&gt;, [hitTestView class]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; hitTestView;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;ViewB1&lt;/code&gt; ç•Œé¢ä¸­å®é™…èŒƒå›´ï¼Œå’Œç‚¹å‡»ç›¸åº”çš„ &lt;code&gt;viewB1&lt;/code&gt; å¤–çš„è™šæ¡†çš„èŒƒå›´ä¹Ÿä¼šåšå‡ºç›¸åº”çš„ç›¸åº”ã€‚å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-f4e683de8d0ab2cb.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Responder Chain-Apply.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ‰“å°çš„ç»“æœï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;34&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00.437&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;1197&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;22554&lt;/span&gt;] ResponderChain : ViewB&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;34&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00.437&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;1197&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;22554&lt;/span&gt;] ResponderChain : ViewB1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;number&quot;&gt;2017&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-05&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-09&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;34&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;00.437&lt;/span&gt; DesignPattern-Create[&lt;span class=&quot;number&quot;&gt;1197&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;22554&lt;/span&gt;] ViewB : hitTestView -&amp;gt; ViewB1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ç›¸å…³çš„æµ‹è¯•çš„&lt;a href=&quot;https://github.com/boilWater/DesignPattern-Create.git&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Dome&lt;/a&gt;ä¸‹è½½åœ°å€&lt;/p&gt;
&lt;p&gt;æ—¶é—´ï¼š2017/5/8 23:58:44 (åé¢ä¼šç»§æ‰¿å†™ä½œ)&lt;br&gt;ä¿®æ”¹æ—¶é—´ï¼š 2017/5/9 22:30:45&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å·¥ä½œæ¥è¿‘ä¸€å¹´ï¼Œå¾ˆä¹…æ²¡æœ‰æ›´æ–°åšå®¢ã€‚å·¥ä½œä¸­å­¦åˆ°å¾ˆå¤šçŸ¥è¯†ç‚¹åé¢å°†èŠ±æ—¶é—´æ•´ç†ï¼Œä½œä¸ºå¯¹ä¸€å¹´çŸ¥è¯†å­¦ä¹ çš„æ€»ç»“ï¼š&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æœ¬ç¯‡åšå®¢çš„å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-56a34538a5ab0e6b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Responder Chain.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;iOS-Responder-Chain-å“åº”é“¾&quot;&gt;&lt;a href=&quot;#iOS-Responder-Chain-å“åº”é“¾&quot; class=&quot;headerlink&quot; title=&quot;iOS-Responder Chain (å“åº”é“¾)&quot;&gt;&lt;/a&gt;iOS-Responder Chain (å“åº”é“¾)&lt;/h1&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS Runtime-æ›¿æ¢æ–¹æ³• &amp; æ¶ˆæ¯å‘é€è½¬å‘</title>
    <link href="http://yoursite.com/2017/02/01/iOS%20Runtime-%E6%B6%88%E6%81%AF%E5%8F%91%E9%80%81%E5%92%8C%E8%BD%AC%E5%8F%91/"/>
    <id>http://yoursite.com/2017/02/01/iOS Runtime-æ¶ˆæ¯å‘é€å’Œè½¬å‘/</id>
    <published>2017-02-01T09:42:32.000Z</published>
    <updated>2017-08-25T09:21:06.000Z</updated>
    
    <content type="html">&lt;h2 id=&quot;æ€»æ¦‚&quot;&gt;&lt;a href=&quot;#æ€»æ¦‚&quot; class=&quot;headerlink&quot; title=&quot;æ€»æ¦‚&quot;&gt;&lt;/a&gt;æ€»æ¦‚&lt;/h2&gt;&lt;p&gt;åœ¨åšå…¬å¸é¡¹ç›®è¿‡ç¨‹ä¸­é‡åˆ°ä¸€äº›éœ€è¦è¿›è¡Œæ›¿æ¢åŸæ¥æ–¹æ³•æƒ…å†µã€‚å°ç¼–å¯¹ &lt;code&gt;Objc&lt;/code&gt; åœ¨æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹æ•´ç†ï¼Œé’ˆå¯¹åœ¨æ¶ˆæ¯å‘é€å’Œè½¬å‘åœ¨ &lt;code&gt;runtime&lt;/code&gt; å±‚å®ç°å’Œæå‡ºçš„æ–¹æ³•æ›¿æ¢æ–¹æ¡ˆåŸç†åšå‡ºè¯¦ç»†è¯´æ˜å’Œè®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å°ç¼–æœ¬åšæ–‡çš„å†™ä½œæ€è·¯ï¼š&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-a56ae4460c575f24.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹æµç¨‹å›¾.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;iOS-æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹&quot;&gt;&lt;a href=&quot;#iOS-æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;iOS æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹&quot;&gt;&lt;/a&gt;iOS æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹&lt;/h2&gt;&lt;p&gt;æƒ³è¦å¯¹ç°æœ‰çš„ &lt;code&gt;Method&lt;/code&gt; è¿›è¡Œæ›¿æ¢æ‰¾åˆ°æ¯”è¾ƒå¯è¡Œçš„æ–¹æ¡ˆï¼Œå…¶ä¸€å¯ä»¥ä»æ–¹æ³•åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è€ƒè™‘ã€‚ä¸‹é¢å°ç¼–å°†æ•´ç†çš„æ¶ˆæ¯å‘é€å’Œè½¬å‘çš„è¯¦ç»†æ­¥éª¤è¿›è¡Œæ•´ç†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Objc-çš„åŠ¨æ€ç‰¹æ€§&quot;&gt;&lt;a href=&quot;#Objc-çš„åŠ¨æ€ç‰¹æ€§&quot; class=&quot;headerlink&quot; title=&quot;Objc çš„åŠ¨æ€ç‰¹æ€§&quot;&gt;&lt;/a&gt;Objc çš„åŠ¨æ€ç‰¹æ€§&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Objc&lt;/code&gt; æ˜¯åŸºäº &lt;code&gt;C&lt;/code&gt; å’Œ &lt;code&gt;Smalltalk&lt;/code&gt; ä¸ºåŸºç¡€å®ç°é¢å‘å¯¹è±¡å¼€å‘çš„åŠ¨æ€è¯­è¨€ï¼Œ&lt;code&gt;Objc&lt;/code&gt;å…·æœ‰ç‰¹è‰²ä¸€ç‚¹å°±æ˜¯é‡‡çº³äº† &lt;code&gt;Smalltalk&lt;/code&gt; è¯­è¨€æ¶ˆæ¯çš„ç‰¹æ€§ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨ &lt;code&gt;Objc&lt;/code&gt; ä¸­ç»å¸¸ä½¿ç”¨ &lt;code&gt;[receiver message]&lt;/code&gt; æ¥è¿›è¡Œæ¶ˆæ¯ä¼ é€’ã€‚&lt;code&gt;Objc&lt;/code&gt; çš„åŠ¨æ€è¯­è¨€çš„ç‰¹æ€§å¯ä»¥æ ¹æ® &lt;code&gt;NSObject&lt;/code&gt;æ–¹å¼ä¹‹ä¸€æ¥å®ç°äº¤äº’ï¼Œä¸‹é¢çœ‹ç›¸å…³ &lt;code&gt;API&lt;/code&gt; ï¼ˆä¸‹é¢å‡å¯è¿›è¡ŒåŠ¨æ€åˆ¤æ–­ï¼‰ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)description;&lt;span class=&quot;comment&quot;&gt;//éœ€è¦é‡è½½å¹¶ä¸ºå®šä¹‰çš„ç±»è¿›è¡Œæè¿°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)isKindOfClass:(Class)aClass;&lt;span class=&quot;comment&quot;&gt;//åˆ¤æ–­æ˜¯å¦æ˜¯åŒç§ç±»å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)isMemberOfClass:(Class)aClass;&lt;span class=&quot;comment&quot;&gt;//åˆ¤æ–­æ˜¯å¦æ˜¯ä¸€æ ·æˆå‘˜&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)respondsToSelector:(SEL)aSelector;&lt;span class=&quot;comment&quot;&gt;//æ£€æŸ¥å¯¹è±¡èƒ½å¦å‘ç›¸åº”æŒ‡å®šçš„æ¶ˆæ¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)conformsToProtocol:(Protocol *)aProtocol;&lt;span class=&quot;comment&quot;&gt;//æ£€æŸ¥å¯¹è±¡æ˜¯å¦å®ç°äº†æŒ‡å®šåè®®ç±»çš„æ–¹å‘&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (IMP)methodForSelector:(SEL)aSelector;&lt;span class=&quot;comment&quot;&gt;//è¿”å›æŒ‡å®šæ–¹æ³•å®ç°çš„åœ°å€&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹è°ƒç”¨çš„ API&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveClassMethod:(SEL)sel;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveInstanceMethod:(SEL)sel;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)forwardingTargetForSelector:(SEL)aSelector;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSMethodSignature&lt;/span&gt; *)methodSignatureForSelector:(SEL)aSelector;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)forwardInvocation:(&lt;span class=&quot;built_in&quot;&gt;NSInvocation&lt;/span&gt; *)anInvocation;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;iOS-æ¶ˆæ¯å‘é€è½¬å‘æœºåˆ¶&quot;&gt;&lt;a href=&quot;#iOS-æ¶ˆæ¯å‘é€è½¬å‘æœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;iOS æ¶ˆæ¯å‘é€è½¬å‘æœºåˆ¶&quot;&gt;&lt;/a&gt;iOS æ¶ˆæ¯å‘é€è½¬å‘æœºåˆ¶&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;code&gt;Objc&lt;/code&gt; ä½¿ç”¨ Foundation ä¸­ &lt;code&gt;NSObject&lt;/code&gt; ä¸­å®ç°åŠ¨æ€ç‰¹æ€§ä¸­ï¼Œä¸Šè¿°åˆ—å‡ºæ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹çš„è°ƒç”¨çš„ &lt;code&gt;API&lt;/code&gt;ã€‚åœ¨æ•´ä½“æ¶ˆæ¯ä»å‘é€è½¬å‘å¯ä»¥åˆ†ä¸ºä»¥ä¸‹ä¸‰ä¸ªæ—¶æ®µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åŠ¨æ€è§£æ&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿè½¬å‘&lt;/li&gt;
&lt;li&gt;æ…¢é€Ÿè½¬å‘&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹å›¾æ˜¯æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹ä¸‰ä¸ªæ—¶æ®µæµç¨‹ï¼Œåé¢ç»™å‡ºè¯¦ç»†è¯´æ˜ï¼š&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-1dbe544a1221fb36.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹æµç¨‹å›¾.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯åœ¨ iOS æ–¹æ³•è°ƒç”¨å®ç°ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æœªå®ç°æ–¹æ³•è°ƒç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; performSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(finishMessage)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ¶ˆæ¯å‘é€å’Œè½¬å‘&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveClassMethod:(SEL)sel &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; resolveClassMethod:sel];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveInstanceMethod:(SEL)sel &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; resolveInstanceMethod:sel];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)forwardingTargetForSelector:(SEL)aSelector &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; forwardingTargetForSelector:aSelector];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSMethodSignature&lt;/span&gt; *)methodSignatureForSelector:(SEL)aSelector &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMethodSignature&lt;/span&gt; *methodSignature = [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; methodSignatureForSelector:aSelector];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; methodSignature;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)forwardInvocation:(&lt;span class=&quot;built_in&quot;&gt;NSInvocation&lt;/span&gt; *)anInvocation &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°ç»“æœï¼š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//RuntimeDemo[13659:1331712] do method : resolveInstanceMethod:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//RuntimeDemo[13659:1331712] do method : resolveInstanceMethod:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//RuntimeDemo[13659:1331712] do method : forwardingTargetForSelector:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//RuntimeDemo[13659:1331712] do method : methodSignatureForSelector:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;åŠ¨æ€è§£æ&quot;&gt;&lt;a href=&quot;#åŠ¨æ€è§£æ&quot; class=&quot;headerlink&quot; title=&quot;åŠ¨æ€è§£æ&quot;&gt;&lt;/a&gt;åŠ¨æ€è§£æ&lt;/h4&gt;&lt;p&gt;å¦‚æœè¦å®ç°åŠ¨æ€è§£æå°±è¦ä½¿ç”¨ä¸‹é¢çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveClassMethod:(SEL)sel;&lt;span class=&quot;comment&quot;&gt;//è§£æç±»æ–¹æ³•é€‰æ‹©å­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveInstanceMethod:(SEL)sel;&lt;span class=&quot;comment&quot;&gt;//è§£æå®ä¾‹æ–¹æ³•é€‰æ‹©å­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å½“æˆ‘ä»¬åœ¨å®ç° &lt;code&gt;[receiver message]&lt;/code&gt; åœ¨æ²¡æœ‰ç›¸å…³å®ç°çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿå°±ä¼šæ²¿ç€ &lt;code&gt;resolveInstanceMethod:&lt;/code&gt; é¡ºç€ç»§æ‰¿å‘ä¸ŠæŸ¥æ‰¾ç›¸å…³ &lt;code&gt;message&lt;/code&gt; å®ç°æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰æ‰¾åˆ°ç›¸å…³å®ç°å°±ä¼šè¿”å› &lt;code&gt;NO&lt;/code&gt; è¿›è¡Œä¸‹ä¸€æ­¥æ“ä½œã€‚åœ¨è¿™ä¸ªè¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡åŠ¨æ€åŠ è½½çš„æ–¹å¼ï¼Œå®ç°æˆ‘ä»¬é¢„å…ˆå®ç°çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;åŠ¨æ€åŠ è½½å®ç°ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveInstanceMethod:(SEL)sel &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (sel_isEqual(sel, &lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(finishMessage))) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        class_addMethod([&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; class], &lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(finishMessage), (IMP)secondMessage, &lt;span class=&quot;string&quot;&gt;&quot;v@:&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; resolveInstanceMethod:sel];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; secondMessage(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, SEL _cmd) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°çš„ç»“æœ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;RuntimeDemo[&lt;span class=&quot;number&quot;&gt;14426&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;1422075&lt;/span&gt;] &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt; method : finishMessage&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä»æ‰“å°çš„ç»“æœæ¥çœ‹ï¼šæˆ‘ä»¬é€šè¿‡åŠ¨æ€åŠ è½½çš„æ–¹å¼å®ç°é¢„å…ˆæ–¹æ³•çš„è°ƒç”¨ã€‚ä½†æ˜¯åœ¨æ‰“å°ä¸­ &lt;code&gt;SEL&lt;/code&gt; è¿˜æ˜¯åŸæ¥çš„é€‰æ‹©å­ï¼Œåé¢ä¼šè®²è§£ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»ä¸Šé¢çš„è§£å†³æ–¹å¼å®ç°æ¥çœ‹ï¼Œä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´åŠ¨æ€è§£æä¸æ˜¯æ¶ˆæ¯çš„è½¬å‘ã€‚å› ä¸ºåœ¨æŒ‡å‘è¿‡ç¨‹ä¸­æ¶ˆæ¯çš„æ¥å—çš„å¯¹è±¡è¿˜æ˜¯ &lt;code&gt;receiver&lt;/code&gt;ï¼Œ åªæ˜¯æŠŠæŒ‡å‘ &lt;code&gt;message&lt;/code&gt; çš„ &lt;code&gt;IMP&lt;/code&gt; çš„æŒ‡é’ˆåŠ å…¥åˆ° &lt;code&gt;receiver&lt;/code&gt; çš„æ–¹æ³•åˆ—è¡¨ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å¿«é€Ÿè½¬å‘&quot;&gt;&lt;a href=&quot;#å¿«é€Ÿè½¬å‘&quot; class=&quot;headerlink&quot; title=&quot;å¿«é€Ÿè½¬å‘&quot;&gt;&lt;/a&gt;å¿«é€Ÿè½¬å‘&lt;/h4&gt;&lt;p&gt;å¿«é€Ÿè½¬å‘ç›¸å½“äºæˆ‘ä»¬åœ¨è¯·æ±‚ç½‘é¡µæ˜¯é‡æ–°å®šå‘ã€‚&lt;code&gt;receiver&lt;/code&gt; å¯¹è±¡å’Œå…¶ç»§æ‰¿çˆ¶ç±»æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„å®ç°æ–¹æ³•ï¼Œè€ŒæŠŠå®ç°çš„è½¬å‘å…¶ä»–çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;å¿«é€Ÿè½¬å‘å®ç°ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//é‡å®šå‘çš„å®ç°ç±»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;FarwardTarget&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;NSObject&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)finishMessage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;FarwardTarget&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)finishMessage &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å¿«é€Ÿè½¬å‘&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)forwardingTargetForSelector:(SEL)aSelector &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//    return [[FarwardTarget alloc] init];&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Class class = &lt;span class=&quot;built_in&quot;&gt;NSClassFromString&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;FarwardTarget&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSObject&lt;/span&gt; *object = class.new;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (sel_isEqual(aSelector, &lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(finishMessage))) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; object;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°ç»“æœ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//RuntimeDemo[15791:1601823] do method : forwardingTargetForSelector:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//RuntimeDemo[15791:1601823] do method : finishMessage&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æ›´å…·ä¸Šé¢æ‰“å°çš„ç»“æœï¼šçœ‹å‡ºå¿«é€Ÿè½¬å‘å¯ä»¥å®ç°å½“å‰ &lt;code&gt;receiver&lt;/code&gt; æ–¹æ³•åˆ—è¡¨æ‰¾ä¸åˆ°ç›¸å…³çš„ &lt;code&gt;message&lt;/code&gt; çš„ &lt;code&gt;IMP&lt;/code&gt;ï¼Œå¯ä»¥é€šè¿‡åˆ¶å®šå…¶ä»–çš„å¯¹è±¡æ¥è¿›è¡Œå®ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;æ…¢é€Ÿè½¬å‘&quot;&gt;&lt;a href=&quot;#æ…¢é€Ÿè½¬å‘&quot; class=&quot;headerlink&quot; title=&quot;æ…¢é€Ÿè½¬å‘&quot;&gt;&lt;/a&gt;æ…¢é€Ÿè½¬å‘&lt;/h4&gt;&lt;p&gt;æ…¢é€Ÿè½¬å‘è¿‡ç¨‹ä¸­ä½¿ç”¨ä¸¤ä¸ªå¯¹è±¡ï¼š&lt;code&gt;NSMethodSignature&lt;/code&gt; å’Œ &lt;code&gt;NSInvocation&lt;/code&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSMethodSignature&lt;/code&gt;: å¯¹è±¡å®šä¹‰äº†æ–¹æ³•çš„ç­¾åï¼Œç­¾åä¸­åŒ…å«ï¼šæ–¹æ³•çš„å‚æ•°å’Œè¿”å›å€¼ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSInvocation&lt;/code&gt;: ä¿å­˜äº†ç›®æ ‡ã€é€‰ç€å­å’Œå‚æ•°ç­‰æ¶ˆæ¯è°ƒç”¨çš„å¿…é¡»çš„å…¨éƒ¨å…ƒç´ ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨è½¬å‘è¿‡ç¨‹ä¸­è¦æ˜¯åˆ°åˆ°ä¸‹é¢ &lt;code&gt;API&lt;/code&gt;:&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSMethodSignature&lt;/span&gt; *)methodSignatureForSelector:(SEL)aSelector;&lt;span class=&quot;comment&quot;&gt;//åœ¨åè®®ä¸­å®ç°ï¼Œè¿”å›ç›¸å…³çš„æ–¹æ³•ç­¾å&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)forwardInvocation:(&lt;span class=&quot;built_in&quot;&gt;NSInvocation&lt;/span&gt; *)anInvocation;&lt;span class=&quot;comment&quot;&gt;//è¿›è¡Œæ¶ˆæ¯çš„å§”æ´¾&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)invokeWithTarget:(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)anObject;&lt;span class=&quot;comment&quot;&gt;//å”¤é†’æ¥å—è€…çš„åŒåæ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)doesNotRecognizeSelector:(SEL)aSelector;&lt;span class=&quot;comment&quot;&gt;//ä¸èƒ½è¯†åˆ«æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢å…ˆç›´æ¥æŠŠæ…¢é€Ÿè½¬å‘çš„ä»£ç åˆ—å‡ºæ¥ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//é‡å®šå‘çš„å®ç°ç±»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;FarwardTarget&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;NSObject&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)finishMessage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;FarwardTarget&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)finishMessage &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ…¢é€Ÿè½¬å‘å®ç°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSMethodSignature&lt;/span&gt; *)methodSignatureForSelector:(SEL)aSelector &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (sel_isEqual(aSelector, &lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(finishMessage))) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºæ–°çš„æ–¹æ³•ç­¾å&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSMethodSignature&lt;/span&gt; *methodSignature = [&lt;span class=&quot;built_in&quot;&gt;NSMethodSignature&lt;/span&gt; signatureWithObjCTypes:&lt;span class=&quot;string&quot;&gt;&quot;v@:&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; methodSignature;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; methodSignatureForSelector:aSelector];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)forwardInvocation:(&lt;span class=&quot;built_in&quot;&gt;NSInvocation&lt;/span&gt; *)anInvocation &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;do method : %@&quot;&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(_cmd));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FarwardTarget *target = [[FarwardTarget alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([target respondsToSelector:anInvocation.selector]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//å”¤é†’æ¥å—è€…çš„åŒåæ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [anInvocation invokeWithTarget:target];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; doesNotRecognizeSelector:anInvocation.selector];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°ç»“æœï¼š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//RuntimeDemo[16564:1706397] do method : forwardInvocation:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//RuntimeDemo[16564:1706397] do method : finishMessage&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;å¿«é€Ÿè½¬å‘å¤±è´¥åï¼Œè¿è¡Œæ—¶ç³»ç»Ÿå…ˆè°ƒç”¨ &lt;code&gt;methodSignatureForSelector:&lt;/code&gt; è¿”å›ä¸€ä¸ªæ–¹æ³•ç­¾åç”¨äºåˆ›å»º &lt;code&gt;NSInvocation&lt;/code&gt; å¯¹è±¡ï¼Œåˆ›å»ºå¥½åè°ƒç”¨ &lt;code&gt;forwardInvocation:&lt;/code&gt; æ–¹æ³•ï¼Œåœ¨æ”¹æ–¹æ³•ä¸­ &lt;code&gt;NSInvocation&lt;/code&gt; å¯¹è±¡å°†è°ƒç”¨ &lt;code&gt;invokeWithTarget:&lt;/code&gt; æ–¹æ³•å”¤é†’æ–°æ¥å—è€…ä¸­çš„åŒåæ–¹æ³•ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;iOS-å‘é€å’Œè½¬å‘å°ç»“&quot;&gt;&lt;a href=&quot;#iOS-å‘é€å’Œè½¬å‘å°ç»“&quot; class=&quot;headerlink&quot; title=&quot;iOS å‘é€å’Œè½¬å‘å°ç»“&quot;&gt;&lt;/a&gt;iOS å‘é€å’Œè½¬å‘å°ç»“&lt;/h3&gt;&lt;p&gt;åœ¨æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹ä¸­æ²¡æœ‰å‘ç°å®ç° &lt;code&gt;message&lt;/code&gt; çš„ &lt;code&gt;IMP&lt;/code&gt; è¿‡ç¨‹ä¸­ä¸‰æ­¥éª¤ä¸­å‡å¯ä»¥å®ç°ç›¸å…³çš„æ¶ˆæ¯æ·»åŠ ï¼Œä¹Ÿå¯ä»¥åœ¨ä¸‰è€…ä¸­è¿›è¡Œç›¸å…³çš„æ–¹æ³•æ›¿æ¢ã€‚&lt;/p&gt;
&lt;p&gt;ä½†æ˜¯ä¸‰è€…ä¹‹é—´è¿˜æ˜¯æœ‰å„è‡ªçš„ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;åŠ¨æ€è§£æ : é€‚ç”¨äºå°†åŸæ¥çš„ç±»ä¸­çš„æ–¹æ³•æ›¿æ¢æ‰æˆ–è€…å»¶è¿ŸåŠ è½½ã€‚&lt;/li&gt;
&lt;li&gt;å¿«é€Ÿè½¬å‘ : å¯ä»¥å°†æ¶ˆæ¯å¤„ç†è½¬å‘ç»™å…¶ä»–å¯¹è±¡ï¼Œä½¿ç”¨èŒƒå›´æ›´å¹¿ï¼Œä¸åªæ˜¯é™äºåŸæ¥çš„å¯¹è±¡ã€‚&lt;/li&gt;
&lt;li&gt;æ…¢é€Ÿè½¬å‘ : è·Ÿå¿«è½¬å‘ä¸€æ ·å¯ä»¥æ¶ˆæ¯è½¬å‘ï¼Œä½†å®ƒèƒ½é€šè¿‡NSInvocationå¯¹è±¡è·å–æ›´å¤šæ¶ˆæ¯å‘é€çš„ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼štargetã€selectorã€argumentså’Œè¿”å›å€¼ç­‰ä¿¡æ¯ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;iOS-æ¶ˆæ¯-runtime-å±‚å®ç°è¿‡ç¨‹&quot;&gt;&lt;a href=&quot;#iOS-æ¶ˆæ¯-runtime-å±‚å®ç°è¿‡ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;iOS æ¶ˆæ¯ runtime å±‚å®ç°è¿‡ç¨‹&quot;&gt;&lt;/a&gt;iOS æ¶ˆæ¯ runtime å±‚å®ç°è¿‡ç¨‹&lt;/h2&gt;&lt;p&gt;å°ç¼–åœ¨ iOS æ¶ˆæ¯å‘é€å’Œè½¬å‘æ ¹æ® &lt;code&gt;NSObject&lt;/code&gt; æ–¹é¢è®²è¿° &lt;code&gt;[receiver message]&lt;/code&gt; æ¶ˆæ¯è°ƒç”¨å¤„ç†ï¼Œä½†æ˜¯åœ¨ &lt;code&gt;runtime&lt;/code&gt; å±‚åœ¨æ€æ ·æƒ…å½¢å‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;&lt;code&gt;[receiver message]&lt;/code&gt; è¿™å¥çš„å«ä¹‰æ˜¯ï¼šå‘ &lt;code&gt;receiver&lt;/code&gt; å‘é€åä¸º &lt;code&gt;message&lt;/code&gt; çš„æ¶ˆæ¯ã€‚&lt;/p&gt;
&lt;p&gt;æ‰“å¼€&lt;a href=&quot;https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/objc_msgSend&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¼€å‘æ–‡æ¡£&lt;/a&gt;(åœ¨ &lt;code&gt;objc/message.h&lt;/code&gt; ä¸­)&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[receiver message];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ˜¯ä¸‹é¢çš„è¡¨ç¤ºæ–¹å¼ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//objc_msgSend(self, Selector);//åŸºæœ¬è¡¨ç¤ºæ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;objc_msgSend(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, message);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…¶ä¸­ &lt;code&gt;objc_msgSend&lt;/code&gt; çš„çœŸæ­£å®ç°ä»£ç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;objc_msgSend(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; _Nullable &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, SEL _Nonnull op, ...);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;å°ç¼–ä¸‹é¢ç®€å•çš„ä»‹ç»ä¸‹ &lt;code&gt;objc_msgSend&lt;/code&gt; ä¸­çš„å‚æ•°å’Œå¦‚ä½•ä½¿ç”¨ &lt;code&gt;runtime&lt;/code&gt; å®ç°æ–¹æ³•æ›¿æ¢ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;id&quot;&gt;&lt;a href=&quot;#id&quot; class=&quot;headerlink&quot; title=&quot;id&quot;&gt;&lt;/a&gt;id&lt;/h3&gt;&lt;p&gt;ä¸Šé¢åœ¨ &lt;code&gt;objc_msgSend&lt;/code&gt; ä¸­çš„ç¬¬ä¸€å‚æ•° &lt;code&gt;id&lt;/code&gt;ã€‚ å°ç¼–è®¤ä¸ºå¯¹äº &lt;code&gt;id&lt;/code&gt; ç”¨è¯¥ä¸ä¼šé™Œç”Ÿï¼Œ&lt;code&gt;id&lt;/code&gt; æ˜¯æŒ‡å‘ç±»å®ä¾‹ä¸€ä¸ªæŒ‡é’ˆã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_object *&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;``` &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;`Objc_object` ä¼šæ˜¯ä»€ä¹ˆæ ·ç±»å‹å‘¢ï¼Ÿ [æ–‡æ¡£](https:&lt;span class=&quot;comment&quot;&gt;//opensource.apple.com/source/objc4/objc4-709/runtime/objc-private.h.auto.html)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;```objc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_object &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;private:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    isa_t isa;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;public:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ISA() assumes this is NOT a tagged pointer object&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Class ISA();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// getIsa() allows this to be a tagged pointer object&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Class getIsa();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//çœç•¥ ...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;Objc_object&lt;/code&gt;ä¸­åŒ…å«ä¸€ä¸ª &lt;code&gt;isa&lt;/code&gt; çš„æŒ‡é’ˆï¼Œ &lt;code&gt;isa&lt;/code&gt; æ˜¯ &lt;code&gt;isa_t&lt;/code&gt; çš„è”åˆä½“ã€‚æ ¹æ® &lt;code&gt;isa&lt;/code&gt; æŒ‡é’ˆå¯ä»¥è·å–å¯¹è±¡æ‰€å±çš„ç±»ã€‚&lt;/p&gt;
&lt;h3 id=&quot;SEL&quot;&gt;&lt;a href=&quot;#SEL&quot; class=&quot;headerlink&quot; title=&quot;SEL&quot;&gt;&lt;/a&gt;SEL&lt;/h3&gt;&lt;p&gt;&lt;code&gt;objc_msgSend&lt;/code&gt; ä¸­çš„ç¬¬äºŒä¸ªå‚æ•° &lt;code&gt;SEL&lt;/code&gt;ï¼Œåœ¨ &lt;code&gt;Objc&lt;/code&gt; ä¸­å˜ç°ä¸º &lt;code&gt;selector&lt;/code&gt;ã€‚&lt;code&gt;selector&lt;/code&gt;æ˜¯æ–¹æ³•çš„é€‰æ‹©å™¨ï¼Œå¯ä»¥è§†ä½œç³»ç»Ÿç”¨æ¥åŒºåˆ†æ–¹æ³•çš„ &lt;code&gt;ID&lt;/code&gt;ï¼Œè€Œæ­¤ &lt;code&gt;ID&lt;/code&gt; çš„ç±»å‹ä¸º &lt;code&gt;SEL&lt;/code&gt;ç»“æ„ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_selector *SEL;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æœ€æœ¬è´¨çš„å°±æ˜¯ &lt;code&gt;SEL&lt;/code&gt; å°±æ˜¯æ˜ å°„æ–¹æ³•çš„å­—ç¬¦ä¸²ï¼Œå°ç¼–è®°å¾—å¯ä»¥åœ¨ &lt;code&gt;objc&lt;/code&gt; ä¸­ &lt;code&gt;@selector()&lt;/code&gt; å’Œ &lt;code&gt;runtime&lt;/code&gt; ä¸­çš„ &lt;code&gt;objc_registerName&lt;/code&gt; æ¥è·å–æ–¹æ³•é€‰ç€å™¨ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šåœ¨ä¸åŒç±»ä¸­æ–¹æ³•åç›¸åŒçš„ &lt;code&gt;SEL&lt;/code&gt; ç›¸åŒï¼Œåœ¨åŒä¸€ä¸ªç±»ä¸­çš„æ–¹æ³•åç›¸åŒå‚æ•°ä¸åŒçš„ &lt;code&gt;SEL&lt;/code&gt; ç›¸åŒã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;åŠ¨æ€å®ç°æ–¹æ³•æ›¿æ¢&quot;&gt;&lt;a href=&quot;#åŠ¨æ€å®ç°æ–¹æ³•æ›¿æ¢&quot; class=&quot;headerlink&quot; title=&quot;åŠ¨æ€å®ç°æ–¹æ³•æ›¿æ¢&quot;&gt;&lt;/a&gt;åŠ¨æ€å®ç°æ–¹æ³•æ›¿æ¢&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)swapMethods &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//è·å–è¦æ›¿æ¢çš„æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Method oldMethod = class_getInstanceMethod([&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; class], &lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(finishMessage));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!oldMethod) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//è·å–ç”¨æ¥æ›¿æ¢çš„æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Method newMethod = class_getInstanceMethod([&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; class], &lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(secondMessage));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!newMethod) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//æŠŠä¸¤è€…æ–¹æ³•è¿›è¡Œæ›¿æ¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    method_exchangeImplementations(oldMethod, newMethod);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢æ˜¯ä½¿ç”¨ &lt;code&gt;runtime&lt;/code&gt; çš„å½¢å¼ç”¨æ–°çš„æ–¹æ³•æ›¿æ¢æ‰åŸæ¥çš„æ–¹æ³•ï¼Œå…¶ä¸­ä½¿ç”¨åˆ°çš„çŸ¥è¯†ä¼šåœ¨ &lt;code&gt;runtime&lt;/code&gt; è¯¦è§£ä¸­è§£æè®²è§£ã€‚&lt;/p&gt;
&lt;h2 id=&quot;æå‡ºæ›¿æ¢æ–¹æ¡ˆ&quot;&gt;&lt;a href=&quot;#æå‡ºæ›¿æ¢æ–¹æ¡ˆ&quot; class=&quot;headerlink&quot; title=&quot;æå‡ºæ›¿æ¢æ–¹æ¡ˆ&quot;&gt;&lt;/a&gt;æå‡ºæ›¿æ¢æ–¹æ¡ˆ&lt;/h2&gt;&lt;p&gt;åœ¨æ›¿æ¢æ–¹æ³•æ–¹æ¡ˆä¸­ï¼Œç›®å‰æœ‰ 4 ç§ï¼š    &lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;åœ¨æ¶ˆæ¯åŠ¨æ€è§£æä¸­æ›¿æ¢æ–¹å¼ ï¼šåŠ¨æ€è§£ææ›¿æ¢çš„åŸºç¡€æ˜¯æ²¡æœ‰æ‰¾åˆ°å®ç°æ–‡ä»¶ï¼Œéœ€è¦å¯¹å®ç°è¿›è¡Œå±è”½&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;runtime&lt;/code&gt; å®ç°åŠ¨æ€åŠ è½½æ›¿æ¢æ–¹å¼ ï¼šéœ€è¦ä¿®æ”¹åŸæ¥æ–¹æ³•çš„åå­—æˆ–è€…ä¿®æ”¹å‚æ•°&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨å­ç±»ç»§æ‰¿çš„æ–¹å¼ ï¼šä¸éœ€è¦ä¿®æ”¹ä»»ä½•ä¿¡æ¯ï¼Œä½†æ˜¯å¦‚æœåœ¨æœ‰å­ç±»æƒ…å†µä¸‹æ”¹åŠ¨æ¯”è¾ƒéº»çƒ¦&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;Category&lt;/code&gt; æ–¹å¼ ï¼šä¸éœ€è¦æ”¹åŠ¨åå­—å’Œå‚æ•°ï¼Œä½†æ˜¯ä¼šå¼•å…¥æ–°çš„æ–‡ä»¶æ•°ç›®&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;å°ç»“&quot;&gt;&lt;a href=&quot;#å°ç»“&quot; class=&quot;headerlink&quot; title=&quot;å°ç»“&quot;&gt;&lt;/a&gt;å°ç»“&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;åœ¨æ›¿æ¢æ–¹æ³•è¿‡ç¨‹ä¸­è¦æ ¹æ®å…·ä½“çš„æƒ…æ™¯æ¥è¿›è¡Œé€‰æ‹©åˆé€‚çš„æ›¿æ¢æ–¹å¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://mikeash.com/pyblog/friday-qa-2009-03-27-objective-c-message-forwarding.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Message forwarding&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.mikeash.com/pyblog/friday-qa-2009-03-20-objective-c-messaging.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Objective-c-messaging&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.mulle-kybernetik.com/artikel/Optimization/opti-9.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;The faster objc_msgSend&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://cocoasamurai.blogspot.com/2010/01/understanding-objective-c-runtime.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Understanding objective-c runtime&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://opensource.apple.com/source/objc4/objc4-709/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;objc4/objc4-709&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://opensource.apple.com/source/objc4/objc4-709/runtime/objc-private.h.auto.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;objc-private.h&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;æ€»æ¦‚&quot;&gt;&lt;a href=&quot;#æ€»æ¦‚&quot; class=&quot;headerlink&quot; title=&quot;æ€»æ¦‚&quot;&gt;&lt;/a&gt;æ€»æ¦‚&lt;/h2&gt;&lt;p&gt;åœ¨åšå…¬å¸é¡¹ç›®è¿‡ç¨‹ä¸­é‡åˆ°ä¸€äº›éœ€è¦è¿›è¡Œæ›¿æ¢åŸæ¥æ–¹æ³•æƒ…å†µã€‚å°ç¼–å¯¹ &lt;code&gt;Objc&lt;/code&gt; åœ¨æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹æ•´ç†ï¼Œé’ˆå¯¹åœ¨æ¶ˆæ¯å‘é€å’Œè½¬å‘åœ¨ &lt;code&gt;runtime&lt;/code&gt; å±‚å®ç°å’Œæå‡ºçš„æ–¹æ³•æ›¿æ¢æ–¹æ¡ˆåŸç†åšå‡ºè¯¦ç»†è¯´æ˜å’Œè®°å½•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å°ç¼–æœ¬åšæ–‡çš„å†™ä½œæ€è·¯ï¼š&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-a56ae4460c575f24.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS æ¶ˆæ¯å‘é€å’Œè½¬å‘è¿‡ç¨‹æµç¨‹å›¾.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS Catergory &amp; Extension(ç±»ç›®å’Œç±»æ‹“å±•)</title>
    <link href="http://yoursite.com/2017/01/25/iOS%20Categroy%20%20&%20Extension(%E7%B1%BB%E7%9B%AE%E5%92%8C%E7%B1%BB%E6%8B%93%E5%B1%95)/"/>
    <id>http://yoursite.com/2017/01/25/iOS Categroy  & Extension(ç±»ç›®å’Œç±»æ‹“å±•)/</id>
    <published>2017-01-25T09:42:32.000Z</published>
    <updated>2017-08-23T16:09:59.000Z</updated>
    
    <content type="html">&lt;p&gt;å°ç¼–åœ¨åš iOS å¼€å‘è¿‡ç¨‹ä¸­æœ‰æ—¶ä¼šé‡åˆ°æƒ³è¦å¯¹ç°æœ‰çš„ç±»æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œæˆ–è€…æ˜¯è¦†ç›–æ›¿æ¢åŸæ¥æ–¹æ³•æƒ…å†µã€‚ä¹Ÿåœ¨æœ‰çš„æƒ…å†µæˆ‘ä»¬åœ¨ç±»å®ç°è¿‡ç¨‹ä¸­æƒ³è¦éšè—ä¸€äº›æ–¹æ³•å’Œå±æ€§æƒ…å†µã€‚&lt;br&gt;æ‰€ä»¥å°±å¯¹å®ç°ä¸€äº›æ³¨æ„åšä¸‹æ•´ç†ï¼š&lt;/p&gt;
&lt;p&gt;Category : è¿è¡ŒæœŸå†³è®®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥æŠŠç±»å®ç°åˆ†åœ¨ä¸åŒç±»ä¸­å®ç°ã€‚è¿™æ ·åšæœ‰å‡ ä¸ªä¼˜ç‚¹ï¼š1ï¼‰å¯ä»¥å‡å°‘å•ä¸ªç±»çš„ä½“ç§¯ 2ï¼‰å¯ä»¥æŠŠä¸åŒçš„åŠŸèƒ½æ”¾åœ¨ä¸åŒçš„ &lt;code&gt;Category&lt;/code&gt; è¿›è¡Œå®ç° 3ï¼‰å¯ä»¥å¤šäººåŒæ—¶å¼€å‘ä¸€ä¸ªç±» 4ï¼‰å¯ä»¥æ›´å…·å…·ä½“çš„éœ€è¦å®ç° &lt;code&gt;Category&lt;/code&gt; åŠ è½½ç­‰&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ·»åŠ ç§æœ‰æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Extension : ç¼–è¯‘å™¨å†³è®®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥æ·»åŠ ä¸æƒ³è¦æš´éœ²çš„ç±»ç§æœ‰æ–¹æ³•&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ·»åŠ ç±»å±æ€§å’Œç±»å®ä¾‹å˜é‡&lt;/li&gt;
&lt;/ul&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Category-å’Œ-Extension-å¯¹æ¯”&quot;&gt;&lt;a href=&quot;#Category-å’Œ-Extension-å¯¹æ¯”&quot; class=&quot;headerlink&quot; title=&quot;Category å’Œ Extension å¯¹æ¯”&quot;&gt;&lt;/a&gt;Category å’Œ Extension å¯¹æ¯”&lt;/h2&gt;&lt;h3 id=&quot;Category-å’Œ-Extension-åŒºåˆ«&quot;&gt;&lt;a href=&quot;#Category-å’Œ-Extension-åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;Category å’Œ Extension åŒºåˆ«&quot;&gt;&lt;/a&gt;&lt;code&gt;Category&lt;/code&gt; å’Œ &lt;code&gt;Extension&lt;/code&gt; åŒºåˆ«&lt;/h3&gt;&lt;p&gt;Category(ç±»ç›®)å’ŒExtension(ç±»æ‹“å±•)æœ‰å¾ˆå¤§çš„åŒºåˆ«ã€‚ &lt;/p&gt;
&lt;p&gt;&lt;code&gt;Category&lt;/code&gt; åœ¨è¿è¡ŒæœŸå†³å®šï¼Œä¸èƒ½å¯¹å…¶è¿›è¡Œæ·»åŠ å®ä¾‹å˜é‡(å› ä¸ºåœ¨ç¼–è¯‘å™¨å·²ç»å†³å®šå½“å‰å†…å­˜ç»“æ„ï¼Œå¦‚æœå¯ä»¥æ·»åŠ å®ä¾‹å˜é‡å°±ä¼šé€ æˆå½“å‰ç±»å¸ƒå±€æ”¹å˜)ã€‚ä½†æ˜¯å¯ä»¥å¯¹ç°æœ‰çš„ç±»è¿›è¡Œæ·»åŠ ç±»ç›®ã€‚&lt;code&gt;SDWebImage&lt;/code&gt; ä¸­å°±æœ‰å¤§é‡çš„ä½¿ç”¨ã€‚&lt;br&gt;&lt;code&gt;Extension&lt;/code&gt; å¯ä»¥çœ‹ä½œæ˜¯æ²¡æœ‰åå­—çš„ &lt;code&gt;Category&lt;/code&gt;ï¼Œä½†æ˜¯ä¸¤è€…è¿˜æ˜¯ç”±æœ¬è´¨çš„åŒºåˆ«ã€‚&lt;code&gt;Extension&lt;/code&gt; æ˜¯åœ¨ç¼–è¯‘å™¨å°±å·²ç»å†³å®šçš„ï¼Œè€Œä¸”å’Œ &lt;code&gt;interface&lt;/code&gt; ã€ &lt;code&gt;implement&lt;/code&gt; å…±åŒç»„æˆç±»çš„ä¸€éƒ¨åˆ†ï¼Œä¸‰è€…åŒæ—¶åœ¨ç¼–è¯‘å™¨å†³å®šå¹¶ä¸”ä¸€èµ·æ¶ˆäº¡ã€‚æ‰€ä»¥å¯¹ &lt;code&gt;iOS&lt;/code&gt; ä¸­å·²ç»å­˜åœ¨çš„å®ç°ç±»ä¸èƒ½è¿›è¡Œæ·»åŠ  &lt;code&gt;Estension&lt;/code&gt; çš„æ‹“å±•ã€‚æ³¨ï¼šä¸»è¦ä½œç”¨æ˜¯éšè—ç±»çš„ä¸€äº›ç›¸å…³ä¿¡æ¯ã€‚&lt;a href=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒ&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Category-å’Œ-Extension-å…·ä½“å®ç°&quot;&gt;&lt;a href=&quot;#Category-å’Œ-Extension-å…·ä½“å®ç°&quot; class=&quot;headerlink&quot; title=&quot;Category å’Œ Extension å…·ä½“å®ç°&quot;&gt;&lt;/a&gt;&lt;code&gt;Category&lt;/code&gt; å’Œ &lt;code&gt;Extension&lt;/code&gt; å…·ä½“å®ç°&lt;/h3&gt;&lt;p&gt;1ï¼‰&lt;code&gt;Category&lt;/code&gt; çš„å®ç°&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯å¯¹ &lt;code&gt;NSString&lt;/code&gt; æ·»åŠ ç±»ç›®ï¼Œä¸‹é¢ä»¥ &lt;code&gt;NSString+Configuration&lt;/code&gt; ç±»ç›®å±•ç¤º:&lt;/p&gt;
&lt;p&gt; &lt;code&gt;NSString+Configuration.h&lt;/code&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#import &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;Foundation/Foundation.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NSString&lt;/span&gt; (&lt;span class=&quot;title&quot;&gt;Configuration&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@property&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;strong&lt;/span&gt; ,&lt;span class=&quot;keyword&quot;&gt;nonatomic&lt;/span&gt;) &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *name;&lt;span class=&quot;comment&quot;&gt;//æ·»åŠ å±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)configuration;&lt;span class=&quot;comment&quot;&gt;//æ·»åŠ ç±»æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)configurationWithName:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)name;&lt;span class=&quot;comment&quot;&gt;//æ·»åŠ å®ä¾‹æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;NSString+Configuration.m&lt;/code&gt;å®ç°æ–‡ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#import &lt;span class=&quot;meta-string&quot;&gt;&quot;NSString+Configuration.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NSString&lt;/span&gt; (&lt;span class=&quot;title&quot;&gt;Configuration&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@dynamic&lt;/span&gt; name;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)configuration &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)configurationWithName:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)name &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2ï¼‰&lt;code&gt;Extension&lt;/code&gt; çš„å…·ä½“å®ç°ï¼Œä¸‹é¢ä»¥ &lt;code&gt;Person&lt;/code&gt;ç±»ï¼š &lt;/p&gt;
&lt;p&gt;&lt;code&gt;Person.h&lt;/code&gt; æ–‡ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#import &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;Foundation/Foundation.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Person&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;NSObject&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;Person.m&lt;/code&gt;æ–‡ä»¶&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Person&lt;/span&gt; ()&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åœ¨è¿™é‡Œå¯ä»¥æ·»åŠ éšè—ï¼šå®ä¾‹å˜é‡ã€å®ä¾‹æ–¹æ³•ã€å±æ€§å’Œç±»æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Person&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h2 id=&quot;Category-çœŸé¢ç›®&quot;&gt;&lt;a href=&quot;#Category-çœŸé¢ç›®&quot; class=&quot;headerlink&quot; title=&quot;Category çœŸé¢ç›®&quot;&gt;&lt;/a&gt;Category çœŸé¢ç›®&lt;/h2&gt;&lt;p&gt;å¦‚æœå¯¹ &lt;code&gt;runtime&lt;/code&gt; æœ‰æ‰€äº†è§£ï¼Œå¯ä»¥çŸ¥é“ OC çš„å¾ˆå¤šæ˜¯åœ¨ &lt;code&gt;struct&lt;/code&gt; çš„åŸºç¡€ä¸Šå®Œæˆçš„ã€‚ &lt;code&gt;Category_t&lt;/code&gt; åœ¨ &lt;code&gt;struct&lt;/code&gt; çš„ç»“æ„ä¸Šå¦‚ä¸‹(åœ¨&lt;a href=&quot;https://opensource.apple.com/source/objc4/objc4-709/runtime/objc-runtime-new.h.auto.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;objc_runtime_new.h&lt;/code&gt;&lt;/a&gt;ä¸­)ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;struct category_t &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    const char *name;//Category åå­—&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    classref_t cls;//ç±»&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct method_list_t *instanceMethods;//å®ä¾‹æ–¹æ³•&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct method_list_t *classMethods;//ç±»æ–¹æ³•&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct protocol_list_t *protocols;//åè®®&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct property_list_t *instanceProperties;//ç±»å±æ€§&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    // Fields below this point are not always present on disk.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct property_list_t *_classProperties;//&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    method_list_t *methodsForMeta(bool isMeta) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (isMeta) return classMethods;//è¿”å›ç±»æ–¹æ³•&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        else return instanceMethods;//è¿”å›å®ä¾‹æ–¹æ³•&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    property_list_t *propertiesForMeta(bool isMeta, struct header_info *hi);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ç”±ä¸Šé¢å¯ä»¥çœ‹å‡ºï¼š&lt;code&gt;Category&lt;/code&gt; é‡Œé¢å¯ä»¥æ·»åŠ å®ä¾‹æ–¹æ³•ã€ç±»æ–¹æ³•ã€åè®®å’Œç±»å±æ€§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ³¨é‡Šï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨ &lt;code&gt;Category&lt;/code&gt; ä¸­æ·»åŠ çš„æ–¹æ³•ä¼šæ”¾åœ¨åŸæ¥ç±»æ–¹æ³•çš„å‰é¢ï¼Œåœ¨è°ƒç”¨æ–¹æ³•è¿‡ç¨‹ä¸­ä¼šè°ƒç”¨å‰é¢æ–¹æ³•ï¼Œå°±ä¼šå½¢æˆè¢«ç±»è¢«&lt;code&gt;è¦†ç›–&lt;/code&gt;çš„ç°è±¡ã€‚åŸå› æ˜¯åœ¨è°ƒç”¨ç±»çš„è¿‡ç¨‹ä¸­å¯»æ‰¾è°ƒç”¨æ–¹æ³•æ˜¯ä»ä¸Šåˆ°ä¸‹ç±»è¿›è¡ŒæŸ¥æ‰¾çš„ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;è°ƒç”¨-Category-è¦†ç›–çš„æ–¹æ³•&quot;&gt;&lt;a href=&quot;#è°ƒç”¨-Category-è¦†ç›–çš„æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;è°ƒç”¨ Category è¦†ç›–çš„æ–¹æ³•&quot;&gt;&lt;/a&gt;è°ƒç”¨ &lt;code&gt;Category&lt;/code&gt; è¦†ç›–çš„æ–¹æ³•&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;code&gt;Category&lt;/code&gt; è¦†ç›–çš„æ–¹æ³•ï¼Œæ˜¯åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­ç”±äºè°ƒç”¨å‰é¢çš„æ–¹æ³•è€Œé€ æˆç›¸å…³æ–¹æ³•çš„è¦†ç›–ã€‚æˆ‘ä»¬å¯ä»¥åœ¨è°ƒç”¨å‰æŠŠ &lt;code&gt;Category&lt;/code&gt; çš„æ–¹æ³•è·³è¿‡ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Class currentClass = [Person class];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;MyClass *my = [[Person alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (currentClass) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; methodCount;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Method *methodList = class_copyMethodList(currentClass, &amp;amp;methodCount);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    IMP lastImp = &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SEL lastSel = &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; methodCount; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Method method = methodList[i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *methodName = [&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; stringWithCString:sel_getName(method_getName(method)) &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                        encoding:&lt;span class=&quot;built_in&quot;&gt;NSUTF8StringEncoding&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;string&quot;&gt;@&quot;printName&quot;&lt;/span&gt; isEqualToString:methodName]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            lastImp = method_getImplementation(method);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            lastSel = method_getName(method);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; (*fn)(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;,SEL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (lastImp != &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        fn f = (fn)lastImp;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        f(my,lastSel);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    free(methodList);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;Category-æ·»åŠ å…³è”å¯¹è±¡&quot;&gt;&lt;a href=&quot;#Category-æ·»åŠ å…³è”å¯¹è±¡&quot; class=&quot;headerlink&quot; title=&quot;Category æ·»åŠ å…³è”å¯¹è±¡&quot;&gt;&lt;/a&gt;&lt;code&gt;Category&lt;/code&gt; æ·»åŠ å…³è”å¯¹è±¡&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Category&lt;/code&gt; ä¸­ä¸èƒ½æ·»åŠ ç±»çš„å˜é‡ã€‚ä½†æˆ‘ä»¬é€šå¸¸éœ€è¦æ·»åŠ å…³è”å¯¹è±¡çš„å€¼ï¼Œå¯ä»¥å®ç°å…³è”å¯¹è±¡æ¥è¿›è¡Œå®ç°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Person+Habit.h&lt;/code&gt;æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Person&lt;/span&gt; (&lt;span class=&quot;title&quot;&gt;Habit&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@property&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;nonatomic&lt;/span&gt;) &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *dance;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;code&gt;Person+Habit.m&lt;/code&gt;æ–‡ä»¶ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#import &lt;span class=&quot;meta-string&quot;&gt;&quot;Person+Habit.h&quot;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#import &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;objc/runtime.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Person&lt;/span&gt; (&lt;span class=&quot;title&quot;&gt;Habit&lt;/span&gt;)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)setDance:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)dance &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    objc_setAssociatedObject(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;dance&quot;&lt;/span&gt;, dance, OBJC_ASSOCIATION_COPY);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)dance &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *danceObject = objc_getAssociatedObject(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;dance&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; danceObject;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://opensource.apple.com/source/objc4/objc4-709/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;runtime&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/content/documentation/General/Conceptual/DevPedia-CocoaCore/Category.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Category&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Customizing Existing Classes&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://tech.meituan.com/DiveIntoCategory.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ·±å…¥ç†è§£Objective-C&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20161018/17784.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ·±å…¥æµ…å‡ºç†è§£åˆ†ç±»(categoryï¼‰å’Œç±»æ‰©å±•(extension)&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å°ç¼–åœ¨åš iOS å¼€å‘è¿‡ç¨‹ä¸­æœ‰æ—¶ä¼šé‡åˆ°æƒ³è¦å¯¹ç°æœ‰çš„ç±»æ·»åŠ æ–°çš„æ–¹æ³•ï¼Œæˆ–è€…æ˜¯è¦†ç›–æ›¿æ¢åŸæ¥æ–¹æ³•æƒ…å†µã€‚ä¹Ÿåœ¨æœ‰çš„æƒ…å†µæˆ‘ä»¬åœ¨ç±»å®ç°è¿‡ç¨‹ä¸­æƒ³è¦éšè—ä¸€äº›æ–¹æ³•å’Œå±æ€§æƒ…å†µã€‚&lt;br&gt;æ‰€ä»¥å°±å¯¹å®ç°ä¸€äº›æ³¨æ„åšä¸‹æ•´ç†ï¼š&lt;/p&gt;
&lt;p&gt;Category : è¿è¡ŒæœŸå†³è®®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥æŠŠç±»å®ç°åˆ†åœ¨ä¸åŒç±»ä¸­å®ç°ã€‚è¿™æ ·åšæœ‰å‡ ä¸ªä¼˜ç‚¹ï¼š1ï¼‰å¯ä»¥å‡å°‘å•ä¸ªç±»çš„ä½“ç§¯ 2ï¼‰å¯ä»¥æŠŠä¸åŒçš„åŠŸèƒ½æ”¾åœ¨ä¸åŒçš„ &lt;code&gt;Category&lt;/code&gt; è¿›è¡Œå®ç° 3ï¼‰å¯ä»¥å¤šäººåŒæ—¶å¼€å‘ä¸€ä¸ªç±» 4ï¼‰å¯ä»¥æ›´å…·å…·ä½“çš„éœ€è¦å®ç° &lt;code&gt;Category&lt;/code&gt; åŠ è½½ç­‰&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ·»åŠ ç§æœ‰æ–¹æ³•&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;Extension : ç¼–è¯‘å™¨å†³è®®&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¯ä»¥æ·»åŠ ä¸æƒ³è¦æš´éœ²çš„ç±»ç§æœ‰æ–¹æ³•&lt;/li&gt;
&lt;li&gt;å¯ä»¥æ·»åŠ ç±»å±æ€§å’Œç±»å®ä¾‹å˜é‡&lt;/li&gt;
&lt;/ul&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS Deep Copy &amp; Shallow Copy(æ·±å±‚å’Œæµ…å±‚å¤åˆ¶)</title>
    <link href="http://yoursite.com/2017/01/20/iOS%20%E5%A4%8D%E5%88%B6%E7%90%86%E8%A7%A3/"/>
    <id>http://yoursite.com/2017/01/20/iOS å¤åˆ¶ç†è§£/</id>
    <published>2017-01-20T09:42:32.000Z</published>
    <updated>2017-08-23T16:10:06.000Z</updated>
    
    <content type="html">&lt;p&gt;æ€»æ¦‚ï¼šåœ¨å¤åˆ¶è¿‡ç¨‹ä¸­æœ‰æµ…å±‚ Copyå’Œæ·±å±‚ Copyã€‚ä»å­—é¢æ„æ€ä¸Šç†è§£ï¼šæµ…å±‚ Copy æ˜¯ä»…ä»…å¤åˆ¶æŒ‡å‘å†…å­˜å¯¹è±¡ï¼Œæ·±å±‚ Copy æ˜¯å¤åˆ¶å¯¹è±¡å’Œå¯¹è±¡æŒ‡å‘çš„å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å±•ç¤ºæµ…å±‚ Copy å’Œ æ·±å±‚ Copy å±•ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-66733ce3e4c7d54d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS æ·±å±‚å¤åˆ¶å’Œæµ…å±‚å¤åˆ¶.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;blockquote&gt;
&lt;p&gt;ç®€è¨€ä¹‹ï¼šæµ…å±‚ Copy åªå¤åˆ¶å¯¹è±¡å†…å­˜åœ°å€ä¸å˜ï¼Œæ·±å±‚ Copy æ—¢å¤åˆ¶å¯¹è±¡åˆå¤åˆ¶æŒ‡å‘çš„å†…å­˜ &amp;amp; å†…å­˜åœ°å€å‘ç”Ÿæ”¹å˜ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ›´å…·å¤åˆ¶çš„å¯¹è±¡ä¸åŒå¯ä»¥åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é›†åˆç±»å¯¹è±¡å¤åˆ¶&lt;/li&gt;
&lt;li&gt;éé›†åˆç±»å¯¹è±¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;é›†åˆç±»å¤åˆ¶&quot;&gt;&lt;a href=&quot;#é›†åˆç±»å¤åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;é›†åˆç±»å¤åˆ¶&quot;&gt;&lt;/a&gt;é›†åˆç±»å¤åˆ¶&lt;/h2&gt;&lt;h3 id=&quot;é›†åˆç±»çš„æµ…å¤åˆ¶-Shallow-Copy&quot;&gt;&lt;a href=&quot;#é›†åˆç±»çš„æµ…å¤åˆ¶-Shallow-Copy&quot; class=&quot;headerlink&quot; title=&quot;é›†åˆç±»çš„æµ…å¤åˆ¶(Shallow Copy)&quot;&gt;&lt;/a&gt;é›†åˆç±»çš„æµ…å¤åˆ¶(Shallow Copy)&lt;/h3&gt;&lt;p&gt;é›†åˆç±»åœ¨æµ…å±‚å¤åˆ¶å³æ—¶ retain è®¡æ•°è¿›è¡Œ + 1ï¼Œè€Œä¸”æŒ‡å‘å†…å­˜å¯¹è±¡å¤åˆ¶æ·»åŠ åˆ°æ–°çš„é›†åˆä¹‹ä¸­ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *person = [&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; arrayWithObjects:&lt;span class=&quot;string&quot;&gt;@&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;age&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;school&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;company&quot;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *personShallowCopy = [person copyWithZone:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;person : %p, personCopy : %p&quot;&lt;/span&gt;, person, personShallowCopy);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°çš„ç»“æœï¼š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//DeepShallowCopyDemo[31046:7675704] person : 0x604000443d20, personCopy : 0x604000443d20&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;é›†åˆç±»çš„æ·±å¤åˆ¶-Deep-Copy&quot;&gt;&lt;a href=&quot;#é›†åˆç±»çš„æ·±å¤åˆ¶-Deep-Copy&quot; class=&quot;headerlink&quot; title=&quot;é›†åˆç±»çš„æ·±å¤åˆ¶(Deep Copy)&quot;&gt;&lt;/a&gt;é›†åˆç±»çš„æ·±å¤åˆ¶(Deep Copy)&lt;/h3&gt;&lt;p&gt;é›†åˆç±»æ·±å±‚å¤åˆ¶æœ‰ä¸¤ç§æ–¹æ³•å¯ä»¥å®ç°ï¼š&lt;/p&gt;
&lt;p&gt;1ï¼‰ä½¿ç”¨ iOS æä¾›çš„ API çš„æ¥å£&lt;/p&gt;
&lt;p&gt;2ï¼‰ä½¿ç”¨å½’æ¡£(archive)å’Œè§£æ¡£(unarchive)å½¢å¼è¿›è¡Œ&lt;/p&gt;
&lt;p&gt;3) ä½¿ç”¨ç³»ç»Ÿçš„ &lt;code&gt;Copy&lt;/code&gt; å’Œ &lt;code&gt;MutableCopy&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&quot;iOS-ç»™å®š-API&quot;&gt;&lt;a href=&quot;#iOS-ç»™å®š-API&quot; class=&quot;headerlink&quot; title=&quot;iOS ç»™å®š API&quot;&gt;&lt;/a&gt;iOS ç»™å®š API&lt;/h4&gt;&lt;p&gt;é›†åˆç±»çš„æ·±å±‚å¤åˆ¶ï¼Œåªéœ€è¦æŠŠ &lt;code&gt;initWithArray:copyItems:&lt;/code&gt; çš„å‡½æ•°å€¼è®¾ç½®ä¸º &lt;code&gt;YES&lt;/code&gt; å°±å¯ä»¥å®ç°å½“å‰é›†åˆç±»å®ç°æ·±å±‚å¤åˆ¶ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *person = [&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; arrayWithObjects:&lt;span class=&quot;string&quot;&gt;@&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;age&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;school&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;company&quot;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *personDeepCopy = [[&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; alloc] initWithArray:person copyItems:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;person : %p, personCopy : %p&quot;&lt;/span&gt;, person, personDeepCopy);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°çš„ç»“æœï¼š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//DeepShallowCopyDemo[31046:7675704] person : 0x604000443d20, personCopy : 0x604000444080&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;å½’æ¡£-archive-å’Œè§£æ¡£-unarchive&quot;&gt;&lt;a href=&quot;#å½’æ¡£-archive-å’Œè§£æ¡£-unarchive&quot; class=&quot;headerlink&quot; title=&quot;å½’æ¡£(archive)å’Œè§£æ¡£(unarchive)&quot;&gt;&lt;/a&gt;å½’æ¡£(archive)å’Œè§£æ¡£(unarchive)&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *person = [&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; arrayWithObjects:&lt;span class=&quot;string&quot;&gt;@&quot;name&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;age&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;school&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;company&quot;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *persionArchiveCopy = [&lt;span class=&quot;built_in&quot;&gt;NSKeyedUnarchiver&lt;/span&gt; unarchiveObjectWithData:[&lt;span class=&quot;built_in&quot;&gt;NSKeyedArchiver&lt;/span&gt; archivedDataWithRootObject:person]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;person : %p, personCopy : %p&quot;&lt;/span&gt;, person, persionArchiveCopy);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°çš„ç»“æœï¼š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//DeepShallowCopyDemo[31900:7726351] person : 0x6000004529f0, personCopy : 0x604000255a50&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ³¨æ„ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ï¼ˆ1ï¼‰åœ¨é›†åˆç±»çš„æ·±å±‚å¤åˆ¶è¿‡ç¨‹ä¸­ï¼Œéœ€è¦æ»¡è¶³ä¸€ä¸ªå‰ææ¡ä»¶ï¼šå½“å‰é›†åˆç±»éœ€è¦å®ç° &lt;code&gt;NSCoping&lt;/code&gt; æˆ–è€… &lt;code&gt;NSMutableCopying&lt;/code&gt; åè®®ã€‚å¦åˆ™ä¼šæŠ›å‡ºå¼‚å¸¸ã€‚&lt;br&gt;ï¼ˆ2ï¼‰åœ¨ä½¿ç”¨ iOS æä¾›çš„ API ä¸­å®Œæˆçš„ &lt;code&gt;Copy&lt;/code&gt; æ˜¯ &lt;code&gt;one-level-deep copy&lt;/code&gt;ï¼Œä½¿ç”¨ &lt;code&gt;å½’æ¡£(archive)å’Œè§£æ¡£(unarchive)&lt;/code&gt; å®Œæˆæ˜¯çœŸæ­£çš„æ·±å±‚ &lt;code&gt;Copy&lt;/code&gt;ã€‚&lt;a href=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Collections/Articles/Copying.html#//apple_ref/doc/uid/TP40010162-SW3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è‹¹æœå¼€å‘æ–‡æ¡£&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;ä½¿ç”¨ç³»ç»Ÿçš„-Copy-å’Œ-MutableCopy&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨ç³»ç»Ÿçš„-Copy-å’Œ-MutableCopy&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨ç³»ç»Ÿçš„ Copy å’Œ MutableCopy&quot;&gt;&lt;/a&gt;ä½¿ç”¨ç³»ç»Ÿçš„ &lt;code&gt;Copy&lt;/code&gt; å’Œ &lt;code&gt;MutableCopy&lt;/code&gt;&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;ä¸å¯å˜å¯¹è±¡çš„å¤åˆ¶&lt;/li&gt;
&lt;li&gt;å¯å˜å¯¹è±¡çš„å¤åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1)ä¸å¯å˜å¯¹è±¡çš„å¤åˆ¶&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡ä»£ç å®ç°ä¸å¯å˜å¯¹è±¡ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *personCopy = [person &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *personMutableCopy = [person mutableCopy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;person:%p, personCopy:%p, personMutableCopy:%p&quot;&lt;/span&gt;, person, personCopy, personMutableCopy);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°çš„ç»“æœ:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//DeepShallowCopyDemo[33871:7842173] person:0x60000025a760, personCopy:0x60000025a760, personMutableCopy:0x60000025ab80&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2)å¯å˜å¯¹è±¡å¤åˆ¶&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *family = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; arrayWithObjects:&lt;span class=&quot;string&quot;&gt;@&quot;father&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;mother&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;sister&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;brother&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;son&quot;&lt;/span&gt;, &lt;span class=&quot;string&quot;&gt;@&quot;daughter&quot;&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *familyCopy = [family &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *familyMutableCopy = [family mutableCopy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;family:%p, familyCopy:%p, familyMutableCopy:%p&quot;&lt;/span&gt;, family, familyCopy, familyMutableCopy);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°çš„ç»“æœ:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//DeepShallowCopyDemo[33871:7842173] family:0x60000025a9d0, familyCopy:0x60000025aca0, familyMutableCopy:0x60000025abe0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æ ¹æ®ä¸Šé¢ï¼š&lt;br&gt;(1)ä¸å¯å˜ copy æµ…å¤åˆ¶&lt;br&gt;(2)å¯å˜ copy å•å±‚æ·±å¤åˆ¶&lt;br&gt;(3)ä¸å¯å˜ mutableCopy å•å±‚æ·±å¤åˆ¶&lt;br&gt;(4)å¯å˜ mutableCopy å•å±‚æ·±å¤åˆ¶ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;éé›†åˆç±»å¤åˆ¶&quot;&gt;&lt;a href=&quot;#éé›†åˆç±»å¤åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;éé›†åˆç±»å¤åˆ¶&quot;&gt;&lt;/a&gt;éé›†åˆç±»å¤åˆ¶&lt;/h2&gt;&lt;p&gt;åœ¨éé›†åˆç±»å®ç°å¤åˆ¶é€šå¸¸ä½¿ç”¨ç³»ç»Ÿæä¾›çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä¸å¯å˜å¯¹è±¡çš„å¤åˆ¶&lt;/li&gt;
&lt;li&gt;å¯å˜å¯¹è±¡çš„å¤åˆ¶&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&quot;ä¸å¯å˜å¯¹è±¡å¤åˆ¶&quot;&gt;&lt;a href=&quot;#ä¸å¯å˜å¯¹è±¡å¤åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;ä¸å¯å˜å¯¹è±¡å¤åˆ¶&quot;&gt;&lt;/a&gt;ä¸å¯å˜å¯¹è±¡å¤åˆ¶&lt;/h3&gt;&lt;p&gt;ä¸‹é¢ğŸ‘‡ä»£ç å®ç°ä¸å¯å˜å¯¹è±¡ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *nameCopy = [name &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableString&lt;/span&gt; *nameMutableCopy = [name mutableCopy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;name:%p, nameCopy:%p, nameMutableCopy:%p&quot;&lt;/span&gt;, name, nameCopy, nameMutableCopy);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°çš„ç»“æœ:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//DeepShallowCopyDemo[32820:7780776] name:0x107356108, nameCopy:0x107356108, nameMutableCopy:0x604000247620&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;å¯å˜å¯¹è±¡å¤åˆ¶&quot;&gt;&lt;a href=&quot;#å¯å˜å¯¹è±¡å¤åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;å¯å˜å¯¹è±¡å¤åˆ¶&quot;&gt;&lt;/a&gt;å¯å˜å¯¹è±¡å¤åˆ¶&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableString&lt;/span&gt; *mutableName = [&lt;span class=&quot;built_in&quot;&gt;NSMutableString&lt;/span&gt; stringWithString:&lt;span class=&quot;string&quot;&gt;@&quot;Jack Jin&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *mutableNameCopy = [mutableName &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableString&lt;/span&gt; *mutableNameMutableCopy = [mutableName mutableCopy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[mutableNameCopy stringByAppendingString:&lt;span class=&quot;string&quot;&gt;@&quot;Bai&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[mutableNameMutableCopy appendString:&lt;span class=&quot;string&quot;&gt;@&quot;Bai&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;mutableName:%p, mutableNameCopy:%p, mutableNameMutableCopy:%p&quot;&lt;/span&gt;, mutableName, mutableNameCopy, mutableNameMutableCopy);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰“å°çš„ç»“æœï¼š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//DeepShallowCopyDemo[33102:7797073] mutableName:0x600000445dc0, mutableNameCopy:0xa00ec83923fb04b8, mutableNameMutableCopy:0x600000445fa0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æ ¹æ®ä¸Šé¢ï¼š&lt;br&gt;(1)ä¸å¯å˜ copy æµ…å¤åˆ¶&lt;br&gt;(2)å¯å˜ copy æ·±å¤åˆ¶&lt;br&gt;(3)ä¸å¯å˜ mutableCopy æ·±å¤åˆ¶&lt;br&gt;(4)å¯å˜ mutableCopy æ·±å¤åˆ¶&lt;/p&gt;
&lt;/blockquote&gt;
&lt;hr&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/library/content/documentation/Cocoa/Conceptual/Collections/Articles/Copying.html#//apple_ref/doc/uid/TP40010162-SW3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Copying Collections&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://www.jianshu.com/p/f84803356cbb&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NSCopyingå’ŒNSMutableCopyingåè®®&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://en.wikipedia.org/wiki/Object_copying&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Object copying&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;What is the difference between a deep copy and a shallow copy?
&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æ€»æ¦‚ï¼šåœ¨å¤åˆ¶è¿‡ç¨‹ä¸­æœ‰æµ…å±‚ Copyå’Œæ·±å±‚ Copyã€‚ä»å­—é¢æ„æ€ä¸Šç†è§£ï¼šæµ…å±‚ Copy æ˜¯ä»…ä»…å¤åˆ¶æŒ‡å‘å†…å­˜å¯¹è±¡ï¼Œæ·±å±‚ Copy æ˜¯å¤åˆ¶å¯¹è±¡å’Œå¯¹è±¡æŒ‡å‘çš„å†…å­˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢å±•ç¤ºæµ…å±‚ Copy å’Œ æ·±å±‚ Copy å±•ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-66733ce3e4c7d54d.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS æ·±å±‚å¤åˆ¶å’Œæµ…å±‚å¤åˆ¶.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS æ§ä»¶åœ¨å±å¹•ä¸Šæ˜¾ç¤º</title>
    <link href="http://yoursite.com/2017/01/13/APP%E6%8E%A7%E4%BB%B6%E5%9C%A8%E5%B1%8F%E5%B9%95%E4%B8%8A%E6%98%BE%E7%A4%BA/"/>
    <id>http://yoursite.com/2017/01/13/APPæ§ä»¶åœ¨å±å¹•ä¸Šæ˜¾ç¤º/</id>
    <published>2017-01-13T13:57:36.000Z</published>
    <updated>2017-08-25T17:21:55.000Z</updated>
    
    <content type="html">&lt;p&gt;åœ¨æ¯ä¸ª APP ä¸­å¦‚æœæƒ³è¦å®ç°ç•Œé¢çš„ç²¾ç¾ï¼Œå¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦å¯¹ç›¸å…³æ§ä»¶è¿›è¡Œåˆ†è£…ï¼Œé‡‡ç”¨CocoaPodsè¿›è¡Œæ’ä»¶åŒ–ç®¡ç†ã€‚&lt;br&gt;ä½†æ˜¯æˆ‘ä»¬åœ¨ç¨‹åºé‡Œçš„ç©ºé—´æ˜¯æ€ä¹ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„ï¼Œä¸‹é¢å°†åˆç•¥çš„è®²è¿°å±å¹•ä¸Šæ˜¾ç¤ºæ§ä»¶çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Xmind æ¥å±•ç¤ºåšå®¢è®²è¿° APP æ§ä»¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„æ€è·¯å’Œç›¸å…³çŸ¥è¯†ç‚¹çš„æ•´ç†æ€è·¯ï¼Œå…·ä½“æ€è·¯çœ‹ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-420d6100d6bc6ea1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS æ§ä»¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ€ç»´å¯¼å›¾.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;å±å¹•æ˜¾ç¤ºå›¾åƒçš„åŸç†&quot;&gt;&lt;a href=&quot;#å±å¹•æ˜¾ç¤ºå›¾åƒçš„åŸç†&quot; class=&quot;headerlink&quot; title=&quot;å±å¹•æ˜¾ç¤ºå›¾åƒçš„åŸç†&quot;&gt;&lt;/a&gt;å±å¹•æ˜¾ç¤ºå›¾åƒçš„åŸç†&lt;/h2&gt;&lt;p&gt;è®°å¾—ç¬¬ä¸€å°ç”µè§†æœºæ˜¯æœ€è€å¼çš„é»‘ç™½ç”µè§†æœºï¼Œä¸Šé¢å…·å¤‡å¤©çº¿ã€éœ€è¦æ‰‹åŠ¨è½¬åŠ¨æ—‹è½¬è°ƒå°é‚£ç§ï¼Œç›®å‰è¿™ç§ç”µè§†ğŸ“ºå¾ˆå°‘å‡ºç°é¢ã€‚&lt;br&gt;ä¸Šé¢é‚£ç§è€å¼çš„ç”µè§†æœºç”»é¢çš„æ˜¾ç¤ºå°±æ˜¯é‡‡ç”¨ CRT æ˜¾ç¤ºï¼Œæ˜¾ç¤ºçš„åŸç†å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-94ee3d3de417be2c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;CRT.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å…¶åŸç†ï¼šCRT æŒ‰ç…§ä¸Šé¢å›¾ç‰‡å±•ç¤ºçš„é‚£æ ·ï¼Œä»ä¸Šåˆ°ä¸‹è¿›è¡Œé€è¡Œæ‰«æï¼Œå½“æ‰«æå®Œæˆå°±ä¼šæ˜¾ç¤ºä¸€æ•´å¼ å›¾åƒï¼Œéšåç”µå­æªå›åˆ°åŸæ¥çš„ä½ç½®ä»å¤´å¼€å§‹è¿›è¡Œå›¾åƒç´ æçš„æ‰«æã€‚å…·ä½“çš„è¿‡ç¨‹å½“æ˜¾ç¤ºå™¨æ‰«å®Œä¸€è¡Œæ¢åˆ°æ–°çš„ä¸€è¡Œï¼Œæ˜¾ç¤ºå™¨å°±ä¼šå‘å‡ºä¸€ä¸ªæ°´å¹³ä¿¡å·ï¼š&lt;strong&gt;HSync&lt;/strong&gt;ï¼Œå½“æ˜¾ç¤ºå™¨æ‰«å®Œæ•´å¼ çš„å›¾ç‰‡åç”µå­è¿›è¡Œå¤ä½ï¼Œå¼€å§‹ä¸‹ä¸€æ¬¡çš„é‡æ–°æ‰«æï¼Œæ˜¾ç¤ºå™¨ä¹Ÿä¼šå‘å‡ºä¸€ä¸ªæ–°çš„å‚ç›´ä¿¡å·ï¼š&lt;strong&gt;VSync&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;æˆ‘ä»¬ APP åœ¨å±å¹•ä¸Šçš„åˆ·æ–°çš„é¢‘ç‡å°±æ˜¯ VSync ä¿¡å·äº§ç”Ÿçš„é¢‘ç‡ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨è§£å†³ç•Œé¢å¡é¡¿çš„è¿‡ç¨‹å°±è¦æ ¹æ® VSync çš„åŸºç¡€ä¸Šè¿›è¡Œç›¸å…³çš„å®Œå–„å’Œä¼˜åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ğŸ‘ˆ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç›®å‰æˆ‘ä»¬ä¸€èˆ¬æ˜¯é‡‡å–åŒç¼“å†²çš„æœºåˆ¶ï¼Œ GPUä¼šé¢„å…ˆç¼“å†²å¥½ä¸€å¸§å­˜æ”¾åœ¨ç¼“å†²ä¸­ï¼Œè®©è§†é¢‘æ§åˆ¶å™¨è¯»å–ï¼Œå½“ä¸‹ä¸€é˜µæ¸²æŸ“å¥½ï¼Œå°±ç›´æ¥æŠŠè§†é¢‘æ§åˆ¶å™¨çš„æŒ‡é’ˆæŒ‡å‘ç¬¬äºŒä¸ªç¼“å†²å™¨ ï¼š è¿™æ ·åšçš„å¥½å¤„å°±æ˜¯å¯ä»¥å¤§å¤§æé«˜ç¼“å†²çš„æ•ˆç‡é—®é¢˜&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ğŸ‘‰ğŸ¿&lt;/p&gt;
&lt;p&gt;é‡‡ç”¨åŒç¼“å­˜å¯èƒ½ä¼šå¼•å…¥ä¸€ä¸ªé—®é¢˜å°±æ˜¯å±å¹•å†…å®¹æ˜¾ç¤ºä¸€åŠï¼Œ GPU å°†æ–°çš„å†…å®¹æäº¤åˆ°ç¼“å­˜åŒºå¯¹å…¶è¿›è¡Œäº¤æ¢ï¼Œè§†é¢‘æ§åˆ¶å™¨æŠŠæ–°çš„ä¸‹åŠæ®µçš„æ˜¾ç¤ºåœ¨å±å¹•ä¸Š&lt;br&gt;å¯èƒ½å½¢æˆç”»é¢æ’•è£‚ï¼Œ&lt;br&gt;è§£å†³æ–¹å¼ï¼šGPU å¼•å…¥å‚ç›´åŒæ­¥ï¼ˆV-Syncï¼‰å½“å¼€å¯å‚ç›´åŒæ­¥åï¼Œ GPUä¼šç­‰å¾… VSync ä¿¡å·å‘å‡ºï¼Œæ‰ä¼šå¯¹ç¼“å­˜çš„å†…å®¹è¿›è¡Œæ›´æ–°ï¼Œè¿™æ ·å°±å¯ä»¥æ˜¯ç”»é¢æ›´åŠ æµç•…ï¼Œå‡å°‘å»¶è¿Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;iOS è®¾å¤‡é‡‡ç”¨åŒç¼“å­˜ + å‚ç›´åŒæ­¥ï¼› Androidé‡‡ç”¨çš„ä¸‰ç¼“å­˜ + å‚ç›´åŒæ­¥&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨ä¸€äº›æ¸¸æˆä¸­æˆ‘ä»¬ç»å¸¸ä¼šè§åˆ°ä¸€äº›åœºæ™¯å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-57d7c6a78203fe32.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•é”™ä½.png&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;CPUå’ŒGPUçš„å·¥ä½œåŸç†&quot;&gt;&lt;a href=&quot;#CPUå’ŒGPUçš„å·¥ä½œåŸç†&quot; class=&quot;headerlink&quot; title=&quot;CPUå’ŒGPUçš„å·¥ä½œåŸç†&quot;&gt;&lt;/a&gt;CPUå’ŒGPUçš„å·¥ä½œåŸç†&lt;/h2&gt;&lt;h3 id=&quot;CPUå·¥ä½œåŸç†&quot;&gt;&lt;a href=&quot;#CPUå·¥ä½œåŸç†&quot; class=&quot;headerlink&quot; title=&quot;CPUå·¥ä½œåŸç†&quot;&gt;&lt;/a&gt;CPUå·¥ä½œåŸç†&lt;/h3&gt;&lt;p&gt;CPUï¼ˆä¸­å¤®å¤„ç†å™¨ï¼ŒCentral Processing Unitï¼‰ä¸»è¦æ˜¯è§£é‡Šè®¡ç®—æœºä¸­çš„æŒ‡ä»¤ï¼Œå¤„ç†è®¡ç®—æœºè½¯ä»¶ä¸­çš„æ•°æ®ã€‚CPUã€å†…éƒ¨å­˜å‚¨å™¨å’Œè¾“å…¥/è¾“å‡ºè®¾å¤‡æ˜¯è®¡ç®—æœºçš„ä¸‰å¤§æ ¸å¿ƒç»„ä»¶ã€‚&lt;/p&gt;
&lt;p&gt;CPUç›®å‰å¾ˆå¤§ä¸€éƒ¨åˆ†æ˜¯é‡‡ç”¨ å†¯Â·è¯ºä¾æ›¼ç»“æ„ï¼Œåœ¨å·¥ä½œçš„è¿‡ç¨‹ä¹‹ä¸­å…¶è¿‡ç¨‹ä¸€èˆ¬å¯ä»¥åˆ†ä¸ºå››ä¸ªé˜¶æ®µï¼šæå–ã€è§£ç ã€æ‰§è¡Œå’Œè°ƒå›&lt;/p&gt;
&lt;p&gt;æå–ï¼š&lt;br&gt;è§£ç ï¼š&lt;br&gt;æ‰§è¡Œï¼š&lt;br&gt;è°ƒå›ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-080f3f114f51b563.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;CPU.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;GPUå·¥ä½œåŸç†&quot;&gt;&lt;a href=&quot;#GPUå·¥ä½œåŸç†&quot; class=&quot;headerlink&quot; title=&quot;GPUå·¥ä½œåŸç†&quot;&gt;&lt;/a&gt;GPUå·¥ä½œåŸç†&lt;/h3&gt;&lt;p&gt;GPUï¼ˆå›¾å½¢å¤„ç†å™¨ï¼ŒGraphics Processing Unitï¼‰ä¸»è¦æ˜¯è¿›è¡Œç»˜å›¾è¿ç®—çš„å¾®å¤„ç†å™¨ï¼Œå¯¹å›¾åƒè¿›è¡Œå¤„ç†å’Œç›¸å…³æ˜¾ç¤ºç»˜åˆ¶å·¥ä½œ&lt;br&gt;åé¢éšç€ OpenGL APL å’Œ DirectX åŠŸèƒ½çš„å‡ºç°ï¼Œå›¾å½¢å¤„ç†å™¨å¯ä»¥å¢åŠ å¯ç¼–ç¨‹ç€è‰²çš„èƒ½åŠ›ï¼Œç›®å‰æˆ‘ä»¬å¤„ç†åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„ä»»ä½•åƒç´ ï¼Œä¹Ÿå¯ä»¥åœ¨çº¹ç†åœ¨å±å¹•ä¸Šæ˜¾ç¤ºå‰å’Œæ¯ä¸€ä¸ªå‡ ä½•é¡¶ç‚¹åœ¨æŠ•å°„åˆ°å±å¹•å‰éƒ½å¯ä»¥è¿›è¡Œç›¸å…³çš„å¤„ç†å·¥ä½œ&lt;/p&gt;
&lt;h2 id=&quot;iOS-ç»˜åˆ¶åƒç´ åœ¨å±å¹•ä¸Š&quot;&gt;&lt;a href=&quot;#iOS-ç»˜åˆ¶åƒç´ åœ¨å±å¹•ä¸Š&quot; class=&quot;headerlink&quot; title=&quot;iOS ç»˜åˆ¶åƒç´ åœ¨å±å¹•ä¸Š&quot;&gt;&lt;/a&gt;iOS ç»˜åˆ¶åƒç´ åœ¨å±å¹•ä¸Š&lt;/h2&gt;&lt;h3 id=&quot;APPç»˜åˆ¶åƒç´ è¿‡ç¨‹åˆ†æ&quot;&gt;&lt;a href=&quot;#APPç»˜åˆ¶åƒç´ è¿‡ç¨‹åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;APPç»˜åˆ¶åƒç´ è¿‡ç¨‹åˆ†æ&quot;&gt;&lt;/a&gt;APPç»˜åˆ¶åƒç´ è¿‡ç¨‹åˆ†æ&lt;/h3&gt;&lt;p&gt;ä¸‹é¢ç»˜åˆ¶åƒç´ åœ¨å±å¹•ä¸Šçš„åŸç†å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-de4eaec88c23be92.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;GPUæ˜¾ç¤º.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;iOS ç•Œé¢ä¸Šçš„å†…å®¹å¤§å¤šæ˜¯é€šè¿‡ Core Animation æ¥å®Œæˆç»˜åˆ¶&lt;br&gt;åœ¨ Mac OS å¤§å¤šæ˜¯ç»•è¿‡ Core Animation ä½¿ç”¨ Core Graphics æ¥è¿›è¡Œç»˜åˆ¶&lt;br&gt;æ‰‹æ¸¸è¡Œä¸šä¸­ç›´æ¥ä½¿ç”¨ OpenGL/OpenGL ES æ¥è¿›è¡Œç›¸å…³æè´¨çš„å†…å®¹ç»˜åˆ¶&lt;/p&gt;
&lt;p&gt;Core Animation å¤§å¤šä½¿ç”¨ Core Graphics æ¥è¿›è¡Œå†…å®¹çš„æ¸²æŸ“&lt;/p&gt;
&lt;p&gt;GPU Driver æ˜¯ç›´æ¥å’Œ GPU è¿›è¡Œç›¸å…³äº¤äº’çš„ä»£ç å—ï¼Œå¯ä»¥å¯¹å¯¹ GPU ç›´æ¥æ“ä½œ&lt;/p&gt;
&lt;p&gt;GPU æ˜¯ä¸“é—¨ä¸ºå›¾å½¢é«˜å¹¶å‘è®¡ç®—é‡èº«å®šåˆ¶çš„å¤„ç†å•å…ƒï¼Œä¼˜ç‚¹ï¼šçŸ­æ—¶é—´å¯ä»¥å®ç°å›¾åƒæµ®ç‚¹è¿ç®—ï¼Œè€—ç”µå°‘ï¼Œé«˜æ•ˆ&lt;/p&gt;
&lt;h3 id=&quot;APPç»˜åˆ¶åƒç´ ç¡¬ä»¶åˆ†æ&quot;&gt;&lt;a href=&quot;#APPç»˜åˆ¶åƒç´ ç¡¬ä»¶åˆ†æ&quot; class=&quot;headerlink&quot; title=&quot;APPç»˜åˆ¶åƒç´ ç¡¬ä»¶åˆ†æ&quot;&gt;&lt;/a&gt;APPç»˜åˆ¶åƒç´ ç¡¬ä»¶åˆ†æ&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-618b4dfde6e991a7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;GPUç¼“å­˜.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨å›¾ç‰‡æ˜¾ç¤ºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬éœ€è¦ç›¸å…³çš„ GPU å¯¹å›¾ç‰‡ç”Ÿæˆ frame çš„çº¹ç†ï¼Œ&lt;br&gt;æˆ‘ä»¬åœ¨ç”Ÿæˆçº¹ç†çš„è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨ VRAM çš„ç©ºé—´ï¼Œæ‰€ä»¥åœ¨ç”Ÿæˆè¿‡ç¨‹æ˜¯æœ‰é™åˆ¶çš„&lt;br&gt;æŠŠç›¸å…³çš„æ•°æ®ä» CPU ä¸Šä¼ è¾“åˆ° GPU ä¸Š â€”â€”&amp;gt; æ—¢æ˜¯æŠŠå†…å®¹ä» RAM ä¸Šä¼ åˆ° VRAM ä¸Šï¼Œ å¦‚æœä¸Šä¼ çš„çº¹ç†å¤ªå¤§å°±ä¼šå¯¹æ€§èƒ½æœ‰æ‰€å½±å“&lt;/p&gt;
&lt;p&gt;åœ¨æ–‡æœ¬æ˜¾ç¤ºçš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨ GPU è¿›è¡Œæ–‡æœ¬çš„ç»˜åˆ¶æ¯”è¾ƒå¤æ‚ï¼Œè¿™ä¼šä¿ƒä½¿ Core Text å’Œ Core Graphics æ¥åˆæˆç”Ÿæˆä¸€ä¸ªæ–‡æœ¬ï¼Œç„¶åä¸Šä¼ åˆ° GPUã€‚&lt;br&gt;ä½†æˆ‘ä»¬åœ¨ç•Œé¢æ»‘åŠ¨è¿‡ç¨‹ä¸­ï¼Œ CPU åªéœ€è¦æŠŠç›¸å…³çš„æ–‡æœ¬åæ ‡å‘é€åˆ° GPU å°±è¡Œï¼Œ GPUä¼šæ ¹æ®ç›¸å…³çš„ä¿¡æ¯è¿›è¡Œç»˜åˆ¶&lt;/p&gt;
&lt;h2 id=&quot;APPç»˜åˆ¶è¿‡ç¨‹æ–¹å¼å’Œç»†èŠ‚è®²è§£&quot;&gt;&lt;a href=&quot;#APPç»˜åˆ¶è¿‡ç¨‹æ–¹å¼å’Œç»†èŠ‚è®²è§£&quot; class=&quot;headerlink&quot; title=&quot;APPç»˜åˆ¶è¿‡ç¨‹æ–¹å¼å’Œç»†èŠ‚è®²è§£&quot;&gt;&lt;/a&gt;APPç»˜åˆ¶è¿‡ç¨‹æ–¹å¼å’Œç»†èŠ‚è®²è§£&lt;/h2&gt;&lt;h3 id=&quot;åˆæˆï¼š&quot;&gt;&lt;a href=&quot;#åˆæˆï¼š&quot; class=&quot;headerlink&quot; title=&quot;åˆæˆï¼š&quot;&gt;&lt;/a&gt;åˆæˆï¼š&lt;/h3&gt;&lt;p&gt;åœ¨æˆ‘ä»¬çœ‹åˆ°çš„æ‰€æœ‰çš„è§†å›¾éƒ½æ˜¯åŸºäºä¸åŒå›¾ç‰‡è¿›è¡Œç›¸å…³çš„åˆæˆè€Œæ¥&lt;br&gt;è¿™é‡Œæˆ‘ä¹ˆå‡†å®ˆä¸€åˆ‡çš„å›¾åƒçš†çº¹ç†çš„æ¦‚å¿µï¼Œå½“æŠŠç¬¬äºŒä¸ªçº¹ç†é®åœ¨ç¬¬ä¸€ä¸ªçº¹ç†ä¸Šæ—¶ï¼Œ GPU å°±ä¼šæŠŠç¬¬äºŒä¸ªçº¹ç†åˆæˆåˆ°ç¬¬ä¸€ä¸ªçº¹ç†ä¸­&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;åˆæˆæ–¹æ³•å¾ˆå¤šç§ï¼š&lt;/li&gt;
&lt;li&gt;å¦‚æœä¸¤ä¸ªçº¹ç†å¯¹å…¶æ—¶ï¼šé‡‡ç”¨å…¬å¼    â€”â€”&amp;gt;    R(æœ€ç»ˆæ˜¾ç¤ºçš„è‰²å½©çš„å€¼) = S(ä¸Šå±‚çº¹ç†çš„ç›¸å…³çš„å‚æ•°) +D(ä¸‹å±‚çº¹ç†ç›¸å…³å‚æ•°) * (1 - Sa(ä¸Šå±‚çº¹ç†çš„é€æ˜åº¦))&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;é€æ˜-VS-ä¸é€æ˜ï¼š&quot;&gt;&lt;a href=&quot;#é€æ˜-VS-ä¸é€æ˜ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é€æ˜ VS ä¸é€æ˜ï¼š&quot;&gt;&lt;/a&gt;é€æ˜ VS ä¸é€æ˜ï¼š&lt;/h3&gt;&lt;p&gt;å½“çº¹ç†å®Œå…¨ä¸é€æ˜æ—¶ç›®æ ‡åƒç´ å°±æ˜¯çº¹ç†çš„å€¼ï¼Œ GPU å°±åªä¼šä»ç›®æ ‡åƒç´ ç›´æ¥å–å‡ºçº¹ç†æ˜¾ç¤º ä¸ä¼šåšç›¸å…³çš„æ“ä½œ&lt;br&gt;åœ¨åŠ è½½ä¸€å¼ æ²¡æœ‰  alpha çš„å›¾ç‰‡è¿›è¡Œæ˜¾ç¤ºï¼Œä¼šè¢«é»˜è®¤ä¸º opaque çš„å±æ€§æ˜¯ YES ï¼› åŠ è½½ä¸€å¼ å›¾ç‰‡ alpha = 100%ï¼Œ Core Animation ä¼šè®¤ä¸ºæ˜¯ä¸ä¸º 100% å¯¹å…¶è¿›è¡Œè§£æ&lt;/p&gt;
&lt;h3 id=&quot;åƒç´ å¯¹å…¶-VS-ä¸é‡åˆåœ¨ä¸€èµ·ï¼š&quot;&gt;&lt;a href=&quot;#åƒç´ å¯¹å…¶-VS-ä¸é‡åˆåœ¨ä¸€èµ·ï¼š&quot; class=&quot;headerlink&quot; title=&quot;åƒç´ å¯¹å…¶ VS ä¸é‡åˆåœ¨ä¸€èµ·ï¼š&quot;&gt;&lt;/a&gt;åƒç´ å¯¹å…¶ VS ä¸é‡åˆåœ¨ä¸€èµ·ï¼š&lt;/h3&gt;&lt;p&gt;å½“ä¸¤ä¸ª layer å®Œå…¨é‡åˆåœ¨ä¸€èµ·ï¼Œè¿™æ—¶å°±éœ€è¦æˆ‘ä»¬å¯¹å…¶è¿›è¡Œç›¸å…³çš„è®¡ç®—&lt;br&gt;layer ä¸Šæ‰€æœ‰çš„åƒç´ å’Œå±å¹•ä¸Šçš„åƒç´ å®Œå…¨å¯¹å…¶ï¼Œè¿™å°±æ˜¯ layer åƒç´ å¯¹å…¶ï¼› &lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;åƒç´ å¯¹ä¸é½ä¸»è¦åŸå› ï¼š&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ç¼©æ”¾ï¼Œåœ¨å›¾åƒè¿›è¡Œç¼©æ–¹æ—¶ï¼Œlayer å’Œå±å¹•çš„åƒç´ å¾ˆéš¾å¯¹å…¶&lt;/li&gt;
&lt;li&gt;çº¹ç†çš„èµ·ç‚¹åœ¨åœ¨ä¸€ä¸ªåƒç´ çš„è¾¹ç•Œ &lt;/li&gt;
&lt;li&gt;åœ¨åƒç´ ä¸å¯¹å…¶çš„æƒ…å†µä¸‹å¯èƒ½ä¼šè¦ç»è¿‡è¿‡å¤šçš„è¿ç®—ï¼Œ åœ¨ Core Animation å’Œ æ¨¡æ‹Ÿå™¨ä¸­ color misaligned images çš„é€‰é¡¹å¯ä»¥è¿›è¡Œç›¸å…³çš„è°ƒèŠ‚&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;h3 id=&quot;ç¦»å±æ¸²æŸ“ï¼š&quot;&gt;&lt;a href=&quot;#ç¦»å±æ¸²æŸ“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;ç¦»å±æ¸²æŸ“ï¼š&quot;&gt;&lt;/a&gt;ç¦»å±æ¸²æŸ“ï¼š&lt;/h3&gt;&lt;p&gt;ç¦»å±æ¸²æŸ“ä¼š  åˆå¹¶/æ¸²æŸ“ å›¾å±‚æ ‘ä¸€éƒ¨åˆ†åˆ°ä¸€ä¸ªæ–°çš„ç¼“å­˜åŒºï¼Œç„¶åè¯¥ç¼“å†²åŒºè¢«æ¸²æŸ“åˆ°å±å¹•ä¸Š&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ç¦»å±æ¸²æŸ“ä¹Ÿå¯èƒ½äº§ç”Ÿå‰¯ä½œç”¨ã€‚å¦‚æœä½ æ­£åœ¨ç›´æ¥æˆ–è€…é—´æ¥çš„å°†maskåº”ç”¨åˆ°ä¸€ä¸ªå›¾å±‚ä¸Šï¼ŒCore Animation ä¸ºäº†åº”ç”¨è¿™ä¸ª maskï¼Œä¼šå¼ºåˆ¶è¿›è¡Œå±å¹•å¤–æ¸²æŸ“ã€‚è¿™ä¼šå¯¹ GPU äº§ç”Ÿé‡è´Ÿã€‚é€šå¸¸æƒ…å†µä¸‹ mask åªèƒ½è¢«ç›´æ¥æ¸²æŸ“åˆ°å¸§çš„ç¼“å†²åŒºä¸­(åœ¨å±å¹•å†…)&lt;/li&gt;
&lt;li&gt;Instrument çš„ Core Animation å·¥å…·æœ‰ä¸€ä¸ªå«åš Color Offscreen-Rendered Yellow çš„é€‰é¡¹ï¼Œå®ƒä¼šå°†å·²ç»è¢«æ¸²æŸ“åˆ°å±å¹•å¤–ç¼“å†²åŒºçš„åŒºåŸŸæ ‡æ³¨ä¸ºé»„è‰²(è¿™ä¸ªé€‰é¡¹åœ¨æ¨¡æ‹Ÿå™¨ä¸­ä¹Ÿå¯ä»¥ç”¨)ã€‚åŒæ—¶è®°å¾—æ£€æŸ¥ Color Hits Green and Misses Red é€‰é¡¹ã€‚ç»¿è‰²ä»£è¡¨æ— è®ºä½•æ—¶ä¸€ä¸ªå±å¹•å¤–ç¼“å†²åŒºè¢«å¤ç”¨ï¼Œè€Œçº¢è‰²ä»£è¡¨å½“ç¼“å†²åŒºè¢«é‡æ–°åˆ›å»º&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;rasterized layer çš„ç¼“å†²åŒºå¤§å°æ˜¯æœ‰æ‰€é™åˆ¶çš„ï¼Œå¤§æ¦‚æ˜¯å±å¹•å¤§å°çš„ä¸¤å€ç©ºé—´ å±å¹•å¤–çš„ç¼“å†²åŒº&lt;/p&gt;
&lt;h3 id=&quot;CALayerï¼š&quot;&gt;&lt;a href=&quot;#CALayerï¼š&quot; class=&quot;headerlink&quot; title=&quot;CALayerï¼š&quot;&gt;&lt;/a&gt;CALayerï¼š&lt;/h3&gt;&lt;p&gt;GPU æµ‹è¯•çš„æ­¥éª¤ï¼š&lt;br&gt;è¦å‘Šè¯‰ä½ ï¼Œå¦‚æœæ˜¯ GPU é™åˆ¶äº†ä½ çš„æ€§èƒ½ï¼Œä½ å¯ä»¥ä½¿ç”¨ OpenGL ES Driver instrumentã€‚ç‚¹å‡»ä¸Šé¢é‚£ä¸ªå°çš„ i æŒ‰é’®ï¼Œé…ç½®ä¸€ä¸‹ï¼ŒåŒæ—¶æ³¨æ„å‹¾é€‰ Device Utilization %ã€‚ç°åœ¨ï¼Œå½“ä½ è¿è¡Œä½ çš„ app æ—¶ï¼Œä½ å¯ä»¥çœ‹åˆ°ä½  GPU çš„è´Ÿè·ã€‚å¦‚æœè¿™ä¸ªå€¼é è¿‘ 100%ï¼Œé‚£ä¹ˆä½ å°±éœ€è¦æŠŠä½ å·¥ä½œçš„é‡å¿ƒæ”¾åœ¨GPUæ–¹é¢äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Core-Graphics-amp-Quartz-2Dï¼š&quot;&gt;&lt;a href=&quot;#Core-Graphics-amp-Quartz-2Dï¼š&quot; class=&quot;headerlink&quot; title=&quot;Core Graphics &amp;amp; Quartz 2Dï¼š&quot;&gt;&lt;/a&gt;Core Graphics &amp;amp; Quartz 2Dï¼š&lt;/h3&gt;&lt;p&gt;Core Graphics æ˜¯åŠŸèƒ½å¼ºå¤§çš„ç»˜å›¾æ¡†æ¶&lt;/p&gt;
&lt;p&gt;GPUåŠ é€Ÿä¸‹çš„å›¾åƒå¤„ç†ï¼š&lt;br&gt;å¥½çš„å›¾åƒå¤„ç†çš„å¼€æºç¬¬ä¸‰æ–¹æ¡†æ¶ï¼š&lt;/p&gt;
&lt;p&gt;GPUImage ï¼š&lt;a href=&quot;https://github.com/BradLarson/GPUImage&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://github.com/BradLarson/GPUImage&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ShaderToy :  &lt;a href=&quot;https://www.shadertoy.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://www.shadertoy.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;Shaderific :  &lt;a href=&quot;http://www.shaderific.com&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.shaderific.com&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç€è‰²å™¨çš„è°ƒè¯• ï¼šæ˜¯æµ‹ç®—å¸§æ¸²æŸ“çš„æ—¶é—´ï¼Œä¸æ˜¯ 1s æ¸²æŸ“å¤šå°‘å¸§&lt;br&gt;FPSæ˜¯å¸§æ—¶é—´çš„å€’æ•°ï¼Œå¸§æ¸²æŸ“çš„æ—¶é—´ï¼šæ˜¯å¸§å¼€å§‹å¤„ç†åˆ°å®Œå…¨ç»“æŸå¹¶ä¸”æ¸²æŸ“åˆ°å±å¹•æˆ–è€…ä¸€å¼ å›¾ç‰‡æ‰€èŠ±è´¹çš„æ—¶é—´ã€‚&lt;/p&gt;
&lt;p&gt;ğŸ‘‰ğŸ¿ åœ¨ç§»åŠ¨ç«¯çš„ GPU ä¸­æœ‰å¾ˆå¤šæ˜¯ æŠŠæŒ‡ä»¤é›†ä¸­èµ·æ¥ï¼Œæœ€åç»Ÿä¸€åšä¸€æ¬¡æ¸²æŸ“  â€”â€”&amp;gt; åœ¨æµ‹è¯•æ—¶éœ€è¦æµ‹è¯•æ•´ä¸ªè¿‡ç¨‹ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªä¸­é—´è¿‡ç¨‹&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.sunsetlakesoftware.com/2013/10/21/optimizing-gaussian-blurs-mobile-gpu&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æµ‹è¯•å¤§ğŸ®çš„åšå®¢ ï¼š&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://community.imgtec.com/developers/powervr/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GPU çš„æµ‹è¯•æ¡†æ¶ï¼š&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å¦‚æœæƒ³è¦ä¿æŒé«˜çš„å¸§é€Ÿ  å°±è¦ä¿è¯ç€è‰²å™¨æ¯”è¾ƒä½çš„å‘¨æœŸæ•°  ï¼ˆå¦‚æœæ˜¯ 60å¸§æ¯ç§’ï¼Œ é‚£ä¹ˆåœ¨å®Œæˆä¸€ä¸ªå‘¨æœŸå°±éœ€è¦ä»…ä»… 16.67 æ¯«ç§’ï¼‰&lt;/p&gt;
&lt;h2 id=&quot;é™ä½ç€è‰²å™¨æ¸²æŸ“å‘¨æœŸæ–¹æ³•ï¼š&quot;&gt;&lt;a href=&quot;#é™ä½ç€è‰²å™¨æ¸²æŸ“å‘¨æœŸæ–¹æ³•ï¼š&quot; class=&quot;headerlink&quot; title=&quot;é™ä½ç€è‰²å™¨æ¸²æŸ“å‘¨æœŸæ–¹æ³•ï¼š&quot;&gt;&lt;/a&gt;é™ä½ç€è‰²å™¨æ¸²æŸ“å‘¨æœŸæ–¹æ³•ï¼š&lt;/h2&gt;&lt;ul&gt;
&lt;li&gt;&lt;p&gt;æ¶ˆé™¤æ¡ä»¶é€»è¾‘ ï¼šæ¡ä»¶é€»è¾‘æœ‰æ—¶æ˜¯å¿…é¡»çš„ï¼Œä½†æœ‰æ—¶å¯ä»¥åšä¼˜åŒ–ã€‚ç€è‰²å™¨ä¸­ä½¿ç”¨ stepï¼ˆï¼‰å‡½æ•°å˜é€šé¿å…é€»è¾‘çš„è¿ç”¨&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å‡å°‘ä¾èµ–çº¹ç†çš„è¯»å– ï¼šåœ¨ç‰‡æ®µçš„ç€è‰²å™¨å–æ ·æ—¶ï¼Œå¦‚æœçº¹ç†åæ ‡ä¸æ˜¯ä»¥ varying çš„å½¢å¼ä¼ å…¥ï¼Œè€Œæ˜¯åœ¨ç‰‡æ®µç€è‰²å™¨ä¸­è¿›è¡Œè®¡ç®—ï¼Œå°±ä¼šå‘ç”Ÿçº¹ç†ä¾èµ–ã€‚ï¼ˆğŸ‘‰ğŸ¿æƒ³ä»é™„è¿‘çš„åƒç´ å–æ ·ï¼Œè€Œä¸æ˜¯è®¡ç®—å’Œç‰‡æ®µç€è‰²å™¨ä¸­ç›¸é‚»åƒç´ çš„åå·®ï¼Œæœ€å¥½åœ¨é¡¶ç‚¹ç€è‰²å™¨ä¸­è¿›è¡Œè®¡ç®—ï¼Œç„¶åæŠŠç»“æœä»¥ varying çš„æ–¹å¼ä¼ å…¥ç‰‡æ®µç€è‰²å™¨ğŸ‘ˆï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;è®©è®¡ç®—æ›´åŠ ç®€å• ï¼š åœ¨è®¡ç®—è¿‡ç¨‹ä¸­å¦‚æœä½¿ç”¨ç®€å•çš„è®¡ç®—å¯ä»¥å¾—åˆ°ä¸€ä¸ªè¶³å¤Ÿè¿‘ä¼¼çš„å€¼ï¼Œå°±éœ€è¦é¿å…æ˜‚è´µçš„è®¡ç®—æ–¹å¼ï¼ˆä¾‹å¦‚ï¼šsin()ï¼Œcos()ï¼Œtan() ï¼‰&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;å¦‚æœæœ‰å¯èƒ½çš„è¯ï¼ŒæŠŠç›¸å…³è®¡ç®—ä½¿ç”¨åˆ°é¡¶ç‚¹ç€è‰²å™¨ã€‚    ğŸ˜ ğŸ˜€ğŸ˜ ğŸ˜€ğŸ˜ ğŸ˜€ é¡¶ç‚¹ç€è‰²å™¨æ˜¯æ¯ä¸ªé¡¶ç‚¹è¿è¡Œä¸€æ¬¡ï¼Œç‰‡æ®µç€è‰²å™¨æ˜¯æ¯ä¸€ä¸ªåƒç´ è¿è¡Œä¸€æ¬¡&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/ä¸­å¤®å¤„ç†å™¨&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä¸­å¤®å¤„ç†å™¨&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/åœ–å½¢è™•ç†å™¨&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;åœ–å½¢è™•ç†å™¨&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://blog.ibireme.com/author/ibireme/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä¸å†å®‰å…¨çš„ OSSpinLock&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://objccn.io/issue-21-7/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GPU åŠ é€Ÿä¸‹çš„å›¾åƒå¤„ç†&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://objccn.io/issue-21-8/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;GPU åŠ é€Ÿä¸‹çš„å›¾åƒè§†è§‰&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://objccn.io/issue-3-1/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;objccn.io-issue-3-1&lt;/a&gt;  &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;åœ¨æ¯ä¸ª APP ä¸­å¦‚æœæƒ³è¦å®ç°ç•Œé¢çš„ç²¾ç¾ï¼Œå¤šæ•°æƒ…å†µä¸‹æˆ‘ä»¬éœ€è¦å¯¹ç›¸å…³æ§ä»¶è¿›è¡Œåˆ†è£…ï¼Œé‡‡ç”¨CocoaPodsè¿›è¡Œæ’ä»¶åŒ–ç®¡ç†ã€‚&lt;br&gt;ä½†æ˜¯æˆ‘ä»¬åœ¨ç¨‹åºé‡Œçš„ç©ºé—´æ˜¯æ€ä¹ˆæ˜¾ç¤ºåœ¨å±å¹•ä¸Šçš„ï¼Œä¸‹é¢å°†åˆç•¥çš„è®²è¿°å±å¹•ä¸Šæ˜¾ç¤ºæ§ä»¶çš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ Xmind æ¥å±•ç¤ºåšå®¢è®²è¿° APP æ§ä»¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºçš„æ€è·¯å’Œç›¸å…³çŸ¥è¯†ç‚¹çš„æ•´ç†æ€è·¯ï¼Œå…·ä½“æ€è·¯çœ‹ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-420d6100d6bc6ea1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS æ§ä»¶åœ¨å±å¹•ä¸Šæ˜¾ç¤ºæ€ç»´å¯¼å›¾.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>å¹¿å·~ä¸¤å‘¨æ„Ÿæ‚Ÿ</title>
    <link href="http://yoursite.com/2016/07/16/%E4%B8%A4%E5%91%A8%E6%84%9F%E6%82%9F~%E5%B9%BF%E5%B7%9E/"/>
    <id>http://yoursite.com/2016/07/16/ä¸¤å‘¨æ„Ÿæ‚Ÿ~å¹¿å·/</id>
    <published>2016-07-15T16:27:32.000Z</published>
    <updated>2017-06-01T07:48:51.000Z</updated>
    
    <content type="html">&lt;p&gt;ä»æ±•å¤§æ¯•ä¸šæ¥åˆ°å¹¿å·&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä»æ±•å¤§æ¯•ä¸šæ¥åˆ°å¹¿å·ï¼Œç›®å‰ä½åœ¨æ£ ä¸‹æ‘å’Œä¸€ä¸ªå¸ˆå…„ä¸€èµ·ä½ï¼Œæ‰“ç®—è¿‡æ®µæ—¶é—´å‡ºå»æ‰¾æˆ¿å­~æ¬å®¶ğŸ˜‰&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ç¦»å¼€æ±•å¤§æœ¬æ¥æœ‰äº›æ„Ÿä¼¤ï¼Œä½†æ˜¯æ¥åˆ°è¿™ä¸ªè‡ªå·±å¿ƒä¸­æœ‰æ‰€æœŸæœ›çš„åŸå¸‚åˆå€æ„Ÿé«˜å…´ï¼Œå› ä¸ºå¯ä»¥éšæ—¶å»çœ‹æƒ³çœ‹çš„&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;hr&gt;
&lt;p&gt;äººğŸ˜šã€‚å¿ƒä¹‹æ‰€å‘ï¼Œå°±ä¼šæœ‰ä¸€ç§å®¶çš„æ„Ÿè§‰ï¼Œè®©è‡ªå·±æ„Ÿåˆ°æ”¾æ¾ï¼å—¨ï¼Œç›®å‰è‡ªå·±æ²¡æœ‰å®Œå…¨ç¡®å®šä¸‹æ¥å°±ä¸çŸ¥é“è§&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;åˆ°æ€ä¹ˆè¯´ğŸ˜‚ï¼Œä½†æ˜¯ç¦»ä½ å¾ˆè¿‘ï¼Œæ‰“è½¦20åˆ†é’Ÿå¤šè·¯ç¨‹â€¦ â€¦ Miss you!&lt;/p&gt;
&lt;hr&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä»æ±•å¤§æ¯•ä¸šæ¥åˆ°å¹¿å·&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ä»æ±•å¤§æ¯•ä¸šæ¥åˆ°å¹¿å·ï¼Œç›®å‰ä½åœ¨æ£ ä¸‹æ‘å’Œä¸€ä¸ªå¸ˆå…„ä¸€èµ·ä½ï¼Œæ‰“ç®—è¿‡æ®µæ—¶é—´å‡ºå»æ‰¾æˆ¿å­~æ¬å®¶ğŸ˜‰&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;ç¦»å¼€æ±•å¤§æœ¬æ¥æœ‰äº›æ„Ÿä¼¤ï¼Œä½†æ˜¯æ¥åˆ°è¿™ä¸ªè‡ªå·±å¿ƒä¸­æœ‰æ‰€æœŸæœ›çš„åŸå¸‚åˆå€æ„Ÿé«˜å…´ï¼Œå› ä¸ºå¯ä»¥éšæ—¶å»çœ‹æƒ³çœ‹çš„&lt;/p&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="éšç¬”" scheme="http://yoursite.com/tags/%E9%9A%8F%E7%AC%94/"/>
    
  </entry>
  
  <entry>
    <title>UIView &amp; CALayer&amp; Core Animation ~ ï¼ˆUIView å’Œ CALayerï¼‰ï¼ˆ1ï¼‰</title>
    <link href="http://yoursite.com/2016/06/16/UIView&CALayer&Core%20Animation~1/"/>
    <id>http://yoursite.com/2016/06/16/UIView&CALayer&Core Animation~1/</id>
    <published>2016-06-16T06:41:28.000Z</published>
    <updated>2017-06-01T07:45:54.000Z</updated>
    
    <content type="html">&lt;p&gt;ç›®å‰domeå·²ç»åšå¥½å•¦ï¼Œä½†æ˜¯æ„Ÿè§‰è‡ªå·±ç†è§£è¿˜ä¸æ˜¯å¾ˆé€å½»ã€‚æ‰“ç®—æ”¹ä¸‹è‡ªå·±çš„åšå®¢ä»å¤´å¼€å§‹å¯¹åšå®¢è¿›è¡Œé‡æ–°æ›´æ–°ï¼Œæ›´æ–°æ—¶é—´6/12/2016ã€‚&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;br&gt;&lt;p&gt;ä»Šå¤©ä¹Ÿæ‰“ç®—å†™å…³äºå›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘åœ¨æ·±å±‚åŸç†ï¼Œä»¥åŠå›¾åƒåœ¨å±å¹•æ˜¾ç¤ºåŸç†ä»¥åŠåé¢æå‡ºå¦‚ä½•è¿›è¡Œåœ¨æ­¤æ–¹é¢ä¼˜åŒ–ã€‚&lt;br&gt;ä¸‹é¢å°±è®²è¿°åœ¨IOSå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä½¿ç”¨çš„UIViewå’ŒCALayerä¸¤è€…ä¹‹é—´çš„å…³ç³»å’Œåœ¨åŠ¨ç”»ä½¿ç”¨è¿‡ç¨‹çš„å…·ä½“å°è£…ï¼ˆç½‘ä¸Šä¹Ÿæœ‰è®¸å¤šå…³äºè¿™ä¸ªè¯é¢˜çš„æ–‡ç« ï¼Œä¹Ÿæ˜¯ç«™åœ¨å·¨äººè‚©è†€ä¸Šï¼‰ã€‚&lt;/p&gt;&lt;br&gt;&lt;/div&gt;

&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;UIViewå’ŒCALayerä¹‹é—´çš„å…³ç³»&quot;&gt;&lt;a href=&quot;#UIViewå’ŒCALayerä¹‹é—´çš„å…³ç³»&quot; class=&quot;headerlink&quot; title=&quot;UIViewå’ŒCALayerä¹‹é—´çš„å…³ç³»&quot;&gt;&lt;/a&gt;UIViewå’ŒCALayerä¹‹é—´çš„å…³ç³»&lt;/h3&gt;&lt;p&gt;æ‰“å¼€UIViewå’ŒCALyerä¸­å®é™…å®ç°çš„ä»£ç ï¼Œä¸‹é¢æ˜¯UIViewå®ç°æºç &lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NS_CLASS_AVAILABLE_IOS&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;_0) &lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;UIView&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;UIResponder&lt;/span&gt; &amp;lt;&lt;span class=&quot;title&quot;&gt;NSCoding&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;UIAppearance&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;UIAppearanceContainer&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;UIDynamicItem&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;UITraitEnvironment&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;UICoordinateSpace&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;UIFocusEnvironment&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@property&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;nonatomic&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;readonly&lt;/span&gt;,&lt;span class=&quot;keyword&quot;&gt;strong&lt;/span&gt;)                 &lt;span class=&quot;built_in&quot;&gt;CALayer&lt;/span&gt;  *layer; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;CALayerå®ç°æºç ï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;CALayer&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;NSObject&lt;/span&gt; &amp;lt;&lt;span class=&quot;title&quot;&gt;NSCoding&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;CAMediaTiming&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@private&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; _CALayerIvars &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int32_t refcount;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    uint32_t magic;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *layer;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#if TARGET_OS_MAC &amp;amp;&amp;amp; !TARGET_RT_64_BIT&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *unused1[&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125; _attr;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;æˆ‘ä»¬å¯ä»¥çœ‹å‡ºUIViewæ˜¯ç»§æ‰¿è‡ªUIResponderï¼Œè€ŒCALayerç»§æ‰¿è‡ªNSObjectã€‚è¿™ä¹Ÿæ˜¯UIViewå¯ä»¥ç›¸åº”è§¦æ‘¸äº‹ä»¶ï¼Œå¹¶å®ç°å“åº”é“¾ä¸­æœ€åä¸€ç¯æ‰€åœ¨åé¢æˆ‘ä»¬ä¼šå…·ä½“è®²è¿°ã€‚CALayerç»§æ‰¿è‡ªNSObjectï¼Œå…¶ä¸­UIViewä¸­åˆåŒ…å«è‡ªå·±æ‰€ç‰¹æœ‰çš„layerã€‚æˆ‘ä»¬å¯ä»¥çœ‹åšCALayeræ˜¯UIViewçš„å…·ä½“å†…å®¹ç»†èŠ‚çš„å®ç°ï¼Œä¸¤è€…å…·æœ‰å¹³è¡Œå…³ç³»ã€‚&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;p&gt;ä¸ºä»€ä¹ˆä¸æŠŠä¸¤è€…ä½•åœ¨ä¸€èµ·è¿›è¡Œå®ç°å‘¢ï¼Œåˆ†å¼€å®ç°å…·ä½“åŠŸèƒ½å‘¢ï¼Ÿ&lt;br&gt;æˆ‘æƒ³å¯èƒ½æ˜¯ä¸ºå•¦åˆ†å±‚éœ€è¦ï¼ŒæŠŠåŠŸèƒ½å…·ä½“åˆ†éš”å¼€æ¥ã€‚UIViewå®ç°è§¦æ‘¸å“åº”ï¼ŒCALayerå®ç°å…·ä½“çš„å†…å®¹å±•ç¤ºã€‚&lt;br&gt;&lt;/p&gt;&lt;br&gt;&lt;/div&gt;

&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CoreAnimationBasics/CoreAnimationBasics.html#//apple_ref/doc/uid/TP40004514-CH2-SW12&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;UIVieå’ŒCALayerå…³ç³»æºç &lt;/a&gt;;&lt;/p&gt;
&lt;p&gt;&lt;br&gt;&lt;br&gt;ä¸‹é¢æˆ‘ä»¬å°†å†™å…³äºUIViewå’ŒCALayerçš„ä¸€äº›ç›¸å…³çš„çŸ¥è¯†ï¼š&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;åˆ—å‡ºåœ¨UIViewå®ç°ä¸äº†çš„CALayerçš„åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;é˜´å½±ï¼Œåœ†è§’ï¼Œå¸¦é¢œè‰²çš„è¾¹æ¡†&lt;/li&gt;&lt;br&gt;&lt;li&gt;3Då˜æ¢&lt;/li&gt;&lt;br&gt;&lt;li&gt;éçŸ©å½¢èŒƒå›´&lt;/li&gt;&lt;br&gt;&lt;li&gt;é€æ˜é®ç½©&lt;/li&gt;&lt;br&gt;&lt;li&gt;å¤šçº§éçº¿æ€§åŠ¨ç”»&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;hr&gt;
&lt;p&gt;æˆ‘ä»¬ä¹Ÿéƒ½çŸ¥é“åœ¨Iphoneæ‰‹æœºå†…å­˜æ˜¯å›ºå®šä¸èƒ½è¿›è¡Œæ‹“å±•ï¼Œæ‰€ä»¥æˆ‘ä»¬æ‰‹æœºå†…å­˜æ˜¯å¾ˆå®è´µçš„ã€‚å¦‚æœæˆ‘ä»¬æƒ³è¦åŠ è½½å¤§å®¹é‡çš„å›¾ç‰‡ï¼Œä¼šå ç”¨å¾ˆå¤§çš„å†…å­˜ã€‚&lt;br&gt;&lt;br&gt;&lt;br&gt;ä¸ºæ­¤ï¼ŒAppleé‡‡ç”¨äº†ä¸€ç§æ¯”è¾ƒå·§å¦™çš„ç­–ç•¥ã€‚åœ¨ä½å†…å­˜çš„æƒ…å†µä¸‹ï¼Œç³»ç»Ÿä¼šå¼ºåˆ¶æ¸…é™¤UIImageå¯¹è±¡æ‰€æŒ‡å‘çš„å›¾ç‰‡æ•°æ®ï¼Œä»¥é‡Šæ”¾éƒ¨åˆ†å†…å­˜ã€‚æ³¨æ„ï¼Œè¿™ç§æ¸…é™¤è¡Œä¸ºå½±å“åˆ°çš„åªæ˜¯å›¾ç‰‡æ•°æ®ï¼Œè€Œä¸ä¼šå½±å“åˆ°UIImageå¯¹è±¡æœ¬èº«ã€‚å½“æˆ‘ä»¬éœ€è¦ç»˜åˆ¶é‚£äº›å›¾ç‰‡æ•°æ®å·²ç»è¢«æ¸…é™¤çš„UIImageå¯¹è±¡æ—¶ï¼Œå¯¹è±¡ä¼šè‡ªåŠ¨ä»æºæ–‡ä»¶ä¸­é‡æ–°åŠ è½½æ•°æ®ã€‚å½“ç„¶ï¼Œè¿™æ˜¯ä»¥æ—¶é—´æ¢ç©ºé—´çš„ä¸€ç§ç­–ç•¥ï¼Œä¼šå¯¼è‡´ä¸€å®šçš„æ€§èƒ½æŸè€—ã€‚ä¸‹é¢ç»™å‡ºä¸€äº›å›¾ç‰‡å¤„ç†å°æŠ€å·§&lt;/p&gt;
&lt;h3 id=&quot;UIImageç¼“å­˜&quot;&gt;&lt;a href=&quot;#UIImageç¼“å­˜&quot; class=&quot;headerlink&quot; title=&quot;UIImageç¼“å­˜&quot;&gt;&lt;/a&gt;UIImageç¼“å­˜&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬çŸ¥é“åœ¨ä½¿ç”¨imageNamedè¿›è¡Œå›¾ç‰‡æ˜¾ç¤ºï¼Œå›¾ç‰‡ä¼šç¼“å­˜ã€‚ä½†å…·ä½“ç¼“å­˜æ˜¯æ€ä¹ˆå®ç°ï¼Œå…¶ä¸­è§£æå’Œæ¸…é™¤æ—¶é—´æ˜¯ä»€ä¹ˆæ—¶å€™å‘¢ï¼Ÿ&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;/div&gt;&lt;/p&gt;
&lt;p&gt;&lt;/p&gt;&lt;p&gt;å½“æˆ‘ä»¬ä½¿ç”¨imageNamed:æ—¶åˆ›å»ºå›¾ç‰‡ï¼Œç³»ç»Ÿä¼šé€šè¿‡Bundleçš„æ–‡ä»¶ä¸­æ‰¾åˆ°å›¾ç‰‡çš„æ–‡ä»¶åï¼Œç„¶åæŠŠç›¸å…³çš„åå­—æ”¾åˆ°UIImageè¿”å›ï¼Œæ­¤æ—¶å¹¶æ²¡æœ‰è§£æå›¾ç‰‡ã€‚å½“å›¾ç‰‡åœ¨ç¬¬ä¸€æ¬¡æ˜¾ç¤ºæ—¶ï¼Œå›¾ç‰‡æ‰ä¼šè°ƒç”¨å†…éƒ¨è§£ç æ–¹æ³•ï¼Œè§£ç ä¼šæ”¾åˆ°ä¸€ä¸ªå…¨å±€å˜é‡ä¸­ã€‚å›¾ç‰‡åœ¨è§£ç åï¼Œä¼šåœ¨APPç¬¬ä¸€æ¬¡è¿›å…¥åå°æˆ–è€…å†…å­˜è­¦å‘Šæ—¶ï¼Œè¯¥å›¾ç‰‡çš„ç¼“å­˜æ‰ä¼šè¢«æ¸…ç©ºï¼Œå…¶ä»–æƒ…å†µç¼“å­˜ä¼šä¸€ç›´å­˜åœ¨ã€‚&lt;br&gt;&lt;/p&gt;&lt;br&gt;&lt;p&gt;&lt;/p&gt;
&lt;h3 id=&quot;ä½¿ç”¨imageWithDataå¯ä»¥é¿å…ç¼“å­˜å—ï¼Ÿ&quot;&gt;&lt;a href=&quot;#ä½¿ç”¨imageWithDataå¯ä»¥é¿å…ç¼“å­˜å—ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;ä½¿ç”¨imageWithDataå¯ä»¥é¿å…ç¼“å­˜å—ï¼Ÿ&quot;&gt;&lt;/a&gt;ä½¿ç”¨imageWithDataå¯ä»¥é¿å…ç¼“å­˜å—ï¼Ÿ&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬åœ¨åˆ›å»ºUIImageæ—¶ï¼ŒUIImageçš„åº•å±‚ä¼šè°ƒç”¨ImageIOçš„CGImageSourceCreateWithData()ï¼Œæ­¤æ–¹æ³•æœ‰ä¸ªå‚æ•° ShouldCacheï¼Œåœ¨64ä½çš„å¤„ç†å™¨ä¸Šæ˜¯é»˜è®¤å¼€å¯çš„ã€‚å›¾ç‰‡ä¹Ÿä¼šåœ¨ç¬¬ä¸€æ¬¡æ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ‰ä¼šè¢«è§£ç ï¼Œè§£ç æ•°æ®ä¹Ÿä¼šä¿å­˜åœ¨CGimageçš„å†…éƒ¨ã€‚&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;br&gt;&lt;p&gt;ä½†æ˜¯ä¸ä¸Šé¢ä½¿ç”¨imageNameçš„æƒ…å†µä¸åŒï¼Œåœ¨UIImageè¢«é‡Šæ”¾æ˜¯å…¶ç¼“å­˜ä¹Ÿä¼šè¿›è¡Œé‡Šæ”¾ã€‚&lt;/p&gt;&lt;/div&gt;

&lt;h3 id=&quot;æ€æ ·é¿å…ç¼“å­˜&quot;&gt;&lt;a href=&quot;#æ€æ ·é¿å…ç¼“å­˜&quot; class=&quot;headerlink&quot; title=&quot;æ€æ ·é¿å…ç¼“å­˜&quot;&gt;&lt;/a&gt;æ€æ ·é¿å…ç¼“å­˜&lt;/h3&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å¦‚æœç›´æ¥ä½¿ç”¨CGImageSourceCreateWithData()ï¼Œå¹¶ä¸”å…³é—­ShouldCache å’Œ ShouldCacheImmediatelyï¼Œä½†æ˜¯è¿™æ ·çš„è¯æ¯æ¬¡å›¾ç‰‡éœ€è¦æ˜¾ç¤ºçš„è¯ï¼Œéƒ½ä¼šè¿›è¡Œå›¾ç‰‡è§£ç ï¼Œè¿™æ ·ä¼šå ç”¨è¾ƒå¤§CPU&lt;/li&gt;&lt;br&gt;&lt;li&gt;æŠŠå›¾ç‰‡ç”¨ CGContextDrawImage() ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Šï¼Œç„¶åæŠŠç”»å¸ƒçš„æ•°æ®å–å‡ºæ¥å½“ä½œå›¾ç‰‡ã€‚è¿™ä¹Ÿæ˜¯å¸¸è§çš„ç½‘ç»œå›¾ç‰‡åº“çš„åšæ³•&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;http://blog.ibireme.com/2015/11/02/ios_image_tips/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒèµ„æ–™~iOS å¤„ç†å›¾ç‰‡çš„ä¸€äº›å° Tip&lt;/a&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;http://bihongbo.com/2016/01/03/memoryGhostdrawRect/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å†…å­˜æ¶é¬¼drawRect&lt;/a&gt;&lt;br&gt;&lt;br&gt;æ€»çš„å‚è€ƒèµ„æ–™åœ°å€&lt;br&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/AttackOnDobby/iOS-Core-Animation-Advanced-Techniques/blob/master/1-å›¾å±‚æ ‘/å›¾å±‚æ ‘.md&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å›¾å±‚çš„æ ‘çŠ¶ç»“æ„&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/AttackOnDobby/iOS-Core-Animation-Advanced-Techniques/blob/master/2-å¯„å®¿å›¾/å¯„å®¿å›¾.md#contentså±æ€§&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å¯„å®¿å›¾&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;https://github.com/AttackOnDobby/iOS-Core-Animation-Advanced-Techniques&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;UIViewå’ŒCALayeræ€»çš„å‚è€ƒåœ°å€&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ç›®å‰domeå·²ç»åšå¥½å•¦ï¼Œä½†æ˜¯æ„Ÿè§‰è‡ªå·±ç†è§£è¿˜ä¸æ˜¯å¾ˆé€å½»ã€‚æ‰“ç®—æ”¹ä¸‹è‡ªå·±çš„åšå®¢ä»å¤´å¼€å§‹å¯¹åšå®¢è¿›è¡Œé‡æ–°æ›´æ–°ï¼Œæ›´æ–°æ—¶é—´6/12/2016ã€‚&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot; &gt;&lt;br&gt;&lt;p&gt;ä»Šå¤©ä¹Ÿæ‰“ç®—å†™å…³äºå›¾ç‰‡ã€éŸ³é¢‘å’Œè§†é¢‘åœ¨æ·±å±‚åŸç†ï¼Œä»¥åŠå›¾åƒåœ¨å±å¹•æ˜¾ç¤ºåŸç†ä»¥åŠåé¢æå‡ºå¦‚ä½•è¿›è¡Œåœ¨æ­¤æ–¹é¢ä¼˜åŒ–ã€‚&lt;br&gt;ä¸‹é¢å°±è®²è¿°åœ¨IOSå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä½¿ç”¨çš„UIViewå’ŒCALayerä¸¤è€…ä¹‹é—´çš„å…³ç³»å’Œåœ¨åŠ¨ç”»ä½¿ç”¨è¿‡ç¨‹çš„å…·ä½“å°è£…ï¼ˆç½‘ä¸Šä¹Ÿæœ‰è®¸å¤šå…³äºè¿™ä¸ªè¯é¢˜çš„æ–‡ç« ï¼Œä¹Ÿæ˜¯ç«™åœ¨å·¨äººè‚©è†€ä¸Šï¼‰ã€‚&lt;/p&gt;&lt;br&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="è§†å›¾&å›¾å±‚&åŠ¨ç”»" scheme="http://yoursite.com/categories/%E8%A7%86%E5%9B%BE-%E5%9B%BE%E5%B1%82-%E5%8A%A8%E7%94%BB/"/>
    
    
      <category term="å›¾ç‰‡è§†é¢‘" scheme="http://yoursite.com/tags/%E5%9B%BE%E7%89%87%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>UIView&amp;CALayer&amp;Core Animation~å¼€ç¯‡</title>
    <link href="http://yoursite.com/2016/06/16/UIView&CALayer&Core%20Animation-%E6%80%BB%E4%BD%93/"/>
    <id>http://yoursite.com/2016/06/16/UIView&CALayer&Core Animation-æ€»ä½“/</id>
    <published>2016-06-16T06:35:22.000Z</published>
    <updated>2017-06-01T07:48:51.000Z</updated>
    
    <content type="html">&lt;p&gt;ä¸€ç›´æƒ³åšä¸ªdomeæ¥å®è·µè‡ªå·±æ‰€å­¦çš„çŸ¥è¯†ï¼Œçœ‹åˆ°ç½‘ä¸Šæœ‰å¾ˆå¤šèµ„æ–™æ„Ÿè§‰å‹åŠ›æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥å†³å®šç«™åœ¨å·¨äººè‚©è†€ä¸Šå¯¹äºUIView&amp;amp;CALayer&amp;amp;Core Animation è¿›è¡Œåˆ†è£…åšå‡ºä¸€ä¸ªdomeã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ç»™å‡ºæ•´ç†çš„æ€ç»´å¯¼å›¾ç‰‡ï¼š&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;img src=&quot;/images/UIView&amp;amp;CALayeråŠ¨ç”».png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/boilWater/boilWater.github.io/tree/master/Xmind&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ€ç»´å¯¼å›¾ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä¸€ç›´æƒ³åšä¸ªdomeæ¥å®è·µè‡ªå·±æ‰€å­¦çš„çŸ¥è¯†ï¼Œçœ‹åˆ°ç½‘ä¸Šæœ‰å¾ˆå¤šèµ„æ–™æ„Ÿè§‰å‹åŠ›æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥å†³å®šç«™åœ¨å·¨äººè‚©è†€ä¸Šå¯¹äºUIView&amp;amp;CALayer&amp;amp;Core Animation è¿›è¡Œåˆ†è£…åšå‡ºä¸€ä¸ªdomeã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ç»™å‡ºæ•´ç†çš„æ€ç»´å¯¼å›¾ç‰‡ï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="è§†å›¾&å›¾å±‚&åŠ¨ç”»" scheme="http://yoursite.com/categories/%E8%A7%86%E5%9B%BE-%E5%9B%BE%E5%B1%82-%E5%8A%A8%E7%94%BB/"/>
    
    
      <category term="å›¾ç‰‡è§†é¢‘" scheme="http://yoursite.com/tags/%E5%9B%BE%E7%89%87%E8%A7%86%E9%A2%91/"/>
    
  </entry>
  
  <entry>
    <title>IOS 10.0</title>
    <link href="http://yoursite.com/2016/06/15/IOS%2010/"/>
    <id>http://yoursite.com/2016/06/15/IOS 10/</id>
    <published>2016-06-14T16:07:59.000Z</published>
    <updated>2017-06-01T07:48:51.000Z</updated>
    
    <content type="html">&lt;p&gt;ä»Šå¤©æœ‰ç‚¹æ‚²å‰§ï¼Œå›åˆ°ä½çš„åœ°æ–¹èº«ä½“å°±å¼€å§‹ä¸èˆ’æœï¼Œä¸€è§‰ç¡åˆ°ç°åœ¨ã€‚çœ‹åˆ°11ç‚¹å¤šï¼Œèµ¶ç´§æ‰¾æ—¶é—´å¼€å§‹ç IOS 10.0æ–°çš„æ”¹å˜ã€‚&lt;br&gt;&lt;br&gt;æ˜¨å¤©å‡Œæ™¨IOS ä¸¾è¡Œ WWDCå…¨çƒå‘å¸ƒè€…å¤§ä¼šï¼Œwatch OSã€tv OSã€OS Xä»¥åŠiOS 10ç³»ç»Ÿçš„æ–°ç‰¹æ€§ã€‚&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.apple.com/apple-events/june-2016/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;WWDC-13/6/2016~è§†é¢‘åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å±•ç¤ºä¼šç¬¬ä¸€ä¸ªæ˜¯APPLEçš„æŒèˆµäººæ˜¯åº“å…‹ï¼Œæœ‰ç‚¹æç¬‘çš„æ˜¯å¤§å®¶å¥½åƒæ²¡æœ‰ç†è§£åº“å…‹çš„ç¬¬ä¸€ä¸ªæ¢—å¤§å®¶éƒ½æ²¡æœ‰æ¬¢å‘¼ã€‚çœ‹å®Œè§†é¢‘ç»™æˆ‘æ¯”è¾ƒå¥½çš„æ„Ÿè§‰å°±æ˜¯åœ¨siriæ“ä½œç¨‹åºå’ŒApple Payçš„ä½¿ç”¨è¿‡ç¨‹ï¼Œä»˜æ¬¾ä½¿ç”¨èµ·æ¥æ„Ÿè§‰æ¯”æ”¯ä»˜å®æ›´åŠ ä¾¿æ·ã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬åˆ—è¡¨IOS 10çš„æ–°åŠŸèƒ½çš„ä½“ç°ï¼Œä¸‹é¢å°†ç»™å‡ºç›¸å…³çŸ¥è¯†çš„æ€ç»´å¯¼å›¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/Images/WWDCï¼ˆ2016ï¼‰.png&quot; alt=&quot;image&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Watch-OS&quot;&gt;&lt;a href=&quot;#Watch-OS&quot; class=&quot;headerlink&quot; title=&quot;Watch OS&quot;&gt;&lt;/a&gt;Watch OS&lt;/h2&gt;&lt;h3 id=&quot;å¯»æ‰¾APPS&quot;&gt;&lt;a href=&quot;#å¯»æ‰¾APPS&quot; class=&quot;headerlink&quot; title=&quot;å¯»æ‰¾APPS&quot;&gt;&lt;/a&gt;å¯»æ‰¾APPS&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬é€šè¿‡Apple Watchå‚è¾¹çš„æ—‹è½¬æ‰‹æŸ„å¯ä»¥å¿«é€Ÿå¯»æ‰¾æˆ‘ä»¬è£…åœ¨çš„APPä»¥åŠè®¾å®šé¦–ç•Œé¢æ˜¾ç¤ºçš„å…·ä½“å†…å®¹&lt;/p&gt;
&lt;h3 id=&quot;è¡¨ç›˜ç•Œé¢&quot;&gt;&lt;a href=&quot;#è¡¨ç›˜ç•Œé¢&quot; class=&quot;headerlink&quot; title=&quot;è¡¨ç›˜ç•Œé¢&quot;&gt;&lt;/a&gt;è¡¨ç›˜ç•Œé¢&lt;/h3&gt;&lt;p&gt;Apple Watchæä¾›å¤šä¸ªè¡¨ç›˜ç•Œé¢ï¼Œå…¶ä¸­ä¸€ä¸ªç«Ÿç„¶æ˜¯ç±³è€é¼ çš„æ˜¾ç¤ºæ—¶é—´çœŸå¿ƒé†‰å•¦ï¼Œæ²¡æœ‰ä¿æŒä¹”å¸®ä¸»æ—¶doubleåšæ³•&lt;/p&gt;
&lt;h3 id=&quot;æ´»åŠ¨&quot;&gt;&lt;a href=&quot;#æ´»åŠ¨&quot; class=&quot;headerlink&quot; title=&quot;æ´»åŠ¨&quot;&gt;&lt;/a&gt;æ´»åŠ¨&lt;/h3&gt;&lt;p&gt;æ´»åŠ¨æ–¹é¢Apple Watchä¸ºæˆ‘ä»¬æ·»åŠ ä¸€äº›ä½¿ç”¨çš„åŠŸèƒ½ã€‚æˆ‘ä»¬å¯ä»¥å¯¹æ´»åŠ¨ä»»åŠ¡è¿›è¡Œåˆ†äº«ã€æŸ¥çœ‹æ´»åŠ¨å®Œæˆè¿›åº¦å’Œä¸æœ‹å‹æ´»åŠ¨è¿›åº¦è¿›è¡Œæ¯”è¾ƒ&lt;/p&gt;
&lt;h3 id=&quot;Wheelchair-Use&quot;&gt;&lt;a href=&quot;#Wheelchair-Use&quot; class=&quot;headerlink&quot; title=&quot;Wheelchair Use&quot;&gt;&lt;/a&gt;Wheelchair Use&lt;/h3&gt;&lt;p&gt;ä¸ºåšè½®æ¤…çš„äººæä¾›å¯ä»¥å¸®åŠ©ï¼Œå¯ä»¥æé†’ä½¿ç”¨è€…ä¼‘æ¯ã€å·¥ä½œå’Œæ˜¾ç¤ºæ—‹è½¬é€Ÿåº¦&lt;/p&gt;
&lt;h3 id=&quot;Workout&quot;&gt;&lt;a href=&quot;#Workout&quot; class=&quot;headerlink&quot; title=&quot;Workout&quot;&gt;&lt;/a&gt;Workout&lt;/h3&gt;&lt;p&gt;åœ¨å·¥ä½œä¹‹ä½™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Apple Watchæ¥æŸ¥çœ‹æˆ‘ä»¬èµ°çš„è·ç¦»ã€watchçš„æ´»è·ƒå†…å­˜ç©ºé—´ã€æ¶ˆè€—å¡è·¯é‡Œã€å¿ƒç‡å’Œè¿åŠ¨æ—¶é—´ï¼Œå¯ä»¥é€‰æ‹©é‡è¦çš„è¿åŠ¨é¡¹ç›®ï¼Œè¿›è¡Œç‰¹åˆ«æ ‡æ³¨ï¼Œåœ¨è·‘æ­¥è¿‡ç¨‹ä¼šè‡ªåŠ¨åœæ­¢&lt;/p&gt;
&lt;h3 id=&quot;Breathe-App&quot;&gt;&lt;a href=&quot;#Breathe-App&quot; class=&quot;headerlink&quot; title=&quot;Breathe App&quot;&gt;&lt;/a&gt;Breathe App&lt;/h3&gt;&lt;p&gt;å¸®åŠ©ä½ å¯ä»¥è¿›è¡Œå†¥æƒ³ï¼Œé‡Šæ”¾è‡ªå·±çš„å‹åŠ›ï¼ŒæŠŠè¯­éŸ³ä¿¡å¿ƒè½¬æ¢ä¸ºæ–‡å­—ï¼Œè¿›è¡Œå›å¤&lt;/p&gt;
&lt;h3 id=&quot;Messages&quot;&gt;&lt;a href=&quot;#Messages&quot; class=&quot;headerlink&quot; title=&quot;Messages&quot;&gt;&lt;/a&gt;Messages&lt;/h3&gt;&lt;p&gt;æŠŠè¯­éŸ³ä¿¡å¿ƒè½¬æ¢ä¸ºæ–‡å­—ï¼Œè¿›è¡Œå›å¤ï¼Œé‡è¦çš„æ˜¯æ”¯æŒæ±‰å­—æ‰‹å†™&lt;/p&gt;
&lt;h3 id=&quot;ä¿ç•™åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#ä¿ç•™åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;ä¿ç•™åŠŸèƒ½&quot;&gt;&lt;/a&gt;ä¿ç•™åŠŸèƒ½&lt;/h3&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;Homeï¼šå¯ä»¥é€šè¿‡Apple Watché“¾æ¥æ§åˆ¶å®¶ä¸­ä½¿ç”¨Homeçš„æ‰€æœ‰ç¡¬ä»¶è®¾å¤‡&lt;/li&gt;&lt;br&gt;&lt;li&gt;SOSï¼šè¯•ä¸‹ç´§æ€¥å‘¼å«çš„åŠŸèƒ½&lt;/li&gt;&lt;br&gt;&lt;li&gt;Apple Payï¼šå¯ä»¥åœ¨Macä¸Šè´­ä¹°ç„¶åé€šè¿‡IPhoneç›´æ¥æŒ‡çº¹è¯†åˆ«è¿›è¡Œä»˜æ¬¾&lt;/li&gt;&lt;br&gt;&lt;li&gt;Unlock Macï¼šè§£é”æˆ‘ä»¬ä½¿ç”¨çš„Macç”µè„‘&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;


&lt;h2 id=&quot;IOS-10&quot;&gt;&lt;a href=&quot;#IOS-10&quot; class=&quot;headerlink&quot; title=&quot;IOS 10&quot;&gt;&lt;/a&gt;IOS 10&lt;/h2&gt;&lt;h3 id=&quot;å…¨æ–°ç•Œé¢åŠŸèƒ½è®¾è®¡&quot;&gt;&lt;a href=&quot;#å…¨æ–°ç•Œé¢åŠŸèƒ½è®¾è®¡&quot; class=&quot;headerlink&quot; title=&quot;å…¨æ–°ç•Œé¢åŠŸèƒ½è®¾è®¡&quot;&gt;&lt;/a&gt;å…¨æ–°ç•Œé¢åŠŸèƒ½è®¾è®¡&lt;/h3&gt;&lt;p&gt;é¦–å…ˆæ˜¯æ–°çš„é”å±ç•Œé¢ï¼Œäº’åŠ¨æ€§å¤§å¹…å¢å¼ºï¼Œæ”¯æŒæ–°çš„é€šçŸ¥æ˜¾ç¤ºæ–¹å¼å’Œæ‰‹åŠ¿åŠŸèƒ½ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨ 3D Touch è¿›è¡Œé¢„è§ˆä¸ä¿¡æ¯å›å¤ï¼Œæˆ–è€…é‡æŒ‰å…¨éƒ¨æ¸…é™¤é€šçŸ¥ï¼Œæ›´å¿«é€Ÿçš„è¿›å…¥æ‹ç…§ç•Œé¢ç­‰ï¼Œç•Œé¢çœ‹èµ·æ¥æ›´åŠ æ¸…æ™°ç›´è§‚ã€‚&lt;/p&gt;
&lt;p&gt;å€¼å¾—ä¸€æçš„æ˜¯ï¼ŒiPhone æ”¯æŒæŠ¬æ‰‹å”¤é†’å±å¹•åŠŸèƒ½äº†ï¼Œ å½“ä½ æŠ¬èµ· iPhone çš„æ—¶å€™é”å±ç•Œé¢å°±ä¼šäº®èµ·ï¼Œç›´æ¥æ˜¾ç¤ºé€šçŸ¥ä¿¡æ¯å’Œç›¸å…³å†…å®¹ï¼Œè€Œä¸è§¦ç¢°ä»»ä½•æŒ‰é”®å’Œæ‰€åŠ¨æ“ä½œï¼Œæœ‰ç‚¹ç±»ä¼¼äºç«äº‰å¯¹æ‰‹çš„å¹³å°è®¾è®¡ç†å¿µã€‚&lt;/p&gt;
&lt;p&gt;é€šçŸ¥ä¸­å¿ƒå’Œæ§åˆ¶ä¸­å¿ƒç•Œé¢è¿›è¡Œäº†æ–°çš„è®¾è®¡ï¼ŒåŒ…æ‹¬æ¡Œé¢äº¦æ˜¯å¦‚æ­¤ï¼Œå¾ˆå¤šæ“ä½œæ“ä½œåˆ©ç”¨ 3D Touch æ›´åŠ ä¾¿æ·ï¼Œæ¯”å¦‚åœ¨ app å›¾æ ‡ä¸Šé¢„è§ˆæ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œç”šè‡³æ˜¯è§†é¢‘é¢„è§ˆã€‚&lt;/p&gt;
&lt;h3 id=&quot;Siri&quot;&gt;&lt;a href=&quot;#Siri&quot; class=&quot;headerlink&quot; title=&quot;Siri&quot;&gt;&lt;/a&gt;Siri&lt;/h3&gt;&lt;p&gt;Siri æœç„¶æ¯ä¸€å¹´éƒ½ä¼šåŠªåŠ›æå‡ Siri çš„æ°´å¹³ï¼Œè‹¹æœè¡¨ç¤ºæ¯å‘¨æœ‰ 200 ä¸‡ä¸ªç”¨æˆ·ä½¿ç”¨ Siriã€‚æ–°å‡çº§ä¹‹å Siri å¯ä»¥æœç´¢çš„å†…å®¹æ›´å¤šäº†ï¼Œæ¯”å¦‚å›¾ç‰‡æœç´¢ã€åº”ç”¨æœç´¢ï¼ŒåŒæ—¶ Siri è¿˜èƒ½å¤ŸæŸ¥çœ‹æ—¥æœŸã€æ‰“å¼€ appã€å‘é€çŸ­æ¯ã€‚&lt;/p&gt;
&lt;p&gt;è‹¹æœå®£å¸ƒ Siri SDK å¼€æ”¾ï¼Œä¹‹åå¼€å‘è€…å¯ä»¥å°†ç¬¬ä¸‰æ–¹åº”ç”¨ç¨‹åºå’ŒæœåŠ¡ä¸ Siri é›†æˆï¼Œä»è€Œåœ¨è‡ªå®¶çš„åº”ç”¨ä¸­åˆ©ç”¨ Siri å®ç°è¯­éŸ³äº¤äº’ã€äººå·¥æ™ºèƒ½ç­‰åŠŸèƒ½ã€‚è‹¹æœç§° Whatsappã€å¾®ä¿¡å’Œæ»´æ»´æ‰“è½¦éƒ½ä¼šé›†æˆï¼Œç”¨æˆ·å¯ä»¥é€šè¿‡ Siri è¯­éŸ³å‘½ä»¤â€œWeChat xxx to è°è°è°â€ï¼Œå°±èƒ½å¤Ÿå®Œæˆå¾®ä¿¡çš„å‘é€äº†ï¼Œä¹Ÿå¯ä»¥ç”¨ Siri æ¥ä½¿ç”¨æ»´æ»´æ‰“è½¦ã€‚&lt;/p&gt;
&lt;p&gt;å¦ä¸€ä¸º iOS 10 ä¸Š Siri å¢åŠ çš„åŠŸèƒ½æ˜¯ iCloud Voicemailï¼Œå¯ä»¥å°†è¯­éŸ³ä¿¡ç®±ä¸­çš„å†…å®¹è½¬æ¢æˆæ–‡å­—ï¼Œè®©ç”¨æˆ·èƒ½å¤Ÿå¿«é€Ÿæµè§ˆå’Œé˜…è¯»ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Quick-type&quot;&gt;&lt;a href=&quot;#Quick-type&quot; class=&quot;headerlink&quot; title=&quot;Quick type&quot;&gt;&lt;/a&gt;Quick type&lt;/h3&gt;&lt;p&gt;Quick type è¿™éƒ¨åˆ†æ›´è¡Œé‡åœ¨ Siri çš„å…¨æ–°å‡çº§çš„äººå·¥æ™ºèƒ½ç‰¹å¾æ‰€å¸¦æ¥çš„ä¾¿åˆ©æ€§ï¼Œå› ä¸º Siri æ”¯æŒæ·±åº¦å­¦ä¹ ä½ çš„ä¸€åˆ‡ä¿¡æ¯ï¼ŒåŒ…æ‹¬ç›‘æµ‹ä½ çš„æ—¥ç¨‹å®‰æ’ï¼Œæ‰€ä»¥ä¸ä»…å¯ä»¥å¸®åŠ©æ›´å¿«é€Ÿçš„ç»„ç»‡è¯­è¨€ä¸€è¾¹å¿«é€Ÿå›å¤ï¼Œè¿˜èƒ½å¤Ÿæ ¹æ®ä¿¡æ¯æä¾›ç›¸å…³å»ºè®®ï¼Œå¸®åŠ©è‡ªåŠ¨å¡«å……åœ°å€ä¿¡æ¯ç­‰ç­‰ã€‚åŸºæœ¬ä¸Šï¼Œæ–°å‡çº§ä¹‹åèƒ½å¤Ÿä¸ºç”¨æˆ·çœå»æ›´å¤šæ‰‹åŠ¨è¾“å…¥éº»çƒ¦ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç…§ç‰‡åº”ç”¨&quot;&gt;&lt;a href=&quot;#ç…§ç‰‡åº”ç”¨&quot; class=&quot;headerlink&quot; title=&quot;ç…§ç‰‡åº”ç”¨&quot;&gt;&lt;/a&gt;ç…§ç‰‡åº”ç”¨&lt;/h3&gt;&lt;p&gt;iOS 10 ä¸­çš„ç…§ç‰‡åº”ç”¨æ‹¥æœ‰äº†æ›´åŠ å¼ºå¤§çš„ç®¡ç†åŠŸèƒ½ï¼Œè‹¹æœå¤šæ¬¡æåˆ°çš„å°±æ˜¯æ”¯æŒâ€œè¯†åˆ«åˆ†ç±»â€åŠŸèƒ½ï¼Œå¯ä»¥è¿›è¡Œè„¸éƒ¨ã€å¯¹è±¡å’Œåœºæ™¯çš„è¯†åˆ«ã€‚æ¯”å¦‚é€šè¿‡ä»»åŠ¡çš„è„¸éƒ¨å¤´åƒè¿›è¡Œåˆ†ç±»ï¼Œå½“æ™ºèƒ½æœç´¢åˆ†ç±»å®Œæˆä¹‹åï¼Œç”¨æˆ·è¿˜å¯ä»¥ç›´æ¥æœç´¢å›¾ç‰‡ä¸Šçš„äº‹ä»¶å†…å®¹ï¼Œæœç´¢éª‘é©¬ä¹Ÿèƒ½æ‰¾åˆ°ç…§ç‰‡ã€‚&lt;/p&gt;
&lt;p&gt;æ€»ä¹‹ï¼Œåˆ©ç”¨ iCloud ç…§ç‰‡åº“å°±å¯ä»¥è½»æ¾æ ¹æ®åœ°ç†ä½ç½®ä¿¡æ¯ã€æ—¶é—´ã€ä»»åŠ¡ã€è¯é¢˜ç­‰ç­‰è¿›è¡Œåˆ†ç±»ï¼Œæ¯ä¸€ä¸ªç”¨æˆ·éƒ½å¯ä»¥å¾ˆæ–¹ä¾¿æ›´æ»¡æ„çš„åˆ›å»ºæ™ºèƒ½ç›¸å†Œï¼Œå¹¶ä¸”è¿™äº›æ–°åŠŸèƒ½åœ¨ Macä¸Šçš„ Photos ä¹Ÿå°†åŒæ ·å¾—åˆ°æ”¯æŒã€‚&lt;/p&gt;
&lt;h3 id=&quot;åœ°å›¾åº”ç”¨&quot;&gt;&lt;a href=&quot;#åœ°å›¾åº”ç”¨&quot; class=&quot;headerlink&quot; title=&quot;åœ°å›¾åº”ç”¨&quot;&gt;&lt;/a&gt;åœ°å›¾åº”ç”¨&lt;/h3&gt;&lt;p&gt;è‹¹æœè‡ªå®¶çš„åœ°å›¾åº”ç”¨åœ¨ iOS 10 ä¸­å¾—åˆ°äº†è¾ƒå¤§æ”¹è¿›ï¼Œé‡æ–°è®¾è®¡ä¹‹åæ›´ç®€å•ã€æ›´ç›´è§‚ä¹Ÿæ›´äººæ€§åŒ–ï¼Œæ— è®ºæ˜¯å¯¼èˆªç•Œé¢è¿˜æ˜¯è·¯çº¿ä¿¡æ¯ã€äº¤é€šä¿¡æ¯ç­‰éƒ½ä¸ä»¥å¾€æœ‰æ‰€ä¸åŒã€‚å‘¨è¾¹æ™ºèƒ½åŒ–å»ºè®®è¿›ä¸€æ­¥å¢å¼ºï¼Œæ‰€åœ¨ä½ç½®æ‰“å¼€åœ°å›¾â€œå¥½å»å¤„â€çš„å»ºè®®æ›´åŠ ä¸°å¯Œï¼Œé™„ä»¶çš„åŠ æ²¹ç«™ã€é¤é¦†å’Œå’–å•¡å…ç­‰ä¸€è§ˆæ— é—ï¼Œç”¨è‹¹æœçš„è¯æ¥è¯´ç®€ç›´å°±æ˜¯â€œæƒ…æŠ¥ä¸­å¿ƒâ€ã€‚&lt;/p&gt;
&lt;p&gt;è‹¹æœåœ°å›¾ä¹Ÿå°†å¼€å‘ SDK ç»™å¼€å‘è€…ï¼Œè‹¹æœè¡¨ç¤ºä¸­å›½çš„å¤§ä¼—ç‚¹è¯„å’Œæ»´æ»´æ‰“è½¦å°†å…¨é¢æ•´åˆè‹¹æœåœ°å›¾ï¼Œè¾¾åˆ°ä¸åŸç”Ÿæ— ç¼æ–œè¡—çš„ä½“éªŒï¼Œæ¯”å¦‚è¯´ç›´æ¥åœ¨è‹¹æœåœ°å›¾ä¸Šä½¿ç”¨æ»´æ»´æ‰“è½¦è¿›è¡Œå«è½¦ã€‚å¦å¤–ï¼Œè‹¹æœåœ°å›¾ç°åœ¨ä¹Ÿæ”¯æŒ Carplay äº†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Apple-Music&quot;&gt;&lt;a href=&quot;#Apple-Music&quot; class=&quot;headerlink&quot; title=&quot;Apple Music&quot;&gt;&lt;/a&gt;Apple Music&lt;/h3&gt;&lt;p&gt;å¯¹äº Apple Music è‹¹æœè¡¨ç¤ºï¼Œè¯¥æœåŠ¡æ¨å‡ºè‡³ä»Šå·²ç»è·å¾—äº†å·¨å¤§çš„æˆåŠŸï¼Œç›®å‰ä»˜è´¹è®¢é˜…ç”¨æˆ·å·²ç»è¶…è¿‡ 1500 ä¸‡ã€‚&lt;/p&gt;
&lt;p&gt;å…¨æ–°çš„ Apple Music ç•Œé¢è¿›è¡Œäº†é‡æ–°è®¾è®¡ï¼Œæ–°çš„ç•Œé¢æ›´åŠ ç®€æ´ã€æ›´åŠ æ¼‚äº®äº†ï¼Œå¦‚ä¼ é—»æ‰€è¿°å»æ‰äº†å¾ˆå¤šä¸°å¯Œçš„é¢œè‰²å…ƒç´ ï¼Œå˜å¾—æ›´åŠ ç›´è§‚ï¼Œçªå‡ºé»‘ç™½èƒŒæ™¯å’Œæ–‡å­—ã€‚æ¼”ç¤ºæ¥çœ‹ï¼Œæ–° Apple Music  è¿›ä¸€æ­¥æ•´åˆè‹¹æœå…¬å¸è‡ªä¸»å¼€å‘çš„æ—§é‡‘å±±å­—ä½“ï¼Œèœå•å’Œæ ‡ç­¾çš„å­—ä½“ä¼šæ˜¯åŠ ç²—çš„ã€æ›´å¤§çš„é»‘è‰²çš„ç‰ˆæœ¬ã€‚&lt;/p&gt;
&lt;p&gt;å¦å¤–ï¼ŒApple Music å¯ä»¥æŒ‰ç…§è‰ºæœ¯å®¶ä¸“è¾‘ç­‰è¿›è¡Œåˆ†ç±»ï¼Œè¿˜æ”¯æŒæ­Œè¯è‡ªåŠ¨åŠ è½½æ˜¾ç¤ºã€‚ç”µå°å¹¿æ’­æœåŠ¡å¾—åˆ°äº†æ”¹è¿›ï¼Œä¸åªæ˜¯åˆ†ç±»æ›´ç›´è§‚ï¼Œç”¨æˆ·å¯ä»¥å¾ˆæ–¹ä¾¿åœ°å¯»æ‰¾è‡ªå·±æƒ³å¬çš„ç”µå°ï¼Œè€Œä¸”è‹¹æœè¡¨ç¤ºå°†ä¼šæœ‰æ›´å¤šçš„ä¸»æ’­å‚ä¸å½“ä¸­ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Apple-News&quot;&gt;&lt;a href=&quot;#Apple-News&quot; class=&quot;headerlink&quot; title=&quot;Apple News&quot;&gt;&lt;/a&gt;Apple News&lt;/h3&gt;&lt;p&gt;è‹¹æœè¡¨ç¤ºï¼ŒApple News æœ‰è¶…è¿‡ 600 ä¸‡çš„è¯»è€…ï¼Œæ–°çš„æ›´æ–°å°†æ‹¥æœ‰å…¨æ–°è®¾è®¡çš„ç•Œé¢ï¼Œå¹¶å¯è®¢é˜…æ›´å¤šé¢‘é“ã€‚æ¨èåŠŸèƒ½å˜å¾—æ›´å¼ºå¤§æ›´æ™ºèƒ½ï¼Œæ”¯æŒåŸºäºç”¨æˆ·é˜…è¯»ä¹ æƒ¯è¿›è¡Œæ¨èï¼Œä¸ºæ¯ä¸€ä½ç”¨æˆ·é€‰æ‹©æ€§çš„æ¨é€æœ€éœ€è¦çš„æ–°é—»ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;HomeKit&quot;&gt;&lt;a href=&quot;#HomeKit&quot; class=&quot;headerlink&quot; title=&quot;HomeKit&quot;&gt;&lt;/a&gt;HomeKit&lt;/h3&gt;&lt;p&gt;ç‰©è”ç½‘æ˜¯å¤§åŠ¿æ‰€è¶‹ï¼Œè‹¹æœä¸º iOS 10 å¸¦æ¥äº† HomeKit çš„å…¨æ–°è¿›å±•ã€‚é¦–å…ˆï¼ŒHomeKit å°†ä»¥ç‹¬ç«‹åº”ç”¨çš„å½¢å¼å‡ºç°åœ¨ iOS 10 ä¸Šï¼Œå‘½åä¸º Homeï¼Œä¹‹å‰è‹¹æœå¯ç”³è¯·è¿‡â€œHomeâ€çš„å•†æ ‡ï¼Œå¹¶ä¸æ„å¤–ã€‚&lt;/p&gt;
&lt;p&gt;å½“ HomeKit ç‹¬ç«‹æˆä¸€ä¸ªåº”ç”¨ä¹‹åï¼Œå®ƒå°†æœ‰èƒ½åŠ›å°†å¹³å°ä¸Šæ‰€æœ‰çš„å…¼å®¹è®¾å¤‡ç½®äºåŒä¸€ä¸ªç®¡ç†ä¸­å¿ƒä¸­ã€‚åªéœ€è¦æ‰“å¼€ iOS 10 ä¸Šçš„ Home  åº”ç”¨ï¼Œå°±å¯ä»¥å¯¹æ‰€æœ‰å…¼å®¹ HomeKit çš„è®¾å¤‡è¿›è¡Œç»Ÿä¸€çš„åŒ¹é…å’Œæ§åˆ¶ç®¡ç†ï¼ŒHome  åº”ç”¨ä¸­åŒ…å«äº†éå¸¸å…¨é¢çš„å®¶ç”µæ§åˆ¶é¢æ¿é€‰é¡¹ï¼Œæ”¯æŒ 3D Touch ä¹Ÿæ”¯æŒ Siri è¿›è¡Œæ§åˆ¶ï¼ŒiPadã€Apple Watch ä¹Ÿä¼šæä¾› Home åº”ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;è‹¹æœè¡¨ç¤ºï¼Œä»Šå¤©æœ‰å¥½å¤šå¼€å‘å•†éƒ½å‚ä¸åˆ°äº† HomeKit å¼€å‘å…¶ä¸­ï¼Œé€šè¿‡ HomeKit ç”¨æˆ·å¯ä»¥æ§åˆ¶å®¶é‡Œæ‰€æœ‰æ™ºèƒ½ç”µå™¨ï¼ŒåŒ…æ‹¬æ§åˆ¶é—¨é”ã€é£æ‰‡ã€ç¯ï¼Œæ‰“å¼€æˆ¿é—¨å’Œè½¦ç©ºé—¨ç­‰ç­‰ï¼Œä¸ä»…å¯ä»¥æŸ¥çœ‹é—¨é”æ‘„åƒå¤´çš„å®æ—¶è§†é¢‘ï¼Œè€Œä¸”è¿˜èƒ½æ§åˆ¶è®©æµ´ç¼¸çš„çƒ­æ°´åœ¨æ²¡å›å®¶ä¹‹å‰å°±ç»™ç”¨æˆ·æ”¾å¥½ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç”µè¯&quot;&gt;&lt;a href=&quot;#ç”µè¯&quot; class=&quot;headerlink&quot; title=&quot;ç”µè¯&quot;&gt;&lt;/a&gt;ç”µè¯&lt;/h3&gt;&lt;p&gt;é»˜è®¤ç”µè¯ app  è¿™éƒ¨åˆ†çš„å†…å®¹è®²å¾—æ¯”è¾ƒå°‘ï¼Œä¸€äº›æ¯”è¾ƒçªå‡ºçš„æ›´æ–°åŒ…æ‹¬æ”¯æŒæ˜¾ç¤ºåƒåœ¾ç”µè¯ï¼Œæ”¯æŒ VoIPï¼Œæ”¯æŒè¯­éŸ³ä¿¡ç®±è½¬æ–‡æœ¬æ˜¾ç¤ºç­‰ç­‰ã€‚ä»ç°åœºå›¾æ¥çœ‹ï¼Œè”ç³»äººç•Œé¢è¿›è¡Œäº†å…¨æ–°çš„è®¾è®¡ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¿¡æ¯&quot;&gt;&lt;a href=&quot;#ä¿¡æ¯&quot; class=&quot;headerlink&quot; title=&quot;ä¿¡æ¯&quot;&gt;&lt;/a&gt;ä¿¡æ¯&lt;/h3&gt;&lt;p&gt;è‹¹æœè¡¨ç¤ºï¼Œä¿¡æ¯æ˜¯ iOS ä¸­ä½¿ç”¨æœ€ä¸ºé¢‘ç¹çš„åº”ç”¨ä¹‹ä¸€ã€‚æ‰€ä»¥ï¼Œè¿™ä¸€æ¬¡ä¿¡æ¯åº”ç”¨è‹¹æœèŠ±äº†å¤§é‡æ—¶é—´è¿›è¡Œæ¼”ç¤ºï¼Œä¸è¿‡å¾ˆå¤šåŠŸèƒ½éƒ½ä¸å›½å†…çš„å³æ—¶èŠå¤©åº”ç”¨ç±»ä¼¼ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©æœ‰ç‚¹æ‚²å‰§ï¼Œå›åˆ°ä½çš„åœ°æ–¹èº«ä½“å°±å¼€å§‹ä¸èˆ’æœï¼Œä¸€è§‰ç¡åˆ°ç°åœ¨ã€‚çœ‹åˆ°11ç‚¹å¤šï¼Œèµ¶ç´§æ‰¾æ—¶é—´å¼€å§‹ç IOS 10.0æ–°çš„æ”¹å˜ã€‚&lt;/br&gt;&lt;br&gt;æ˜¨å¤©å‡Œæ™¨IOS ä¸¾è¡Œ WWDCå…¨çƒå‘å¸ƒè€…å¤§ä¼šï¼Œwatch OSã€tv OSã€OS Xä»¥åŠiOS 10ç³»ç»Ÿçš„æ–°ç‰¹æ€§ã€‚&lt;/br&gt;&lt;br&gt;&lt;a href=&quot;http://www.apple.com/apple-events/june-2016/&quot;&gt;WWDC-13/6/2016~è§†é¢‘åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;å±•ç¤ºä¼šç¬¬ä¸€ä¸ªæ˜¯APPLEçš„æŒèˆµäººæ˜¯åº“å…‹ï¼Œæœ‰ç‚¹æç¬‘çš„æ˜¯å¤§å®¶å¥½åƒæ²¡æœ‰ç†è§£åº“å…‹çš„ç¬¬ä¸€ä¸ªæ¢—å¤§å®¶éƒ½æ²¡æœ‰æ¬¢å‘¼ã€‚çœ‹å®Œè§†é¢‘ç»™æˆ‘æ¯”è¾ƒå¥½çš„æ„Ÿè§‰å°±æ˜¯åœ¨siriæ“ä½œç¨‹åºå’ŒApple Payçš„ä½¿ç”¨è¿‡ç¨‹ï¼Œä»˜æ¬¾ä½¿ç”¨èµ·æ¥æ„Ÿè§‰æ¯”æ”¯ä»˜å®æ›´åŠ ä¾¿æ·ã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="IOS" scheme="http://yoursite.com/tags/IOS/"/>
    
  </entry>
  
  <entry>
    <title>SDWebImageä¹‹å›¾ç‰‡ç¼“å­˜å¤„ç†</title>
    <link href="http://yoursite.com/2016/06/04/SDWebImage%E4%B9%8B%E5%9B%BE%E7%89%87%E7%BC%93%E5%AD%98%E5%88%86%E6%9E%90/"/>
    <id>http://yoursite.com/2016/06/04/SDWebImageä¹‹å›¾ç‰‡ç¼“å­˜åˆ†æ/</id>
    <published>2016-06-04T08:55:11.000Z</published>
    <updated>2017-06-01T07:48:51.000Z</updated>
    
    <content type="html">&lt;p&gt;è¿™ç¯‡æ–‡ç« æˆ‘å°†æ¥ç€èŠ‚è®²è¿°å…³äºSDWebImageå›¾ç‰‡ä¸‹è½½åå¤„ç†æ–¹å¼ï¼Œç¼“å­˜è¿›è¡Œè®²è§£ã€‚&lt;br&gt;&lt;br&gt;&lt;br&gt;ç»è¿‡ä¸Šé¢æˆ‘ä»¬å¯ä»¥çŸ¥é“SDWebImageæ˜¯å¯ä»¥ä»è¿œç¨‹çš„æœåŠ¡å™¨åŠ è½½å›¾ç‰‡ï¼Œç„¶ååœ¨UIImageViewä¸Šè¿›è¡Œæ˜¾ç¤ºã€‚ä½†æ˜¯ä½ æœ‰æƒ³è¿‡SDWebImageåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨æ—¶æˆ‘ä»¬çŸ¥é“éœ€è¦å¯¼å…¥åŒ…ï¼šUIImageView+WebCache.hæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™çœ‹å‡ºSDWebImageæ˜¯ä¸€ä¸ªUIImageViewçš„åˆ†ç±»ï¼Œä½¿ç”¨Categoryè¿›è¡Œåˆ†è£…çš„ç±»ã€‚ä¸‹é¢åˆ—å‡ºSDWebImageå¯ä»¥å®ç°çš„åŠŸèƒ½ï¼š&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;&lt;ul&gt;&lt;/ul&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;æä¾›UIImageViewçš„ä¸€ä¸ªåˆ†ç±»ï¼Œå¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œå¼‚æ­¥åŠ è½½å’Œç¼“å­˜ç®¡ç†&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;ä¸€æ­¥å†…å­˜ &amp;amp; ç£ç›˜ç®¡ç† &amp;amp; è‡ªåŠ¨å¯¹è¿‡æœŸçš„ç¼“å­˜è¿›è¡Œç›¸å…³çš„å¤„ç†&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;ä¸€ä¸ªä¸€æ­¥å›¾ç‰‡çš„åŠ è½½å™¨&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;æ”¯æŒGIFçš„å›¾ç‰‡åŠ è½½&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;åå°å¯¹å›¾ç‰‡è¿›è¡Œè§£å‹å¤„ç†&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;ç¡®ä¿åŒæ„URLçš„å›¾ç‰‡ä¸ä¼šè¢«æ•°æ¬¡åŠ è½½&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;ç¡®ä¿è™šå‡çš„URLä¸ä¼šè¢«åå¤åŠ è½½&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;ç¡®ä¿ä¸‹è½½å’Œç¼“å­˜æ—¶ä¸»çº¿ç¨‹ä¸ä¼šè¢«é˜»å¡&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;ä¼˜è‰¯ä½¿ç”¨æ€§èƒ½&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;é‡‡ç”¨GCDå¯ä»¥é‡‡ç”¨å¹¶è¡Œå¤„ç†ï¼ŒIOS 5.0çš„ARCè‡ªåŠ¨è®¡æ•°åŸåˆ™&lt;/li&gt;&lt;/p&gt;
&lt;p&gt;&lt;li&gt;æ”¯æŒArm64(64ä½CPUå¤„ç†)&lt;/li&gt;&lt;br&gt;&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;p&gt;&lt;br&gt;æœ¬ç¯‡åšå®¢æ˜¯åœ¨SDWebImageçš„å›¾ç‰‡åŠ è½½åŸºç¡€ä¹‹ä¸Šè¿›è¡Œæ¢ç´¢ï¼Œä¸‹é¢æˆ‘ä»¬å°±æ¥çœ‹ä¸‹SDWebImageæ˜¯å¦‚ä½•å®ç°å¯¹å›¾ç‰‡å®è¡Œç¼“å­˜å¤„ç†ã€‚&lt;/p&gt;&lt;/div&gt;

&lt;h3 id=&quot;å®ä¾‹&quot;&gt;&lt;a href=&quot;#å®ä¾‹&quot; class=&quot;headerlink&quot; title=&quot;å®ä¾‹&quot;&gt;&lt;/a&gt;å®ä¾‹&lt;/h3&gt;&lt;p&gt;SDImageCacheæ˜¯å›¾ç‰‡ä¸‹è½½åå†…å­˜ç¼“å­˜ç®¡ç†å’Œç£ç›˜ç¼“å­˜ç®¡ç†çš„ç±»ï¼Œä¸è¿‡è¿˜æ˜¯æˆ‘ä»¬æœ€å¸¸è§çš„å•ä¾‹æ¨¡å¼sharedImageCacheæ¥è¿›è¡Œå¾—åˆ°å®ä¾‹ã€‚é»˜è®¤çš„ç¼“å­˜ç©ºé—´ä¸Šæ˜¯defaultï¼Œå¦‚æœè‡ªå·±çœ‹ç€ä¸æ€ä¹ˆå¥½çš„è¯å¯ä»¥è‡ªå·±è¿›è¡Œç›¸å…³çš„ç©ºé—´ç”³è¯·ã€‚ä¸‹é¢æ˜¯SDWebCacheçš„ç®€ä»‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ (SDImageCache *)sharedImageCache &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;dispatch_once_t&lt;/span&gt; once;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; instance;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;dispatch_once&lt;/span&gt;(&amp;amp;once, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        instance = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; instance;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™é‡Œä½¿ç”¨dispatch_onceçš„å½¢å¼æ¯æ¬¡å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œè¿™æ ·å¯ä»¥é˜²æ­¢å¤šä¸ªå•ä¾‹è¿›è¡ŒåŒæ—¶çš„åˆå§‹åŒ–ã€‚&lt;a href=&quot;http://www.cocoachina.com/ios/20151117/14225.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¯¦æƒ…å¯ä»¥å‚è€ƒGCDç›¸å…³çš„çŸ¥è¯†&lt;/a&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)init &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; initWithNamespace:&lt;span class=&quot;string&quot;&gt;@&quot;default&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)initWithNamespace:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)ns &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *path = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; makeDiskCachePath:ns];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; initWithNamespace:ns diskCacheDirectory:path];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)initWithNamespace:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)ns diskCacheDirectory:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)directory &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ((&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; = [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; init])) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *fullNamespace = [&lt;span class=&quot;string&quot;&gt;@&quot;com.hackemist.SDWebImageCache.&quot;&lt;/span&gt; stringByAppendingString:ns];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;comment&quot;&gt;// initialise PNG signature data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     kPNGSignatureData = [&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; dataWithBytes:kPNGSignatureBytes length:&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;comment&quot;&gt;// Create IO serial queue&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     _ioQueue = dispatch_queue_create(&lt;span class=&quot;string&quot;&gt;&quot;com.hackemist.SDWebImageCache&quot;&lt;/span&gt;, DISPATCH_QUEUE_SERIAL);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;comment&quot;&gt;// Init default values&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     _maxCacheAge = kDefaultCacheMaxCacheAge;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;comment&quot;&gt;// Init the memory cache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     _memCache = [[AutoPurgeCache alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     _memCache.name = fullNamespace;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;comment&quot;&gt;// Init the disk cache&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (directory != &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         _diskCachePath = [directory stringByAppendingPathComponent:fullNamespace];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *path = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; makeDiskCachePath:ns];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         _diskCachePath = path;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;comment&quot;&gt;// Set decompression to YES&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     _shouldDecompressImages = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;comment&quot;&gt;// memory cache enabled&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     _shouldCacheImagesInMemory = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;comment&quot;&gt;// Disable iCloud&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     _shouldDisableiCloud = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;dispatch_sync&lt;/span&gt;(_ioQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         _fileManager = [&lt;span class=&quot;built_in&quot;&gt;NSFileManager&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#if TARGET_OS_IPHONE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;comment&quot;&gt;// Subscribe to app events&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     [[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] addObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                              selector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(clearMemory)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                  name:&lt;span class=&quot;built_in&quot;&gt;UIApplicationDidReceiveMemoryWarningNotification&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                object:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     [[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] addObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                              selector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(cleanDisk)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                  name:&lt;span class=&quot;built_in&quot;&gt;UIApplicationWillTerminateNotification&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                object:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     [[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] addObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                              selector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(backgroundCleanDisk)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                  name:&lt;span class=&quot;built_in&quot;&gt;UIApplicationDidEnterBackgroundNotification&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                object:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;p&gt;&lt;br&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨æˆ‘ä»¬ä½¿ç”¨initæ¥è¿›è¡Œåˆå§‹åŒ–ç¼“å­˜ç©ºé—´ï¼Œç´§æ¥ç€å°±è°ƒç”¨initWithNamespace: &amp;amp; initWithNamespace: diskCacheDirectory:æ¥è¿›ä¸€æ­¥å¯¹ç£ç›˜è¿›è¡Œç¼“å­˜ç©ºé—´çš„åˆå§‹åŒ–ã€‚&lt;br&gt;&lt;/p&gt;&lt;/div&gt;

&lt;h3 id=&quot;å†…å­˜ç¼“å­˜ç±»&quot;&gt;&lt;a href=&quot;#å†…å­˜ç¼“å­˜ç±»&quot; class=&quot;headerlink&quot; title=&quot;å†…å­˜ç¼“å­˜ç±»&quot;&gt;&lt;/a&gt;å†…å­˜ç¼“å­˜ç±»&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;AutoPurgeCache&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;NSCache&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;AutoPurgeCache&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; = [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] addObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; selector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(removeAllObjects) name:&lt;span class=&quot;built_in&quot;&gt;UIApplicationDidReceiveMemoryWarningNotification&lt;/span&gt; object:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)dealloc&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] removeObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; name:&lt;span class=&quot;built_in&quot;&gt;UIApplicationDidReceiveMemoryWarningNotification&lt;/span&gt; object:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@end&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨ç¼“å­˜è¿‡ç¨‹ä¸­æˆ‘ä»¬é‡‡ç”¨çš„æ˜¯NSCacheçš„å­ç±»AutoPurgeCacheè¿›è¡Œçº¿ç®¡çš„ç¼“å­˜å¤„ç†ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹Ÿå¯ä»¥ç›´æ¥ä½¿ç”¨NSdictionaryæ¥è¿›è¡Œå¤„ç†ï¼Œä¸ºä»€ä¹ˆä¸ä½¿ç”¨å‘¢ï¼Ÿåé¢æˆ‘å°†ä¼šè®²å‡ºğŸ˜¸ã€‚è¿”å›ä¸Šé¢ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨ç¼“å­˜æ—¶æˆ‘ä»¬é‡‡ç”¨æ³¨å†Œå’Œç›‘å¬çš„æ¨¡å¼å¯¹ç¼“å­˜çš„å†…å­˜ç›‘å¬ï¼Œä¸€æ—¦ç¼“å­˜æ•°æ®è¾¾åˆ°ä¸´ç•Œç‚¹å°±è¦æ¡ç”¨removeAllObjectsã€‚è¿™é‡Œæœ‰å…³äºæ–¹æ³•åœ¨è¿è¡Œæ—¶ç¼–è¯‘æƒ…å†µä¸‹çš„è¿‡ç¨‹&lt;br&gt;&lt;a href=&quot;http://boilwater.github.io/2016/05/29/runtimeç†è§£/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;runtimeè§£æ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;p&gt;&lt;br&gt;åœ¨ç¼“å­˜è¿‡ç¨‹ä¸­æˆ‘ä»¬ä½¿ç”¨çš„æ˜¯NSCacheè€Œä¸æ˜¯ç”¨NSDictionaryå‘¢ï¼Œä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹NSCacheçš„ä¼˜ç‚¹ï¼š&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;è‡ªåŠ¨åˆ å‡åŠŸèƒ½&lt;/li&gt;&lt;br&gt;&lt;li&gt;çº¿ç¨‹å®‰å…¨&lt;/li&gt;&lt;br&gt;&lt;li&gt;ä¸ä¼šæ‹·è´å¥&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;åŸºäºä¸Šé¢NSCacheçš„ç‰¹ç‚¹é€‰ç€ä½¿ç”¨NSCacheæ˜¯æ›´åŠ æ˜“äºå¯¹ç¼“å­˜çš„ç®¡ç†&lt;br&gt;&lt;/p&gt;&lt;/div&gt;

&lt;p&gt;&lt;a href=&quot;http://thenewself.blog.163.com/blog/static/198501330201251311025928/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NSCacheçš„å‚è€ƒèµ„æ–™&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;
&lt;h2 id=&quot;ç¼“å­˜åœ¨APPå‘¨æœŸçš„è®¾ç½®&quot;&gt;&lt;a href=&quot;#ç¼“å­˜åœ¨APPå‘¨æœŸçš„è®¾ç½®&quot; class=&quot;headerlink&quot; title=&quot;ç¼“å­˜åœ¨APPå‘¨æœŸçš„è®¾ç½®&quot;&gt;&lt;/a&gt;ç¼“å­˜åœ¨APPå‘¨æœŸçš„è®¾ç½®&lt;/h2&gt;&lt;p&gt;åœ¨åº”ç”¨å¼€å‘å¯¹å†…å®¹ç¼“å­˜çš„è¿‡ç¨‹æˆ‘ä»¬ä¹Ÿå¯ä»¥å‚è€ƒä¸‹é¢ç¼“å­˜çš„å¤„ç†æœºåˆ¶ï¼Œè¿™ä¹Ÿå¯¹æˆ‘ä»¬APPçš„æ€§èƒ½ä¼šæœ‰æ¯”è¾ƒå¤§çš„æå‡ã€‚ä¸‹é¢æŒ‰ç…§APPçš„åˆ†ä¸ºï¼šå†…å­˜è­¦å‘Šã€ç¨‹åºç»ˆæ­¢å’Œåå°ä¸‰ç§æƒ…å†µå®ç°ç¼“å­˜ç­–ç•¥ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å†…å­˜è­¦å‘Š&quot;&gt;&lt;a href=&quot;#å†…å­˜è­¦å‘Š&quot; class=&quot;headerlink&quot; title=&quot;å†…å­˜è­¦å‘Š&quot;&gt;&lt;/a&gt;å†…å­˜è­¦å‘Š&lt;/h3&gt;&lt;p&gt;åœ¨æˆ‘ä»¬ä½¿ç”¨SDWebImageè¿‡ç¨‹æ—¶ç¨‹åºä¸€ç›´éƒ½ä¼šå¯¹æˆ‘ä»¬è®¿çš„å›¾ç‰‡è¿›è¡Œç›¸å…³ç¼“å­˜å¤„ç†ï¼Œä½†æ˜¯å½“æˆ‘ä»¬ç¼“å­˜è¾ƒå¤§æ—¶å°±ä¼šäº§ç”Ÿè­¦å‘Š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)clearMemory &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.memCache removeAllObjects];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢æ˜¯æˆ‘ä»¬æ³¨å†Œå‘ç°å†…å­˜è¿‡å¤§éœ€è¦è°ƒç”¨çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ç¨‹åºç»ˆæ­¢&quot;&gt;&lt;a href=&quot;#ç¨‹åºç»ˆæ­¢&quot; class=&quot;headerlink&quot; title=&quot;ç¨‹åºç»ˆæ­¢&quot;&gt;&lt;/a&gt;ç¨‹åºç»ˆæ­¢&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)cleanDisk &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; cleanDiskWithCompletionBlock:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)cleanDiskWithCompletionBlock:(SDWebImageNoParamsBlock)completionBlock &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ioQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSURL&lt;/span&gt; *diskCacheURL = [&lt;span class=&quot;built_in&quot;&gt;NSURL&lt;/span&gt; fileURLWithPath:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.diskCachePath isDirectory:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *resourceKeys = @[&lt;span class=&quot;built_in&quot;&gt;NSURLIsDirectoryKey&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSURLContentModificationDateKey&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSURLTotalFileAllocatedSizeKey&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// This enumerator prefetches useful properties for our cache files.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;NSDirectoryEnumerator&lt;/span&gt; *fileEnumerator = [_fileManager enumeratorAtURL:diskCacheURL&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                 includingPropertiesForKeys:resourceKeys&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                    options:&lt;span class=&quot;built_in&quot;&gt;NSDirectoryEnumerationSkipsHiddenFiles&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                               errorHandler:&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;NSDate&lt;/span&gt; *expirationDate = [&lt;span class=&quot;built_in&quot;&gt;NSDate&lt;/span&gt; dateWithTimeIntervalSinceNow:-&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.maxCacheAge];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;NSMutableDictionary&lt;/span&gt; *cacheFiles = [&lt;span class=&quot;built_in&quot;&gt;NSMutableDictionary&lt;/span&gt; dictionary];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; currentCacheSize = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// Enumerate all of the files in the cache directory.  This loop has two purposes:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//  1. Removing files that are older than the expiration date.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//  2. Storing file attributes for the size-based cleanup pass.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *urlsToDelete = [[&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSURL&lt;/span&gt; *fileURL &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; fileEnumerator) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *resourceValues = [fileURL resourceValuesForKeys:resourceKeys error:&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;// Skip directories.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([resourceValues[&lt;span class=&quot;built_in&quot;&gt;NSURLIsDirectoryKey&lt;/span&gt;] boolValue]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;// Remove files that are older than the expiration date;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;built_in&quot;&gt;NSDate&lt;/span&gt; *modificationDate = resourceValues[&lt;span class=&quot;built_in&quot;&gt;NSURLContentModificationDateKey&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([[modificationDate laterDate:expirationDate] isEqualToDate:expirationDate]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              [urlsToDelete addObject:fileURL];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;// Store a reference to this file and account for its total size.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;built_in&quot;&gt;NSNumber&lt;/span&gt; *totalAllocatedSize = resourceValues[&lt;span class=&quot;built_in&quot;&gt;NSURLTotalFileAllocatedSizeKey&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          currentCacheSize += [totalAllocatedSize unsignedIntegerValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          [cacheFiles setObject:resourceValues forKey:fileURL];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSURL&lt;/span&gt; *fileURL &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; urlsToDelete) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          [_fileManager removeItemAtURL:fileURL error:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// If our remaining disk cache exceeds a configured maximum size, perform a second&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;// size-based cleanup pass.  We delete the oldest files first.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.maxCacheSize &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; currentCacheSize &amp;gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.maxCacheSize) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;// Target half of our maximum cache size for this cleanup pass.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; desiredCacheSize = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.maxCacheSize / &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Sort the remaining cache files by their last modification time (oldest first).&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *sortedFiles = [cacheFiles keysSortedByValueWithOptions:&lt;span class=&quot;built_in&quot;&gt;NSSortConcurrent&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                        usingComparator:^&lt;span class=&quot;built_in&quot;&gt;NSComparisonResult&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; obj1, &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; obj2) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [obj1[&lt;span class=&quot;built_in&quot;&gt;NSURLContentModificationDateKey&lt;/span&gt;] compare:obj2[&lt;span class=&quot;built_in&quot;&gt;NSURLContentModificationDateKey&lt;/span&gt;]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                        &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Delete files until we fall below our desired cache size.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSURL&lt;/span&gt; *fileURL &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; sortedFiles) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([_fileManager removeItemAtURL:fileURL error:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *resourceValues = cacheFiles[fileURL];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSNumber&lt;/span&gt; *totalAllocatedSize = resourceValues[&lt;span class=&quot;built_in&quot;&gt;NSURLTotalFileAllocatedSizeKey&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                currentCacheSize -= [totalAllocatedSize unsignedIntegerValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (currentCacheSize &amp;lt; desiredCacheSize) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (completionBlock) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;              completionBlock();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä»ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºå½“æ”¶åˆ°UIApplicationWillTerminateNotificationæ—¶ï¼ŒSDImageCacheå°†ä¼šä½¿ç”¨ioQueueå¼‚æ­¥åœ°æ¸…ç†ç£ç›˜ç¼“å­˜ã€‚&lt;/p&gt;
&lt;p&gt;æ¸…é™¤è¿‡ç¨‹çš„é€»è¾‘å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;p&gt;&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;å…ˆæ¸…é™¤å·²è¶…è¿‡æœ€å¤§ç¼“å­˜æ—¶é—´çš„ç¼“å­˜æ–‡ä»¶ï¼ˆæœ€å¤§ç¼“å­˜æ—¶é—´é»˜è®¤ä¸ºä¸€æ˜ŸæœŸï¼‰&lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨ç¬¬ä¸€è½®æ¸…é™¤çš„è¿‡ç¨‹ä¸­ä¿å­˜æ–‡ä»¶å±æ€§ï¼Œç‰¹åˆ«æ˜¯ç¼“å­˜æ–‡ä»¶å¤§å°&lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨ç¬¬ä¸€è½®æ¸…é™¤åï¼Œå¦‚æœè®¾ç½®äº†æœ€å¤§ç¼“å­˜å¹¶ä¸”ä¿ç•™ä¸‹æ¥çš„ç£ç›˜ç¼“å­˜æ–‡ä»¶ä»ç„¶è¶…è¿‡äº†é…ç½®çš„æœ€å¤§ç¼“å­˜ï¼Œé‚£ä¹ˆè¿›è¡Œç¬¬äºŒè½®ä»¥å¤§å°ä¸ºåŸºç¡€çš„æ¸…é™¤ã€‚&lt;/li&gt;&lt;br&gt;&lt;li&gt;é¦–å…ˆåˆ é™¤æœ€è€çš„æ–‡ä»¶ï¼Œç›´åˆ°è¾¾åˆ°æœŸæœ›çš„æ€»çš„ç¼“å­˜å¤§å°ï¼Œå³æœ€å¤§ç¼“å­˜çš„ä¸€åŠã€‚&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;&lt;/p&gt;&lt;/div&gt;

&lt;h3 id=&quot;ç¨‹åºè¿›å…¥åå°&quot;&gt;&lt;a href=&quot;#ç¨‹åºè¿›å…¥åå°&quot; class=&quot;headerlink&quot; title=&quot;ç¨‹åºè¿›å…¥åå°&quot;&gt;&lt;/a&gt;ç¨‹åºè¿›å…¥åå°&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)backgroundCleanDisk &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Class &lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;NSClassFromString&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;UIApplication&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(!&lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; || ![&lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; respondsToSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(sharedApplication)]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; *application = [&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; performSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(sharedApplication)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    __block &lt;span class=&quot;built_in&quot;&gt;UIBackgroundTaskIdentifier&lt;/span&gt; bgTask = [application beginBackgroundTaskWithExpirationHandler:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// Clean up any unfinished task business by marking where you&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// stopped or ending the task outright.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [application endBackgroundTask:bgTask];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        bgTask = &lt;span class=&quot;built_in&quot;&gt;UIBackgroundTaskInvalid&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;// Start the long-running task and return immediately.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; cleanDiskWithCompletionBlock:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [application endBackgroundTask:bgTask];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       bgTask = &lt;span class=&quot;built_in&quot;&gt;UIBackgroundTaskInvalid&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å½“æ”¶åˆ°UIApplicationDidEnterBackgroundNotificationæ—¶ï¼Œåœ¨æ‰‹æœºç³»ç»Ÿåå°è¿›è¡Œå¦‚ä¸Šé¢æè¿°çš„å¼‚æ­¥ç£ç›˜ç¼“å­˜æ¸…ç†ã€‚è¿™é‡Œåˆ©ç”¨Objectiveï¼Cçš„åŠ¨æ€è¯­è¨€ç‰¹æ€§ï¼Œå¾—åˆ°UIApplicationçš„å•ä¾‹sharedApplicationï¼Œä½¿ç”¨sharedApplicationå¼€å¯åå°ä»»åŠ¡cleanDiskWithCompletionBlock:&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://boilwater.github.io/2016/05/29/runtimeç†è§£/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;runtimeçš„è¯¦è§£&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;æŸ¥è¯¢å›¾ç‰‡&quot;&gt;&lt;a href=&quot;#æŸ¥è¯¢å›¾ç‰‡&quot; class=&quot;headerlink&quot; title=&quot;æŸ¥è¯¢å›¾ç‰‡&quot;&gt;&lt;/a&gt;æŸ¥è¯¢å›¾ç‰‡&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSOperation&lt;/span&gt; *)queryDiskCacheForKey:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)key done:(SDWebImageQueryCompletedBlock)doneBlock &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!doneBlock) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!key) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       doneBlock(&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, SDImageCacheTypeNone);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;// First check the in-memory cache...&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *image = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; imageFromMemoryCacheForKey:key];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (image) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       doneBlock(image, SDImageCacheTypeMemory);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;NSOperation&lt;/span&gt; *operation = [&lt;span class=&quot;built_in&quot;&gt;NSOperation&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ioQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (operation.isCancelled) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;@autoreleasepool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *diskImage = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; diskImageForKey:key];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (diskImage &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.shouldCacheImagesInMemory) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; cost = SDCacheCostForImage(diskImage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.memCache setObject:diskImage forKey:key cost:cost];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;               doneBlock(diskImage, SDImageCacheTypeDisk);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; operation;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŸ¥è¯¢ç¼“å­˜ï¼Œé»˜è®¤ä½¿ç”¨æ–¹æ³•queryDiskCacheForKey:done:ï¼Œå¦‚æœæ­¤æ–¹æ³•è¿”å›nilï¼Œåˆ™è¯´æ˜ç¼“å­˜ä¸­ç°åœ¨è¿˜æ²¡æœ‰è¿™å¼ ç…§ç‰‡ï¼Œå› æ­¤ä½ éœ€è¦å¾—åˆ°å¹¶ç¼“å­˜è¿™å¼ å›¾ç‰‡ã€‚ç¼“å­˜keyæ˜¯ç¼“å­˜å›¾ç‰‡çš„ç¨‹åºå”¯ä¸€çš„æ ‡è¯†ç¬¦ï¼Œä¸€èˆ¬ä½¿ç”¨å›¾ç‰‡çš„å®Œæ•´URLã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœä¸æƒ³SDImageCacheæŸ¥è¯¢ç£ç›˜ç¼“å­˜ï¼Œä½ å¯ä»¥è°ƒç”¨å¦ä¸€ä¸ªæ–¹æ³•ï¼šimageFromMemoryCacheForKey:ã€‚&lt;/p&gt;
&lt;p&gt;è¿”å›å€¼ä¸ºNSOprationï¼Œå•ç‹¬ä½¿ç”¨SDImageCacheæ²¡ç”¨ï¼Œä½†æ˜¯ä½¿ç”¨SDWebImageManagerå°±å¯ä»¥å¯¹å¤šä¸ªä»»åŠ¡çš„ä¼˜å…ˆçº§ã€ä¾èµ–ï¼Œå¹¶ä¸”å¯ä»¥å–æ¶ˆã€‚&lt;/p&gt;
&lt;p&gt;è‡ªå®šä¹‰@autoreleasepoolï¼Œautoreleasepoolä»£ç æ®µé‡Œé¢æœ‰å¤§é‡çš„å†…å­˜æ¶ˆè€—æ“ä½œï¼Œè‡ªå®šä¹‰autoreleasepoolå¯ä»¥åŠæ—¶åœ°é‡Šæ”¾æ‰å†…å­˜ã€‚&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)cachePathForKey:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)key inPath:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)path &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *filename = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; cachedFileNameForKey:key];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [path stringByAppendingPathComponent:filename];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)defaultCachePathForKey:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)key &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; cachePathForKey:key inPath:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.diskCachePath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#pragma mark SDImageCache (private)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)cachedFileNameForKey:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)key &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str = [key UTF8String];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (str == &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        str = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; r[CC_MD5_DIGEST_LENGTH];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CC_MD5(str, (CC_LONG)strlen(str), r);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *filename = [&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; stringWithFormat:&lt;span class=&quot;string&quot;&gt;@&quot;%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%@&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          r[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          r[&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;], [[key pathExtension] isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;&quot;&lt;/span&gt;] ? &lt;span class=&quot;string&quot;&gt;@&quot;&quot;&lt;/span&gt; : [&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; stringWithFormat:&lt;span class=&quot;string&quot;&gt;@&quot;.%@&quot;&lt;/span&gt;, [key pathExtension]]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; filename;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *)diskImageDataBySearchingAllPathsForKey:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)key &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *defaultPath = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; defaultCachePathForKey:key];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *data = [&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; dataWithContentsOfFile:defaultPath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (data) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// fallback because of https://github.com/rs/SDWebImage/pull/976 that added the extension to the disk file name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// checking the key with and without the extension&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    data = [&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; dataWithContentsOfFile:[defaultPath stringByDeletingPathExtension]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (data) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *customPaths = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.customPaths &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *path &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; customPaths) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *filePath = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; cachePathForKey:key inPath:path];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *imageData = [&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; dataWithContentsOfFile:filePath];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (imageData) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; imageData;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// fallback because of https://github.com/rs/SDWebImage/pull/976 that added the extension to the disk file name&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;// checking the key with and without the extension&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        imageData = [&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; dataWithContentsOfFile:[filePath stringByDeletingPathExtension]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (imageData) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; imageData;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;p&gt;&lt;br&gt;ä¸Šé¢ä»£ç æ®µæ˜¯ä»ç£ç›˜è·å–å›¾ç‰‡çš„ä»£ç ã€‚å¾—åˆ°å›¾ç‰‡å¯¹åº”çš„UIDataåï¼Œè¿˜è¦ç»è¿‡å¦‚ä¸‹æ­¥éª¤ï¼Œæ‰èƒ½è¿”å›å¯¹åº”çš„å›¾ç‰‡ï¼š&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;æ ¹æ®å›¾ç‰‡çš„ä¸åŒç§ç±»ï¼Œç”Ÿæˆå¯¹åº”çš„UIImage&lt;/li&gt;&lt;br&gt;&lt;li&gt;æ ¹æ®keyå€¼ï¼Œè°ƒæ•´imageçš„scaleå€¼&lt;/li&gt;&lt;br&gt;&lt;li&gt;å¦‚æœè®¾ç½®å›¾ç‰‡éœ€è¦è§£å‹ç¼©ï¼Œåˆ™è¿˜éœ€å¯¹UIImageè¿›è¡Œè§£ç &lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;&lt;/p&gt;&lt;/div&gt;

&lt;h3 id=&quot;ä¸‹é¢æ˜¯MD5çš„åŠ å¯†æ–¹å¼&quot;&gt;&lt;a href=&quot;#ä¸‹é¢æ˜¯MD5çš„åŠ å¯†æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;ä¸‹é¢æ˜¯MD5çš„åŠ å¯†æ–¹å¼&quot;&gt;&lt;/a&gt;ä¸‹é¢æ˜¯MD5çš„åŠ å¯†æ–¹å¼&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)cachedFileNameForKey:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)key &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *str = [key UTF8String];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (str == &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        str = &lt;span class=&quot;string&quot;&gt;&quot;&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; r[CC_MD5_DIGEST_LENGTH];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CC_MD5(str, (CC_LONG)strlen(str), r);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *filename = [&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; stringWithFormat:&lt;span class=&quot;string&quot;&gt;@&quot;%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%02x%@&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          r[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;9&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;],&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          r[&lt;span class=&quot;number&quot;&gt;11&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;12&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;13&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;14&lt;/span&gt;], r[&lt;span class=&quot;number&quot;&gt;15&lt;/span&gt;], [[key pathExtension] isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;&quot;&lt;/span&gt;] ? &lt;span class=&quot;string&quot;&gt;@&quot;&quot;&lt;/span&gt; : [&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; stringWithFormat:&lt;span class=&quot;string&quot;&gt;@&quot;.%@&quot;&lt;/span&gt;, [key pathExtension]]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; filename;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;å›¾ç‰‡çš„ä¿å­˜&quot;&gt;&lt;a href=&quot;#å›¾ç‰‡çš„ä¿å­˜&quot; class=&quot;headerlink&quot; title=&quot;å›¾ç‰‡çš„ä¿å­˜&quot;&gt;&lt;/a&gt;å›¾ç‰‡çš„ä¿å­˜&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)storeImage:(&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)image recalculateFromImage:(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)recalculate imageData:(&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *)imageData forKey:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)key toDisk:(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)toDisk &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!image || !key) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// if memory cache is enabled&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.shouldCacheImagesInMemory) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; cost = SDCacheCostForImage(image);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.memCache setObject:image forKey:key cost:cost];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (toDisk) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ioQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *data = imageData;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (image &amp;amp;&amp;amp; (recalculate || !data)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#if TARGET_OS_IPHONE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// We need to determine if the image is a PNG or a JPEG&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// PNGs are easier to detect because they have a unique signature (http://www.w3.org/TR/PNG-Structure.html)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// The first eight bytes of a PNG file always contain the following (decimal) values:&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// 137 80 78 71 13 10 26 10&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// If the imageData is nil (i.e. if trying to save a UIImage directly or the image was transformed on download)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// and the image has an alpha channel, we will consider it PNG to avoid losing the transparency&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; alphaInfo = &lt;span class=&quot;built_in&quot;&gt;CGImageGetAlphaInfo&lt;/span&gt;(image.CGImage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; hasAlpha = !(alphaInfo == kCGImageAlphaNone ||&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                  alphaInfo == kCGImageAlphaNoneSkipFirst ||&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                  alphaInfo == kCGImageAlphaNoneSkipLast);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; imageIsPng = hasAlpha;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// But if we have an image data, we will look at the preffix&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([imageData length] &amp;gt;= [kPNGSignatureData length]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    imageIsPng = ImageDataHasPNGPreffix(imageData);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (imageIsPng) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    data = &lt;span class=&quot;built_in&quot;&gt;UIImagePNGRepresentation&lt;/span&gt;(image);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    data = &lt;span class=&quot;built_in&quot;&gt;UIImageJPEGRepresentation&lt;/span&gt;(image, (&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)&lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                data = [&lt;span class=&quot;built_in&quot;&gt;NSBitmapImageRep&lt;/span&gt; representationOfImageRepsInArray:image.representations usingType: &lt;span class=&quot;built_in&quot;&gt;NSJPEGFileType&lt;/span&gt; properties:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (data) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (![_fileManager fileExistsAtPath:_diskCachePath]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [_fileManager createDirectoryAtPath:_diskCachePath withIntermediateDirectories:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt; attributes:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; error:&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// get cache Path for image key&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *cachePathForKey = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; defaultCachePathForKey:key];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// transform to NSUrl&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSURL&lt;/span&gt; *fileURL = [&lt;span class=&quot;built_in&quot;&gt;NSURL&lt;/span&gt; fileURLWithPath:cachePathForKey];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                [_fileManager createFileAtPath:cachePathForKey contents:data attributes:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// disable iCloud backup&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.shouldDisableiCloud) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [fileURL setResourceValue:[&lt;span class=&quot;built_in&quot;&gt;NSNumber&lt;/span&gt; numberWithBool:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;] forKey:&lt;span class=&quot;built_in&quot;&gt;NSURLIsExcludedFromBackupKey&lt;/span&gt; error:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)storeImage:(&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)image forKey:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)key &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; storeImage:image recalculateFromImage:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt; imageData:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; forKey:key toDisk:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)storeImage:(&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *)image forKey:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)key toDisk:(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)toDisk &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; storeImage:image recalculateFromImage:&lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt; imageData:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; forKey:key toDisk:toDisk];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å­˜å‚¨ä¸€ä¸ªå›¾ç‰‡åˆ°ç¼“å­˜ä¸­ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•storeImage:forKey:method:ï¼Œé»˜è®¤ï¼Œå›¾ç‰‡æ—¢ä¼šå­˜å‚¨åˆ°å†…å­˜ç¼“å­˜ä¸­ï¼Œä¹Ÿä¼šå¼‚æ­¥åœ°ä¿å­˜åˆ°ç£ç›˜ç¼“å­˜ä¸­ã€‚å¦‚æœåªæƒ³ä½¿ç”¨å†…å­˜ç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨å¦å¤–ä¸€ä¸ªæ–¹æ³•storeImage:forKey:toDiskï¼Œç¬¬ä¸‰ä¸ªå‚æ•°ä¼ å…¥falseå€¼å°±å¥½äº†ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;è¿™ç¯‡æ–‡ç« æˆ‘å°†æ¥ç€èŠ‚è®²è¿°å…³äºSDWebImageå›¾ç‰‡ä¸‹è½½åå¤„ç†æ–¹å¼ï¼Œç¼“å­˜è¿›è¡Œè®²è§£ã€‚&lt;br&gt;&lt;/br&gt;&lt;br&gt;ç»è¿‡ä¸Šé¢æˆ‘ä»¬å¯ä»¥çŸ¥é“SDWebImageæ˜¯å¯ä»¥ä»è¿œç¨‹çš„æœåŠ¡å™¨åŠ è½½å›¾ç‰‡ï¼Œç„¶ååœ¨UIImageViewä¸Šè¿›è¡Œæ˜¾ç¤ºã€‚ä½†æ˜¯ä½ æœ‰æƒ³è¿‡SDWebImageåˆ°åº•æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨ä½¿ç”¨æ—¶æˆ‘ä»¬çŸ¥é“éœ€è¦å¯¼å…¥åŒ…ï¼šUIImageView+WebCache.hæˆ‘ä»¬å¯ä»¥æ ¹æ®è¿™çœ‹å‡ºSDWebImageæ˜¯ä¸€ä¸ªUIImageViewçš„åˆ†ç±»ï¼Œä½¿ç”¨Categoryè¿›è¡Œåˆ†è£…çš„ç±»ã€‚ä¸‹é¢åˆ—å‡ºSDWebImageå¯ä»¥å®ç°çš„åŠŸèƒ½ï¼š&lt;/p&gt;
    
    </summary>
    
      <category term="ç¬¬ä¸‰æ–¹æ¡†æ¶" scheme="http://yoursite.com/categories/%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="ä¸‰æ–¹æ¡†æ¶è§£æ" scheme="http://yoursite.com/tags/%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>SDWebImageä¹‹å›¾ç‰‡ä¸‹è½½</title>
    <link href="http://yoursite.com/2016/06/03/SDWebImage/"/>
    <id>http://yoursite.com/2016/06/03/SDWebImage/</id>
    <published>2016-06-03T13:23:21.000Z</published>
    <updated>2017-06-01T07:48:51.000Z</updated>
    
    <content type="html">&lt;p&gt;æˆ‘ä»¬ç»å¸¸ä½¿ç”¨SDWebImageåœ¨åŠ è½½å›¾ç‰‡ï¼Œä½†å¯¹äºå›¾ç‰‡åŠ è½½è¿‡ç¨‹ä¸­æ€ä¹ˆæ ·å®ç°ä¸ä¼šæ·±ç©¶ã€‚ä¸‹é¢æˆ‘ä»¬å°±å¯¹SDWebImageè¿›è¡Œç›¸åº”çš„åˆ†æï¼š&lt;br&gt;&lt;a href=&quot;https://github.com/rs/SDWebImage&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æºç åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;SDWebImageçš„ä¸‹è½½å™¨&quot;&gt;&lt;a href=&quot;#SDWebImageçš„ä¸‹è½½å™¨&quot; class=&quot;headerlink&quot; title=&quot;SDWebImageçš„ä¸‹è½½å™¨&quot;&gt;&lt;/a&gt;SDWebImageçš„ä¸‹è½½å™¨&lt;/h2&gt;&lt;p&gt;SDWebImageçš„ä¸‹è½½å™¨æ˜¯SDWebImageDownloaderåˆ©ç”¨å•ä¾‹æ¨¡å¼sharedDownloaderï¼Œå¯ä»¥å¯¹ä¸‹è½½çš„å›¾ç‰‡è¿›è¡Œç›¸å…³é…ç½®ã€‚å¯ä»¥é…ç½®çš„éƒ¨åˆ†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;ä¸‹è½½é€‰é¡¹&lt;/li&gt;&lt;br&gt;&lt;li&gt;HTTPçš„å¤´éƒ¨&lt;/li&gt;&lt;br&gt;&lt;li&gt;å‹ç¼©ã€ä¸‹è½½è¶…æ—¶ã€ä¸‹è½½é¡ºåºã€æœ€å¤§å¹¶å‘æ•°ç­‰&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;ä¸‹è½½é€‰é¡¹&quot;&gt;&lt;a href=&quot;#ä¸‹è½½é€‰é¡¹&quot; class=&quot;headerlink&quot; title=&quot;ä¸‹è½½é€‰é¡¹&quot;&gt;&lt;/a&gt;ä¸‹è½½é€‰é¡¹&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NS_OPTIONS&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt;, SDWebImageDownloaderOptions) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//ä¸‹è½½çš„ä¼˜å…ˆçº§&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   SDWebImageDownloaderLowPriority = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//ä¸‹è½½è¿›åº¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   SDWebImageDownloaderProgressiveDownload = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//ä¸‹è½½è·¯å¾„ç¼“å­˜&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   SDWebImageDownloaderUseNSURLCache = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//ä¸‹è½½è¿‡ç¨‹çš„è¯·æ±‚ç¼“å­˜&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   SDWebImageDownloaderIgnoreCachedResponse = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//åå°è¿›è¡Œç»§ç»­ä¸‹è½½&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   SDWebImageDownloaderContinueInBackground = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   SDWebImageDownloaderHandleCookies = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;number&quot;&gt;5&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   SDWebImageDownloaderAllowInvalidSSLCertificates = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;number&quot;&gt;6&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   SDWebImageDownloaderHighPriority = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; &amp;lt;&amp;lt; &lt;span class=&quot;number&quot;&gt;7&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;HTTPçš„å¤´éƒ¨è®¾ç½®&quot;&gt;&lt;a href=&quot;#HTTPçš„å¤´éƒ¨è®¾ç½®&quot; class=&quot;headerlink&quot; title=&quot;HTTPçš„å¤´éƒ¨è®¾ç½®&quot;&gt;&lt;/a&gt;HTTPçš„å¤´éƒ¨è®¾ç½®&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#ifdef SD_WEBP&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _HTTPHeaders = [@&amp;#123;&lt;span class=&quot;string&quot;&gt;@&quot;Accept&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;@&quot;image/webp,image/*;q=0.8&quot;&lt;/span&gt;&amp;#125; mutableCopy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#else&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _HTTPHeaders = [@&amp;#123;&lt;span class=&quot;string&quot;&gt;@&quot;Accept&quot;&lt;/span&gt;: &lt;span class=&quot;string&quot;&gt;@&quot;image/*;q=0.8&quot;&lt;/span&gt;&amp;#125; mutableCopy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)setValue:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)value forHTTPHeaderField:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)field &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (value) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.HTTPHeaders[field] = value;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.HTTPHeaders removeObjectForKey:field];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)valueForHTTPHeaderField:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)field &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.HTTPHeaders[field];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥é€šè¿‡ä¸Šè¿°forHTTPHeaderFieldçš„å‚æ•°è¿›è¡Œç›¸åº”HTTPheaderçš„è®¾ç½®ï¼Œä½¿ç”¨è€…å¯ä»¥å¯¹å¤´éƒ¨ä¿¡æ¯è¿›è¡Œç›¸å…³çš„æ·»åŠ æˆ–è€…æ˜¯åˆ é™¤HTTPå¤´éƒ¨ä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;çº¿ç¨‹å®‰å…¨&quot;&gt;&lt;a href=&quot;#çº¿ç¨‹å®‰å…¨&quot; class=&quot;headerlink&quot; title=&quot;çº¿ç¨‹å®‰å…¨&quot;&gt;&lt;/a&gt;çº¿ç¨‹å®‰å…¨&lt;/h3&gt;&lt;p&gt;åœ¨å›¾ç‰‡ä¸‹è½½è¿‡ç¨‹ä¸­æˆ‘ä»¬è¦ä¿çº¿ç¨‹è®¿é—®çš„å®‰å…¨æ€§ï¼ŒbarrierQueueæ˜¯å®ç°ç½‘ç»œå“åº”çš„åºåˆ—åŒ–å®ä¾‹ã€‚&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;// This queue is used to serialize the handling of the network responses of all&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;the download operation in a single queue&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@property (SDDispatchQueueSetterSementics, nonatomic) dispatch_queue_t barrierQueue;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ä¿è¯çº¿ç¨‹å®‰å…¨çš„èµ·è§ï¼Œæˆ‘ä»¬å¯¹äºURLCallbacksè¿›è¡Œå¢æ”¹éƒ½éœ€è¦æ”¾åœ¨dispatch_barrier_syncçš„å½¢å¼æ”¾å…¥åˆ°barrierQueueã€‚ä½†æ˜¯å¦‚æœæˆ‘ä»¬åªè¦è¿›è¡Œç›¸å…³çš„æŸ¥è¯¢é‚£å°±ä½¿ç”¨dispatch_syncæ”¾å…¥barrierQueueä¸­å³å¯ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__block &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *callbacksForURL;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;dispatch_sync&lt;/span&gt;(sself.barrierQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callbacksForURL = [sself.URLCallbacks[url] &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dispatch_barrier_sync(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.barrierQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; first = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.URLCallbacks[url]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.URLCallbacks[url] = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        first = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Handle single download of simultaneous download request for the same URL&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *callbacksForURL = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.URLCallbacks[url];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSMutableDictionary&lt;/span&gt; *callbacks = [&lt;span class=&quot;built_in&quot;&gt;NSMutableDictionary&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (progressBlock) callbacks[kProgressCallbackKey] = [progressBlock &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (completedBlock) callbacks[kCompletedCallbackKey] = [completedBlock &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[callbacksForURL addObject:callbacks];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.URLCallbacks[url] = callbacksForURL;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (first) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      createCallback();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;å›è°ƒ&quot;&gt;&lt;a href=&quot;#å›è°ƒ&quot; class=&quot;headerlink&quot; title=&quot;å›è°ƒ&quot;&gt;&lt;/a&gt;å›è°ƒ&lt;/h3&gt;&lt;p&gt;åœ¨æˆ‘ä»¬ä¸‹è½½å›¾ç‰‡çš„è¿‡ç¨‹ä¸­ï¼Œæ¯ä¸€å¼ å›¾ç‰‡éƒ½éœ€è¦å¼€å¯ä¸€ä¸ªçº¿ç¨‹ï¼Œåœ¨æ¯ä¸€ä¸ªçº¿ç¨‹ä¸­éƒ½éœ€è¦å¯¹æ‰§è¡Œä¸€å®šçš„å›è°ƒä¿¡æ¯ã€‚è¿™äº›å›è°ƒçš„ä¿¡æ¯ä¼šä»¥blockçš„å®è¡Œå‡ºç°ï¼š&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef void(^SDWebImageDownloaderProgressBlock)(NSInteger receivedSize,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSInteger expectedSize);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;typedef void(^SDWebImageDownloaderCompletedBlock)(UIImage *image, NSData *data,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSError *error, BOOL finished);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;typedef NSDictionary *(^SDWebImageDownloaderHeadersFilterBlock)(NSURL *url, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSDictionary *headers);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å›¾ç‰‡ä¸‹è½½çš„è¿™äº›å›è°ƒä¿¡æ¯å­˜å‚¨åœ¨SDWebImageDownloaderç±»çš„URLCallbackså±æ€§ä¸­ï¼Œè¯¥å±æ€§æ˜¯ä¸€ä¸ªå­—å…¸ï¼Œkeyæ˜¯å›¾ç‰‡çš„URLåœ°å€ï¼Œvalueåˆ™æ˜¯ä¸€ä¸ªæ•°ç»„ï¼ŒåŒ…å«æ¯ä¸ªå›¾ç‰‡çš„å¤šç»„å›è°ƒä¿¡æ¯ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¸‹è½½å™¨&quot;&gt;&lt;a href=&quot;#ä¸‹è½½å™¨&quot; class=&quot;headerlink&quot; title=&quot;ä¸‹è½½å™¨&quot;&gt;&lt;/a&gt;ä¸‹è½½å™¨&lt;/h3&gt;&lt;p&gt;æ•´ä¸ªä¸‹è½½è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦æ‰§è¡Œåœ¨æœ¬å°ç»“è®²è¿°çš„ä¸‹è½½å™¨ä¸­è¿›è¡Œï¼Œä¸‹è½½å™¨å¯¹äºä¸‹è½½çš„ç®¡ç†éƒ½æ˜¯æ”¾åœ¨-(id &lt;sdwebimageoperation&gt;)downloadImageWithURL:ä¸­çš„ï¼š&lt;/sdwebimageoperation&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (id &amp;lt;SDWebImageOperation&amp;gt;)downloadImageWithURL:(NSURL *)url options:(SDWebImageDownloaderOptions)options progress:(SDWebImageDownloaderProgressBlock)progressBlock completed:(SDWebImageDownloaderCompletedBlock)completedBlock &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__block SDWebImageDownloaderOperation *operation;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;__weak __typeof(self)wself = self;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[self addProgressCallback:progressBlock completedBlock:completedBlock forURL:url createCallback:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        NSTimeInterval timeoutInterval = wself.downloadTimeout;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        if (timeoutInterval == 0.0) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            timeoutInterval = 15.0;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;// In order to prevent from potential duplicate caching (NSURLCache + SDImageCache) we disable the cache for image requests if told otherwise&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSMutableURLRequest *request = [[NSMutableURLRequest alloc] initWithURL:url&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;cachePolicy:(options &amp;amp; SDWebImageDownloaderUseNSURLCache ? &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;NSURLRequestUseProtocolCachePolicy : NSURLRequestReloadIgnoringLocalCacheData)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;timeoutInterval:timeoutInterval];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;request.HTTPShouldHandleCookies = (options &amp;amp; SDWebImageDownloaderHandleCookies);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;request.HTTPShouldUsePipelining = YES;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (wself.headersFilter) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          request.allHTTPHeaderFields = wself.headersFilter(url, [wself.HTTPHeaders copy]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      else &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          request.allHTTPHeaderFields = wself.HTTPHeaders;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      operation = [[wself.operationClass alloc] initWithRequest:request&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                        options:options&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                       progress:^(NSInteger receivedSize, NSInteger expectedSize) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                           SDWebImageDownloader *sself = wself;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                           if (!sself) return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                           __block NSArray *callbacksForURL;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                           dispatch_sync(sself.barrierQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                               callbacksForURL = [sself.URLCallbacks[url] copy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                           &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                           for (NSDictionary *callbacks in callbacksForURL) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                               dispatch_async(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                   SDWebImageDownloaderProgressBlock callback = callbacks[kProgressCallbackKey];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                   if (callback) callback(receivedSize, expectedSize);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                               &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                           &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                      completed:^(UIImage *image, NSData *data, NSError *error, BOOL finished) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          SDWebImageDownloader *sself = wself;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          if (!sself) return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          __block NSArray *callbacksForURL;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          dispatch_barrier_sync(sself.barrierQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                              callbacksForURL = [sself.URLCallbacks[url] copy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                              if (finished) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                                  [sself.URLCallbacks removeObjectForKey:url];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                              &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          for (NSDictionary *callbacks in callbacksForURL) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                              SDWebImageDownloaderCompletedBlock callback = callbacks[kCompletedCallbackKey];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                              if (callback) callback(image, data, error, finished);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                      cancelled:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          SDWebImageDownloader *sself = wself;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          if (!sself) return;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          dispatch_barrier_async(sself.barrierQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                              [sself.URLCallbacks removeObjectForKey:url];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                          &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                                      &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      operation.shouldDecompressImages = wself.shouldDecompressImages;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (wself.urlCredential) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          operation.credential = wself.urlCredential;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125; else if (wself.username &amp;amp;&amp;amp; wself.password) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          operation.credential = [NSURLCredential credentialWithUser:wself.username password:wself.password persistence:NSURLCredentialPersistenceForSession];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (options &amp;amp; SDWebImageDownloaderHighPriority) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          operation.queuePriority = NSOperationQueuePriorityHigh;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125; else if (options &amp;amp; SDWebImageDownloaderLowPriority) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          operation.queuePriority = NSOperationQueuePriorityLow;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      [wself.downloadQueue addOperation:operation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      if (wself.executionOrder == SDWebImageDownloaderLIFOExecutionOrder) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          // Emulate LIFO execution order by systematically adding new operations as last operation&amp;apos;s dependency&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          [wself.lastAddedOperation addDependency:operation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          wself.lastAddedOperation = operation;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  return operation;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ä¸Šé¢çš„æ–¹æ³•ä¸­è°ƒç”¨çš„æ–¹æ³•(void)addProgressCallback:completedBlock:forURL:createCallback:å°†åœ¨è®¿é—®å›¾ç‰‡è¯·æ±‚çš„ä¿¡æ¯ç›´æ¥æ”¾å…¥ä¸‹è½½å™¨ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)addProgressCallback:(SDWebImageDownloaderProgressBlock)progressBlock completedBlock:(SDWebImageDownloaderCompletedBlock)completedBlock forURL:(&lt;span class=&quot;built_in&quot;&gt;NSURL&lt;/span&gt;*)url createCallback:(SDWebImageNoParamsBlock)createCallback &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// The URL will be used as the key to the callbacks dictionary so it cannot be nil. If it is nil immediately call the completed block with no image or data.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (url == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (completedBlock != &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            completedBlock(&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;dispatch_barrier_sync(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.barrierQueue, ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; first = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.URLCallbacks[url]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.URLCallbacks[url] = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       first = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;// Handle single download of simultaneous download request for the same URL&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *callbacksForURL = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.URLCallbacks[url];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;NSMutableDictionary&lt;/span&gt; *callbacks = [&lt;span class=&quot;built_in&quot;&gt;NSMutableDictionary&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (progressBlock) callbacks[kProgressCallbackKey] = [progressBlock &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (completedBlock) callbacks[kCompletedCallbackKey] = [completedBlock &lt;span class=&quot;keyword&quot;&gt;copy&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   [callbacksForURL addObject:callbacks];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.URLCallbacks[url] = callbacksForURL;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (first) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       createCallback();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ä¸‹è½½æ“ä½œ&quot;&gt;&lt;a href=&quot;#ä¸‹è½½æ“ä½œ&quot; class=&quot;headerlink&quot; title=&quot;ä¸‹è½½æ“ä½œ&quot;&gt;&lt;/a&gt;ä¸‹è½½æ“ä½œ&lt;/h3&gt;&lt;p&gt;åœ¨æ¯å¼ å›¾ç‰‡ä¸‹è½½è¿‡ç¨‹ä¸­éƒ½è¦è°ƒç”¨ä¸€æ¬¡å…·ä½“çš„æ“ä½œéƒ½ä¼šè°ƒç”¨Operationï¼Œä¸‹é¢å°±åˆ†æä¸€ä¸‹ä¸­é—´çš„å…·ä½“è¿‡ç¨‹ã€‚&lt;br&gt;æˆ‘ä»¬æ‰“å¼€SDWebImageçš„æ–‡ä»¶å¤¹å¯ä»¥åˆ°å…¶ä¸­æœ‰ä¸€ä¸ªSDWebImageOperationçš„ç±»ï¼Œå¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;#import &amp;lt;Foundation/Foundation.h&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@protocol SDWebImageOperation &amp;lt;NSObject&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (void)cancel;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;@end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;å…¶ä¸­æˆ‘ä»¬ä½¿ç”¨NSOpationçš„å­ç±»æ¥å®Œæˆå…·ä½“å›¾ç‰‡ä¸‹è½½çš„è¿‡ç¨‹ï¼Œè¿™ä¸ªç±»å°±æ˜¯SDWebImageDownloaderOperationã€‚åœ¨SDWebImageDownloaderOperationç±»ä¸­ç»§æ‰¿NSOperationçš„ç±»è€Œä¸”å®ç°SDWebImageOperationçš„cancelçš„å–æ¶ˆåè®®ã€‚é™¤äº†ç»§æ‰¿è€Œæ¥çš„æ–¹æ³•ï¼Œè¯¥ç±»åªå‘å¤–æš´éœ²äº†ä¸€ä¸ªæ–¹æ³•ï¼Œå³ä¸Šé¢æ‰€ç”¨åˆ°çš„åˆå§‹åŒ–æ–¹æ³•initWithRequest:options:pregress:completed:cancelled:ã€‚&lt;/p&gt;
&lt;p&gt;å¯¹äºå›¾ç‰‡çš„ä¸‹è½½ï¼ŒSDWebImageDownloaderOperationå®Œå…¨ä¾èµ–äºURLåŠ è½½ç³»ç»Ÿä¸­çš„NSURLConnectionç±»ï¼ˆå¹¶æœªä½¿ç”¨iOS7ä»¥åçš„NSURLSessionç±»ï¼‰ã€‚æˆ‘ä»¬å…ˆæ¥åˆ†æä¸€ä¸‹SDWebImageDownloaderOperationç±»ä¸­å¯¹äºå›¾ç‰‡å®é™…æ•°æ®çš„ä¸‹è½½å¤„ç†ï¼Œå³NSURLConnectionå„ä»£ç†æ–¹æ³•çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;é¦–å…ˆï¼ŒSDWebImageDownloaderOperationåœ¨Extentionä¸­é‡‡ç”¨äº†NSURLConnectionDataDelegateåè®®ï¼Œå¹¶å®ç°äº†åè®®çš„ä»¥ä¸‹å‡ ä¸ªæ–¹æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;connection:didReceiveResponse:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;connection:didReceiveData:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;connectionDidFinishLoading:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;connection:didFailWithError:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;connection:willCacheResponse:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;connectionShouldUseCredentialStorage:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;connection:willSendRequestForAuthenticationChallenge:&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¿™äº›æ–¹æ³•æˆ‘ä»¬å°±ä¸é€ä¸€åˆ†æäº†ï¼Œå°±ç»ˆç‚¹åˆ†æä¸€ä¸‹connection:didReceiveResponse:å’Œconnection:didReceiveData:ä¸¤ä¸ªæ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;connection:didReceiveResponseæ–¹æ³•é€šè¿‡åˆ¤æ–­NSURLResponseçš„å®é™…ç±»å‹å’ŒçŠ¶æ€ç ï¼Œå¯¹é™¤304ä»¥å¤–400ä»¥å†…çš„çŠ¶æ€ç ååº”ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)connection:(&lt;span class=&quot;built_in&quot;&gt;NSURLConnection&lt;/span&gt; *)connection didReceiveResponse:(&lt;span class=&quot;built_in&quot;&gt;NSURLResponse&lt;/span&gt; *)response &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;comment&quot;&gt;//&#39;304 Not Modified&#39; is an exceptional one&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (![response respondsToSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(statusCode)] ||([((&lt;span class=&quot;built_in&quot;&gt;NSHTTPURLResponse&lt;/span&gt; *)response) statusCode] &amp;lt; &lt;span class=&quot;number&quot;&gt;400&lt;/span&gt; &amp;amp;&amp;amp; [((&lt;span class=&quot;built_in&quot;&gt;NSHTTPURLResponse&lt;/span&gt;  *)response) statusCode] != &lt;span class=&quot;number&quot;&gt;304&lt;/span&gt;)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; expected = response.expectedContentLength &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; ? (&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      response.expectedContentLength : &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.expectedSize = expected;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.progressBlock) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.progressBlock(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, expected);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageData = [[&lt;span class=&quot;built_in&quot;&gt;NSMutableData&lt;/span&gt; alloc] initWithCapacity:expected];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.response = response;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      [[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] postNotificationName:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      SDWebImageDownloadReceiveResponseNotification object:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; code = [((&lt;span class=&quot;built_in&quot;&gt;NSHTTPURLResponse&lt;/span&gt; *)response) statusCode];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//This is the case when server returns &#39;304 Not Modified&#39;. It means that &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   remote image is not changed.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;comment&quot;&gt;//In case of 304 we need just cancel the operation and return cached image       &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   from the cache.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (code == &lt;span class=&quot;number&quot;&gt;304&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; cancelInternal];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.connection cancel];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] postNotificationName:SDWebImageDownloadStopNotification object:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.completedBlock) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.completedBlock(&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, [&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; errorWithDomain:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &lt;span class=&quot;built_in&quot;&gt;NSURLErrorDomain&lt;/span&gt; code:[((&lt;span class=&quot;built_in&quot;&gt;NSHTTPURLResponse&lt;/span&gt; *)response) statusCode] &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       userInfo:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;], &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;built_in&quot;&gt;CFRunLoopStop&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;CFRunLoopGetCurrent&lt;/span&gt;());&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; done];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;connection:didReceiveData:æ–¹æ³•çš„ä¸»è¦ä»»åŠ¡æ˜¯æ¥å—æ•°æ®ã€‚æ¯æ¬¡æ¥æ”¶åˆ°æ•°æ®æ—¶ï¼Œéƒ½ä¼šç”¨ç°æœ‰çš„æ•°æ®åˆ›å»ºä¸€ä¸ªCGImageSourceRefå¯¹è±¡ä»¥ä½œå¤„ç†ã€‚åœ¨é¦–æ¬¡è·å–åˆ°æ•°æ®æ—¶ï¼ˆwidth+height==0ï¼‰ä¼šä»è¿™äº›åŒ…å«å›¾åƒä¿¡æ¯çš„æ•°æ®ä¸­å–å‡ºå›¾åƒçš„é•¿ã€å®½ã€æ–¹å‘ç­‰ä¿¡æ¯ä»¥å¤‡ä½¿ç”¨ã€‚è€Œååœ¨å›¾ç‰‡ä¸‹è½½å®Œæˆä¹‹å‰ï¼Œä¼šä½¿ç”¨CGImageSourceRefå¯¹è±¡åˆ›å»ºä¸€ä¸ªå›¾åƒå¯¹è±¡ï¼Œç»è¿‡ç¼©æ”¾ã€è§£å‹ç¼©æ“ä½œåç”Ÿæˆä¸€ä¸ªUIImageå¯¹è±¡ä¾›å®Œæˆå›è°ƒä½¿ç”¨ã€‚å½“ç„¶ï¼Œåœ¨è¿™ä¸ªæ–¹æ³•ä¸­è¿˜éœ€è¦å¤„ç†çš„å°±æ˜¯è¿›åº¦ä¿¡æ¯ã€‚å¦‚æœæˆ‘ä»¬æœ‰è®¾ç½®è¿›åº¦å›è°ƒçš„è¯ï¼Œå°±è°ƒç”¨è¿›åº¦å›è°ƒä»¥å¤„ç†å½“å‰å›¾ç‰‡çš„ä¸‹è½½è¿›åº¦ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)connection:(&lt;span class=&quot;built_in&quot;&gt;NSURLConnection&lt;/span&gt; *)connection didReceiveData:(&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *)data&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageData appendData:data];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ((&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.options &amp;amp; SDWebImageDownloaderProgressiveDownload) &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.expectedSize &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.completedBlock) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// The following code is from http://www.cocoaintheshell.com/2011/05/&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;progressive-images-download-imageio/&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Thanks to the author @Nyx0uf&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Get the total bytes downloaded &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; totalSize = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageData.length;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Update the data source, we must pass ALL the data, not just the new bytes&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;CGImageSourceRef&lt;/span&gt; imageSource = &lt;span class=&quot;built_in&quot;&gt;CGImageSourceCreateWithData&lt;/span&gt;((__bridge &lt;span class=&quot;built_in&quot;&gt;CFDataRef&lt;/span&gt;)&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageData, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (width + height == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CFDictionaryRef&lt;/span&gt; properties = &lt;span class=&quot;built_in&quot;&gt;CGImageSourceCopyPropertiesAtIndex&lt;/span&gt;(imageSource, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (properties) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; orientationValue = &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CFTypeRef&lt;/span&gt; val = &lt;span class=&quot;built_in&quot;&gt;CFDictionaryGetValue&lt;/span&gt;(properties, kCGImagePropertyPixelHeight);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (val) &lt;span class=&quot;built_in&quot;&gt;CFNumberGetValue&lt;/span&gt;(val, kCFNumberLongType, &amp;amp;height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                val = &lt;span class=&quot;built_in&quot;&gt;CFDictionaryGetValue&lt;/span&gt;(properties, kCGImagePropertyPixelWidth);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (val) &lt;span class=&quot;built_in&quot;&gt;CFNumberGetValue&lt;/span&gt;(val, kCFNumberLongType, &amp;amp;width);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                val = &lt;span class=&quot;built_in&quot;&gt;CFDictionaryGetValue&lt;/span&gt;(properties, kCGImagePropertyOrientation);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (val) &lt;span class=&quot;built_in&quot;&gt;CFNumberGetValue&lt;/span&gt;(val, kCFNumberNSIntegerType, &amp;amp;orientationValue);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(properties);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// When we draw to Core Graphics, we lose orientation information,&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// which means the image below born of initWithCGIImage will be&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// oriented incorrectly sometimes. (Unlike the image born of initWithData&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// in connectionDidFinishLoading.) So save it here and pass it on later.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                orientation = [[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; class] orientationFromPropertyValue:(orientationValue == &lt;span class=&quot;number&quot;&gt;-1&lt;/span&gt; ? &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; : orientationValue)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (width + height &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; totalSize &amp;lt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.expectedSize) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Create the image&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGImageRef&lt;/span&gt; partialImageRef = &lt;span class=&quot;built_in&quot;&gt;CGImageSourceCreateImageAtIndex&lt;/span&gt;(imageSource, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#ifdef TARGET_OS_IPHONE&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Workaround for iOS anamorphic image&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (partialImageRef) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; size_t partialHeight = &lt;span class=&quot;built_in&quot;&gt;CGImageGetHeight&lt;/span&gt;(partialImageRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGColorSpaceRef&lt;/span&gt; colorSpace = &lt;span class=&quot;built_in&quot;&gt;CGColorSpaceCreateDeviceRGB&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; bmContext = &lt;span class=&quot;built_in&quot;&gt;CGBitmapContextCreate&lt;/span&gt;(&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;, width, height, &lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;, width * &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;, colorSpace, kCGBitmapByteOrderDefault | kCGImageAlphaPremultipliedFirst);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGColorSpaceRelease&lt;/span&gt;(colorSpace);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (bmContext) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;CGContextDrawImage&lt;/span&gt;(bmContext, (&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)&amp;#123;.origin.x = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;f, .origin.y = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;f, .size.width = width, .size.height = partialHeight&amp;#125;, partialImageRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;CGImageRelease&lt;/span&gt;(partialImageRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    partialImageRef = &lt;span class=&quot;built_in&quot;&gt;CGBitmapContextCreateImage&lt;/span&gt;(bmContext);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;CGContextRelease&lt;/span&gt;(bmContext);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;CGImageRelease&lt;/span&gt;(partialImageRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    partialImageRef = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (partialImageRef) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *image = [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageWithCGImage:partialImageRef scale:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; orientation:orientation];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *key = [[SDWebImageManager sharedManager] cacheKeyForURL:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.request.URL];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *scaledImage = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; scaledImageForKey:key image:image];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.shouldDecompressImages) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    image = [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; decodedImageWithImage:scaledImage];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    image = scaledImage;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGImageRelease&lt;/span&gt;(partialImageRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                dispatch_main_sync_safe(^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.completedBlock) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.completedBlock(image, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(imageSource);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.progressBlock) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.progressBlock(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageData.length, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.expectedSize);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬å‰é¢è¯´è¿‡SDWebImageDownloaderOperationç±»æ˜¯ç»§æ‰¿è‡ªNSOperationç±»ã€‚å®ƒæ²¡æœ‰ç®€å•çš„å®ç°mainæ–¹æ³•ï¼Œè€Œæ˜¯é‡‡ç”¨æ›´åŠ çµæ´»çš„startæ–¹æ³•ï¼Œä»¥ä¾¿è‡ªå·±ç®¡ç†ä¸‹è½½çš„çŠ¶æ€ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨startæ–¹æ³•ä¸­ï¼Œåˆ›å»ºäº†æˆ‘ä»¬ä¸‹è½½æ‰€ä½¿ç”¨çš„NSURLConnectionå¯¹è±¡ï¼Œå¼€å¯äº†å›¾ç‰‡çš„ä¸‹è½½ï¼ŒåŒæ—¶æŠ›å‡ºä¸€ä¸ªä¸‹è½½å¼€å§‹çš„é€šçŸ¥ã€‚startæ–¹æ³•çš„å…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)start &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@synchronized&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.isCancelled) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.finished = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; reset];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#if TARGET_OS_IPHONE &amp;amp;&amp;amp; __IPHONE_OS_VERSION_MAX_ALLOWED &amp;gt;= __IPHONE_4_0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        Class &lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;NSClassFromString&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;UIApplication&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; hasApplication = &lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; &amp;amp;&amp;amp; [&lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; respondsToSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(sharedApplication)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (hasApplication &amp;amp;&amp;amp; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; shouldContinueWhenAppEntersBackground]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            __&lt;span class=&quot;keyword&quot;&gt;weak&lt;/span&gt; __typeof__ (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;) wself = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; * app = [&lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; performSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(sharedApplication)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundTaskId = [app beginBackgroundTaskWithExpirationHandler:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                __&lt;span class=&quot;keyword&quot;&gt;strong&lt;/span&gt; __&lt;span class=&quot;keyword&quot;&gt;typeof&lt;/span&gt; (wself) sself = wself;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (sself) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [sself cancel];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [app endBackgroundTask:sself.backgroundTaskId];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    sself.backgroundTaskId = &lt;span class=&quot;built_in&quot;&gt;UIBackgroundTaskInvalid&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.executing = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.connection = [[&lt;span class=&quot;built_in&quot;&gt;NSURLConnection&lt;/span&gt; alloc] initWithRequest:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.request delegate:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; startImmediately:&lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.thread = [&lt;span class=&quot;built_in&quot;&gt;NSThread&lt;/span&gt; currentThread];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.connection start];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.connection) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.progressBlock) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.progressBlock(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;NSURLResponseUnknownLength&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] postNotificationName:SDWebImageDownloadStartNotification object:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (floor(&lt;span class=&quot;built_in&quot;&gt;NSFoundationVersionNumber&lt;/span&gt;) &amp;lt;= &lt;span class=&quot;built_in&quot;&gt;NSFoundationVersionNumber_iOS_5_1&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Make sure to run the runloop in our background thread so it can process downloaded data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Note: we use a timeout to work around an issue with NSURLConnection cancel under iOS 5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//       not waking up the runloop, leading to dead threads (see https://github.com/rs/SDWebImage/issues/466)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CFRunLoopRunInMode&lt;/span&gt;(kCFRunLoopDefaultMode, &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;false&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CFRunLoopRun&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.isFinished) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.connection cancel];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; connection:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.connection didFailWithError:[&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; errorWithDomain:&lt;span class=&quot;built_in&quot;&gt;NSURLErrorDomain&lt;/span&gt; code:&lt;span class=&quot;built_in&quot;&gt;NSURLErrorTimedOut&lt;/span&gt; userInfo:@&amp;#123;&lt;span class=&quot;built_in&quot;&gt;NSURLErrorFailingURLErrorKey&lt;/span&gt; : &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.request.URL&amp;#125;]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.completedBlock) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.completedBlock(&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, [&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; errorWithDomain:&lt;span class=&quot;built_in&quot;&gt;NSURLErrorDomain&lt;/span&gt; code:&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; userInfo:@&amp;#123;&lt;span class=&quot;built_in&quot;&gt;NSLocalizedDescriptionKey&lt;/span&gt; : &lt;span class=&quot;string&quot;&gt;@&quot;Connection can&#39;t be initialized&quot;&lt;/span&gt;&amp;#125;], &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#if TARGET_OS_IPHONE &amp;amp;&amp;amp; __IPHONE_OS_VERSION_MAX_ALLOWED &amp;gt;= __IPHONE_4_0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Class &lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; = &lt;span class=&quot;built_in&quot;&gt;NSClassFromString&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;UIApplication&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(!&lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; || ![&lt;span class=&quot;built_in&quot;&gt;UIApplicationClass&lt;/span&gt; respondsToSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(sharedApplication)]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundTaskId != &lt;span class=&quot;built_in&quot;&gt;UIBackgroundTaskInvalid&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; * app = [&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt; performSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(sharedApplication)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [app endBackgroundTask:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundTaskId];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundTaskId = &lt;span class=&quot;built_in&quot;&gt;UIBackgroundTaskInvalid&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ä¸‹è½½å®Œåæˆ–è€…æ˜¯ä¸‹è½½å¤±è´¥åéƒ½ä¼šåœæ­¢å½“å‰è°ƒç”¨çš„runloopï¼Œæ¸…æ¥šé“¾æ¥éšåå°±æŠ›å‡ºä¸‹è½½åœæ­¢çš„æ¶ˆæ¯ã€‚&lt;br&gt;å¦‚æœä¸‹è½½æˆåŠŸï¼Œåˆ™ä¼šå¤„ç†å®Œæ•´çš„å›¾ç‰‡æ•°æ®ï¼Œå¯¹å…¶è¿›è¡Œé€‚å½“çš„ç¼©æ”¾ä¸è§£å‹ç¼©æ“ä½œï¼Œä»¥æä¾›ç»™å®Œæˆå›è°ƒä½¿ç”¨ã€‚å…·ä½“å¯å‚è€ƒ-connectionDidFinishLoading:ä¸-connection:didFailWithError:çš„å®ç°ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ€»ç»“&quot;&gt;&lt;a href=&quot;#æ€»ç»“&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“&quot;&gt;&lt;/a&gt;æ€»ç»“&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬åœ¨ä¸Šé¢çš„ä»‹ç»å¯ä»¥çœ‹å‡ºåœ¨ä¸‹è½½å›¾ç‰‡çš„è¿‡ç¨‹ä¸­ï¼Œæ¯æ¬¡ä¸‹è½½å›¾ç‰‡éƒ½ä¼šè°ƒç”¨NSOperationçš„å‡½æ•°è¿›è¡Œå¤„ç†ï¼Œæ¯æ¬¡æ•°æ®å®é™…å®ç°æ˜¯ä½¿ç”¨NSURLConnectionã€‚æˆ‘ä»¬æŠŠå…·ä½“å®ç°çš„çº¿ç¨‹æ”¾ç½®åœ¨é˜Ÿåˆ—ä¸­è¿›è¡Œæ‰§è¡Œæ“ä½œã€‚å¦‚æœä¸‹è½½æˆåŠŸï¼Œåˆ™ä¼šå¤„ç†å®Œæ•´çš„å›¾ç‰‡æ•°æ®ï¼Œå¯¹å…¶è¿›è¡Œé€‚å½“çš„ç¼©æ”¾ä¸è§£å‹ç¼©æ“ä½œï¼Œä»¥æä¾›ç»™å®Œæˆå›è°ƒä½¿ç”¨ã€‚å…·ä½“å¯å‚è€ƒ-connectionDidFinishLoading:ä¸-connection:didFailWithError:çš„å®ç°ã€‚&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://boilwater.github.io/2016/06/04/SDWebImageä¹‹å›¾ç‰‡ç¼“å­˜åˆ†æ/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ä¸‹ä¸€èŠ‚æˆ‘ä»¬å°†è®²è¿°å¦‚ä½•å¯¹ä¸‹è½½çš„å›¾ç‰‡è¿›è¡Œç¼“å­˜å¤„ç†&lt;/a&gt;;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æˆ‘ä»¬ç»å¸¸ä½¿ç”¨SDWebImageåœ¨åŠ è½½å›¾ç‰‡ï¼Œä½†å¯¹äºå›¾ç‰‡åŠ è½½è¿‡ç¨‹ä¸­æ€ä¹ˆæ ·å®ç°ä¸ä¼šæ·±ç©¶ã€‚ä¸‹é¢æˆ‘ä»¬å°±å¯¹SDWebImageè¿›è¡Œç›¸åº”çš„åˆ†æï¼š&lt;br&gt;&lt;a href=&quot;https://github.com/rs/SDWebImage&quot;&gt;æºç åœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;SDWebImageçš„ä¸‹è½½å™¨&quot;&gt;&lt;a href=&quot;#SDWebImageçš„ä¸‹è½½å™¨&quot; class=&quot;headerlink&quot; title=&quot;SDWebImageçš„ä¸‹è½½å™¨&quot;&gt;&lt;/a&gt;SDWebImageçš„ä¸‹è½½å™¨&lt;/h2&gt;&lt;p&gt;SDWebImageçš„ä¸‹è½½å™¨æ˜¯SDWebImageDownloaderåˆ©ç”¨å•ä¾‹æ¨¡å¼sharedDownloaderï¼Œå¯ä»¥å¯¹ä¸‹è½½çš„å›¾ç‰‡è¿›è¡Œç›¸å…³é…ç½®ã€‚å¯ä»¥é…ç½®çš„éƒ¨åˆ†å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;ä¸‹è½½é€‰é¡¹&lt;/li&gt;&lt;br&gt;&lt;li&gt;HTTPçš„å¤´éƒ¨&lt;/li&gt;&lt;br&gt;&lt;li&gt;å‹ç¼©ã€ä¸‹è½½è¶…æ—¶ã€ä¸‹è½½é¡ºåºã€æœ€å¤§å¹¶å‘æ•°ç­‰&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;
    
    </summary>
    
      <category term="ç¬¬ä¸‰æ–¹æ¡†æ¶" scheme="http://yoursite.com/categories/%E7%AC%AC%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6/"/>
    
    
      <category term="ä¸‰æ–¹æ¡†æ¶è§£æ" scheme="http://yoursite.com/tags/%E4%B8%89%E6%96%B9%E6%A1%86%E6%9E%B6%E8%A7%A3%E6%9E%90/"/>
    
  </entry>
  
  <entry>
    <title>IOSé¢è¯•&amp;è‡ªå·±ç†è§£&amp;è¯¦ç»†èµ„æ–™åº“</title>
    <link href="http://yoursite.com/2016/06/02/IOS%E9%9D%A2%E8%AF%95%E6%A2%B3%E7%90%86&%E8%87%AA%E5%B7%B1%E7%90%86%E8%A7%A3&%E8%AF%A6%E7%BB%86%E8%B5%84%E6%96%99%E5%BA%93/"/>
    <id>http://yoursite.com/2016/06/02/IOSé¢è¯•æ¢³ç†&è‡ªå·±ç†è§£&è¯¦ç»†èµ„æ–™åº“/</id>
    <published>2016-06-02T11:01:41.000Z</published>
    <updated>2017-06-01T07:44:41.000Z</updated>
    
    <content type="html">&lt;p&gt;å¼€å¯å…³äºIOSé¢è¯•ä¹‹è·¯æ€»ç»“ï¼Œè¯´å®è¯ç›®å‰IOSå¼€å‘çœŸæ˜¯å¤ªå¤šå¾ˆå¤šæƒ…å†µä¸‹å¤§å®¶æƒ…å†µè‰¯è ä¸é½å¾ˆéš¾åˆ†è¾¨ã€‚ç›®å‰è¿˜æ˜¯åœ¨å¹¿å·ï¼Œå…¶å®è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„ï¼Œå› ä¸ºè¿™é‡Œæœ‰è‡ªå·±ğŸ˜äº‹ç‰©æ‰€åœ¨ã€‚&lt;/p&gt;
&lt;h3 id=&quot;OCçš„ç†è§£å’Œç‰¹æ€§&quot;&gt;&lt;a href=&quot;#OCçš„ç†è§£å’Œç‰¹æ€§&quot; class=&quot;headerlink&quot; title=&quot;OCçš„ç†è§£å’Œç‰¹æ€§&quot;&gt;&lt;/a&gt;OCçš„ç†è§£å’Œç‰¹æ€§&lt;/h3&gt;&lt;p&gt;ä½œä¸ºå¼€å‘è€…æˆ‘ä»¬éƒ½çŸ¥é“è¯­è¨€çš„ç‰¹æ€§åŒ…æ‹¬ï¼šé¢å¯¹å¯¹è±¡ï¼Œé¢å‘è¿‡ç¨‹ã€‚Objcå°±æ˜¯å…³äºé¢å¯¹å¯¹è±¡è¯­è¨€ï¼Œä¹Ÿå°±åŒ…æ‹¬é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚ä¸‹é¢æ˜¯å¯¹ä¸‰è€…ä¼˜ç‚¹åˆ—è¡¨ğŸ˜‰&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;å°è£…ï¼šå¯¹äºè¦å¤„ç†çš„é—®é¢˜è¿›è¡Œæ¨¡å—å¼€å‘ï¼Œå¥½å¤„æœ‰åˆ©äºæˆ‘ä»¬å¯¹äºåŠŸèƒ½çš„æ‹“å±•&lt;/li&gt;&lt;br&gt;&lt;li&gt;ç»§æ‰¿ï¼šé€šè¿‡ç»§æ‰¿å®ç°å¯¹çˆ¶ç±»æ–¹æ³•çš„å®ç°ï¼Œä¹Ÿå¯ä»¥åœ¨å­ç±»ä¸­é‡å†™çˆ¶ç±»æ–¹æ³•&lt;/li&gt;&lt;br&gt;&lt;li&gt;å¤šæ€ï¼šé€šè¿‡åŒåå‡½æ•°ä½†æ˜¯è¾“å…¥å½¢å¼å‚æ•°çš„ç§ç±»ï¼Œæ•°ç›®ï¼Œç±»å‹ä¸åŒå®ç°å…·ä½“å‡½æ•°åŠŸèƒ½ä¸åŒï¼ˆå…·ä½“å®ç°å¯ä»¥å‚ç…§C&amp;amp;C++åœ¨ç¼–è¯‘åå½¢å¼~æƒ³äº†è§£çš„å¯ä»¥è‡ªå·±æŸ¥æ‰¾ï¼‰&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;Objcçš„åŠ¨æ€ç‰¹æ€§ï¼šåŠ¨æ€ç±»å‹ã€åŠ¨æ€åŠ è½½ã€åŠ¨æ€ç»‘å®šã€‚å…¶å®å‰é¢æˆ‘ä»¬åœ¨runtimeçš„ç†è§£è¿‡ç¨‹ä¸­æœ‰æ‰€è®²è§£ã€‚&lt;a href=&quot;http://boilwater.github.io/2016/05/29/runtimeç†è§£/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€&lt;/a&gt;&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;åŠ¨æ€ç±»å‹ï¼šåœ¨IOSä¸­æˆ‘ä»¬ç»å¸¸è§åˆ°idç±»å‹ï¼Œidç±»å‹æŒ‡åœ¨Objcä¸­åŠ¨æ€ç±»å‹ã€‚åœ¨å®é™…åº”ç”¨ä¸­æˆ‘ä»¬ä¸€èˆ¬ä½¿ç”¨é™æ€ç±»å‹ï¼Œé™æ€ç±»å‹ï¼šå›ºå®šå’Œå¯é¢„çŸ¥æ€§ã€‚é™æ€ç±»å‹æ˜¯å¼ºç±»å‹ï¼ŒåŠ¨æ€ç±»å‹æ˜¯å¼±ç±»å‹ã€‚ä¾‹å¦‚ï¼šæˆ‘ä»¬ç»å¸¸è§åˆ°çš„protrcolå§”æ‰˜åè®®å°±æ˜¯é‡‡å–@proerty(nonatomic, weak) id&lt;protrcol&gt; delegate&lt;/protrcol&gt;&lt;/li&gt;&lt;br&gt;&lt;li&gt;åŠ¨æ€åŠ è½½ï¼šåŸºäºåŠ¨æ€ç±»å‹ï¼Œåœ¨æŸä¸ªå®ä¾‹å¯¹è±¡è¢«ç¡®å®šåï¼Œå…¶ç±»å‹ä¾¿è¢«ç¡®å®šäº†ï¼Œè¯¥å¯¹è±¡å¯¹åº”çš„å±æ€§å’Œå“åº”æ¶ˆæ¯ä¹Ÿè¢«å®Œå…¨ç¡®å®šã€‚&lt;/li&gt;&lt;br&gt;&lt;li&gt;åŠ¨æ€ç»‘å®šï¼šæ˜¯æˆ‘ä»¬åœ¨é€‚é…æœºå‹åŠ è½½è¿‡ç¨‹ä¸­ï¼ŒåŠ¨æ€å®ç°å›¾ç‰‡çš„å®ç°ã€‚ä¾‹å¦‚ï¼Œåœ¨Retinaè®¾å¤‡ä¸ŠåŠ è½½@2xçš„å›¾ç‰‡ã€‚&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h3 id=&quot;å†…å­˜ç®¡ç†åŸåˆ™&quot;&gt;&lt;a href=&quot;#å†…å­˜ç®¡ç†åŸåˆ™&quot; class=&quot;headerlink&quot; title=&quot;å†…å­˜ç®¡ç†åŸåˆ™&quot;&gt;&lt;/a&gt;å†…å­˜ç®¡ç†åŸåˆ™&lt;/h3&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;IOS5.0ä¹‹å‰ï¼šåœ¨IOS 5.0ä¹‹å‰Objcå†…å­˜ç®¡ç†è¯•è¡Œè°åˆ›å»ºï¼Œè°é‡Šæ”¾çš„åŸåˆ™ã€‚å¦‚æœè¦å¯¹æ˜¯åˆå§‹åŒ–çš„ç±»å‹è¿›è¡Œalloc,retain,copyï¼Œå°±éœ€è¦æ‰‹åŠ¨è¿›è¡Œreleaseè¿›è¡Œé‡Šæ”¾ã€‚å½“è®¡æ•°ä¸º0æ—¶æ‰ä¼šé‡Šæ”¾å¯¹åº”çš„åˆå§‹åŒ–å†…å­˜ç©ºé—´å’ŒæŒ‡é’ˆï¼Œæˆ‘ä»¬ç§°ä¸ºMRCæ—¶ä»£ã€‚&lt;/li&gt;&lt;br&gt;&lt;li&gt;IOS 5.0ä¹‹åï¼šä½¿ç”¨æˆè¨€IOSå¼€å‘é‚£å°±æ˜¯ä¸€ä¸ªå­—ï¼šçˆ½ã€‚åœ¨ARCï¼šè‡ªåŠ¨è®¡æ•°æ¨¡å¼å¼€å‘ç¨‹åºï¼Œæˆ‘ä»¬ä¸ç”¨å†æ‰‹åŠ¨é‡Šæ”¾ç”³è¯·çš„å¯¹è±¡ï¼Œç¨‹åºå¼€å‘è¿‡ç¨‹ç»ˆäºè§ä¸åˆ°release,autorelease,retainè¯­å¥ã€‚ä¸è¿‡æˆ‘ä»¬è¿™æ˜¯å°±è¯¥æ³¨æ„åˆ°strongå’Œweakçš„ç»†å¾®åŒºåˆ«ã€‚&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;hr&gt;
&lt;p&gt;strong &amp;amp; weakåŒºåˆ«&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;strong:ç”¨æ¥ä¿®é¥°å¼ºå¼•ç”¨å±æ€§&lt;/li&gt;&lt;br&gt;&lt;li&gt;weak:ç”¨æ¥ä¿®é¥°å¼±å¼•ç”¨å±æ€§&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;strong &amp;amp; weakå®ç°å…·ä½“æƒ…å†µ&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;æˆ‘ä»¬çŸ¥é“strongçš„ä½¿ç”¨æ—¶å¼ºå¼•ç”¨ï¼Œä½¿ç”¨å¼ºå¼•ç”¨ä½¿æˆ‘ä»¬åœ¨èµ‹å€¼æ—¶ä¼šä½¿è®¡æ•°å™¨+1ï¼›&lt;br&gt;&lt;br&gt;&lt;br&gt;é‡Šæ”¾æ—¶é—´ï¼šå½“æŒ‡é’ˆæŒ‡å‘æ–°å€¼æˆ–è€…æŒ‡é’ˆä¸å­˜åœ¨ï¼ŒæŒ‡é’ˆä¸å­˜åœ¨ä¸€èˆ¬æ˜¯åœ¨è‡ªåŠ¨è®¡æ•°ä¸º0æ—¶æŒ‡é’ˆä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚&lt;/li&gt;&lt;br&gt;&lt;li&gt;weakæ˜¯å¼±å¼•ç”¨ï¼Œæ‚²å‰§çš„æ˜¯å¼±å¼•ç”¨æ˜¯ä¸ä¼šå†è®¡æ•°+1çš„ã€‚ä¸è¿‡è¿™ä¹Ÿä½¿æˆ‘ä»¬åœ¨ä½¿ç”¨æ—¶å¾ˆæ–¹ä¾¿ï¼Œå› ä¸ºæˆ‘ä»¬å¦‚æœè¦é˜²æ­¢blockä¸­å‘ç”Ÿå¾ªç¯å¼•ç”¨çš„æ—¶å€™ï¼Œå¯ä»¥åœ¨blockå¤–ä½¿ç”¨_weakè¿›è¡Œä¿®é¥°ã€‚&lt;br&gt;&lt;br&gt;&lt;br&gt;é‡Šæ”¾æ—¶é—´ï¼šå¯¹è±¡çš„æ‹¥æœ‰è€…æŒ‡å‘æ–°å€¼æˆ–è€…ä¸å­˜åœ¨æ—¶weakä¿®é¥°çš„æŒ‡é’ˆä¼šè‡ªåŠ¨ç½®ä¸ºnilã€‚&lt;br&gt;&lt;br&gt;&lt;br&gt;weakçš„å®ç°åŸç†ï¼šåœ¨æ¯ä¸€ä¸ªç±»ä¸­éƒ½æœ‰ä¸€ä¸ªå¼±å¼•ç”¨çš„åˆ—è¡¨ï¼Œåœ¨é‡Šæ”¾æ—¶éƒ½ä¼šå¯¹åˆ—è¡¨è¿›è¡Œè®¿é—®ã€‚å¦‚æœæ‰¾åˆ°ç›¸åº”çš„å¯¹è±¡å°±æ‰§è¡Œé‡Šæ”¾ã€‚&lt;br&gt;&lt;br&gt;&lt;br&gt;Strongï¼šæ˜¯é€šè¿‡ARCçš„è‡ªåŠ¨è®¡æ•°æ¥å®ç°å¯¹äºå¯¹è±¡çš„é‡Šæ”¾ã€‚&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/leikezhu1981/article/details/42697977&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒèµ„æ–™&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;åœ¨æƒ³ä¸€ä¸ªå¯¹è±¡å‘é€autoreleaseæ¶ˆæ¯æ—¶ï¼Œå…¶å®ç›®æ ‡ä¸ä¼šç«‹å³é‡Šæ”¾ï¼Œä¼šæœ‰ä¸€ä¸ªå…·ä½“çš„æ—¶é—´å€¼ã€‚åœ¨autoreleaseè°ƒç”¨çš„æ—¶å€™ï¼Œä¼šå¯¹å…¶ä¸­çš„å¯¹è±¡æŒ¨ä¸ªå‘é€releaseè¯­å¥å¯¹äºæ¯ä¸ªå¯¹è±¡è¿›è¡Œç›¸åº”çš„é‡Šæ”¾ã€‚åé¢ä¼šå¯¹äºautoreleaseè¿›è¡Œä¸“é¡¹è®²è§£ï¼Œä¸è¿‡è¿™é‡Œå¯ä»¥ç»™å¤§ç‰›èµ„æ–™ï¼Œä¸‹æ–‡&lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨ARCä¸­æˆ‘ä»¬ä¸ç”¨æ‰‹åŠ¨å‘å®ä¾‹åŒ–å¯¹è±¡å‘é€releaseè¿›è¡Œé‡Šæ”¾ï¼Œä½†æ˜¯åœ¨MRCä¸­å°±éœ€è¦æˆ‘ä»¬å¯¹ç”³è¯·çš„å¯¹è±¡è¿›è¡Œæ‰‹åŠ¨é‡Šæ”¾å¯¹è±¡ã€‚é‚£ä¹ˆé—®é¢˜æ¥å•¦ï¼Œå¯¹è±¡ä¼šç«‹å³é‡Šæ”¾å—ï¼Ÿ&lt;br&gt;&lt;br&gt;&lt;br&gt;è®°ä½ä¸€ç‚¹åœ¨MRCä¹Ÿæ˜¯å¯¹è±¡æœ‰æ—¶ä¹Ÿä¸ä¼šç«‹å³é‡Šæ”¾ï¼Œéœ€è¦å½“å‰å¯¹è±¡çš„è®¡æ•°ä¸º0æ—¶æ‰ä¼šä½¿ç”¨deallocè¿›è¡Œå¯¹è±¡ä¸­æ‰€æœ‰çš„å†…å®¹ã€‚&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20150610/12093.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AutoreleasePoolå¤§ç‰›çš„èµ„æ–™&lt;/a&gt;&lt;br&gt;&lt;br&gt;#### å…¶ä»–æ³¨æ„äº‹é¡¹&lt;br&gt;&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;å½“ä¸€ä¸ªå¯¹è±¡è¢«_strongæŒ‡å‘æ—¶ï¼Œè¯¥å¯¹è±¡æ˜¯ä¸ä¼šè¢«é‡Šæ”¾çš„ã€‚ä½†æ˜¯å½“å¯¹è±¡åœ¨è¶…å‡ºå…¶ä½œç”¨åŒºåŸŸæ—¶ï¼ˆåœ¨C++ä¸­å±€éƒ¨å˜é‡åœ¨è¶…å‡ºä½œç”¨åŒºåŸŸå°±ä¼šnilï¼‰ï¼Œæ­¤æ—¶æŒ‡é’ˆä¹Ÿä¼šè¢«ç½®ä¸ºniläºæ­¤åŒæ—¶æŒ‡é’ˆæ‰€æŒ‡çš„å†…å­˜ç©ºé—´ä¹Ÿä¼šè¢«é‡Šæ”¾ã€‚&lt;br&gt;&lt;br&gt;&lt;br&gt;è¿˜æœ‰å°±æ˜¯å½“è¯•å›¾æ§åˆ¶å™¨ï¼ˆViewControllerï¼‰è¿›è¡Œé‡Šæ”¾ï¼Œå…¶ä¸­çš„å…¨å±€å˜é‡å’Œå±€éƒ¨å˜é‡éƒ½ä¼šè¢«é‡Šæ”¾ã€‚ä¹Ÿæœ‰æ„å¤–å°±æ˜¯å®ç°å¾ªç¯å¼•ç”¨ï¼Œæ­å–œä½ å¥½å¥½ä¿®æ”¹ä¸‹å§ï¼Œå› ä¸ºè¿™æ˜¯ä¸ªBUGã€‚&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;li&gt;å±€éƒ¨å˜é‡ï¼šä¸Šé¢è®²åˆ°çš„å±€éƒ¨å˜é‡å¦‚æœè¶…å‡ºå…¶èŒƒå›´å°±ä¼šç½®ä¸ºnil&lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨æ–¹æ³•ä¸­å¯¹è±¡åˆ›å»ºï¼Œä¸ºå•¦ä½¿å†…å­˜èƒ½å¤Ÿå°½å¯èƒ½çš„å‡å°‘å¯ä»¥ä½¿ç”¨autoreleasepoolã€‚ä½¿ç”¨æ–¹æ³•ï¼š@autoreleasepool{};&lt;/li&gt;&lt;br&gt;&lt;li&gt;blockä¸­ä¸ºäº†é¿å…å¾ªç¯å¼•ç”¨å°±ä¼šä½¿ç”¨_weakè¿›è¡Œä¿®é¥°&lt;/li&gt;&lt;br&gt;&lt;li&gt;ARCä¸æ˜¯ä¸‡èƒ½çš„ğŸ”‘ï¼šARCæ˜¯åŸºäºåœ¨Foundationä¹‹ä¸Šè¿›è¡Œçš„å˜é‡çš„ç®¡ç†ï¼Œå¦‚æœæ˜¯CGtypeRefç±»å‹å°±æ— æ³•è¿›è¡Œç®¡ç†ã€‚ä¾‹å¦‚ï¼šCGImageRefçš„å›¾ç‰‡çš„ä¿¡æ¯&lt;/li&gt;&lt;br&gt;&lt;li&gt;åŒæ ·æˆ‘ä»¬å¯ä»¥å®ç°ARCå’ŒéARCä¹‹é—´çš„è¿›è¡Œæ··åˆç¼–è¯‘ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹ï¼š&lt;br&gt;&lt;br&gt;&lt;br&gt;åœ¨ARCä¸­è¿›è¡ŒéARCç¨‹åºçš„æ··åˆç¼–è¯‘ï¼š-fno-fobjc-arc;&lt;br&gt;&lt;br&gt;&lt;br&gt;åœ¨éARCä¸­è¿›è¡ŒARCçš„æ··åˆç¼–è¯‘ï¼š-fobjc-arc;&lt;br&gt;&lt;br&gt;&lt;br&gt;ä¸è¿‡ç›®å‰æˆ‘ä»¬ä½¿ç”¨ARCè¾ƒå¤šï¼Œæ‰€ä»¥ä½¿ç”¨ç¬¬ä¸€ç§çš„æƒ…å½¢è¾ƒå¤šã€‚swiftæ¯•ç«Ÿä¹Ÿå‘å¸ƒä¸¤å¹´ä¹‹ä¹…ï¼Œå¾ˆå¤šåˆ›ä¸šå…¬å¸å·²ç»å¼€å§‹ä½¿ç”¨swift&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;



&lt;h4 id=&quot;æ‹“å±•ä»‹ç»&quot;&gt;&lt;a href=&quot;#æ‹“å±•ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;æ‹“å±•ä»‹ç»&quot;&gt;&lt;/a&gt;æ‹“å±•ä»‹ç»&lt;/h4&gt;&lt;hr&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;nonatomic:åŸå­æ“ä½œï¼Œç¦æ­¢å¤šçº¿ç¨‹è¿›è¡Œæ“ä½œ&lt;/li&gt;&lt;br&gt;&lt;li&gt;atomic:åŸå­æ“ä½œï¼Œå¤šçº¿ç¨‹å®‰å…¨æ˜¯propertyçš„é»˜è®¤æ“ä½œåŸºæœ¬ç±»å‹&lt;/li&gt;&lt;br&gt;&lt;li&gt;assign:è¡¨ç¤ºè®¾ç½®å™¨å¯ä»¥ç›´æ¥è¿›è¡Œå¤åˆ¶ï¼ŒåŸºæœ¬ç”¨äºåŸºæœ¬æ•°æ®ç±»å‹ï¼ˆNSInteger,CGFloatï¼‰å’ŒCè¯­è¨€çš„åŸºæœ¬æ•°æ®ç±»å‹ï¼ˆint,float,double,charï¼‰&lt;/li&gt;&lt;br&gt;&lt;li&gt;readwrite:å¯ä»¥è¿›è¡Œè¯»å†™&lt;/li&gt;&lt;br&gt;&lt;li&gt;readonly:è¿›è¡Œåªè¯»&lt;/li&gt;&lt;br&gt;&lt;li&gt;copy:åœ¨èµ‹å€¼è¿‡ç¨‹ä¸­ä¼ å…¥ä¸€ä»½å€¼å¾—copyï¼Œåœ°å€å’Œå†…å®¹éƒ½ä¼šé‡æ–°èµ‹å€¼&lt;/li&gt;&lt;br&gt;&lt;li&gt;retain:åœ¨èµ‹å€¼è¿‡ç¨‹ä¸­ä¼šä½¿ç”¨retainå¯¹è±¡ï¼ŒæŒ‡å‘å†…å®¹çš„æŒ‡é’ˆä¼šcopy&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;hr&gt;
&lt;p&gt;&lt;a href=&quot;http://blog.csdn.net/Mars2639/article/details/7352540&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¯¦ç»†å†…å®¹å‚è€ƒåœ°å€&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;è®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#è®¾è®¡æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;è®¾è®¡æ¨¡å¼&quot;&gt;&lt;/a&gt;è®¾è®¡æ¨¡å¼&lt;/h3&gt;&lt;p&gt;å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬éƒ½ä¼šä½¿ç”¨åˆ°è®¾è®¡æ¨¡å¼ï¼Œè¿™é‡Œå°±ä»¥ä¸¤ç§è®¾è®¡æ¨¡å¼è¿›è¡Œä¸¾ä¾‹ï¼š&lt;/p&gt;
&lt;h4 id=&quot;MVCè®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#MVCè®¾è®¡æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;MVCè®¾è®¡æ¨¡å¼&quot;&gt;&lt;/a&gt;MVCè®¾è®¡æ¨¡å¼&lt;/h4&gt;&lt;p&gt;MVCæ˜¯ä¸€ç§æ¶æ„æ¨¡å¼ï¼ŒMè¡¨ç¤ºMOdelï¼ŒVè¡¨ç¤ºè§†å›¾Viewï¼ŒCè¡¨ç¤ºæ§åˆ¶å™¨Controllerï¼š&lt;br&gt;å…¶å®é‡è¦çš„è¿˜æ˜¯éœ€è¦è‡ªå·±åŠ¨æ‰‹äº²è‡ªå®ç°ï¼Œè¿™æ ·å¯ä»¥é”»ç‚¼è‡ªå·±çš„ç¼–ç èƒ½åŠ›ã€‚&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/design/20130917/7009.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;èµ„æ–™ç‚¹å‡»&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;Modelè´Ÿè´£å­˜å‚¨ã€å®šä¹‰ã€æ“ä½œæ•°æ®ï¼›&lt;/li&gt;&lt;br&gt;&lt;li&gt;Viewç”¨æ¥å±•ç¤ºä¹¦ç»™ç”¨æˆ·ï¼Œå’Œç”¨æˆ·è¿›è¡Œæ“ä½œäº¤äº’ï¼›&lt;/li&gt;&lt;br&gt;&lt;li&gt;Controlleræ˜¯Modelå’ŒViewçš„åè°ƒè€…ï¼ŒControlleræŠŠModelä¸­çš„æ•°æ®æ‹¿è¿‡æ¥ç»™Viewç”¨ã€‚Controllerå¯ä»¥ç›´æ¥ä¸Modelå’ŒViewè¿›è¡Œé€šä¿¡ï¼Œè€ŒViewä¸èƒ½å’ŒControllerç›´æ¥é€šä¿¡ã€‚Viewä¸Controlleré€šä¿¡éœ€è¦åˆ©ç”¨ä»£ç†åè®®çš„æ–¹å¼ï¼Œå½“æœ‰æ•°æ®æ›´æ–°æ—¶ï¼ŒMOdelä¹Ÿè¦ä¸Controllerè¿›è¡Œé€šä¿¡ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦ç”¨Notificationå’ŒKVOï¼Œè¿™ä¸ªæ–¹å¼å°±åƒä¸€ä¸ªå¹¿æ’­ä¸€æ ·ï¼ŒMOdelå‘ä¿¡å·ï¼ŒControllerè®¾ç½®ç›‘å¬æ¥å—ä¿¡å·ï¼Œå½“æœ‰æ•°æ®æ›´æ–°æ—¶å°±å‘ä¿¡å·ç»™Controllerï¼ŒModelå’ŒViewä¸èƒ½ç›´æ¥è¿›è¡Œé€šä¿¡ï¼Œè¿™æ ·ä¼šè¿èƒŒMVCè®¾è®¡æ¨¡å¼ã€‚&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h4 id=&quot;MVVMè®¾è®¡æ¨¡å¼&quot;&gt;&lt;a href=&quot;#MVVMè®¾è®¡æ¨¡å¼&quot; class=&quot;headerlink&quot; title=&quot;MVVMè®¾è®¡æ¨¡å¼&quot;&gt;&lt;/a&gt;MVVMè®¾è®¡æ¨¡å¼&lt;/h4&gt;&lt;p&gt;è¿™é‡Œå…³äºMVVMçš„è®¾è®¡æ¨¡å¼å°±ä¸å¤šè¯´ï¼Œå› ä¸ºç›®å‰è¿˜æ²¡æœ‰ä½¿ç”¨è¿‡ã€‚&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20160301/15425.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MVVMå‚è€ƒèµ„æ–™åœ°å€&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20160517/16309.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MVVMå‡çº§åˆ°MVVMM&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20160330/15823.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;MVVM With ReactiveCocoa&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Objcä¸­çš„åè®®&quot;&gt;&lt;a href=&quot;#Objcä¸­çš„åè®®&quot; class=&quot;headerlink&quot; title=&quot;Objcä¸­çš„åè®®&quot;&gt;&lt;/a&gt;Objcä¸­çš„åè®®&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬åœ¨IOSå¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬ç»å¸¸ä¼šä½¿ç”¨åè®®å’Œä»£ç†æ¨¡å¼æ¥è¿›è¡Œæ¶ˆæ¯ä¼ é€’ï¼Œåè®®ä¸€èˆ¬æ˜¯ä¼´éšç€ä»£ç†äº§ç”Ÿè€Œäº§ç”Ÿã€‚æˆ‘ä»¬åœ¨å®ç°åè®®çš„åŒæ—¶ä¸€èˆ¬éƒ½ä¼šæœ‰ä»£ç†å½¢å¼è¿›è¡Œå®Œæˆã€‚&lt;br&gt;åè®®ä¸­æœ‰ä¸¤ä¸ªå±æ€§ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;@required:æ˜¯è¡¨æ˜æ­¤ä¸­çš„æ–¹æ³•ä¸€å®šè¦å®ç°ï¼Œåœ¨æˆ‘ä»¬ä½¿ç”¨UITableViewDataSourceDeleteå°±æœ‰ä¸¤ä¸ªå¿…é¡»å®ç°çš„æ–¹æ³•&lt;/li&gt;&lt;br&gt;&lt;li&gt;@optional:æ–¹æ³•å¯ä»¥æ ¹æ®è‡ªå·±é€‰ç€å®ç°æ–¹æ³•&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;åœ¨åšå®¢ä¸­æœ‰å…³äºprotrcolçš„ç›¸å…³ä½¿ç”¨&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://boilwater.github.io/2016/05/29/blockï¼Œæ³¨å†Œç›‘å¬ï¼Œå§”æ‰˜åè®®å’ŒKVO/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€&lt;/a&gt;&lt;br&gt;&lt;br&gt;### Categoryçš„ä¼˜ç¼ºç‚¹&lt;br&gt;æˆ‘ä»¬ä½¿ç”¨Categoryä¸€èˆ¬æ˜¯åœ¨ä¸€ä¸ªç°æœ‰ç±»ä¸­å®šå‘æ·»åŠ æ–¹æ³•ï¼Œå…¶å®æˆ‘ä»¬ä½¿ç”¨å¸¸è§çš„SDWebImageæœ¬è´¨å°±æ˜¯ä¸€ä¸ªç±»çš„ç±»ç›®ï¼šUIImageView&lt;br&gt;ä¼˜ç‚¹ï¼š&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;æˆ‘ä»¬åœ¨ä¸€ä¸ªç°æœ‰ç±»ä¸­å¯ä»¥å¢åŠ æ–¹æ³•ï¼Œäºæ­¤åŒæ—¶æˆ‘ä»¬åˆä¸éœ€è¦æ”¹å˜åŸæ¥å¯¹è±¡çš„å±æ€§ã€‚å¢åŠ æ–¹æ³•å’ŒåŸæ¥æ–¹æ³•ä½¿ç”¨æ˜¯ä¸€æ ·çš„&lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨å¤šæ–¹æ³•çš„ä½¿ç”¨è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥é€šè¿‡ä½¿ç”¨Categoryå®ç°å¯¹ç±»è¿›è¡ŒåŒºåˆ†ï¼Œè¾¾åˆ°æ–¹ä¾¿ç®¡ç†ç±»ç§æ–¹æ³•çš„åŸåˆ™&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;p&gt;ç¼ºç‚¹ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;Categoryå…è®¸æˆ‘ä»¬å¯¹ç±»è¿›è¡Œæ·»åŠ ç‰¹å®šæ–¹æ³•ï¼Œä½†æ˜¯æˆ‘ä»¬ä¸èƒ½å‘ç±»ä¸­æ·»åŠ æˆå‘˜å˜é‡ã€‚ä½†æ˜¯æˆ‘ä»¬å¯ä»¥ç»§æ‰¿ç±»åœ¨å­ç±»ä¸­è¿›è¡Œç›¸å…³æˆå‘˜å±æ€§æ·»åŠ &lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨å¢åŠ æ–¹æ³•çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬å¢åŠ æ–¹æ³•çš„ä¼˜å…ˆçº§åˆ«æ¯”è¾ƒé«˜å› æ­¤ä¼šè¦†ç›–çˆ¶ç±»ä¸­çš„æ–¹æ³•ã€‚ä¾‹å¦‚ï¼šåœ¨ç•Œé¢æˆ‘ä»¬ç›¸åº”æ‰‹æŒ‡è§¦æ‘¸æ—¶æœ‰å“åº”é“¾ï¼Œå¦‚æœåœ¨å­ç±»ä¸­è°ƒç”¨touchæ–¹æ³•æ²¡æœ‰è°ƒç”¨çˆ¶ç±»å°±ä¼šä½¿å“åº”è€…è¿ä¸­æ–­&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;p&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20120614/4361.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Objective-C Categoryåˆä½“éªŒ&lt;/a&gt;&lt;br&gt; &lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20140212/7808.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Objective-Cç›¸å…³Categoryçš„æ”¶é›†&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;é”®è·¯å¾„-keyPath-ã€é”®å€¼ç¼–ç ï¼ˆKVCï¼‰å’Œé”®å€¼è§‚å¯Ÿï¼ˆKVOï¼‰&quot;&gt;&lt;a href=&quot;#é”®è·¯å¾„-keyPath-ã€é”®å€¼ç¼–ç ï¼ˆKVCï¼‰å’Œé”®å€¼è§‚å¯Ÿï¼ˆKVOï¼‰&quot; class=&quot;headerlink&quot; title=&quot;é”®è·¯å¾„(keyPath)ã€é”®å€¼ç¼–ç ï¼ˆKVCï¼‰å’Œé”®å€¼è§‚å¯Ÿï¼ˆKVOï¼‰&quot;&gt;&lt;/a&gt;é”®è·¯å¾„(keyPath)ã€é”®å€¼ç¼–ç ï¼ˆKVCï¼‰å’Œé”®å€¼è§‚å¯Ÿï¼ˆKVOï¼‰&lt;/h3&gt;&lt;p&gt;åœ¨æˆ‘çš„åšå®¢ä¸­æœ‰æ‰€è®²è¿°ï¼Œåœ¨è¿™é‡Œå°±ä¸èµ˜è¿°å•¦ã€‚ä¸è¿‡è¿™é‡Œç»™å¤§å®¶ç•™ä¸€ä¸ªé—®é¢˜ï¼Ÿä¸ºä»€ä¹ˆä½¿ç”¨KVCï¼ˆKey-value-codingï¼‰åœ¨æ•ˆç‡ä¸æ˜¯å¾ˆé«˜ï¼Ÿ&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://boilwater.github.io/2016/05/29/block%EF%BC%8C%E6%B3%A8%E5%86%8C%E7%9B%91%E5%90%AC%EF%BC%8C%E5%A7%94%E6%89%98%E5%8D%8F%E8%AE%AE%E5%92%8CKVO/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒè·¯å¾„&lt;/a&gt;&lt;br&gt;å…¶ä»–å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20160408/15868.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è°ˆKVCã€KVOï¼ˆé‡ç‚¹è§‚å¯Ÿè€…æ¨¡å¼ï¼‰æœºåˆ¶ç¼–ç¨‹&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20140224/7866.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOS KVC &amp;amp; KVO&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;NSNotificationã€Blockã€Delegateå’ŒKVOçš„åŒºåˆ«&quot;&gt;&lt;a href=&quot;#NSNotificationã€Blockã€Delegateå’ŒKVOçš„åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;NSNotificationã€Blockã€Delegateå’ŒKVOçš„åŒºåˆ«&quot;&gt;&lt;/a&gt;NSNotificationã€Blockã€Delegateå’ŒKVOçš„åŒºåˆ«&lt;/h3&gt;&lt;p&gt;åšå®¢ä¸­æœ‰è¯¦ç»†ä»‹ç»&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://boilwater.github.io/2016/05/29/block%EF%BC%8C%E6%B3%A8%E5%86%8C%E7%9B%91%E5%90%AC%EF%BC%8C%E5%A7%94%E6%89%98%E5%8D%8F%E8%AE%AE%E5%92%8CKVO/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¯¦ç»†å‚çœ‹&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;Objective-Cä¸­å¯ä¿®æ”¹å’Œä¸å¯ä»¥ä¿®æ”¹ç±»å‹&quot;&gt;&lt;a href=&quot;#Objective-Cä¸­å¯ä¿®æ”¹å’Œä¸å¯ä»¥ä¿®æ”¹ç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;Objective-Cä¸­å¯ä¿®æ”¹å’Œä¸å¯ä»¥ä¿®æ”¹ç±»å‹&quot;&gt;&lt;/a&gt;Objective-Cä¸­å¯ä¿®æ”¹å’Œä¸å¯ä»¥ä¿®æ”¹ç±»å‹&lt;/h3&gt;&lt;p&gt;å¯ä¿®æ”¹å’Œä¸å¯ä¿®æ”¹çš„é›†åˆç±»ï¼Œæˆ‘ä»¬åœ¨IOSå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°NSArrayå’ŒNSMutableArrayä¸¤ç§ï¼Œä¸¤è€…çš„åŒºåˆ«ï¼š&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;ä¸€ä¸ªæ˜¯å¯ä»¥åŠ¨æ€æ·»åŠ ï¼Œä¸€ä¸ªä¸å¯ä»¥åŠ¨æ€æ·»åŠ &lt;/li&gt;&lt;br&gt;&lt;li&gt;å‰è€…åˆå§‹åŒ–åå†…å­˜æ˜¯å›ºå®šä¸è¾¹çš„ï¼Œåè€…ç»è¿‡åˆå§‹åŒ–å†…å­˜æ˜¯å¯ä»¥å‘ç”Ÿæ”¹å˜çš„&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;hr&gt;
&lt;p&gt;è¿™é‡Œæˆ‘å°±å¼•å‡ºä¸€ä¸ªæ¦‚å¿µï¼šéå®¹å™¨å¯¹è±¡å’Œå®¹å™¨å¯¹è±¡ã€‚&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;éå®¹å™¨å¯¹è±¡ï¼šNSNumberï¼ŒNSStingç­‰åªèƒ½æ”¾å•ä¸ªå­—ç¬¦æˆ–è€…æ•°å­—&lt;/li&gt;&lt;br&gt;&lt;li&gt;å®¹å™¨å¯¹è±¡ï¼šNSArrayï¼ŒNSDictionaryç­‰å¯ä»¥æ”¾ç½®å¤šä¸ªæ•°æ®ç±»å‹&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;ä½†æ˜¯åœ¨æˆ‘ä»¬ç†Ÿæ‚‰çš„copyè¿‡ç¨‹ä¸­ä¼šå‘ç”Ÿå“ªäº›æƒ…å†µå‘¢ï¼Ÿ&lt;br&gt;&lt;br&gt;è¿™é‡Œåˆæå‡ºå¦å¤–çš„copçš„æ–°æ¦‚å¿µï¼šcopy, mutableCopy&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;copyï¼šå¤åˆ¶äº†ä¸€ä¸ªimutableçš„å¯¹è±¡+ copyWithZone:&lt;/li&gt;&lt;br&gt;&lt;li&gt;mutableCopyï¼šå¤åˆ¶çš„æ˜¯ä¸€ä¸ªmutableçš„å¯¹è±¡ï¼Œä½¿ç”¨çš„æ–¹æ³•+ mutableCopyWithZone:&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;ä¸‹é¢æˆ‘ä»¬ç»™å‡ºåœ¨éå®¹å™¨å¯¹è±¡å¤åˆ¶åçš„å…·ä½“æƒ…å†µ&lt;br&gt;&lt;br&gt;éå®¹å™¨å¯¹è±¡     | ä¸å˜ç±»ï¼ˆNSStringï¼‰ |  å¯å˜ç±»ï¼ˆNSMustbleStringï¼‰&lt;br&gt;â€”â€”â€”â€” | â€”â€”â€”â€”â€”â€”| â€”â€”â€”â€”&lt;br&gt;copy         | æµ…Copy            | æ·±Copy~è¿”å›çš„å¯¹è±¡æ˜¯ä¸å¯å˜çš„å¯¹è±¡&lt;br&gt;mutableCopy  | æ·±Copy            | æ·±Copy&lt;br&gt;&lt;br&gt;ä¸‹é¢æˆ‘ä»¬ç»™å‡ºå®¹å™¨å¯¹è±¡ä¸­å¤åˆ¶çš„å…·ä½“æƒ…å†µ&lt;br&gt;&lt;br&gt;å®¹å™¨ç±»å‹      | ä¸å˜ç±»å‹ï¼ˆNSArrayï¼‰ | å¯å˜ç±»å‹ï¼ˆNSMutableArrayï¼‰&lt;br&gt;â€”â€”â€”â€” | â€”â€”â€”â€”â€”- | â€”â€”â€”â€”&lt;br&gt;copy         | æµ…copy            | æ·±copy&lt;br&gt;mutableCopy  | æ·±copy            | æ·±copy&lt;br&gt;&lt;br&gt;&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;br&gt;&lt;p&gt;ä½†æ˜¯åœ¨å®¹å™¨å¯¹è±¡å¤åˆ¶è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦è®°ä½ä¸€ç‚¹ï¼Œæˆ‘ä»¬å¯¹äºNSArrayå’ŒNSMutableçš„copyæ˜¯å¯¹äºæ•´ä½“æŒ‡é’ˆå’Œå†…å­˜æ¥è¯´ã€‚ä½†æ˜¯åœ¨å®¹å™¨å†…éƒ¨æ¯ä¸€ä¸ªå…ƒç´ æˆ‘ä»¬è¿›è¡Œçš„éƒ½æ˜¯æŒ‡é’ˆcopy,ä¹Ÿå°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æµ…copyã€‚&lt;/p&gt;&lt;br&gt;&lt;/div&gt;&lt;br&gt;ä»ä¸Šé¢åˆ—ä¸¾çš„ä¾‹å­æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸€ä¸ªç»“è®ºï¼š&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;æ— è®ºæ˜¯éå®¹å™¨ç±»å‹è¿˜æ˜¯å®¹å™¨ç±»å‹åªæœ‰åœ¨ä¸å¯å˜æ—¶ï¼ˆNSArrayï¼ŒNSStringï¼‰ä½¿ç”¨copyæ‰æ˜¯æµ…å¤åˆ¶ï¼Œä¹Ÿå°±æ˜¯è¯´åªæ˜¯å¤åˆ¶æŒ‡é’ˆè€Œä¸å¤åˆ¶å†…å­˜ã€‚&lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨å¯å˜çš„ç±»å‹ï¼ˆNSMutableString, NSMutableArrayï¼‰åœ¨ä½¿ç”¨copyæ—¶ä¼šç”Ÿæˆä¸å¯å˜ç±»å‹ã€‚&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;å…·ä½“ä¸ºä»€ä¹ˆå®ç°è¿™ç§åŸç†å¯ä»¥çœ‹ä¸‹åœ¨NSArrayå’ŒNSMutableå®ç°æ¥å£ï¼Œä»¥åŠå‚ç…§C++çš„åŸç†è¿›è¡Œè§£é‡Šã€‚&lt;br&gt;&lt;br&gt;â€”&lt;br&gt;&lt;br&gt;ä¸‹é¢æ˜¯å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.fanliugen.com/?p=278&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;copyä¸mutableCopy&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/-Eric-Liu/p/5564030.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;NSArrayä¸NSMutableArrayçš„åŒºåˆ«&lt;/a&gt;&lt;br&gt;&lt;br&gt;### å½“æˆ‘ä»¬è°ƒç”¨ä¸€ä¸ªé™æ€æ–¹æ³•æ—¶,éœ€è¦å¯¹å¯¹è±¡è¿›è¡Œ release å—?&lt;br&gt;&lt;br&gt;ä¸è¦å¯¹é™æ€æ–¹æ³•è¿›è¡Œé‡Šæ”¾ï¼Œå› ä¸ºé™æ€æ–¹æ³•ä¼šæ”¾åˆ°è‡ªåŠ¨é‡Šæ”¾æ± ä¸­ï¼Œåé¢ä¼šè‡ªåŠ¨é‡Šæ”¾ã€‚&lt;br&gt;&lt;br&gt;æˆ‘åœ¨åšå®¢ä¸­å†™è¿‡å…³äºRuntimeçš„è§£æï¼Œåœ¨é‚£é‡Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºä¸€ä¸ªç±»åœ¨è§£æè¿‡ç¨‹ä¸­å…¶ä¸­ç±»ä¸­è°ƒç”¨æ–¹æ³•æ˜¯Methodå½¢å¼ï¼Œæ”¾åœ¨Structçš„Classä¸­çš„ã€‚æ‰§è¡Œè¿‡ç¨‹AutoReleasePoolä¼šè¿›è¡Œç®¡ç†ã€‚&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20150601/11970.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ·±å…¥ç†è§£RunLoop&lt;/a&gt;å¤§ç¥æ–‡ç« å†™å¾—å¾ˆè¯¦ç»†&lt;br&gt;&lt;br&gt;### å½“æˆ‘ä»¬é‡Šæ”¾æˆ‘ä»¬çš„å¯¹è±¡æ—¶,ä¸ºä»€ä¹ˆéœ€è¦è°ƒç”¨[super dealloc]æ–¹æ³•,å®ƒçš„ä½ç½®åˆæ˜¯å¦‚ä½•çš„å‘¢?&lt;br&gt;&lt;br&gt;å› ä¸ºå­ç±»çš„æŸäº›å®ä¾‹æ˜¯ç»§æ‰¿è‡ªçˆ¶ç±»çš„,å› æ­¤éœ€è¦è°ƒç”¨[super dealloc]æ–¹æ³•, æ¥é‡Šæ”¾çˆ¶ç±»æ‹¥æœ‰çš„å®ä¾‹,å…¶å®ä¹Ÿå°±æ˜¯å­ç±»æœ¬èº«çš„ã€‚ä¸€èˆ¬æ¥è¯´æˆ‘ä»¬ä¼˜å…ˆé‡Šæ”¾å­ç±»æ‹¥ æœ‰çš„å®ä¾‹,æœ€åé‡Šæ”¾çˆ¶ç±»æ‰€æ‹¥æœ‰çš„å®ä¾‹ã€‚&lt;br&gt;&lt;br&gt;### staticã€selfã€superå…³é”®å­—çš„ä½œç”¨&lt;br&gt;&lt;br&gt;static æ˜¯åœ¨Cå’ŒC++ä¸­ç»å¸¸ä½¿ç”¨çš„ï¼Œåœ¨Objcä¸­æˆ‘ä»¬ä¹Ÿæ˜¯å¸¸å¸¸ä½¿ç”¨staticæ¥å®šä¹‰cellçš„identiferç›®å‰å°±æƒ³åˆ°è¿™äº›ã€‚ä¸‹é¢ç»™å‡ºstaticçš„å…·ä½“ä½œç”¨ï¼š&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;staticä¿®é¥°çš„å˜é‡åªæ˜¯åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨è¿‡ç¨‹è¿›è¡Œåˆå§‹åŒ–ï¼Œæ‰€ä»¥åœ¨ç¬¬äºŒæ¬¡è°ƒç”¨æ—¶ä¼šç»´æŒä¸Šä¸€æ¬¡çš„å€¼&lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨æ¨¡å—å†…æˆ‘ä»¬ä½¿ç”¨çš„staticå˜é‡å¯ä»¥åœ¨æ¨¡å—ä¸­æ‰€æœ‰å‡½æ•°ä½¿ç”¨ï¼Œä½†æ˜¯åœ¨æ¨¡å—å¤–å°±ä¸å¯ä»¥è¿›è¡Œè®¿é—®&lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨æ¨¡å—å†…çš„staticçš„å‡½æ•°åªèƒ½è¢«æ¨¡å—å†…çš„å‡½æ•°è¿›è¡Œè°ƒç”¨ï¼Œä¸èƒ½è¢«æ¨¡å—å¤–çš„å…¶ä»–å‡½æ•°å£°æ˜&lt;/li&gt;&lt;br&gt;&lt;li&gt;åœ¨ç±»ä¸­çš„saticçš„å…¨å±€å˜é‡ï¼Œåœ¨æ•´ä¸ªç±»ä¸­æœ‰ä¸”ä»…ä»…åªæœ‰ä¸€ä»½çš„copy&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;self: æ˜¯æˆ‘ä»¬åœ¨å½“å‰ç±»æ¶ˆæ¯çš„æ¥å—è€…&lt;br&gt;&lt;br&gt;super: æ˜¯æˆ‘ä»¬è°ƒç”¨çˆ¶ç±»çš„æ–¹æ³•ï¼Œæ¶ˆæ¯é“¾è¿‡ç¨‹ä¸­æˆ‘ä»¬åœ¨touchè°ƒç”¨superå°±æ˜¯è°ƒç”¨çˆ¶ç±»æ–¹æ³•ï¼Œé˜²æ­¢æ¶ˆæ¯é“¾ä¸­æ–­ã€‚&lt;br&gt;&lt;br&gt;### #includeä¸#importçš„åŒºåˆ«ï¼Œ#import ä¸@class çš„åŒºåˆ«&lt;br&gt;&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;#includeæ˜¯æˆ‘ä»¬åœ¨C/C++ç»å¸¸ä½¿ç”¨åˆ°çš„å¼•å…¥åˆ°æ–‡ä»¶çš„æ–¹å¼&lt;/li&gt;&lt;br&gt;&lt;li&gt;#importæ˜¯æˆ‘ä»¬åœ¨Objcä¸­ä½¿ç”¨å¼•å…¥å¤´æ–‡ä»¶çš„æ–¹å¼ï¼Œå¯ä»¥é˜²æ­¢å¤´æ–‡ä»¶è¢«å¤šæ¬¡å¼•ç”¨ï¼ˆå¦‚æœå¤´æ–‡ä»¶è¢«å¤šæ¬¡åº”ç”¨ï¼Œç¨‹åºåœ¨ç¼–è¯‘è¿‡ç¨‹ä¸­ä¼šæŠŠåº“å‡½æ•°ç¼–è¯‘åˆ°ç±»ä¸­è¿™æ ·å°±å ç”¨è¾ƒå¤šå†…å­˜ï¼‰&lt;/li&gt;&lt;br&gt;&lt;br&gt;#importå’Œ@classä¸¤è€…ä¹‹é—´çš„åŒºåˆ«&lt;br&gt;&lt;li&gt;@classæ˜¯åªæ˜¯å®šä¹‰ç±»åï¼Œå¯¹å…¶ä¸­çš„è¡Œä¸ºå¹¶ä¸çŸ¥é“ï¼Œæˆ‘ä»¬ç»å¸¸å¯ä»¥å†å¾ˆå¤šç±»çš„.hæ–‡ä»¶å¯ä»¥çœ‹åˆ°&lt;/li&gt;&lt;br&gt;&lt;li&gt;@classç”±äºä»…ä»…æ˜¯å®šä¹‰ç±»çš„åå­—ï¼Œæ‰€ä»¥åœ¨ç¼–è¯‘è¿‡ç¨‹è¦æ¯”importçš„æ•ˆç‡é«˜&lt;/li&gt;&lt;br&gt;&lt;li&gt;æ­¤å¤–@class å’Œ#import çš„ä¸»è¦åŒºåˆ«åœ¨äºè§£å†³å¼•ç”¨æ­»é”çš„é—®é¢˜&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;&lt;br&gt;&lt;a href=&quot;http://www.cnblogs.com/stevenschen/p/3825044.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒèµ„æ–™ç‚¹å‡»&lt;/a&gt;&lt;br&gt;&lt;br&gt;### @publicã€@protectedã€@private å®ƒä»¬çš„å«ä¹‰ä¸ä½œç”¨&lt;br&gt;&lt;br&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;@public:å¯¹è±¡çš„å®ä¾‹å˜é‡çš„ä½œç”¨åŸŸåœ¨ä»»æ„åœ°æ–¹éƒ½å¯ä»¥è¢«è®¿é—®&lt;/li&gt;&lt;br&gt;&lt;li&gt;@protected:å¯¹è±¡çš„å®ä¾‹å˜é‡ä½œç”¨åŸŸåœ¨æœ¬ç±»å’Œå­ç±»éƒ½å¯ä»¥è¢«è®¿é—®&lt;/li&gt;&lt;br&gt;&lt;li&gt;@private:å®ä¾‹å˜é‡çš„ä½œç”¨åŸŸåªèƒ½åœ¨æœ¬ç±»(è‡ªèº«)ä¸­è®¿é—® &lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h3 id=&quot;è§£é‡Š-id-ç±»å‹&quot;&gt;&lt;a href=&quot;#è§£é‡Š-id-ç±»å‹&quot; class=&quot;headerlink&quot; title=&quot;è§£é‡Š id ç±»å‹&quot;&gt;&lt;/a&gt;è§£é‡Š id ç±»å‹&lt;/h3&gt;&lt;p&gt;ä»»æ„ç±»å‹å¯¹è±¡ï¼Œç¨‹åºè¿è¡Œæ—¶æ‰å†³å®šå¯¹è±¡çš„ç±»å‹ã€‚ è¿™ä¹Ÿæ˜¯æˆ‘ä»¬åœ¨ä¸Šé¢è§£é‡Šçš„åŠ¨æ€ç±»å‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;switch-è¯­å¥-if-è¯­å¥åŒºåˆ«ä¸è”ç³»&quot;&gt;&lt;a href=&quot;#switch-è¯­å¥-if-è¯­å¥åŒºåˆ«ä¸è”ç³»&quot; class=&quot;headerlink&quot; title=&quot;switch è¯­å¥ if è¯­å¥åŒºåˆ«ä¸è”ç³»&quot;&gt;&lt;/a&gt;switch è¯­å¥ if è¯­å¥åŒºåˆ«ä¸è”ç³»&lt;/h3&gt;&lt;p&gt;ä¸¤è€…å‡æ˜¯åˆ¤æ–­è¯­å¥ã€‚ä½†æ˜¯switchåªå¯ä»¥åˆ¤æ–­æ•´å½¢ï¼Œå­—ç¬¦å‹ï¼Œæšä¸¾ç±»å‹ï¼›ä½†æ˜¯ifå¹¶æ²¡æœ‰ç±»å‹é™åˆ¶ã€‚&lt;/p&gt;
&lt;h3 id=&quot;isMemberOfClass-å’Œ-isKindOfClass-è”ç³»ä¸åŒºåˆ«&quot;&gt;&lt;a href=&quot;#isMemberOfClass-å’Œ-isKindOfClass-è”ç³»ä¸åŒºåˆ«&quot; class=&quot;headerlink&quot; title=&quot;isMemberOfClass å’Œ isKindOfClass è”ç³»ä¸åŒºåˆ«&quot;&gt;&lt;/a&gt;isMemberOfClass å’Œ isKindOfClass è”ç³»ä¸åŒºåˆ«&lt;/h3&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;ä¸¤è€…éƒ½å¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ˜¯æŸä¸ªç±»çš„æˆå‘˜&lt;/li&gt;&lt;br&gt;&lt;li&gt;isKindOfClesssä¸ç´§å¯ä»¥åˆ¤æ–­å¯¹è±¡æ˜¯å¦æ˜¯ä¸€ä¸ªç±»çš„æˆå‘˜ï¼Œä¹Ÿå¯ä»¥åˆ¤æ–­ä¸€ä¸ªå¯¹è±¡æ˜¯å¦æ´¾ç”Ÿäºç±»çš„ç±»æˆå‘˜&lt;/li&gt;&lt;br&gt;&lt;li&gt;ä¸¾ä¾‹ï¼šå¦‚ ClassAæ´¾ ç”Ÿ è‡ªNSObject ç±» , ClassA *a = [ClassA alloc] init];,[a isKindOfClass:[NSObject class]] å¯ä»¥æ£€æŸ¥å‡º a æ˜¯å¦æ˜¯ NSObjectæ´¾ç”Ÿç±» çš„æˆå‘˜,ä½† isMemberOfClass åšä¸åˆ°&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h3 id=&quot;iOS-å¼€å‘ä¸­æ•°æ®æŒä¹…æ€§æœ‰å“ªå‡ ç§&quot;&gt;&lt;a href=&quot;#iOS-å¼€å‘ä¸­æ•°æ®æŒä¹…æ€§æœ‰å“ªå‡ ç§&quot; class=&quot;headerlink&quot; title=&quot;iOS å¼€å‘ä¸­æ•°æ®æŒä¹…æ€§æœ‰å“ªå‡ ç§?&quot;&gt;&lt;/a&gt;iOS å¼€å‘ä¸­æ•°æ®æŒä¹…æ€§æœ‰å“ªå‡ ç§?&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://boilwater.github.io/2016/05/29/IOS%E7%9A%84%E6%B0%B8%E4%B9%85%E8%AF%9D%E5%82%A8%E5%AD%98/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒèµ„æ–™~IOSçš„æ°¸ä¹…è¯å‚¨å­˜&lt;/a&gt;&lt;/p&gt;
&lt;h3 id=&quot;è‡ªåŠ¨é‡Šæ”¾æ± å·¥ä½œåŸç†&quot;&gt;&lt;a href=&quot;#è‡ªåŠ¨é‡Šæ”¾æ± å·¥ä½œåŸç†&quot; class=&quot;headerlink&quot; title=&quot;è‡ªåŠ¨é‡Šæ”¾æ± å·¥ä½œåŸç†&quot;&gt;&lt;/a&gt;è‡ªåŠ¨é‡Šæ”¾æ± å·¥ä½œåŸç†&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20160602/16569.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è‡ªåŠ¨é‡Šæ”¾æ± çš„å‰ä¸–ä»Šç”Ÿ&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20150610/12093.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Objective-C Autorelease Pool çš„å®ç°åŸç†&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å¼€å¯å…³äºIOSé¢è¯•ä¹‹è·¯æ€»ç»“ï¼Œè¯´å®è¯ç›®å‰IOSå¼€å‘çœŸæ˜¯å¤ªå¤šå¾ˆå¤šæƒ…å†µä¸‹å¤§å®¶æƒ…å†µè‰¯è ä¸é½å¾ˆéš¾åˆ†è¾¨ã€‚ç›®å‰è¿˜æ˜¯åœ¨å¹¿å·ï¼Œå…¶å®è¿˜æ˜¯å¾ˆå¼€å¿ƒçš„ï¼Œå› ä¸ºè¿™é‡Œæœ‰è‡ªå·±ğŸ˜äº‹ç‰©æ‰€åœ¨ã€‚&lt;/p&gt;
&lt;h3 id=&quot;OCçš„ç†è§£å’Œç‰¹æ€§&quot;&gt;&lt;a href=&quot;#OCçš„ç†è§£å’Œç‰¹æ€§&quot; class=&quot;headerlink&quot; title=&quot;OCçš„ç†è§£å’Œç‰¹æ€§&quot;&gt;&lt;/a&gt;OCçš„ç†è§£å’Œç‰¹æ€§&lt;/h3&gt;&lt;p&gt;ä½œä¸ºå¼€å‘è€…æˆ‘ä»¬éƒ½çŸ¥é“è¯­è¨€çš„ç‰¹æ€§åŒ…æ‹¬ï¼šé¢å¯¹å¯¹è±¡ï¼Œé¢å‘è¿‡ç¨‹ã€‚Objcå°±æ˜¯å…³äºé¢å¯¹å¯¹è±¡è¯­è¨€ï¼Œä¹Ÿå°±åŒ…æ‹¬é¢å‘å¯¹è±¡çš„ç‰¹ç‚¹ï¼šå°è£…ã€ç»§æ‰¿ã€å¤šæ€ã€‚ä¸‹é¢æ˜¯å¯¹ä¸‰è€…ä¼˜ç‚¹åˆ—è¡¨ğŸ˜‰&lt;/p&gt;
    
    </summary>
    
      <category term="IOS" scheme="http://yoursite.com/categories/IOS/"/>
    
    
      <category term="IOSåŸºç¡€çŸ¥è¯†" scheme="http://yoursite.com/tags/IOS%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/"/>
    
  </entry>
  
  <entry>
    <title>runtimeç†è§£</title>
    <link href="http://yoursite.com/2016/05/29/runtime%E7%90%86%E8%A7%A3/"/>
    <id>http://yoursite.com/2016/05/29/runtimeç†è§£/</id>
    <published>2016-05-29T04:15:38.000Z</published>
    <updated>2017-06-01T07:48:51.000Z</updated>
    
    <content type="html">&lt;p&gt;ç½‘ä¸Šå…¶å®æœ‰å¾ˆå¤šå…³äºè®²è¿°runtimeçš„å­¦ä¹ èµ„æ–™ï¼Œä¹Ÿæ˜¯ç«™åœ¨å·¨äººè‚©ä¸Šçœ‹çš„æ›´è¿œã€‚å†™è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯å¯¹äºå…¶ä»–äººå€Ÿé‰´å’Œç¿»é˜…æºç ï¼Œå‘æºç å¯»æ±‚è§£é‡Šå§ã€‚&lt;br&gt;&lt;br&gt;æ— æ„é—´çœ‹åˆ°ä¸€ä»½å…³äºruntimeçš„åšå®¢ï¼Œæ„Ÿè§‰å†™çš„æŒºä¸é”™çš„å°±è€å¿ƒçš„çœ‹ä¸‹ã€‚çœ‹åå‘ç°è‡ªå·±å¯¹runtimeçš„ç†è§£è¿˜æ˜¯æ¯”è¾ƒæµ…ï¼Œå°±å†³å®šå¯¹è‡ªå·±åšå®¢è¿›è¡Œé‡æ–°ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;br&gt;&lt;p&gt;éšä¾¿åœ¨è¿™é‡ŒæŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼šå‡å¦‚æˆ‘ä»¬ç¨‹åºå‘˜è‡ªå·±æ˜¯ç³»ç»Ÿæˆ‘ä»¬æ€ä¹ˆæ‰§è¡Œç¨‹åºå‘¢ï¼Ÿå½“ç„¶æ¢ä¸ªé«˜çº§ç‚¹çš„è¯´æ³•ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯ç³»ç»Ÿè®¾è®¡è€…æˆ‘ä»¬æƒ³è¦runtimeæ€ä¹ˆè¿è¡Œï¼Ÿ&lt;/p&gt;&lt;br&gt;&lt;/div&gt;

&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;åœ¨ä»‹ç»runtimeä¹‹å‰æˆ‘ç°åœ¨è¿™é‡Œç»™å¤§å®¶æ¢³ç†ä¸€ä¸‹æˆ‘ä»¬åœ¨Objcç±»ä¸­å¯èƒ½è§åˆ°çš„å†…å®¹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-æˆå‘˜å˜é‡ã€æˆå‘˜å±æ€§ï¼š&amp;lt;br&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-æ•°æ®æˆå‘˜ï¼š&amp;lt;/br&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-åè®®å®ç°ï¼š&amp;lt;/br&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;runtimeç®€ä»‹&quot;&gt;&lt;a href=&quot;#runtimeç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;runtimeç®€ä»‹&quot;&gt;&lt;/a&gt;runtimeç®€ä»‹&lt;/h3&gt;&lt;p&gt;Objcè¢«æˆ‘ä»¬æˆä¸ºåŠ¨æ€è¯­è¨€ï¼Œæ¢å¥è¯è¯´å°±æ˜¯æŠŠæˆ‘ä»¬å¹³æ—¶çœ‹åˆ°ä¸€äº›å…³é”®æ–¹æ³•ç”±ç¼–è¯‘è¿æ¥æ¨è¿Ÿåˆ°è¿è¡Œæ—¶æ‰§è¡Œã€‚Objcåº•å±‚æ˜¯åŸºäºC/C++çš„ç¼–è¯‘è¯­è¨€ï¼Œåœ¨C/C++é¡¹ç›®è¿è¡Œè¿‡ç¨‹ä¸­é“¾æ¥ã€ç¼–è¯‘ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ã€‚è€ŒObjcè¯­è¨€æ˜¯åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­è¿›è¡Œç¼–è¯‘æºç ï¼Œç”Ÿæˆæˆ‘ä»¬ç†Ÿæ‚‰çš„C/C++åé¢æœ€ç»ˆç”Ÿæˆæœºå™¨å¯ä»¥è¯†åˆ«çš„æ±‡ç¼–è¯­è¨€ã€‚Objcä¸­æœ‰ä¸‰å¤§è‡ªå·±ç‰¹è‰²ï¼šåŠ¨æ€ç±»å‹ï¼ŒåŠ¨æ€ç»‘å®šå’ŒåŠ¨æ€åŠ è½½ã€‚&lt;br&gt;&lt;br&gt;è·runtimeçš„æºç ç‚¹å‡»&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Cocoa/Reference/ObjCRuntimeRef/index.html#//apple_ref/doc/uid/TP40001418&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œæˆ‘ä»¬ä¸»è¦æ¢ç©¶runtime.hå’Œmessage.hä¸¤ä¸ªæ–‡ä»¶å¤¹ä¸­ä¸€äº›ä½¿ç”¨æ–¹æ³•ã€‚&lt;br&gt;ä¸‹é¢åˆ—å‡ºruntime.hæ–‡ä»¶ä¸­ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_method *Method;  &lt;span class=&quot;comment&quot;&gt;//ä»£è¡¨ç±»å®šä¹‰å½“ä¸­çš„ä½¿ç”¨æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_ivar *Ivar;  &lt;span class=&quot;comment&quot;&gt;//ä»£è¡¨ç±»å®šä¹‰ä¸­å®ä¾‹å˜é‡å’Œå±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_category *Category; &lt;span class=&quot;comment&quot;&gt;//ä»£è¡¨æ·»åŠ æˆå‘˜å‡½æ•°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_property *objc_property_t; &lt;span class=&quot;comment&quot;&gt;//å£°æ˜çš„å±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_class &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Class isa;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;#if !__OBJC2__&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Class super_class                                        OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//çˆ¶ç±»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *name                                         OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//ç±»å&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt; version                                             OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//ç±»çš„ç‰ˆæœ¬ä¿¡å¿ƒï¼Œé»˜è®¤çš„æƒ…å†µä¸‹æ˜¯0&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt; info                                                OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//ç±»ä¿¡æ¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt; instance_size                                       OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//ç±»çš„å®ä¾‹å˜é‡çš„å¤§å°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_ivar_list *ivars                             OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//ç±»æˆå‘˜å˜é‡çš„åˆ—è¡¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_method_list **methodLists                    OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//ç±»çš„æ–¹æ³•åˆ—è¡¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_cache *cache                                 OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//æ–¹æ³•ç¼“å­˜&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_protocol_list *protocols                     OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//ç±»çš„åè®®åˆ—è¡¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;meta&quot;&gt;#endif&amp;#125; &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;çœ‹å…¶ä¸­ä¸€ç§å®ç°æ–¹å¼&quot;&gt;&lt;a href=&quot;#çœ‹å…¶ä¸­ä¸€ç§å®ç°æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;çœ‹å…¶ä¸­ä¸€ç§å®ç°æ–¹å¼&quot;&gt;&lt;/a&gt;çœ‹å…¶ä¸­ä¸€ç§å®ç°æ–¹å¼&lt;/h3&gt;&lt;p&gt;å…¶ä¸­æˆ‘ä»¬å°±ä»¥ç±»ä¸­struct objc_ivar_list *ivars ,ä¸ºä¾‹æ¥çœ‹æ˜¯æ€æ ·å®ç°&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_ivar_list &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; ivar_count                                           OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//æˆå‘˜åˆ—è¡¨çš„æ•°é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#ifdef __LP64__&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; space                                                OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//æˆå‘˜åˆ—è¡¨çš„ç©ºé—´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;/* variable length structure */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_ivar ivar_list[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]                            OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;                                                            OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºå®ä¾‹å˜é‡å’Œå±æ€§æ˜¯å­˜æ”¾æ—¶ä¸€ä¸ªstructçš„listçš„æ•°ç»„ä¸­ï¼Œå…¶ä¸­åŒ…æ‹¬listçš„æ•°ç›®ã€æ‰€å ç©ºé—´å’ŒåŸºæœ¬å‚¨å­˜objc_ivarã€‚&lt;br&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢objc_ivaråœ¨runtime.hä¸­å½¢å¼ï¼š&lt;br&gt;typedef struct objc_ivar Ivar;&lt;br&gt;objc_ivarä¸­å®ä¾‹å˜é‡å‚¨å­˜æ–¹å¼ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_ivar &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *ivar_name                       OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//æˆå‘˜çš„åå­—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *ivar_type                       OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//æˆå‘˜æ•°æ®çš„ç±»å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; ivar_offset                      OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//æˆå‘˜çš„åç§»é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;#indef _LP64_&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; space                             OBJC2_UNAVAILABLE;&lt;span class=&quot;comment&quot;&gt;//æˆå‘˜å˜é‡æ‰€å ç©ºé—´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä»ä¸Šé¢å¯ä»¥çœ‹å‡ºç±»çš„å®ä¾‹å˜é‡å’Œå±æ€§ç»è¿‡runtimeç¼–è¯‘åæ˜¯ä»¥structçš„å‚¨å­˜å½¢å¼å­˜åœ¨ï¼Œå¹¶ä¸”å•ä¸ªå®ä¾‹å˜é‡ä¿å­˜å…¶åå­—ã€ç±»å‹ã€åç§»é‡å’Œå‚¨å­˜ç©ºé—´ã€‚ç±»ä¸­æ‰€æœ‰å®ä¾‹å˜é‡æ˜¯ä»¥listç±»å‹è¿›è¡Œå‚¨å­˜ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é€šè¿‡å¯¹runtime.hæ–‡ä»¶æºç åˆ†ææˆ‘ä»¬å¯ä»¥çœ‹å‡ºï¼Œåœ¨IOSç¨‹åºè¿è¡Œè¿‡ç¨‹ä¸­æŠŠæˆ‘ä»¬ç±»ç¼–è¯‘ä¸ºC/C++å½¢å¼ã€‚ä¸”ç¼–è¯‘è¿‡ç¨‹æ˜¯ä¸€ä¸ªåŠ¨æ€è¿‡ç¨‹ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡æ­¤æ–¹å¼å¯¹æˆ‘ä»¬ç¨‹åºè¿›è¡ŒåŠ¨æ€æ“ä½œ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;runtimeåŠ¨æ€æ“ä½œ&quot;&gt;&lt;a href=&quot;#runtimeåŠ¨æ€æ“ä½œ&quot; class=&quot;headerlink&quot; title=&quot;runtimeåŠ¨æ€æ“ä½œ&quot;&gt;&lt;/a&gt;runtimeåŠ¨æ€æ“ä½œ&lt;/h3&gt;&lt;ul&gt;åœ¨åŠ¨æ€ç¼–è¯‘è¿‡ç¨‹ä¸­æ— è®ºæ˜¯å±æ€§ã€å®ä¾‹å˜é‡ã€æˆå‘˜å‡½æ•°ã€ç±»æ–¹æ³•çš„å‡å¯ä»¥æ“ä½œï¼Œä¸€ä¸‹å°±ä»¥æ¯”è¾ƒç®€å•çš„è¿›è¡Œè®²è§£&lt;br&gt;&lt;li&gt;è·å–ç±»çš„å¯¹è±¡å&lt;/li&gt;&lt;br&gt;&lt;li&gt;è·å–ç±»ä¸­æˆå®ä¾‹å˜é‡å’Œå±æ€§&lt;/li&gt;&lt;br&gt;&lt;li&gt;åŠ¨æ€æ·»åŠ æ–¹æ³•&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h3 id=&quot;è·å–ç±»çš„å¯¹è±¡å&quot;&gt;&lt;a href=&quot;#è·å–ç±»çš„å¯¹è±¡å&quot; class=&quot;headerlink&quot; title=&quot;è·å–ç±»çš„å¯¹è±¡å&quot;&gt;&lt;/a&gt;è·å–ç±»çš„å¯¹è±¡å&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Class *classes = objc_copyClassList(&amp;amp;count);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; count; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *name = class_getName(classes[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%s&quot;&lt;/span&gt;, name);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ‰“å°å‡ºçš„å†…å®¹å¯èƒ½å‡ºä¹ä½ çš„æ„æ–™ï¼&lt;/p&gt;
&lt;h3 id=&quot;è·å–ç±»çš„å®ä¾‹å˜é‡å’Œå±æ€§&quot;&gt;&lt;a href=&quot;#è·å–ç±»çš„å®ä¾‹å˜é‡å’Œå±æ€§&quot; class=&quot;headerlink&quot; title=&quot;è·å–ç±»çš„å®ä¾‹å˜é‡å’Œå±æ€§&quot;&gt;&lt;/a&gt;è·å–ç±»çš„å®ä¾‹å˜é‡å’Œå±æ€§&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Class clazz = &lt;span class=&quot;built_in&quot;&gt;NSClassFromString&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;Graduater&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; count = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Ivar *var = class_copyIvarList(clazz, &amp;amp;count);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; count; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *name = ivar_getName(var[i]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%s&quot;&lt;/span&gt;, name);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘å®šä¹‰ä¸€ä¸ªæ¯•ä¸šç”Ÿç±»ï¼Œç„¶åå°±å¯ä»¥æ‰“å°å‡ºå…¶ä¸­çš„å‡½æ•°å®ä¾‹å˜é‡å’Œå±æ€§ï¼ˆä¸å¤šè®°å¾—è¦å¼•å…¥&lt;objc runtime.h=&quot;&quot;&gt;çš„å¤´æ–‡ä»¶ï¼‰ï¼›&lt;/objc&gt;&lt;/p&gt;
&lt;h3 id=&quot;åŠ¨æ€çš„æ·»åŠ æ–¹æ³•&quot;&gt;&lt;a href=&quot;#åŠ¨æ€çš„æ·»åŠ æ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;åŠ¨æ€çš„æ·»åŠ æ–¹æ³•&quot;&gt;&lt;/a&gt;åŠ¨æ€çš„æ·»åŠ æ–¹æ³•&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#import &lt;span class=&quot;meta-string&quot;&gt;&amp;lt;objc/runtime.h&amp;gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; abc(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, SEL _cmd)&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;%@hello&quot;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@implementation&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;Graduater&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveInstanceMethod:(SEL)sel&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(sel) isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;sihai&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        class_addMethod(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, sel, abc, &lt;span class=&quot;string&quot;&gt;&quot;v@:&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç„¶ååœ¨å‡½æ•°è°ƒç”¨æ—¶æ‰§è¡Œä¸‹åˆ—ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Graduater *graduate = [[Graduater alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[graduate performSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(sihai) withObject:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ‰§è¡Œçš„ç»“æœå¯ä»¥æ¡ç”¨æˆ‘ä»¬æ·»åŠ çš„@select(abc)çš„æ–¹æ³•ã€‚&lt;/p&gt;
&lt;h3 id=&quot;runtimeä½¿ç”¨APIçš„ä»‹ç»ï¼š&quot;&gt;&lt;a href=&quot;#runtimeä½¿ç”¨APIçš„ä»‹ç»ï¼š&quot; class=&quot;headerlink&quot; title=&quot;runtimeä½¿ç”¨APIçš„ä»‹ç»ï¼š&quot;&gt;&lt;/a&gt;runtimeä½¿ç”¨APIçš„ä»‹ç»ï¼š&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; * class_getName(Class cls) &lt;span class=&quot;comment&quot;&gt;//è·å–classçš„åå­—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; class_addIvar(Class cls, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *name, size_t size, uint8_t alignment, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *types)  &lt;span class=&quot;comment&quot;&gt;//å¢æ·»å®ä¾‹å˜é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;objc_property_t  class_getProperty(Class cls, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *name) &lt;span class=&quot;comment&quot;&gt;//è·å–å±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;objc_property_t * class_copyPropertyList(Class cls, &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; *outCount) &lt;span class=&quot;comment&quot;&gt;//è·å–å±æ€§åˆ—è¡¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Method class_getInstanceMethod(Class aClass, SEL aSelector) &lt;span class=&quot;comment&quot;&gt;//è·å–æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;objc_allocateClassPair(Class superclass, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; *name, size_t extraBytes) &lt;span class=&quot;comment&quot;&gt;//æ·»åŠ åŠ¨æ€ç±»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é™¤å»ä¸Šé¢æˆ‘ä»¬åˆ—ä¸¾å…¶ä¸­æå°‘æ•°çš„è°ƒç”¨å®ä¾‹ï¼Œå¦‚æœæƒ³äº†è§£æ›´å¤šç‚¹å‡»&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Cocoa/Reference/ObjCRuntimeRef/index.html#//apple_ref/doc/uid/TP40001418-CH1g-211911&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¿™é‡Œ&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨ä½¿ç”¨runtimeè¿‡ç¨‹ï¼Œå¯¹äºæ“ä½œå¯¹è±¡å®è¡Œæ–¹æ³•æ”¹å–„&lt;br&gt;å¯¹äºå¯¹è±¡è¿›è¡Œç›¸å…³æ“ä½œä¸€èˆ¬ä»¥objc&lt;em&gt;å¼€å¤´&lt;br&gt;å¯¹äºç±»çš„å¯¹è±¡è¿›è¡Œæ“ä½œä¸€èˆ¬ä»¥class&lt;/em&gt;å¼€å¤´&lt;br&gt;å¯¹äºä½¿ç”¨æ–¹æ³•å¯¹è±¡æ“ä½œä¸€èˆ¬ä»¥method&lt;em&gt;å¼€å¤´&lt;br&gt;å¯¹äºä½¿ç”¨ç”³æ˜å±æ€§ï¼ˆpropertyï¼‰ä¸€èˆ¬æ˜¯ä»¥property&lt;/em&gt;å¼€å¤´&lt;br&gt;å¯¹äºä½¿ç”¨ç±»æˆå‘˜å˜é‡ä¸€èˆ¬ä½¿ç”¨ivar_å¼€å¤´&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;æ¶ˆæ¯ä¼ é€æœºåˆ¶&quot;&gt;&lt;a href=&quot;#æ¶ˆæ¯ä¼ é€æœºåˆ¶&quot; class=&quot;headerlink&quot; title=&quot;æ¶ˆæ¯ä¼ é€æœºåˆ¶&quot;&gt;&lt;/a&gt;æ¶ˆæ¯ä¼ é€æœºåˆ¶&lt;/h3&gt;&lt;p&gt;åœ¨IOSçš„ä¸€ä¸ªç±»ä¸­æˆ‘ä»¬è°ƒç”¨æ–¹æ³•ä½¿ç”¨ä¹Ÿæ˜¯æ¯”è¾ƒå¤šï¼Œå¦‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; method];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä½†æ˜¯åœ¨runtimeç¼–è¯‘è¿‡ç¨‹ä¸­å…·ä½“å®ç°çš„æ–¹å¼æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ&lt;br&gt;é¦–å…ˆæˆ‘ä»¬çœ‹å…ˆmessage.hä¸­çš„æºç &lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;/* Basic Messaging Primitives&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * On some architectures, use objc_msgSend_stret for some struct return types.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * On some architectures, use objc_msgSend_fpret for some float return types.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * These functions must be cast to an appropriate function pointer type &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; * before being called. */&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OBJC_EXPORT &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; objc_msgSend(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, SEL op, ...);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;OBJC_EXPORT &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; objc_msgSendSuper(&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_super *&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt;, SEL op, ...);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä»ä¸Šé¢çš„è§£é‡Šæˆ‘ä»¬å¯ä»¥çš„å‡ºå¦‚æœè¿”å›ç±»å‹ä¸ºfloatè°ƒç”¨objc_msgSend_fpretï¼Œå¦‚æœæ˜¯æ•°æ®ç»“æ„è¿”å›ä½¿ç”¨objc_msgSend_stretã€‚è€Œæˆ‘ä»¬è®²è§£æ—¶ä½¿ç”¨ objc_msgSend(id self, SEL op, â€¦)ï¼Œå°±åƒæˆ‘ä»¬ä¸Šé¢çš„ä¾‹å­å°±ä¼šè½¬åŒ–ä¸ºobjc_msgSend(self @select(method))ï¼Œä½†æ˜¯æ‰¾åˆ°æˆ‘ä»¬æ‰€ä½¿ç”¨çš„æ–¹æ³•å…·ä½“æ˜¯æ€ä¹ˆå®ç°çš„ï¼Ÿ&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot;&gt;&lt;br&gt;&lt;p&gt;åœ¨æ­¤åœ°æ–¹æˆ‘å°±å°†æ·»åŠ ä¸Šé¢çœ‹åˆ°çš„å…³äºobjc_msgSend,objc_msgSendSuper,SEL&lt;/p&gt;&lt;br&gt;&lt;/div&gt;

&lt;hr&gt;
&lt;p&gt;æ•°æ®ç±»å‹ï¼š&lt;br&gt;ï¼ˆ1ï¼‰SEL:&lt;br&gt;     SELåˆå«åšé€‰æ‹©å™¨ï¼Œè¡¨ç¤ºä¸€ä¸ª@selectorçš„æŒ‡é’ˆï¼Œæ˜ å°„æ–¹æ³•çš„åå­—ã€‚åœ¨Objcç¼–è¯‘çš„è¿‡ç¨‹ä¸­é€šè¿‡æ¯ä¸ªæ–¹æ³•çš„åå­—å’Œå‚æ•°æ˜¯ç”Ÿæˆçš„å”¯ä¸€çš„æ ‡ç¤ºï¼ˆæ­¤æ ‡ç¤ºæ˜¯intçš„ç±»å‹ï¼‰ï¼Œæˆ‘ä»¬æŠŠè¿™ä¸ªæ ‡ç¤ºç§°ä½œä¸ºSELã€‚&lt;br&gt;&lt;br&gt;     SElçš„ä½œç”¨æ˜¯ä½œä¸ºIMPï¼ˆå…³äºIMPçš„å…·ä½“è¯´æ˜ä¼šåœ¨ä¸‹é¢å±•ç¤ºï¼‰çš„keyå­˜åœ¨ï¼Œå­˜å‚¨åœ¨NSSetçš„ä¸­ï¼Œè¿™æ ·å¯ä»¥æ–¹ä¾¿æˆ‘ä»¬ä½¿ç”¨hashçš„å¿«é€ŸæŸ¥æ‰¾ã€‚SELä½¿æˆ‘ä»¬æŸ¥æ‰¾IMPï¼ˆæŒ‡å‘å®ç°å‡½æ•°çš„æŒ‡é’ˆï¼‰keyï¼Œå¦‚æœSELå¯ä»¥ç›¸åŒçš„è¯æˆ‘ä»¬è°ƒç”¨å‡½æ•°å°±ä¼šå‘ç”Ÿé”™è¯¯ã€‚æ‰€ä»¥SELæ˜¯ä¸å¯ä»¥é‡å¤çš„ï¼Œæ–¹æ³•ä¹Ÿæ˜¯ä¸å¯ä»¥é‡å¤çš„ã€‚è¿™ä¹Ÿå°±æ˜¯æˆ‘ä»¬åœ¨Objcå¼€å‘è¿‡ç¨‹ä¸­åœ¨åŒä¸€ä¸ªç±»ä¸­ä¸å¯ä»¥ä½¿ç”¨åŒåçš„å‡½æ•°~~~æ­¤å¤„å’ŒC++æ”¯æŒé‡è½½æœ‰å¾ˆå¤§åŒºåˆ«ã€‚&lt;br&gt;&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_selector *SEL;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;br&gt;è™½è¯´åœ¨runtime.hä¸­æ²¡æœ‰æ˜¾ç¤ºobjc_selectorç»“æ„ä½“ç±»å‹ï¼Œä½†æ˜¯ä½œä¸ºç¨‹åºå‘˜çš„æˆ‘ä»¬å¯ä»¥æ‰¾åˆ°æ–¹æ³•è¿›è¡ŒéªŒè¯ï¼Œä½¿ç”¨logæ‰“å°SELè¯•ä¸‹ï¼Ÿ&lt;br&gt;&lt;br&gt;ï¼ˆ2ï¼‰IMP:&lt;br&gt;      IMPä¸Šé¢è®²åˆ°IMPæŠŠSELä½œä¸ºkeyå€¼ï¼ŒIMPè¯´ç™½å•¦å°±æ˜¯æŒ‡å‘æˆ‘ä»¬æ–¹æ³•çš„æŒ‡é’ˆï¼Œä¹Ÿå°±æ˜¯æˆ‘ä»¬æ¡ç”¨å…·ä½“å‡½æ•°æ–¹æ³•çš„å…¥å£ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;lang: objc&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedefine id (*IMP)(id, SEL, ...)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ï¼ˆ3ï¼‰Method&lt;br&gt;       Method:ä¸Šé¢æˆ‘ä»¬åœ¨ç±»çš„Structçš„ç»“æ„ä¸­å¯ä»¥çœ‹å‡ºMethodæ˜¯æ”¾ç½®æˆ‘ä»¬ä½¿ç”¨çš„æ–¹æ³•ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬ä½¿ç”¨SELå’ŒIMPçš„ä¸€ä¸ªå…·ä½“çš„ç»‘å®šã€‚é€šè¿‡ä½¿ç”¨SELæ¥æ‰¾åˆ°å¯¹åº”çš„IMPè¿›è€Œå®ç°æˆ‘ä»¬æ–¹æ³•çš„å…·ä½“è°ƒç”¨ã€‚ä¸‹é¢çœ‹ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;lang: objc&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;typedef struct objc_method *Method;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;struct objc_method &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    SEL method_name                 OBJC2_UNAVAILABLE;  // æ–¹æ³•å&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    char *method_types                  OBJC2_UNAVAILABLE; // å‚æ•°ç±»å‹&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    IMP method_imp                      OBJC2_UNAVAILABLE;  // æ–¹æ³•å®ç°&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬çœ‹ä¸‹åœ¨ç±»ä¸­æ–¹æ³•å…·ä½“å®ç°çš„å½¢å¼ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;figcaption&gt;&lt;span&gt;lang: objc&lt;/span&gt;&lt;/figcaption&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;struct objc_method_list &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct objc_method_list *obsolete                        OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int method_count                                                 OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#ifdef __LP64__&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    int space                                                              OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;#endif&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    /* variable length structure */&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    struct objc_method method_list[1]                        OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ï¼ˆ4ï¼‰æ–¹æ³•ç¼“å­˜&lt;br&gt;æˆ‘ä»¬åœ¨è°ƒç”¨æ–¹æ³•çš„è¿‡ç¨‹å…¶å®æ˜¯Lazyè°ƒç”¨çš„è¿‡ç¨‹ï¼Œæ–¹æ³•åœ¨ç¬¬ä¸€æ¬¡è°ƒç”¨åŠ è½½åä¼šæ”¾åˆ°ç¼“å­˜æ± ä¸­ã€‚objcç¨‹åºå¯åŠ¨åï¼Œéœ€è¦è¿›è¡Œç±»çš„åˆå§‹åŒ–ã€è°ƒç”¨æ–¹æ³•æ—¶çš„cacheåˆå§‹åŒ–ï¼Œå†å‘é€æ¶ˆæ¯çš„æ—¶å€™å°±ç›´æ¥èµ°ç¼“å­˜ã€‚&lt;br&gt;&lt;br&gt;ä¸‹é¢æˆ‘ä¼šå¯¹æ–¹æ³•ç¼“å­˜åšè¯¦ç»†çš„è§£é‡Šã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_cache &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// ç¼“å­˜bucketçš„æ€»æ•°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; mask &lt;span class=&quot;comment&quot;&gt;/* total = mask + 1 */&lt;/span&gt;                 OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å®é™…ç¼“å­˜bucketçš„æ€»æ•°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; occupied                                    OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// æŒ‡å‘Methodæ•°æ®ç»“æ„æŒ‡é’ˆçš„æ•°ç»„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    Method buckets[&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;]                                        OBJC2_UNAVAILABLE;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;hr&gt;
&lt;h3 id=&quot;æ¶ˆæ¯è½¬å‘æœºåˆ¶å…·ä½“å®ç°&quot;&gt;&lt;a href=&quot;#æ¶ˆæ¯è½¬å‘æœºåˆ¶å…·ä½“å®ç°&quot; class=&quot;headerlink&quot; title=&quot;æ¶ˆæ¯è½¬å‘æœºåˆ¶å…·ä½“å®ç°&quot;&gt;&lt;/a&gt;æ¶ˆæ¯è½¬å‘æœºåˆ¶å…·ä½“å®ç°&lt;/h3&gt;&lt;p&gt;åœ¨åŠ¨æ€æ·»åŠ æ–¹æ³•è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ä½¿ç”¨å¦‚ä¸‹æ–¹å¼ï¼š&lt;/p&gt;
&lt;h3 id=&quot;1åŠ¨æ€è§£ææ–¹æ³•&quot;&gt;&lt;a href=&quot;#1åŠ¨æ€è§£ææ–¹æ³•&quot; class=&quot;headerlink&quot; title=&quot;1åŠ¨æ€è§£ææ–¹æ³•&quot;&gt;&lt;/a&gt;1åŠ¨æ€è§£ææ–¹æ³•&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveInstanceMethod:(SEL)sel;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å…·ä½“å®ä¾‹å¦‚ä¸‹ï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)resolveInstanceMethod:(SEL)sel&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(sel) isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;sihai&quot;&lt;/span&gt;])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   class_addMethod(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, sel, abc, &lt;span class=&quot;string&quot;&gt;&quot;v@:&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125; &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä»è¿™é‡Œæˆ‘ä»¬å°±å¯ä»¥çœ‹å‡ºåœ¨å‡½æ•°è°ƒç”¨è¿‡ç¨‹ä¸­runtimeä¼šæ ¹æ®SElè¯†åˆ«å­è¿›è¡Œå¯»æ‰¾ï¼Œåœ¨ä¾‹å­ä¸­æˆ‘ä»¬æœ‰ç›¸åº”çš„è¯†åˆ«å¯ä»¥æŸ¥è¯¢ï¼Œå¦‚æœæ²¡æœ‰ç›¸åº”çš„è¯†åˆ«å­å‘¢ï¼Ÿ&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨ç³»ç»Ÿä¸­å¦‚æœåœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­æ²¡æœ‰æ‰¾åˆ°ç›¸åº”çš„é€‰æ‹©å­ï¼Œå°±ä¼šè°ƒç”¨ä¸Šé¢çš„å‡½æ•°&lt;br&gt;+(BOOL)resolveInstanceMethod:(SEL)selï¼›ç”Ÿæˆå®ä¾‹æ–¹æ³•ï¼Œå¦‚ä¸Šé¢ä¾‹å­ï¼ˆæ·»åŠ ç›¸åº”çš„å®ä¾‹æ–¹æ³•å¯ä»¥å®ç°ï¼Œå°±è·³è½¬æ–¹æ³•å®ç°ï¼‰ã€‚æŠŠæ·»åŠ æ–¹æ³•æ”¾å…¥åˆ°ç¼“å­˜ä¸­ï¼Œå¯ä»¥ä¾›æˆ‘ä»¬è¿›è¡Œä¸‹æ¬¡çš„è°ƒç”¨&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;å¦‚æœä¸Šé¢æˆ‘ä»¬æ‰¾åˆ°ç›¸åº”çš„è¯†åˆ«å­ï¼Œå°±ä¼šè¿›è¡Œç¬¬äºŒæ¬¡å¯¹é€‰æ‹©å­è¿›è¡Œç›¸å…³çš„å¤„ç†ã€‚&lt;/p&gt;
&lt;h3 id=&quot;2å¤‡æ´æ¥æ”¶åˆ°&quot;&gt;&lt;a href=&quot;#2å¤‡æ´æ¥æ”¶åˆ°&quot; class=&quot;headerlink&quot; title=&quot;2å¤‡æ´æ¥æ”¶åˆ°&quot;&gt;&lt;/a&gt;2å¤‡æ´æ¥æ”¶åˆ°&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)forwardingTargetForSelector:(SEL)aSelector;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å…·ä½“å®ä¾‹å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)forwardingTargetForSelector:(SEL)aSelector&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(aSelector) isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;sihai&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; forwardingTargetForSelector:aSelector];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç³»ç»Ÿä¼šæŠŠé€‰æ‹©å­ä½œä¸ºå‚æ•°ï¼Œè¿”å›ç»™æˆ‘ä»¬ä¸€ä¸ªé€‰æ‹©å­å¯¹è±¡ã€‚è¿è¡Œçš„ç³»ç»Ÿå°±ä¼šå¯¹ç›¸å…³æ–¹æ³•å®ä¾‹è¿›è¡ŒæŸ¥æ‰¾ï¼Œå¦‚æœæ‰¾åˆ°ç›¸å…³æ–¹æ³•å°±å®è¡Œï¼Œæ‰¾ä¸åˆ°å°±ç»“æŸè½¬å‘ã€‚&lt;/p&gt;
&lt;h3 id=&quot;3å®Œæ•´çš„æ¶ˆæ¯ä¼ é€’&quot;&gt;&lt;a href=&quot;#3å®Œæ•´çš„æ¶ˆæ¯ä¼ é€’&quot; class=&quot;headerlink&quot; title=&quot;3å®Œæ•´çš„æ¶ˆæ¯ä¼ é€’&quot;&gt;&lt;/a&gt;3å®Œæ•´çš„æ¶ˆæ¯ä¼ é€’&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)forwardInvocation:(&lt;span class=&quot;built_in&quot;&gt;NSInvocation&lt;/span&gt; *)anInvocation;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å®ç°çš„å…·ä½“æ–¹æ³•å¦‚ä¸‹ï¼š&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-(&lt;span class=&quot;built_in&quot;&gt;NSMethodSignature&lt;/span&gt;*)methodSignatureForSelector:(SEL)aSelector&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;built_in&quot;&gt;NSStringFromSelector&lt;/span&gt;(aSelector) isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;sihai&quot;&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;built_in&quot;&gt;NSMethodSignature&lt;/span&gt; signatureWithObjCTypes:&lt;span class=&quot;string&quot;&gt;&quot;v@:&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; methodSignatureForSelector:aSelector];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;-(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)forwardInvocation:(&lt;span class=&quot;built_in&quot;&gt;NSInvocation&lt;/span&gt; *)anInvocation&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        anInvocation.selector = &lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(fly);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [anInvocation invokeWithTarget:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœä¸Šé¢2æ­¥éª¤ä¸­è¿”å›ä¾ç„¶æ˜¯nilï¼Œä¹Ÿä¼šæ‰§è¡Œå®Œæ•´çš„æ¶ˆæ¯ä¼ è¾“æ¶ˆæ¯æœºåˆ¶ã€‚åœ¨è¯¥æ–¹æ³•ä¸­æˆ‘ä»¬å¯ä»¥æ”¹å˜å…¶ç›®æ ‡ï¼Œç„¶åè¿è¡Œç³»ç»Ÿå°±ä¼šæ ¹æ®æ”¹å˜çš„ç›®æ ‡ï¼Œåœ¨å…¶ç›®æ ‡ä¸­æŸ¥è¯¢å®ç°æ–¹æ³•åˆ«è°ƒç”¨ã€‚å½“ç„¶ä¹Ÿå¯ä»¥è¿›è¡Œä¿®æ”¹é€‰æ‹©å­ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å¦‚æœæ–¹æ³•è°ƒç”¨å¤±è´¥&quot;&gt;&lt;a href=&quot;#å¦‚æœæ–¹æ³•è°ƒç”¨å¤±è´¥&quot; class=&quot;headerlink&quot; title=&quot;å¦‚æœæ–¹æ³•è°ƒç”¨å¤±è´¥&quot;&gt;&lt;/a&gt;å¦‚æœæ–¹æ³•è°ƒç”¨å¤±è´¥&lt;/h3&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;-(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)doesNotRecognizeSelector:(SEL)aSelector;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é€šè¿‡å¯¹äº[self method];æ–¹æ³•çš„å®ç°è¿‡ç¨‹çš„è¿›è¡Œæ¢ç©¶æˆ‘ä»¬æˆ‘ä»¬å¯ä»¥äº†è§£åˆ°åœ¨æ¶ˆæ¯ä¼ é€’è¿‡ç¨‹æ˜¯å¦‚ä½•å®ç°çš„ï¼Œè€Œä¸”æˆ‘ä»¬å¯ä»¥æ›´å…·æˆ‘ä»¬éœ€æ±‚å¯¹å…¶ä¸­çš„æ–¹æ³•è¿›è¡Œç›¸åº”çš„è€Œä¿®æ”¹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;runtimeæ˜¯Objcè¯­è¨€ç‰¹æ€§ï¼Œæœ¬äººé€šè¿‡å¯¹äºçš„ç ”ç©¶ç†è§£æ˜¯ï¼šé€šè¿‡runtimeæˆ‘ä»¬å¯ä»¥ç­‰åˆ°æˆ‘ä»¬ç±»ä¸­æ‰€æœ‰å…ƒç´ çš„èµ„æ–™ä¿¡æ¯ï¼Œå¯ä»¥ä½¿ç”¨æœŸåŒå·¥çš„APIå¯¹ç±»è¿›è¡Œæˆ‘ä»¬æƒ³åˆ°è¾¾åˆ°çš„ç›®çš„ï¼›åœ¨æˆ‘ä»¬è°ƒè¯•è¿‡ç¨‹ä¸­ä¹Ÿå¯ä»¥é€šè¿‡æ‰“å°æ¥ç®€åŒ–æˆ‘ä»¬è°ƒè¯•ä¿¡æ¯ï¼›æœ€æ£’çš„å°±æ˜¯æˆ‘ä»¬å¯ä»¥äº†è§£ç¨‹åºè¿è¡Œè¿‡ç¨‹å¯ä»¥åœ¨å¼€å‘ä¸­ä½¿æˆ‘ä»¬æ›´åŠ å¾—å¿ƒåº”æ‰‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;br&gt;&lt;/p&gt;
&lt;h3 id=&quot;å‚è€ƒæ¥ä¹‹ï¼š&quot;&gt;&lt;a href=&quot;#å‚è€ƒæ¥ä¹‹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒæ¥ä¹‹ï¼š&quot;&gt;&lt;/a&gt;å‚è€ƒæ¥ä¹‹ï¼š&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20151015/13769.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Runtimeåˆæ¶‰ä¹‹æ¶ˆæ¯è½¬å‘&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.cocoachina.com/ios/20150901/13173.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å­¦ä¹ runtimeçš„ç†è§£å’Œå¿ƒå¾—&lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/ios/documentation/Cocoa/Reference/ObjCRuntimeRef/index.html#//apple_ref/doc/uid/TP40001418-CH1g-88778&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;runtime æºç &lt;/a&gt;&lt;br&gt;&lt;br&gt;&lt;a href=&quot;http://www.jianshu.com/p/f900de4a1495#&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;OCåˆ¨æ ¹é—®åº•-Runtimeç®€å•ç²—æš´ç†è§£&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ç½‘ä¸Šå…¶å®æœ‰å¾ˆå¤šå…³äºè®²è¿°runtimeçš„å­¦ä¹ èµ„æ–™ï¼Œä¹Ÿæ˜¯ç«™åœ¨å·¨äººè‚©ä¸Šçœ‹çš„æ›´è¿œã€‚å†™è¿™ç¯‡æ–‡ç« ä¹Ÿæ˜¯å¯¹äºå…¶ä»–äººå€Ÿé‰´å’Œç¿»é˜…æºç ï¼Œå‘æºç å¯»æ±‚è§£é‡Šå§ã€‚&lt;/br&gt;&lt;br&gt;æ— æ„é—´çœ‹åˆ°ä¸€ä»½å…³äºruntimeçš„åšå®¢ï¼Œæ„Ÿè§‰å†™çš„æŒºä¸é”™çš„å°±è€å¿ƒçš„çœ‹ä¸‹ã€‚çœ‹åå‘ç°è‡ªå·±å¯¹runtimeçš„ç†è§£è¿˜æ˜¯æ¯”è¾ƒæµ…ï¼Œå°±å†³å®šå¯¹è‡ªå·±åšå®¢è¿›è¡Œé‡æ–°ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;div style=&quot;color:#008B8B&quot; &gt;&lt;br&gt;&lt;p&gt;éšä¾¿åœ¨è¿™é‡ŒæŠ›å‡ºä¸€ä¸ªé—®é¢˜ï¼šå‡å¦‚æˆ‘ä»¬ç¨‹åºå‘˜è‡ªå·±æ˜¯ç³»ç»Ÿæˆ‘ä»¬æ€ä¹ˆæ‰§è¡Œç¨‹åºå‘¢ï¼Ÿå½“ç„¶æ¢ä¸ªé«˜çº§ç‚¹çš„è¯´æ³•ï¼Œå¦‚æœæˆ‘ä»¬æ˜¯ç³»ç»Ÿè®¾è®¡è€…æˆ‘ä»¬æƒ³è¦runtimeæ€ä¹ˆè¿è¡Œï¼Ÿ&lt;/p&gt;&lt;br&gt;&lt;/div&gt;
    
    </summary>
    
      <category term="IOS" scheme="http://yoursite.com/categories/IOS/"/>
    
    
      <category term="IOS" scheme="http://yoursite.com/tags/IOS/"/>
    
  </entry>
  
  <entry>
    <title>Fastlane è®²è§£</title>
    <link href="http://yoursite.com/2016/05/29/Fastlane%E8%AE%B2%E8%A7%A3/"/>
    <id>http://yoursite.com/2016/05/29/Fastlaneè®²è§£/</id>
    <published>2016-05-29T04:13:46.000Z</published>
    <updated>2017-08-25T17:18:07.000Z</updated>
    
    <content type="html">&lt;p&gt;å¤§æ¦‚åœ¨ä¸€ä¸ªæœˆå·¦å³å†™è¿‡å…³äºcocoaPodså®‰è£…å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¦‚æœè¯´cocoaPodsæ˜¯æˆ‘ä»¬ç›¾ç‰Œï¼ˆå¯ä»¥è®©æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸“æ³¨å®ç°ä»£ç éƒ¨åˆ†ï¼‰ï¼Œé‚£ä¹ˆfastlaneå°±ä¼šæ˜¯æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­çš„é•¿çŸ›ï¼ˆå¸®åŠ©æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­æäº¤æµ‹è¯•ã€å¿«é€Ÿå‘å¸ƒï¼‰ã€‚&lt;br&gt;æƒ³çŸ¥é“fastlaneäº†è§£ç‚¹å‡»&lt;a href=&quot;https://fastlane.tools&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¿™é‡Œ&lt;br&gt;&lt;/a&gt;è·å–fastlançš„githubä¸‹è½½ç‚¹å‡»&lt;a href=&quot;https://github.com/fastlane/fastlane&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;fastlaneå®‰è£…&quot;&gt;&lt;a href=&quot;#fastlaneå®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;fastlaneå®‰è£…&quot;&gt;&lt;/a&gt;fastlaneå®‰è£…&lt;/h3&gt;&lt;p&gt;fastlaneæ˜¯åŸºäºRubyçš„å¼€å‘è„šæœ¬é›†åˆæœ‰åŠ©äºæˆ‘ä»¬åœ¨IOSå¼€å‘è¿‡ç¨‹ä¸­è¾¾åˆ°ç®€ä¾¿çš„å¼€å‘ã€‚å¦‚æœä½ åœ¨è‡ªå·±MACä¸Šå·²ç»å®‰è£…RubyåŠå…¶ç¯å¢ƒï¼Œåªéœ€è¦æ‰§è¡Œä¸‹åˆ—å®‰è£…å°±å¯ä»¥å®ç°&lt;br&gt;    sudo gem install fastlane â€“verbose&lt;br&gt;ç¡®å®šè‡ªå·±å®‰è£…çš„æ˜¯æœ€æ–°ç‰ˆæœ¬çš„Xcode:&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;Xcode-select --install&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å¦‚æœåœ¨å¯åŠ¨fastlaneæ¯”è¾ƒæ…¢çš„æƒ…å†µå¯ä»¥æ‰§è¡Œ:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;gem cleanup&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;fastlaneä½¿ç”¨å…·ä½“æ–¹æ³•å’Œå…·ä½“åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#fastlaneä½¿ç”¨å…·ä½“æ–¹æ³•å’Œå…·ä½“åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;fastlaneä½¿ç”¨å…·ä½“æ–¹æ³•å’Œå…·ä½“åŠŸèƒ½&quot;&gt;&lt;/a&gt;fastlaneä½¿ç”¨å…·ä½“æ–¹æ³•å’Œå…·ä½“åŠŸèƒ½&lt;/h3&gt;&lt;p&gt;äº†è§£å…·ä½“ä½¿ç”¨ç‚¹å‡»&lt;a href=&quot;https://github.com/fastlane/fastlane/tree/master/deliver&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;deliverï¼šä¸Šä¼ å±å¹•æˆªå›¾ã€äºŒè¿›åˆ¶ç¨‹åºæ•°æ®å’Œåº”ç”¨ç¨‹åºåˆ°AppStore&lt;/li&gt;&lt;br&gt;&lt;li&gt;snapshotï¼šè‡ªåŠ¨æˆªå–ä½ çš„ç¨‹åºåœ¨æ¯ä¸ªè®¾å¤‡ä¸Šçš„å›¾ç‰‡&lt;/li&gt;&lt;br&gt;&lt;li&gt;frameitï¼šåº”ç”¨æˆªå±å¤–æ·»åŠ è®¾å¤‡æ¡†æ¶&lt;/li&gt;&lt;br&gt;&lt;li&gt;pemï¼šå¯ä»¥è‡ªåŠ¨åŒ–åœ°ç”Ÿæˆå’Œæ›´æ–°åº”ç”¨æ¨é€é€šçŸ¥æè¿°æ–‡ä»¶&lt;/li&gt;&lt;br&gt;&lt;li&gt;sighï¼šç”Ÿæˆä¸‹è½½å¼€å‘å•†åº—çš„é…ç½®æ–‡ä»¶&lt;/li&gt;&lt;br&gt;&lt;li&gt;pilotï¼šæœ€å¥½çš„åœ¨ç»ˆç«¯ç®¡ç†æµ‹è¯•å’Œå»ºç«‹çš„æ–‡ä»¶&lt;/li&gt;&lt;br&gt;&lt;li&gt;boardingï¼šå¾ˆå®¹æ˜“çš„æ–¹å¼é‚€è¯·ä½ æµ‹è¯•betaæµ‹è¯•&lt;/li&gt;&lt;br&gt;&lt;li&gt;gypï¼šå»ºç«‹æ–°çš„å‘å¸ƒçš„ç‰ˆæœ¬&lt;/li&gt;&lt;br&gt;&lt;li&gt;matchï¼šä½¿ç”¨gitåŒæ­¥ä½ æˆå‘˜é—´çš„å¼€å‘è€…è¯ä¹¦å’Œæ–‡ä»¶é…ç½®&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h3 id=&quot;fastlaneä¸¾ä¾‹ï¼š&quot;&gt;&lt;a href=&quot;#fastlaneä¸¾ä¾‹ï¼š&quot; class=&quot;headerlink&quot; title=&quot;fastlaneä¸¾ä¾‹ï¼š&quot;&gt;&lt;/a&gt;fastlaneä¸¾ä¾‹ï¼š&lt;/h3&gt;&lt;p&gt;ä½¿ç”¨deliverè‡ªåŠ¨æ‰“åŒ…æˆ‘ä»¬Appæäº¤åˆ°AppStoreï¼Œå®˜æ–¹ä½¿ç”¨ç‚¹å‡»&lt;a href=&quot;https://github.com/fastlane/fastlane/tree/master/deliver&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;è¿™é‡Œ&lt;/a&gt;&lt;br&gt;æ‰“å¼€ç»ˆç«¯è¿›è¡Œæˆ‘ä»¬é¡¹ç›®æ‰€åœ¨çš„floderï¼Œæˆ‘çš„é¡¹ç›®æ˜¯åœ¨æ¡Œé¢ä¸Šåç§°æ˜¯hello&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;cd ~/desktop/hello&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ç„¶åè¾“å…¥ï¼š&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;deliver init&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ç„¶åè¾“å…¥æˆ‘ä»¬çš„Apple ID Username:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å†è¾“å…¥æˆ‘ä»¬çš„Password &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;fastlaneä½¿ç”¨åœºæ™¯&quot;&gt;&lt;a href=&quot;#fastlaneä½¿ç”¨åœºæ™¯&quot; class=&quot;headerlink&quot; title=&quot;fastlaneä½¿ç”¨åœºæ™¯&quot;&gt;&lt;/a&gt;fastlaneä½¿ç”¨åœºæ™¯&lt;/h3&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;åœ¨æˆ‘ä»¬å¼€å‘åæ¯æ¬¡æäº¤æ—¶æ‰§è¡Œçš„æµ‹è¯•ï¼ˆæœ‰teamçš„å•å…ƒæµ‹è¯•å’Œå›¢é˜Ÿå¼€å‘çš„é›†æˆæµ‹è¯•ï¼‰(pilot)&lt;/li&gt;&lt;br&gt;&lt;li&gt;æ„å»ºæˆ‘ä»¬ä½¿ç”¨çš„Bateç‰ˆæœ¬æ—¶ï¼ˆboardingï¼‰&lt;/li&gt;&lt;br&gt;&lt;li&gt;å¼€å‘å¥½é¡¹ç›®éœ€è¦æç»™ç•Œé¢æˆªå›¾æ—¶(snapshot)&lt;/li&gt;&lt;br&gt;&lt;li&gt;æ„å»ºå¹¶åˆ†å‘è‡³åº”ç”¨å•†åº—ï¼ˆè¿™åŒ…æ‹¬æ›´æ–°é…ç½®æ–‡ä»¶ï¼Œåˆ›å»ºæ–°çš„å±å¹•æˆªå›¾ï¼Œä¸Šä¼ åº”ç”¨è‡³åº”ç”¨å•†åº—å¹¶æäº¤åº”ç”¨ï¼‰(deliver)&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h3 id=&quot;fastlaneå…¸å‹çš„å¼€å‘æµç¨‹&quot;&gt;&lt;a href=&quot;#fastlaneå…¸å‹çš„å¼€å‘æµç¨‹&quot; class=&quot;headerlink&quot; title=&quot;fastlaneå…¸å‹çš„å¼€å‘æµç¨‹&quot;&gt;&lt;/a&gt;fastlaneå…¸å‹çš„å¼€å‘æµç¨‹&lt;/h3&gt;&lt;p&gt;æ­¤å¼€å‘æµç¨‹ä¹Ÿæ˜¯æˆ‘ä»¬å›¢é˜Ÿå¼€å‘è¿‡ç¨‹ä¸­åŸºæœ¬å¼€å‘é¡ºåº&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;lane :appstore &lt;span class=&quot;keyword&quot;&gt;do&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  increment_build_number&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  cocoapods&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  xctool&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  snapshot&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  sigh&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  deliver&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  frameit&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  sh &lt;span class=&quot;string&quot;&gt;&quot;./customScript.sh&quot;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;  slack&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;end&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;cocoaPodså¸®åŠ©æˆ‘ä»¬ç®¡ç†ä¸‰æ–¹å¼€æºåº“ï¼Œfastlaneå¯ä»¥åœ¨æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­ç®€åŒ–æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä»¥åŠç®€åŒ–æˆ‘ä»¬å‘å¸ƒæµç¨‹ã€‚å¦‚æœè¦æé«˜è‡ªå·±IOSæ–¹é¢èƒ½åŠ›éœ€è¦æˆ‘ä»¬è¿›ä¸€æ­¥æ·±å…¥ç ”ç©¶ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å¤§æ¦‚åœ¨ä¸€ä¸ªæœˆå·¦å³å†™è¿‡å…³äºcocoaPodså®‰è£…å’Œä½¿ç”¨æ–¹æ³•ï¼Œå¦‚æœè¯´cocoaPodsæ˜¯æˆ‘ä»¬ç›¾ç‰Œï¼ˆå¯ä»¥è®©æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­ä¸“æ³¨å®ç°ä»£ç éƒ¨åˆ†ï¼‰ï¼Œé‚£ä¹ˆfastlaneå°±ä¼šæ˜¯æˆ‘ä»¬å¼€å‘è¿‡ç¨‹ä¸­çš„é•¿çŸ›ï¼ˆå¸®åŠ©æˆ‘ä»¬åœ¨å¼€å‘è¿‡ç¨‹ä¸­æäº¤æµ‹è¯•ã€å¿«é€Ÿå‘å¸ƒï¼‰ã€‚&lt;br&gt;æƒ³çŸ¥é“fastlaneäº†è§£ç‚¹å‡»&lt;a href=&quot;https://fastlane.tools&quot;&gt;è¿™é‡Œ&lt;br&gt;&lt;/a&gt;è·å–fastlançš„githubä¸‹è½½ç‚¹å‡»&lt;a href =&quot;https://github.com/fastlane/fastlane&quot;&gt;è¿™é‡Œ&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>ä»å®å®CTOé‡‡è®¿æ¼”è®²éšç¬”</title>
    <link href="http://yoursite.com/2016/05/29/%E4%BB%8E%E5%8F%AE%E5%8F%AECTO%E9%87%87%E8%AE%BF%E6%BC%94%E8%AE%B2%E9%9A%8F%E7%AC%94/"/>
    <id>http://yoursite.com/2016/05/29/ä»å®å®CTOé‡‡è®¿æ¼”è®²éšç¬”/</id>
    <published>2016-05-29T04:09:11.000Z</published>
    <updated>2017-06-01T07:43:44.000Z</updated>
    
    <content type="html">&lt;p&gt;ä»Šå¤©åœ¨çœ‹Oneâ€™s Catå¤§ç¥çš„åšå®¢æ—¶è®²åˆ°å¦‚ä½•åˆ›å»ºæˆ‘ä»¬ä¸ªäººçš„å¼€æºæ¡†æ¶ï¼Œå°±æ¶‰åŠåˆ°fastlaneå°±æ‰¾æ¥çœ‹ä¸‹ï¼Œæ— æ„ä¸­çœ‹åˆ°å®å®çš„CTOæœ±é¸¿å¤§ç¥ï¼ˆåˆä¸€å°Šå¤§ç¥ï¼‰è®²è¿°è‡ªå·±çš„äº§å“ã€‚çŸ­çŸ­22ï¼š05çš„è§†é¢‘è®©è‡ªå·±æ„Ÿè§¦å¾ˆå¤§ï¼Œå†™è¿™ç¯‡æ–‡ç« ä¹Ÿå°±æ˜¯æ— èŠè¯´ä¸‹è‡ªå·±æ‰€å­¦çŸ¥è¯†å§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ€»çš„æ¥è¯´ä»¥æŠ€æœ¯æ¥ç®€åŒ–æˆ‘ä»¬ç”Ÿæ´»ï¼Œç›®å‰æ¯”æƒ³è±¡ä¸­è¦éš¾ã€‚&quot;&gt;&lt;a href=&quot;#æ€»çš„æ¥è¯´ä»¥æŠ€æœ¯æ¥ç®€åŒ–æˆ‘ä»¬ç”Ÿæ´»ï¼Œç›®å‰æ¯”æƒ³è±¡ä¸­è¦éš¾ã€‚&quot; class=&quot;headerlink&quot; title=&quot;æ€»çš„æ¥è¯´ä»¥æŠ€æœ¯æ¥ç®€åŒ–æˆ‘ä»¬ç”Ÿæ´»ï¼Œç›®å‰æ¯”æƒ³è±¡ä¸­è¦éš¾ã€‚&quot;&gt;&lt;/a&gt;æ€»çš„æ¥è¯´ä»¥æŠ€æœ¯æ¥ç®€åŒ–æˆ‘ä»¬ç”Ÿæ´»ï¼Œç›®å‰æ¯”æƒ³è±¡ä¸­è¦éš¾ã€‚&lt;/h3&gt;&lt;h3 id=&quot;äººå‘˜é…ç½®æ–¹é¢&quot;&gt;&lt;a href=&quot;#äººå‘˜é…ç½®æ–¹é¢&quot; class=&quot;headerlink&quot; title=&quot;äººå‘˜é…ç½®æ–¹é¢&quot;&gt;&lt;/a&gt;äººå‘˜é…ç½®æ–¹é¢&lt;/h3&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;é¦–å…ˆæœ±å¤§ç¥è®²è¿°å›¢é˜Ÿäººæ•°æœ‰120äººï¼Œè€Œåœ¨å®¢æˆ·ç«¯å’Œåç«¯æ¯”ä¾‹2ï¼š1ä¼°è®¡è¿™æ ·çš„æ ‡é…ä¹Ÿåªæœ‰åƒé˜¿é‡Œè¿™æ ·æƒ³è¦åœ¨ç§»åŠ¨ç«¯å°¤å…¶ç¤¾äº¤è¿™å—ç«™ä½ä¸€å®šåœ°ä½å¼ºæ‚æ ‡é…ã€‚&lt;/p&gt;
&lt;h3 id=&quot;è¸©è¿‡çš„å¤§å‘&quot;&gt;&lt;a href=&quot;#è¸©è¿‡çš„å¤§å‘&quot; class=&quot;headerlink&quot; title=&quot;è¸©è¿‡çš„å¤§å‘&quot;&gt;&lt;/a&gt;è¸©è¿‡çš„å¤§å‘&lt;/h3&gt;&lt;p&gt;æœ±å¤§ç¥è®²è¿°åœ¨æ•°æ®è§£ææ–¹ä¾¿æ›¾ç»è¸©è¿‡ä¸€ä¸ªå¤§å‘ï¼Œæ‰€è°“å¤§å‘å°±æ˜¯åœ¨IOS&amp;amp;Androidä¸¤ä¸ªå®¢æˆ·ç«¯å¯¹äºæ•°æ®è§£ææœ‰æ‰€ä¸åŒã€‚å°±æ˜¯åœ¨äºåŸºæœ¬æ•°æ®ç±»å‹æ–¹é¢å¯¹äºæ•°æ®è§£æäº§ç”Ÿä¸åŒçš„ç»“æœï¼Œä¼°è®¡æ˜¯ä½¿ç”¨åŠ å¯†æ–¹å¼åœ¨æœåŠ¡å™¨å¾—åˆ°æ•°æ®è§£ææœ‰ä¸€å®šä¹±ç æƒ³è±¡åªæ˜¯ä¸çŸ¥é“æ˜¯Jsonè¿˜æ˜¯Xmlå¾—è§£æï¼ˆå°ç¼–è‡ªå·±çŒœæµ‹ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¼ä¸šç”µè¯æ–¹é¢&quot;&gt;&lt;a href=&quot;#ä¼ä¸šç”µè¯æ–¹é¢&quot; class=&quot;headerlink&quot; title=&quot;ä¼ä¸šç”µè¯æ–¹é¢&quot;&gt;&lt;/a&gt;ä¼ä¸šç”µè¯æ–¹é¢&lt;/h3&gt;&lt;p&gt;å¤§ç¥è¯´å‡ºç›®å‰æˆ‘ä»¬ç§»åŠ¨çš„ç«¯æ‰€åœ¨2Gç”¨æˆ·æ¯”é‡æŒºå¤§ï¼Œé‡‡ç”¨èåˆé€šä¿¡æ–¹å‘æœŸé—´è¿˜æ˜¯ç”¨é˜¿é‡Œçš„çº¿è·¯ã€‚å…³äºåœ¨WiFiæƒ…å†µä¸‹æµ‹è¯•ä½¿ç”¨OAé€šä¿¡æ–¹å¼ï¼Œéšä¾¿è®²è¿°åœ¨æ‰‹æœºç½‘ç»œæä¾›å•†ä¸åŒçš„æƒ…å†µä¸‹å…·ä½“æƒ…å†µï¼ˆè”é€šç½‘ç»œé€šä¿¡ä¸€æ—¦æ‰“å¼€ç½‘ç»œå°±ä¼šå ç”¨ä¸€æ¡ä¿¡é“è¿›è¡Œé€šä¿¡ï¼Œæ‰€ä»¥åœ¨æ•°æ®è¾ƒå¤§æ—¶å¸¦å®½å°±æ˜¯å ç”¨è¾ƒå¤§é—®é¢˜~å°å¿ƒè„ä½œä¸ºå®¢æˆ·ç«¯å¼€å‘çš„å°ç¼–ä¹‹å‰ç«Ÿæ²¡æœ‰å¬è¯´è¿‡ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‘å¸ƒæœºåˆ¶å’Œå›¢é˜Ÿæ„æ€&quot;&gt;&lt;a href=&quot;#å‘å¸ƒæœºåˆ¶å’Œå›¢é˜Ÿæ„æ€&quot; class=&quot;headerlink&quot; title=&quot;å‘å¸ƒæœºåˆ¶å’Œå›¢é˜Ÿæ„æ€&quot;&gt;&lt;/a&gt;å‘å¸ƒæœºåˆ¶å’Œå›¢é˜Ÿæ„æ€&lt;/h3&gt;&lt;p&gt;ç”±äºå®å®æ˜¯åŸºäºä¼ä¸šé€šä¿¡æœåŠ¡çš„è¡Œä¸šåº”ç”¨æ€§èƒ½æ–¹ä¾¿çœŸæ˜¯ä¸ªå¤§é—®é¢˜ã€‚&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; å—¨ï¼Œè®°å¾—å»å¹´çš„æš‘å‡åœ¨å‚åŠ æ·±åœ³ä¸€ä¸ªæ´»åŠ¨æ—¶ï¼Œé»„è€å¤§å¥”å»æ·±åœ³åˆ›ä¸š~é‚£æ—¶æˆ‘ä»¬ä½åœ¨æ—…ç¤¾&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ä»–è¯´è¦åšä¼ä¸šOAï¼Œæˆ‘éšå£è¯´ç°åœ¨åˆ›ä¸šé‚£ä¹ˆç«è¦ä¸åšä¸€ä¸ªç»™åˆ›ä¸šè€…åšä¸ªæœåŠ¡å‹çš„åº”ç”¨æé«˜æ•ˆç‡ã€‚çœ‹åˆ°è¿™ä¸ªæ„Ÿè§‰&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;äº‹æƒ…çœŸçš„ä¸æƒ³æˆ‘ä»¬æƒ³è±¡çš„é‚£ä¹ˆç®€å•ï¼&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä½œä¸ºå¼€å‘äººå‘˜æˆ‘ä»¬éƒ½çŸ¥é“å¦‚ä½•åšåˆ°æµç•…æ»šåŠ¨ç•Œé¢å’Œé€šä¿¡æ–¹é¢åŠæ—¶ï¼Œè¿™ä¸ªæ˜¯å¾ˆå¤§çš„æŒ‘æˆ˜ã€‚è¿™ä¸ªåé¢æœ‰æ‰€æ¶‰åŠå¤§å®¶è¿˜æ˜¯è€å¿ƒçœ‹ä¸‹å»ã€‚&lt;br&gt;å…¶å®çœŸæ­£è§¦åŠ¨ğŸ’˜é¡¹ç›®ç»„æŠ€æœ¯ã€äº§å“å’Œè¿è¥æ‹†åˆ†ä¸º7ä¸ªteamï¼Œå®è¡Œç«äº‰ä¼°è®¡æœºåˆ¶ã€‚äº§å“ç»ç†å¯¹äºè‡ªå·±teamè´Ÿè´£çš„åŠŸèƒ½è¿›è¡Œè·Ÿè¿›ï¼ŒæŠ€æœ¯å’Œè¿è¥è´Ÿè´£ç›¸å…³æŠ€æœ¯å¼€å‘ã€‚è¿™æ ·å®Œæˆæ¯å¤©éƒ½å¯ä»¥è¿›è¡Œä¸€ä¸ªbateçš„æäº¤ï¼Œä¸‰å‘¨è¿›è¡Œäº§å“çš„ä¸€æ¬¡è¿­ä»£ã€‚é¡¹ç›®å¼€å‘ä¹‹å¿«ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; æœ€è®©å°ç¼–ç–‘æƒ‘çš„æ˜¯äº§å“ä¹‹é—´åŠŸèƒ½å¯ä»¥è¿›è¡Œæ¨¡å—å¼€å‘~åŸºäºé¢å‘å¯¹è±¡æœ‰ç‚¹ï¼ˆé’ˆå¯¹åŠŸèƒ½å®ç°&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å¯ä»¥è¿›è¡Œæ¨¡å—åˆ’åˆ†ï¼‰ï¼Œä½†æ˜¯è¿è¥æ˜¯æ€ä¹ˆåœ¨ä¸€ä¸ªå¤§çš„teamç„¶å7ä¸ªå°å›¢é˜Ÿä¹‹é—´å®ç°ğŸ˜‚&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è®°å¾—ä¸ä¹…å‰æœ‰ä¸ªæ ‡é¢˜å…šï¼šBATæœªæ¥è¿˜ä¼šå­˜åœ¨å—ï¼Ÿä¸­é—´å°±æ˜¯åˆ©ç”¨â€œäºŒå…«æ³•åˆ™â€æ¥è®²è¿°å¤§ä¼ä¸šé¢å¯¹ç§‘æŠ€ä»€ä¹ˆé¬¼çªå˜æ—¶éš¾ä»¥è¿›è¡Œæ”¹é©ï¼Œå°ä¼ä¸šæ›´æœ‰æ´»åŠ›ã€‚æ¥è¾©è¯è®²è¿°è‡ªå·±çš„è§‚ç‚¹ï¼Œçœ‹å°ç¼–å¾®å¾®ä¸€ç¬‘å°±å–ä¸‹æ°´å¹³é™å¹³é™ã€‚&lt;br&gt;&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt; ä¸è¿‡ç›®å‰çœ‹æ¥è¿™ä¸ªå®šç†ä¼°è®¡æ˜¯æœ‰è‡ªå·±ä»·å€¼ï¼Œä»¥åå¦‚æœæ˜¯è‡ªå·±å‡ºæ¥å°è¯•å°±å¯ä»¥è¯•éªŒä¸‹ï¼Œæ­¤&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å¤„å¯ä»¥hulue&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;h3 id=&quot;ç°åº¦ç”¨æˆ·&quot;&gt;&lt;a href=&quot;#ç°åº¦ç”¨æˆ·&quot; class=&quot;headerlink&quot; title=&quot;ç°åº¦ç”¨æˆ·&quot;&gt;&lt;/a&gt;ç°åº¦ç”¨æˆ·&lt;/h3&gt;&lt;p&gt;å¬åˆ°çš„ç¬¬ä¸€æ„Ÿè§‰å°±æ˜¯â€œæ©ï¼Ÿâ€è¯·é—®å’Œ37åº¦ç°æœ‰å…³ç³»ä¸ã€‚æˆ‘å¯æ˜¯çª¦æ–‡æ¶›çš„ç²‰ä¸å•Šï¼Œéš¾é“æ˜¯è‡ªå·±è§è¯†å¤ªå°‘ã€‚è®¤è®¤çœŸ&lt;br&gt;çœŸç™¾åº¦ä¸€ä¸‹å…³äºç°åº¦çš„é—®é¢˜ï¼Œæ‰€è¯´æ²¡æœ‰æ‰¾åˆ°ç°åº¦ç”¨æˆ·è¯´æ³•ä½†æ˜¯å´çœ‹åˆ°å…³äºQQä¼ æˆç°åº¦æ³•åˆ™ï¼šéœ€æ±‚åº¦ã€é€Ÿåº¦ã€çµæ´»åº¦ã€å†—ä½™åº¦ã€å¼€æ”¾åä½œåº¦ã€åˆ›æ–°åº¦å’Œè¿›åŒ–åº¦ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;å°ç¼–ä¸‹é¢å°±ä¸ºå¤§å®¶è®²è¿°ä¸‹ï¼š&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;éœ€æ±‚åº¦ï¼šç”¨æˆ·éœ€æ±‚å°±æ˜¯ä½¿ç”¨è€…æœ€æƒ³è¦ã€‚ä¾‹å¦‚ï¼šåªä»å»å¹´å›½å®¶æ”¾å¼€äºŒèƒæ”¿ç­–ï¼Œæˆ‘ä»¬å°±ä¼šçœ‹åˆ°ä»Šå¹´æ¯å©´è¡Œä¸šå¤©å¤©&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ç«çˆ†çš„è¡Œä¸šï¼Œæ¯•ç«Ÿ70ï¼Œ80åå¤§å”å’Œé˜¿å§¨ä¼°è®¡ä»é‚£å¤©å°±å¼€å§‹äººç±»ä¼Ÿå¤§çš„ä¼ æ‰¿å¥‹æ–—å•¦ğŸ˜›&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;é€Ÿåº¦ï¼šè¿™ä¸ªä¼°è®¡å¤§å®¶éƒ½çŸ¥é“ï¼Œåˆ˜ç¿”110è·¨æ æˆä¸ºäºšæ´²é£äººçš„ç§°å·ã€‚å¯¹äºäº’è”ç½‘è€Œè¨€é€Ÿåº¦å°±æ›´éš¾èƒ½å¯è´µçš„ï¼Œä¼°&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;è®¡è¿™ä¹Ÿæ˜¯é¢å¯¹å¾®ä¿¡çš„å®å®ä¸‰å‘¨ä¸€ä¸ªç‰ˆæœ¬æ›´æ–°å…·ä½“ä½“ç°å§ã€‚&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;çµæ´»åº¦ï¼šé¢å¯¹å½“å‰å±€åŠ¿æœ‰æ‰€åˆ¤æ–­å’Œå¯¹æœªçŸ¥çš„é¢„è§ï¼Œå°±åƒç¥é›•ä¾ ä¾£é‡Œçš„æ®µèª‰ï¼Œé¢å¯¹å¼ºå¤§æ¶è€ä¸‰ï¼ˆä¸€ç›´éƒ½è‡ªç§°è€&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;äºŒæ¥ç€ï¼‰è™½è¯´æ­¦æœ¯å“¥ä¸è¡Œã€‚ä½†æ˜¯å¥½åœ¨å‡Œæ³¢å¾®æ­¥ï¼Œç…§æ ·åœ¨æ‰“èµŒä¸­æˆä¸ºä½ å°å­çš„å¸ˆå‚…ä¸æ˜¯ã€‚&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å†—ä½™åº¦ï¼šçœ‹åˆ°è¿™å¿ƒé‡Œå‡‰æŠŠæŠŠçš„ï¼ŒQQè€å¤§ä½ ä¹Ÿæ˜¯ç¨‹åºå‘˜å¼€å§‹çš„ï¼Œå†—ä½™åº¦æ˜¯åœ¨ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬æƒ³æ³•è®¾æ³•è§£&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å†³ã€‚åæ¥å®šç›ä¸€çœ‹ï¼Œå“¦ï¼ŒåŸæ¥æ˜¯æ˜¯è¯•é”™å•Šï¼Œå¥½å§å¥‰ä¸Šæˆ‘çš„è†ç›–ğŸ‘ğŸ»ã€‚&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;å¼€æ”¾åä½œåº¦ï¼šåœ¨äº’è”ç½‘ä¸­æŠŠè‡ªå®¶çš„èµ„æºæ‹¿æ¥å…±äº«åˆä½œï¼Œå¤§å®¶éƒ½çŸ¥é“èœœèœ‚ä¸€èˆ¬èœ‚å·¢ä¸­åªæœ‰ä¸€ä¸ªèœ‚åæ— æ•°å·¥èœ‚ï¼Œ&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;èœ‚åå‘å·¥èœ‚æä¾›ç”Ÿå‘½å·¥èœ‚è´Ÿè´£å…·ä½“äº‹åŠ¡ã€‚ä¹‹åå¤§å®¶åœ¨ä¸€ä¸ªé›†ä½“é‡ŒæŠŠè‡ªå·±è¶Šåšè¶Šå¤§ï¼Œèœ‚ååæœŸå‡ ä¹å¯ä»¥ç‹¬èµ„ã€‚&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;åˆ›æ–°åº¦ï¼šåªè®°å¾—å»å¹´å…‹å¼ºå¤§å¤§æ‰€å¾—ä¸‡ä¼—åˆ›æ–°ï¼Œå¤§ä¼—åˆ›ä¸šã€‚åé¢èº«è¾¹å¾ˆå¤šäººå°±å»å•¦ï¼Œä¸€è·¯å¥½èµ°ğŸŒµ&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;è¿›åŒ–åº¦ï¼šQQå¤§ä½¬è¯´6ä¸ªå¦‚æœåšåˆ°çš„è¯ï¼Œè¿™ä¸ªä¼šè‡ªåŠ¨å®Œæˆã€‚æœ‰ç‚¹ç”Ÿç‰©è¿›åŒ–çš„å‘³é“ï¼Œä½†æ˜¯ç¼ºå°‘ç‰©ç«å¤©æ‹©ã€‚&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;é—®é¢˜è°ƒè¯•&quot;&gt;&lt;a href=&quot;#é—®é¢˜è°ƒè¯•&quot; class=&quot;headerlink&quot; title=&quot;é—®é¢˜è°ƒè¯•&quot;&gt;&lt;/a&gt;é—®é¢˜è°ƒè¯•&lt;/h3&gt;&lt;blockquote&gt;&lt;p&gt;è¿™é‡Œä¹‹æ‰€ä½¿ç”¨ä»£ç æ ¼å¼æ˜¯çœŸçš„æœ‰é‡è¦ï¼Œä»…å¯¹äºç å†œæ¥è¯´ï¼Œæ¯”æ–¹è¯´æœ¬äººã€‚&lt;br&gt;è¿˜åƒæ˜¯Androidæ®µå¯ä»¥è¿›è¡Œfixåå°è‡ªåŠ¨ä¿®å¤åŠŸèƒ½ï¼ŒIOSå®¢æˆ·ç«¯æ˜¯åœ¨IOSç«¯ç›´æ¥è¿›è¡Œä¿®æ”¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;æ€§èƒ½ä¼˜åŒ–è¦æ±‚&quot;&gt;&lt;a href=&quot;#æ€§èƒ½ä¼˜åŒ–è¦æ±‚&quot; class=&quot;headerlink&quot; title=&quot;æ€§èƒ½ä¼˜åŒ–è¦æ±‚&quot;&gt;&lt;/a&gt;æ€§èƒ½ä¼˜åŒ–è¦æ±‚&lt;/h3&gt;&lt;p&gt;çœç”µå’Œé¡ºæ»‘ï¼Œå…·ä½“æ€ä¹ˆå®Œæˆå’Œå®ç°ï¼Œæœ±å¤§ç¥å¾®å¾®ğŸ˜ƒã€‚å½“è®²åˆ°åœ¨å›¾ç‰‡ä¸‹è½½å¤„ç†æ—¶ä¸»è¦å°†æµ·å¤–ï¼Œæœ±å¤§ç¥è¯´æˆ‘ä»¬åœ¨æµ·å¤–æœ‰ç®€å†æœåŠ¡å™¨ç„¶åè·Ÿå…·ä½“çš„è·¯ç”±ä¼˜åŒ–é€‰æ‹©å¯ä»¥å¯¹å›¾ç‰‡ä¸‹è½½åŠ å¿«é€Ÿåº¦ã€‚&lt;/p&gt;
&lt;h3 id=&quot;ä¼ä¸šç¾¤èŠå¤„ç†&quot;&gt;&lt;a href=&quot;#ä¼ä¸šç¾¤èŠå¤„ç†&quot; class=&quot;headerlink&quot; title=&quot;ä¼ä¸šç¾¤èŠå¤„ç†&quot;&gt;&lt;/a&gt;ä¼ä¸šç¾¤èŠå¤„ç†&lt;/h3&gt;&lt;p&gt;å‡è®¾ä¸€ç§æƒ…å†µï¼šå½“å¾ˆå¤šåœ¨ä¸€ä¸ªç¾¤ç»„ä¸­ä¸€èµ·èŠå¤©ï¼Œä¸€ç§’å¯ä»¥è®©æ•°æ®è¾¾åˆ°å‡ åƒæ¡ã€‚è¯·é—®ä½ æ€ä¹ˆè§£å†³ï¼Ÿ&lt;br&gt;æœ±å¤§ç¥è§£å†³æ–¹å¼ï¼šä¸€èµ·æŠŠæ•°æ®ä¸‹è½½ä¸‹æ¥ï¼Œä¿å­˜ä¸è‡³äºä¸¢å¤±ã€‚ä½†æ˜¯æœ€åæ˜¾ç¤ºçš„æ•°æ®å¤§å¤šæ˜¯æœ€ååå‡ äºŒåå‡ æ¡ã€‚è¿™æ ·å¯ä»¥å‡å°‘å±å¹•çš„åˆ·å±ç‡ï¼Œä¼˜åŒ–æ€§èƒ½ã€‚è‡³å°‘åœ¨GPUæ¸²æŸ“æ˜¾ç¤ºæ–¹é¢è‚¯å®šæœ‰æ‰€ä¼˜åŒ–ğŸ™…ğŸ»&lt;/p&gt;
&lt;blockquote&gt;&lt;p&gt;ä¹‹æ‰€ä»¥å†™è¿™äº›éšç¬”ï¼Œæ˜¯æƒ³è®©è‡ªå·±è®°ä½è‡ªå·±çœ‹è¿‡çŸ¥è¯†ã€‚æ¯•ç«Ÿå¥½è®°æ€§æ˜¯åœ¨ä¸å¦‚ä¸€ä¸ªçƒ‚ç¬”å¤´ï¼Œå†™çš„è¿‡ç¨‹ä¹Ÿæ˜¯åœ¨è®°å¿†&lt;br&gt;ä¸­é‡æ–°æ€è€ƒçš„è¿‡ç¨‹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä»Šå¤©åœ¨çœ‹Oneâ€™s Catå¤§ç¥çš„åšå®¢æ—¶è®²åˆ°å¦‚ä½•åˆ›å»ºæˆ‘ä»¬ä¸ªäººçš„å¼€æºæ¡†æ¶ï¼Œå°±æ¶‰åŠåˆ°fastlaneå°±æ‰¾æ¥çœ‹ä¸‹ï¼Œæ— æ„ä¸­çœ‹åˆ°å®å®çš„CTOæœ±é¸¿å¤§ç¥ï¼ˆåˆä¸€å°Šå¤§ç¥ï¼‰è®²è¿°è‡ªå·±çš„äº§å“ã€‚çŸ­çŸ­22ï¼š05çš„è§†é¢‘è®©è‡ªå·±æ„Ÿè§¦å¾ˆå¤§ï¼Œå†™è¿™ç¯‡æ–‡ç« ä¹Ÿå°±æ˜¯æ— èŠè¯´ä¸‹è‡ªå·±æ‰€å­¦çŸ¥è¯†å§ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ€»çš„æ¥è¯´ä»¥æŠ€æœ¯æ¥ç®€åŒ–æˆ‘ä»¬ç”Ÿæ´»ï¼Œç›®å‰æ¯”æƒ³è±¡ä¸­è¦éš¾ã€‚&quot;&gt;&lt;a href=&quot;#æ€»çš„æ¥è¯´ä»¥æŠ€æœ¯æ¥ç®€åŒ–æˆ‘ä»¬ç”Ÿæ´»ï¼Œç›®å‰æ¯”æƒ³è±¡ä¸­è¦éš¾ã€‚&quot; class=&quot;headerlink&quot; title=&quot;æ€»çš„æ¥è¯´ä»¥æŠ€æœ¯æ¥ç®€åŒ–æˆ‘ä»¬ç”Ÿæ´»ï¼Œç›®å‰æ¯”æƒ³è±¡ä¸­è¦éš¾ã€‚&quot;&gt;&lt;/a&gt;æ€»çš„æ¥è¯´ä»¥æŠ€æœ¯æ¥ç®€åŒ–æˆ‘ä»¬ç”Ÿæ´»ï¼Œç›®å‰æ¯”æƒ³è±¡ä¸­è¦éš¾ã€‚&lt;/h3&gt;&lt;h3 id=&quot;äººå‘˜é…ç½®æ–¹é¢&quot;&gt;&lt;a href=&quot;#äººå‘˜é…ç½®æ–¹é¢&quot; class=&quot;headerlink&quot; title=&quot;äººå‘˜é…ç½®æ–¹é¢&quot;&gt;&lt;/a&gt;äººå‘˜é…ç½®æ–¹é¢&lt;/h3&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="è§†é¢‘å¿ƒå¾—" scheme="http://yoursite.com/tags/%E8%A7%86%E9%A2%91%E5%BF%83%E5%BE%97/"/>
    
  </entry>
  
  <entry>
    <title>åšå®¢æ¬å®¶æ„Ÿè§‰</title>
    <link href="http://yoursite.com/2016/05/28/%E5%8D%9A%E5%AE%A2%E5%BC%80%E5%90%AF/"/>
    <id>http://yoursite.com/2016/05/28/åšå®¢å¼€å¯/</id>
    <published>2016-05-28T13:44:27.000Z</published>
    <updated>2017-06-01T07:48:51.000Z</updated>
    
    <content type="html">&lt;p&gt; &lt;br&gt;&lt;br&gt; &lt;br&gt; &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;åšå®¢åœ°å€æœ‰ç»å¸¸ä½¿pç”¨çš„åšå®¢å›­æ¬è‡³ç®€ä¹¦ï¼Œä»ç®€ä¹¦æ¬åˆ°Hexoå»ºç«‹çš„Githubä¸Šé¢ã€‚ä»æ­¤å¼€å¯è‡ªå·±åœ¨è·Ÿäººåšå®¢å­¦&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ä¹ å’Œåˆ†äº«å¾ç¨‹ï¼Œè¦æ˜¯è¯´å†™è¿™äº›å¯¹æˆ‘æœ€å¤§é©±åŠ¨åŠ›æ˜¯ä¸€æ¡è‡ªå·±ä¸€ç›´å¯¹æŠ€æœ¯å–œçˆ±å’Œå®Œæˆè‡ªå·±èœ•å˜ä¹‹è·¯ã€‚ &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;hr&gt;
&lt;p&gt;æ˜¨å¤©æŠŠåšå®¢æ¬è‡³è‡ªå·±çš„åšå®¢ï¼Œè™½è¯´èŠ±è´¹çš„æ—¶é—´æœ‰ç‚¹å¤šï¼Œä½†æ˜¯çœ‹ç€è‡ªå·±èŠ±è´¹çš„æ—¶é—´æœ‰æ‰€æ”¶è·è¿˜æ˜¯å¾ˆå¼€å¿ƒ&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;çš„ã€‚è€Œä¸”è‡ªå·±ä¹Ÿå°†è¦ç¦»å¼€ç”Ÿæ´»å››å¹´å¤´å¤§å¼€å§‹æ–°çš„å¾ç¨‹ï¼Œæœ‰çš„åŒå­¦è¯´è‡ªå·±ä¸Šå¤§å­¦ä¼˜åŠ£ï¼Œä¸è¿‡æˆ‘æ˜¯çœŸå¿ƒæ„Ÿ&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è°¢å¤´å¤§ã€‚åœ¨å››å¹´é—´è‡ªå·±åšè¿‡å¾ˆå¤šäº‹æƒ…ï¼Œä¹Ÿæ”¶è·å¾ˆå¤šã€‚å…¶å®æœ€å¤§çš„æ”¶è·æ˜¯æœ‰ä¸€ä»¶äº‹å€¼å¾—è‡ªå·±ä¸€ç›´å»ç­‰å¾…&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;è¿™ä¹Ÿéœ€æ˜¯è‡ªå·±åœ¨å¤§å­¦æœ€å¤§çš„æ”¶è·ï¼Œä¹Ÿæ˜¯åœ¨å¤§å­¦æœ€å¼€å¿ƒå¤§ä¸‰ä¸‹åŠå­¦æœŸâ•®(â•¯â–½â•°)â•­ã€‚&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;br&gt;&lt;br&gt;&lt;br&gt;&lt;/p&gt;
&lt;p style=&quot;text-align:right;&quot;&gt;&lt;br&gt;    â€“ &lt;a href=&quot;https://github.com/boilWater/boilWater.github.io&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt; åé¢ä¼šé™„ä¸Šè‡ªå·±ç®€å†ç‹¬è‡ªä»‹ç»ğŸ˜˜&lt;/a&gt;&lt;br&gt;&lt;/p&gt;


</content>
    
    <summary type="html">
    
      &lt;p&gt; &lt;/br&gt;&lt;br&gt; &lt;/br&gt; &lt;/p&gt;
&lt;figure class=&quot;highlight plain&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;åšå®¢åœ°å€æœ‰ç»å¸¸ä½¿pç”¨çš„åšå®¢å›­æ¬è‡³ç®€ä¹¦ï¼Œä»ç®€ä¹¦æ¬åˆ°Hexoå»ºç«‹çš„Githubä¸Šé¢ã€‚ä»æ­¤å¼€å¯è‡ªå·±åœ¨è·Ÿäººåšå®¢å­¦&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ä¹ å’Œåˆ†äº«å¾ç¨‹ï¼Œè¦æ˜¯è¯´å†™è¿™äº›å¯¹æˆ‘æœ€å¤§é©±åŠ¨åŠ›æ˜¯ä¸€æ¡è‡ªå·±ä¸€ç›´å¯¹æŠ€æœ¯å–œçˆ±å’Œå®Œæˆè‡ªå·±èœ•å˜ä¹‹è·¯ã€‚ &lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;/br&gt;&lt;br&gt;&lt;/br&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="éšç¬”" scheme="http://yoursite.com/categories/%E9%9A%8F%E7%AC%94/"/>
    
    
      <category term="åšå®¢ä¹‹åˆ" scheme="http://yoursite.com/tags/%E5%8D%9A%E5%AE%A2%E4%B9%8B%E5%88%9D/"/>
    
  </entry>
  
</feed>
