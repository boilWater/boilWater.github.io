<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>JackJin&#39;s åšå®¢</title>
  <subtitle>ä¸€ä½è„šè¸å®åœ°ï¼Œæ‹¥æœ‰æ¢¦æƒ³çš„90åï¼Œæƒ³è¦ä¸€ç›´åŠªåŠ›è¿½ä¸Šä½ ï¼</subtitle>
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2020-05-20T13:20:29.079Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>JackJin</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>iOS XNU - å†…å­˜ç®¡ç†æ¨¡å‹</title>
    <link href="http://yoursite.com/2019/10/09/iOS%20XNU%20-%20%E8%BF%9B%E7%A8%8B%E5%8F%8A%20Mach-O%20%E6%A0%BC%E5%BC%8F/"/>
    <id>http://yoursite.com/2019/10/09/iOS XNU - è¿›ç¨‹åŠ Mach-O æ ¼å¼/</id>
    <published>2019-10-08T17:09:02.404Z</published>
    <updated>2020-05-20T13:20:29.079Z</updated>
    
    <content type="html">&lt;h1 id=&quot;iOS-XNU-è¿›ç¨‹åŠ-Mach-O-æ ¼å¼&quot;&gt;&lt;a href=&quot;#iOS-XNU-è¿›ç¨‹åŠ-Mach-O-æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;iOS XNU - è¿›ç¨‹åŠ Mach-O æ ¼å¼&quot;&gt;&lt;/a&gt;iOS XNU - è¿›ç¨‹åŠ Mach-O æ ¼å¼&lt;/h1&gt;&lt;p&gt;æœ¬æ¥å°ç¼–æƒ³å…ˆæŠŠå†…å­˜è¿™å—æ¢³ç†ä¸‹ï¼Œä½†æ˜¯è”ç³»åˆ°å†…å­˜åœ¨ &lt;code&gt;iOS&lt;/code&gt; å¹³å°ä¸­ä¹Ÿæ˜¯ &lt;code&gt;app&lt;/code&gt; ç¼–è¯‘åçš„ &lt;code&gt;Mach-O&lt;/code&gt; å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€ä»¥å°±å…ˆæŠŠ &lt;code&gt;OS&lt;/code&gt; ç¼–è¯‘å¯åŠ¨è¿‡ç¨‹æ¥è®²è¿°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ&quot;&gt;&lt;a href=&quot;#è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ&quot; class=&quot;headerlink&quot; title=&quot;è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ&quot;&gt;&lt;/a&gt;è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ&lt;/h2&gt;&lt;p&gt;å› ä¸ºå°ç¼–æ˜¯ä¸€ä½ &lt;code&gt;iOSer&lt;/code&gt; è¿™é‡Œè®²è§£è¿›ç¨‹å¯ä»¥å¤§æ¦‚ç†è§£ä¸ºï¼š&lt;strong&gt;è¿›ç¨‹ == &lt;code&gt;App&lt;/code&gt;&lt;/strong&gt;ï¼Œä¸‹é¢ç»™å‡ºè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸ºï¼š&lt;strong&gt;åˆ›å»ºï¼ˆSIDLï¼‰ã€è¿è¡Œï¼ˆSRUNï¼‰ã€ç¡çœ ï¼ˆSSLEEPï¼‰ã€åœæ­¢ï¼ˆSSTOPï¼‰ã€é€€å‡ºingï¼ˆSZONEï¼‰å’Œç»ˆæ­¢ï¼ˆDeadï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k0gevo7iEONXQTl6x%2F-M7k1mssvT2pBaW1gbna%2F-M7k2QTK31K5V4dNyjvz%2F1877765-12ce1122453ddc54.png?alt=media&amp;amp;token=82c790db-352a-4266-aee2-60679c3d81d7&quot; alt=&quot;process-lifecycle.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;åˆ›å»ºï¼ˆSIDLï¼‰&quot;&gt;&lt;a href=&quot;#åˆ›å»ºï¼ˆSIDLï¼‰&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºï¼ˆSIDLï¼‰&quot;&gt;&lt;/a&gt;åˆ›å»ºï¼ˆSIDLï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;SIDL&lt;/code&gt;&lt;/strong&gt; è¿™ä¸ªçŠ¶æ€æ˜¯è¢«çˆ¶è¿›ç¨‹åˆšåˆš &lt;code&gt;Fork&lt;/code&gt; åˆ›å»ºç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ &lt;code&gt;PID&lt;/code&gt;ï¼Œå¤„äºä¸€ä¸ªä¸´æ—¶ç©ºé—²çŠ¶æ€ã€‚æ­¤æ—¶è®©ç„¶è¢«ç§°ä¸ºï¼š&lt;strong&gt;â€œæ­£åœ¨åˆå§‹åŒ–â€&lt;/strong&gt;ï¼Œä¸ä¼šå“åº”ä»»ä½•çš„ä¿¡å·å’Œæ“ä½œã€‚è¿™ä¸ªåˆå§‹åŒ–çš„è¿‡ç¨‹æ˜¯åœ¨å•çº¿ç¨‹ä¸­æ¥è¿›è¡Œå†…å­˜å¸ƒå±€è®¾ç½®å’ŒåŠ è½½æ‰€éœ€è¦çš„å¼•æ¥æ¨¡å—ã€‚&lt;br&gt;å®ç°å¤„ç†å®Œæˆåªæœ‰è¿›ç¨‹å¯ä»¥æ‰§è¡Œï¼ŒåŒæ—¶ä¸ä¼šè¿”å› &lt;strong&gt;&lt;code&gt;SIDL&lt;/code&gt;&lt;/strong&gt; çŠ¶æ€ã€‚&lt;strong&gt;ç›¸å½“ä¸ç”¨æˆ·åœ¨æ‰‹æœºå±å¹•ç‚¹å‡» &lt;code&gt;ICON&lt;/code&gt; æŒ‰é’®åæ‰§è¡Œã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;è¿è¡Œï¼ˆSRUNï¼‰&quot;&gt;&lt;a href=&quot;#è¿è¡Œï¼ˆSRUNï¼‰&quot; class=&quot;headerlink&quot; title=&quot;è¿è¡Œï¼ˆSRUNï¼‰&quot;&gt;&lt;/a&gt;è¿è¡Œï¼ˆSRUNï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;SRUN&lt;/code&gt;&lt;/strong&gt; å¦‚æœåœ¨è¿›ä¸€æ­¥æ¥è¿›è¡Œç»†åˆ†å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(1)å¯è¿è¡ŒçŠ¶æ€ï¼šå½“ä¸€ä¸ªè¿›ç¨‹è¢«æ·»åŠ åˆ°è¿è¡Œé˜Ÿåˆ—åœ¨ç­‰å¾…æ—¶æœŸï¼Œä½†æ˜¯å› ä¸º &lt;code&gt;CPU&lt;/code&gt; å¿™äºè¿è¡Œå…¶ä»–çš„ &lt;code&gt;App&lt;/code&gt; æ­¤æ—¶è¿˜æ²¡æœ‰åŠ è½½æ”¹è¿›ç¨‹çš„å¯„å­˜å™¨æ—¶ &lt;strong&gt;æ—¢çŸ­æš‚çŠ¶æ€&lt;/strong&gt;ã€‚&lt;br&gt;(2)è¿è¡ŒçŠ¶æ€ï¼šå½“ &lt;code&gt;CPU&lt;/code&gt; ä»è¿è¡Œé˜Ÿåˆ—ä¸­å¼€å§‹æ‰§è¡Œè¿›ç¨‹çš„å¯„å­˜å™¨ï¼Œæ”¹ &lt;code&gt;App&lt;/code&gt; ä¹Ÿå°±å¤„äºè¿è¡Œè½¬å°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ &lt;code&gt;App&lt;/code&gt;(è¿›ç¨‹) åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ—¶é—´ç‰‡ç”¨å®Œæˆ–è€…æ˜¯è¢«æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹å ç”¨æ—¶ï¼Œæ­¤æ—¶ä¼šç”± è¿è¡Œè½¬æ€åŠ å…¥åˆ°å¯ä»¥è¿è¡Œé˜Ÿåˆ—ä¸­å˜ä¸ºå¯è¿è¡ŒçŠ¶æ€ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ &lt;code&gt;iOS&lt;/code&gt; ä¸­ &lt;code&gt;App&lt;/code&gt; å¯åŠ¨çš„æ ‡å¿—å¦‚ä¸‹ == &lt;code&gt;SRUN&lt;/code&gt; ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ä¸‹é¢æ‰§è¡Œæ˜¯åœ¨ç³»ç»ŸåŠ è½½å®Œ `Mach-O` å’Œ `dyld` é“¾æ¥åº“ä¹‹åæ‰§è¡Œ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class AppDelegate: &lt;span class=&quot;built_in&quot;&gt;UIResponder&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;UIApplicationDelegate&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func application(_ applicatxion: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;, didFinishLaunchingWithOptions launchOptions: [&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;.LaunchOptionsKey: Any]?) -&amp;gt; Bool &amp;#123; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//æ¯æ¬¡ `App` ç¬¬ä¸€æ¬¡åŠ è½½æˆ–è€…ä»åå° --&amp;gt; å‰å°å‡ä¼šæ‰§è¡Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationDidBecomeActive(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ç¡çœ ï¼ˆSSLEEPï¼‰&quot;&gt;&lt;a href=&quot;#ç¡çœ ï¼ˆSSLEEPï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ç¡çœ ï¼ˆSSLEEPï¼‰&quot;&gt;&lt;/a&gt;ç¡çœ ï¼ˆSSLEEPï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;SSLEEP&lt;/code&gt;&lt;/strong&gt; åœ¨ &lt;code&gt;App&lt;/code&gt; æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°ç­‰å¾…æŸä¸€ä¸ªèµ„æºæˆ–è€…æ˜¯è¿›è¡Œåå°å·¥ä½œï¼Œè¿™æ—¶è¿›ç¨‹å°±ä¸è¦ä½¿ç”¨ &lt;code&gt;CPU&lt;/code&gt; ç”šè‡³ä¸ç”¨è¿›å…¥ &lt;strong&gt;å¯è¿è¡Œé˜Ÿåˆ—&lt;/strong&gt; è€Œæ˜¯è¿›è¡Œç¡çœ ã€‚å½“å†æ¬¡è·å–æ”¹èµ„æºæˆ–è€…è¿›è¡Œå‰å° &lt;strong&gt;é€šå¸¸ä¼šé‡æ–°åŠ å…¥åˆ°å¯è¿è¡Œé˜Ÿåˆ—ï¼Œå¹¶ä¸”å½“åœ¨å½“å‰è¿è¡Œé˜Ÿåˆ—ä¹‹åã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œç¡çœ çŠ¶æ€ä¹Ÿå¯ä»¥åœ¨ç»“æŸä¿¡å·æ—¶é—´æ¥å¤„ç†ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;pid_suspend&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;pid_resume&lt;/code&gt;&lt;/strong&gt; å¯ä»¥å®ç° &lt;code&gt;App&lt;/code&gt; è¿›è¡Œä¼‘çœ å’Œå”¤é†’ä¹‹é—´çš„åˆ‡æ¢ã€‚è¿™ä¸ªç¡çœ æˆ‘ä»¬å¯ä»¥æˆä¸º&lt;strong&gt;æ·±åº¦ç¡çœ &lt;/strong&gt;ï¼Œè¿™ä¸ªæ“ä½œæ˜¯åœ¨æˆ‘ä»¬è¯´çš„ &lt;code&gt;Mach&lt;/code&gt; å±‚é¢æ¥å®ç°çš„ï¼Œå¯ä»¥ç©é™æ¬¡æ¥è¿›è¡Œåˆ‡æ¢æ“ä½œã€‚&lt;br&gt;&lt;strong&gt;åœ¨æ‰‹æœºä¸­æˆ‘ä»¬é‡‡ç”¨æŒ‰ &lt;code&gt;HOME&lt;/code&gt; é”®å°±æ˜¯åŸºç¡€æ­¤æ¥å®ç°ï¼ŒApp ç¡çœ çŠ¶æ€ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;åœ¨åº”ç”¨ç¨‹åºä» &lt;code&gt;SRUN&lt;/code&gt; çŠ¶æ€åˆ°æˆ‘ä»¬æ‰€è¯´çš„ &lt;code&gt;SSLEEP&lt;/code&gt; ä¼‘çœ çŠ¶æ€è¿‡ç¨‹ä¸­åœ¨ &lt;code&gt;iOS&lt;/code&gt; ä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å¯ä»¥æ–‡ä»¶ &lt;code&gt;xxxx.plist&lt;/code&gt; è®¾ç½® &lt;code&gt;UIApplicationExitsOnSuspend&lt;/code&gt; || &lt;code&gt;Application does not run in background&lt;/code&gt; è®¾ç½®å¯¹åº”çš„å±æ€§ &lt;code&gt;true&lt;/code&gt; || &lt;code&gt;false&lt;/code&gt; æ¥è®¾ç½®è¿›å…¥åå°è®¾ç½®ï¼Œåœ¨ &lt;code&gt;App&lt;/code&gt; ä¸­æŒ‰ä¸‹ &lt;code&gt;Home&lt;/code&gt; é”® == &lt;code&gt;SSLEEP&lt;/code&gt;ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class AppDelegate: &lt;span class=&quot;built_in&quot;&gt;UIResponder&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;UIApplicationDelegate&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//ä¸‹é¢æ˜¯åœ¨è¿è¡ŒæœŸé—´ç‚¹å‡» `Home` é”®ï¼Œ`App` è¿›è¡Œåå°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationWillResignActive(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationDidEnterBackground(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//æ­¤ä½ç½®å¦‚æœæœ‰éœ€æ±‚å¯ä»¥å®ç°å»¶è¿Ÿè¿›å…¥åå°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//ä»åå°è¿›å…¥è¿è¡ŒçŠ¶æ€ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationWillEnterForeground(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationDidBecomeActive(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;gt;&lt;/p&gt;
&lt;h3 id=&quot;åœæ­¢ï¼ˆSSTOPï¼‰&quot;&gt;&lt;a href=&quot;#åœæ­¢ï¼ˆSSTOPï¼‰&quot; class=&quot;headerlink&quot; title=&quot;åœæ­¢ï¼ˆSSTOPï¼‰&quot;&gt;&lt;/a&gt;åœæ­¢ï¼ˆSSTOPï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;SSTOP&lt;/code&gt;&lt;/strong&gt; è¿™ä¸ªçŠ¶æ€æ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„ä¿¡å·&lt;strong&gt;&lt;code&gt;TSTOP&lt;/code&gt; || &lt;code&gt;TOSTOP&lt;/code&gt;&lt;/strong&gt;æ¥æ—¶æ­£åœ¨è¿›è¡Œçš„ &lt;code&gt;App&lt;/code&gt; åœæ­¢è¿è¡Œï¼Œä½¿ç¨‹åºæ¥å¤„åœ¨ &lt;strong&gt;æ·±åº¦ç¡çœ çŠ¶æ€&lt;/strong&gt;ã€‚å¯ä»¥é€šè¿‡ä¿¡å· &lt;strong&gt;&lt;code&gt;CONT&lt;/code&gt;&lt;/strong&gt; æ¥åˆ‡ä¸ºå¯è¿è¡ŒçŠ¶æ€æ¥é‡æ–°è¢«è°ƒåº¦ã€‚ &lt;/p&gt;
&lt;h3 id=&quot;é€€å‡ºingï¼ˆSZONEï¼‰&quot;&gt;&lt;a href=&quot;#é€€å‡ºingï¼ˆSZONEï¼‰&quot; class=&quot;headerlink&quot; title=&quot;é€€å‡ºingï¼ˆSZONEï¼‰&quot;&gt;&lt;/a&gt;é€€å‡ºingï¼ˆSZONEï¼‰&lt;/h3&gt;&lt;p&gt;åœ¨ç¨‹åºæ‰§è¡Œå®Œä¹‹åè¿è¡Œ &lt;code&gt;exit()&lt;/code&gt; æ¥å¯¹ç¨‹åºè¿›è¡Œé€€å‡ºã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;iOS&lt;/code&gt; ä¸­ç¨‹åºçš„å…³é—­ == &lt;code&gt;SZONE&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç¨‹åºåœ¨å…³é—­æ—¶ `iOS` çš„å‡½æ•°è°ƒç”¨ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class AppDelegate: &lt;span class=&quot;built_in&quot;&gt;UIResponder&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;UIApplicationDelegate&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationWillTerminate(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ç»ˆæ­¢ï¼ˆDeadï¼‰&quot;&gt;&lt;a href=&quot;#ç»ˆæ­¢ï¼ˆDeadï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ç»ˆæ­¢ï¼ˆDeadï¼‰&quot;&gt;&lt;/a&gt;ç»ˆæ­¢ï¼ˆDeadï¼‰&lt;/h3&gt;&lt;p&gt;åœ¨ç¨‹åºé€€å‡ºä¹‹åï¼Œä¹Ÿå°±æ˜¯ä¼šç»ˆæ­¢è¯¥è¿›ç¨‹æ‰€æœ‰çº¿ç¨‹ã€‚åœ¨æ­¤ä¹‹å‰ä¼šæç«¯çš„æ—¶é—´å‡ºç°ä¸€ä¸ªåƒµå°¸çŠ¶æ€ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;åƒµå°¸çŠ¶æ€ï¼š&lt;/strong&gt; è¿›ç¨‹çš„ç©ºå£³ï¼Œå ç”¨çš„èµ„æºå…¨éƒ¨é‡Šæ”¾ï¼Œåªæ˜¯å¯¹åº”çš„ &lt;code&gt;PID&lt;/code&gt; è¿˜åœ¨å ç”¨ã€‚å¦‚æœçˆ¶ç±»è¿›è¡Œæ²¡é¢„é‡Šæ”¾å°±äº¤ç”±çˆ¶ç±»çº¿ç¨‹ï¼Œå¦‚æœé‡Šæ”¾å°±äº¤ç»™å…¶ç¥–å…ˆè¿›ç¨‹ï¼ˆ&lt;code&gt;PID&lt;/code&gt; = 1ï¼‰ å¯ä»¥ç†è§£ä¸ºæ“ä½œç³»ç»Ÿæ¥è¿›è¡Œæ”¶å…»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;&gt;&lt;a href=&quot;#å¯æ‰§è¡Œæ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;&gt;&lt;/a&gt;å¯æ‰§è¡Œæ–‡ä»¶&lt;/h2&gt;&lt;p&gt;ç‰¹æ®Šæ–‡ä»¶åœ¨å†…å­˜ä¸­åŠ è½½æ‰§è¡Œå°±æ˜¯æˆ‘ä»¬æ‰€è§åˆ°çš„è¿›ç¨‹ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­æ–‡ä»¶ä¸­ä¼šæœ‰ä¸€ä¸ªç­¾åæ¥è¡¨æ˜å½“å‰æ–‡ä»¶æ˜¯å¦æœ‰æ•ˆï¼šâ€œé­”æ•°â€ã€‚&lt;br&gt;ä¸‹é¢ç»™å‡º &lt;code&gt;OS X&lt;/code&gt; ä¸­å¯¹åº”çš„é­”æ•°å’Œå¯æ‰§è¡Œæ–‡ä»¶ç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ‰§è¡Œæ ¼å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;é­”æ•°&lt;/th&gt;
&lt;th&gt;ç”¨é€”&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šç”¨äºŒè¿›åˆ¶æ ¼å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;0xcafebabess&lt;/code&gt;ï¼ˆå°å°¾é¡ºåºï¼‰   &lt;code&gt;0xbebafeca&lt;/code&gt;ï¼ˆå¤§å°¾é¡ºåºï¼‰&lt;/td&gt;
&lt;td&gt;åŒ…å«å¤šç§æ¶æ„çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œç›®å‰åªåœ¨ &lt;code&gt;OS X&lt;/code&gt; ä½¿ç”¨ã€‚ ç›®å‰æˆ‘ä»¬è§è¿‡ä¸€äº› &lt;code&gt;Framework&lt;/code&gt; çš„åº“å¯ä»¥åœ¨ &lt;code&gt;Mac&lt;/code&gt; çš„è™šæ‹Ÿæœºä¸Šè¿è¡ŒåŠæ”¯æŒ &lt;code&gt;Intel&lt;/code&gt; çš„ &lt;code&gt;i386&lt;/code&gt;ç­‰ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒç§»åŠ¨ç«¯çš„ &lt;code&gt;ARM&lt;/code&gt; çš„ 32 ä½å’Œ 64 ä½é«˜é€šå¤„ç†å™¨ã€‚&lt;strong&gt;åŒ…ä½“åå¤§ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Mach-O&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;0xfeedface&lt;/code&gt;ï¼ˆ32ä½ï¼‰ &lt;code&gt;0xfeedfacf&lt;/code&gt;ï¼ˆ64ä½ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;OS X&lt;/code&gt; åŸç”ŸäºŒè¿›åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹é¢ç»™å‡ºåœ¨ &lt;code&gt;Fat&lt;/code&gt;ï¼ˆé€šç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼‰ VS &lt;code&gt;Mach&lt;/code&gt; æ ¼å¼å¤´æ–‡ä»¶ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k0gevo7iEONXQTl6x%2F-M7k1mssvT2pBaW1gbna%2F-M7k2luA1DFjTMhevnny%2F1877765-898ef103c8cbaa7d.png?alt=media&amp;amp;token=ed90d759-c48e-4306-9a3c-ced32ff741cb&quot; alt=&quot;fat-mach-header-info.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;èƒ–äºŒè¿›åˆ¶ï¼ˆFatï¼‰&quot;&gt;&lt;a href=&quot;#èƒ–äºŒè¿›åˆ¶ï¼ˆFatï¼‰&quot; class=&quot;headerlink&quot; title=&quot;èƒ–äºŒè¿›åˆ¶ï¼ˆFatï¼‰&quot;&gt;&lt;/a&gt;èƒ–äºŒè¿›åˆ¶ï¼ˆFatï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;fat_headers&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;magic&lt;/code&gt;ï¼šå›ºå®šå€¼åœ¨ä¸Šé¢ç»™å‡º &lt;code&gt;0xcafebabe&lt;/code&gt;ï¼Œæ¥è¡¨ç¤ºé€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼›&lt;br&gt;&lt;code&gt;nfa_arch&lt;/code&gt;ï¼šå½“å‰é€šç”¨äºŒè¿›åˆ¶åŒ…å«çš„æ¶æ„æ•°ç›®ã€‚ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;fat_arch&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;cputype&lt;/code&gt;ï¼šå®šä¹‰çš„ &lt;code&gt;CPU&lt;/code&gt; ç±»å‹ï¼›&lt;br&gt;&lt;code&gt;cpusubtype&lt;/code&gt;ï¼šå®šä¹‰çš„æœºå™¨æ ‡è¯†ç¬¦ï¼›&lt;br&gt;&lt;code&gt;offset&lt;/code&gt;ï¼šæ¶æ„çš„äºŒè¿›åˆ¶ä»£ç åœ¨æ•´ä¸ªé€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„åç§»é‡ï¼›&lt;br&gt;&lt;code&gt;magic&lt;/code&gt;ï¼šå†…å±‚äºŒè¿›åˆ¶ä»£ç å¤§å°ï¼›&lt;br&gt;&lt;code&gt;magic&lt;/code&gt;ï¼šå¯¹å…¶é¡µè¾¹ç•Œï¼ˆ4kï¼‰ï¼Œè¡¨ç¤º 2 å¹‚å‡½æ•°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨é€šç”¨äºŒè¿›åˆ¶ä»£ç åŠ è½½æ‰§è¡Œæ—¶ï¼Œ&lt;code&gt;Mach&lt;/code&gt; åŠ è½½å™¨ä¼šæ ¹æ®è‡ªå·±çš„æ¶æ„åŠ è½½é€‚åˆæ¶æ„ä»£ç ã€‚æ‰€ä»¥ä¸ç›¸å…³çš„æ¶æ„ä»£ç ä¸ç”¨å ç”¨ç›¸å…³çš„å†…å­˜ï¼Œä½†æ˜¯åŠ è½½æ•´ä¸ª &lt;code&gt;IPA&lt;/code&gt; åŒ…ä½“ä¼šæ¯”è¾ƒå¤§ã€‚è¿™é‡Œå¯ä»¥é‡‡ç”¨ &lt;code&gt;lipo&lt;/code&gt; æ¥å¯¹äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œé˜‰å‰²ï¼Œ&lt;a href=&quot;&quot;&gt;&lt;code&gt;lipo&lt;/code&gt;é˜‰å‰²æ–‡ä»¶&lt;/a&gt;&lt;br&gt;&lt;strong&gt;é€šç”¨äºŒè¿›åˆ¶çš„é•œåƒæ–‡ä»¶åšäº†ä¼˜åŒ–ï¼Œå¯¹å…¶é¡µè¾¹ç•Œï¼Œå†…æ ¸åªéœ€åŠ è½½ç¬¬ä¸€é¡µå°±å¯ä»¥è¯»å–æ–‡ä»¶ã€‚ç”¨è¿™ä¸ªæ–‡ä»¶å½“åšç›®å½•åŠ è½½åˆé€‚çš„é•œåƒã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;Mach-O-äºŒè¿›åˆ¶æ ¼å¼&quot;&gt;&lt;a href=&quot;#Mach-O-äºŒè¿›åˆ¶æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;Mach-O äºŒè¿›åˆ¶æ ¼å¼&quot;&gt;&lt;/a&gt;&lt;code&gt;Mach-O&lt;/code&gt; äºŒè¿›åˆ¶æ ¼å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;mach_header&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;magic&lt;/code&gt;ï¼š&lt;code&gt;0xfeedface&lt;/code&gt; è¡¨ç¤º 32 ä½äºŒè¿›åˆ¶ï¼Œ&lt;code&gt;0xfeedfacf&lt;/code&gt; è¡¨ç¤º 64 ä½äºŒè¿›åˆ¶æ–‡ä»¶ï¼›&lt;br&gt;&lt;code&gt;cputype&lt;/code&gt; &amp;amp; &lt;code&gt;cpusubtype&lt;/code&gt;ï¼š&lt;code&gt;CPU&lt;/code&gt; ç±»å‹å’Œå­ç±»å‹ï¼›&lt;br&gt;&lt;code&gt;filetype&lt;/code&gt;ï¼šæ–‡ä»¶ç±»å‹ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ã€åº“æ–‡ä»¶ã€æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ã€å†…æ ¸æ‹“å±•ç­‰ï¼‰ï¼›&lt;br&gt;&lt;code&gt;ncmds&lt;/code&gt; &amp;amp; &lt;code&gt;sizeofncmds&lt;/code&gt;ï¼šç”¨äºåŠ è½½å™¨çš„ â€œåŠ è½½å‘½ä»¤â€ çš„æ¡ç›®å’Œå¤§å°ï¼›&lt;br&gt;&lt;code&gt;flags&lt;/code&gt;ï¼šåŠ¨æ€è¿æ¥å™¨çš„æ ‡å¿—ï¼ˆ&lt;strong&gt;&lt;code&gt;dyld&lt;/code&gt;&lt;/strong&gt;ï¼‰ï¼›&lt;br&gt;&lt;code&gt;Reserved&lt;/code&gt;ï¼š 64 ä½é¢„ç•™ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬åœ¨ç›®å‰ç¼–è¯‘è¿‡ç¨‹æ€»é‡‡ç”¨ &lt;code&gt;Bitcode&lt;/code&gt; æ¥è¿›è¡Œç¼–ç å®é™…å°±æ˜¯ç”Ÿæˆ &lt;code&gt;Mach-O&lt;/code&gt; æ–‡ä»¶ï¼Œç„¶ååœ¨ç”± &lt;code&gt;Apple Server&lt;/code&gt; æ ¹æ®åº”ç”¨ç«¯çš„å¤„ç†æ¶æ„æ¥åœ¨å®ç°å®‰è£…æ—¶ç”Ÿæˆå¯¹åº”æ¶æ„çš„ &lt;code&gt;Mach-O&lt;/code&gt;ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;Mach-O-åŠ è½½è¿›ç¨‹&quot;&gt;&lt;a href=&quot;#Mach-O-åŠ è½½è¿›ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;Mach-O åŠ è½½è¿›ç¨‹&quot;&gt;&lt;/a&gt;&lt;code&gt;Mach-O&lt;/code&gt; åŠ è½½è¿›ç¨‹&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k0gevo7iEONXQTl6x%2F-M7k1mssvT2pBaW1gbna%2F-M7k2zQdhpr_Gwptcw_Z%2F1877765-b691948709c528af.png?alt=media&amp;amp;token=6b4e79d8-3066-4827-ab1a-37ee0c4a8da3&quot; alt=&quot;mach-o-loader.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å†…æ ¸åŠ è½½è¿›ç¨‹&quot;&gt;&lt;a href=&quot;#å†…æ ¸åŠ è½½è¿›ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;å†…æ ¸åŠ è½½è¿›ç¨‹&quot;&gt;&lt;/a&gt;å†…æ ¸åŠ è½½è¿›ç¨‹&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;(1) éé…è™šæ‹Ÿå†…å­˜ &lt;code&gt;LC_SEGMENT&lt;/code&gt; || &lt;code&gt;LC_SEGMENT_64&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;LC_SEGMENT&lt;/code&gt; || &lt;code&gt;LC_SEGMENT_64&lt;/code&gt; æŒ‡å¯¼å†…æ ¸å¦‚ä½•è®¾ç½®æ–°è¿è¡Œè¿›ç¨‹çš„å†…å­˜ç©ºé—´ï¼Œ&lt;strong&gt;&lt;code&gt;__PAGEZERO&lt;/code&gt;æ®µ(ç©ºæŒ‡é’ˆé™·é˜±)ã€&lt;code&gt;__TEXT&lt;/code&gt;æ®µ(ç¨‹åºä»£ç )ã€&lt;code&gt;__DATA&lt;/code&gt;æ®µ(ç¨‹åºæ•°æ®) å’Œ &lt;code&gt;__LINKEDIT&lt;/code&gt;æ®µ(è¿æ¥å™¨ä½¿ç”¨çš„å­—ç¬¦å’Œå…¶ä»–æ®µ)&lt;/strong&gt; ç›´æ¥ä» &lt;code&gt;Mach-O&lt;/code&gt; äºŒè¿›åˆ¶æ–‡ä»¶åŠ è½½åˆ°å†…å­˜ä¸­ã€‚   &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LC_SEGMENT&lt;/code&gt; || &lt;code&gt;LC_SEGMENT_64&lt;/code&gt; çš„å‚æ•°ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å‚æ•°&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;segment&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;load_segment&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;vmaddr&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ‰€æè¿°ç«¯çš„è™šæ‹Ÿç‰©ç†åœ°å€&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;vmsize&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;ä¸ºè¿™ä¸ªæ®µåˆ†é…çš„è™šæ‹Ÿå†…å­˜å¤§å°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;fileoff&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ®µåœ¨è¯¥æ–‡ä»¶çš„åç§»é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;filesize&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;è¡¨ç¤ºæ®µåœ¨æ–‡æœ¬ä¸­å ç”¨çš„å­—èŠ‚æ•°&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;maxport&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ®µçš„é¡µé¢æ‰€éœ€çš„æœ€é«˜å†…å­˜ä¿æŠ¤ï¼Œé‡‡ç”¨ 8 è¿›åˆ¶è¡¨ç¤º&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;initport&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ®µçš„é¡µé¢æœ€åˆå§‹å†…å­˜ä¿æŠ¤&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;nsects&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ®µä¸­çš„åŒº &lt;code&gt;section&lt;/code&gt; æ•°é‡&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;flags&lt;/code&gt;&lt;/td&gt;
&lt;td&gt;æ‚é¡¹æ ‡å¿—ä½&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯¹äºä¸Šé¢æ¯ä¸€æ®µï¼Œå°†æ–‡ä»¶ä¸­ç›¸åº”çš„å†…å®¹åŠ è½½åˆ°å†…å­˜ä¸­ï¼š&lt;br&gt;ä»åç§»é‡ä¸º &lt;code&gt;fileoff&lt;/code&gt; å¤„åŠ è½½ &lt;code&gt;filesize&lt;/code&gt; å­—èŠ‚åˆ°è™šæ‹Ÿå†…å­˜åœ°å€ &lt;code&gt;vmaddr&lt;/code&gt; å¤„çš„ &lt;code&gt;vmsize&lt;/code&gt; å­—èŠ‚ã€‚æ¯æ®µçš„é¡µé¢éƒ½æ˜¯æ ¹æ® &lt;code&gt;initport&lt;/code&gt; è¿›è¡Œåˆå§‹åŒ–ï¼Œ&lt;code&gt;initport&lt;/code&gt; æŒ‡å®šå¦‚ä½•é€šè¿‡ &lt;strong&gt;è¯»/å†™&lt;/strong&gt; æ‰§è¡Œåˆå§‹åŒ–é¡µé¢çš„ä¿æŠ¤çº§åˆ«ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;æ®µè¿›ä¸€æ­¥çš„åˆ†è§£åŒºï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åŒº&lt;/th&gt;
&lt;th&gt;&lt;strong&gt;ç”¨é€”&lt;/strong&gt;&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;(2) åˆ›å»ºä¸»çº¿ç¨‹ &lt;code&gt;LC_MAIN&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LC_MAINï¼š&lt;/code&gt;&lt;/strong&gt;ä¸»è¦çš„ä½œç”¨å°±æ˜¯è®¾ç½®ç¨‹åºçš„å…¥å£ç‚¹åœ°å€å’Œæ ˆçš„å¤§å°ï¼Œåœ¨è®¾ç½®çš„éƒ­æ™¨ä¸­é™¤äº†ç¨‹åºçš„è®¡æ•°å™¨ä¹‹å¤–æ‰€æœ‰å¯„å­˜å™¨éƒ½è®¾ç½® &lt;strong&gt;0&lt;/strong&gt;ã€‚ &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(3) ä»£ç ç­¾å &lt;code&gt;LC_CODE_SIGATURE&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LC_CODE_SIGATUREï¼š&lt;/code&gt;&lt;/strong&gt; åŒ…å«äº† &lt;code&gt;Mach-O&lt;/code&gt; äºŒè¿›åˆ¶æ–‡ä»¶çš„ç­¾åï¼Œå¦‚æœç­¾åå’Œä»£ç æœ¬èº«ä¸ç¬¦åˆçš„è¯ï¼Œ&lt;strong&gt;å†…æ ¸å°±ä¼šç«‹å³ç»™ç¨‹åºå‘é€ &lt;code&gt;SIGKILL&lt;/code&gt; ä¿¡å·å°†ç¨‹åºæ€æ‰ã€‚&lt;/strong&gt;åœ¨åé¢è‹¹æœåœ¨ &lt;code&gt;iOS&lt;/code&gt; å®¢æˆ·ç«¯é‡‡ç”¨ &lt;code&gt;entitlement&lt;/code&gt; æœºåˆ¶åï¼Œä»£ç ç­¾åå°±å’Œæ²™ç›’æœºåˆ¶ç»‘å®šåœ¨ä¸€èµ·ï¼Œè€Œä¸” &lt;code&gt;entitlement&lt;/code&gt; å£°æ˜å¿…é¡»å†…åµŒåœ¨ &lt;code&gt;Mach-O&lt;/code&gt; ä¸­å¹¶ä¸”é€šè¿‡ç­¾åç›–ç« æ¥è®¾ç½®æ‰§è¡Œå®‰å…¨æ•æ„Ÿçš„æ“ä½œæ—¶å…·æœ‰å¯¹åº”çš„æƒé™ã€‚ &lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(4) åŠ å¯† &lt;code&gt;LC_ENCRYPTION_INFO&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LC_ENCRYPTION_INFO&lt;/code&gt;&lt;/strong&gt;åŠ å¯†äºŒè¿›åˆ¶æ–‡ä»¶ï¼Œåœ¨ &lt;code&gt;iOS&lt;/code&gt; ä¸­æ™®éä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(5) &lt;code&gt;Dyld&lt;/code&gt; åŠ è½½ &lt;code&gt;LC_LOAD_DYLINKER&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;LC_LOAD_DYLINKER&lt;/code&gt;&lt;/strong&gt; è°ƒç”¨ &lt;code&gt;Dyld&lt;/code&gt;(/user/lib/dyld) æ¥åŠ è½½ dyld å¦‚ä¸‹ã€‚&lt;/p&gt;
&lt;h3 id=&quot;Dyld-åŠ è½½è¿›ç¨‹&quot;&gt;&lt;a href=&quot;#Dyld-åŠ è½½è¿›ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;Dyld åŠ è½½è¿›ç¨‹&quot;&gt;&lt;/a&gt;&lt;code&gt;Dyld&lt;/code&gt; åŠ è½½è¿›ç¨‹&lt;/h3&gt;&lt;p&gt;åœ¨å†…æ ¸æ‰§è¡Œ &lt;code&gt;LC_DYLINKER&lt;/code&gt; æ¥å®ç° &lt;code&gt;Dyld&lt;/code&gt; åŠ¨æ€è¿æ¥å™¨æ¥å¯åŠ¨ï¼Œç„¶åå°±ä¼šæŠŠè¿›ç¨‹çš„æ§åˆ¶æƒæ¥äº¤ç»™ &lt;code&gt;Dyld&lt;/code&gt;ï¼Œå› ä¸ºå†…æ ¸ä¼šæŠŠè¿›ç¨‹çš„å…¥å£ç‚¹è®¾ç½®ä¸º &lt;code&gt;Dyld&lt;/code&gt; çš„å…¥å£ç‚¹ã€‚&lt;br&gt;æ­¤æ—¶è¿æ¥å™¨ &lt;code&gt;Dyld&lt;/code&gt; å°±ä¼šåœ¨å¯åŠ¨æ—¶å› ä¸ºè¿›ç¨‹é‡‡ç”¨åŠ¨æ€é“¾æ¥åœ¨ &lt;code&gt;Mach-O&lt;/code&gt; é•œåƒæ–‡ä»¶ä¸­ â€œç©ºæ´â€ æ¥è¿›è¡Œå¡«è¡¥ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥æˆä¸ºï¼š&lt;strong&gt;ç¬¦å·ç»‘å®šï¼ˆ&lt;code&gt;binding&lt;/code&gt;ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¬¦å·ç»‘å®šå…·ä½“å®ç°è¿‡ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ï¼ˆ1ï¼‰äºŒè¿›åˆ¶ä¸­ä½¿ç”¨å¤–éƒ¨å®šä¹‰çš„å‡½æ•°å’Œç¬¦å·ï¼Œè¿™æ—¶åœ¨æ–‡æœ¬æ®µä¸­ä¼šå­˜åœ¨ä¸€ä¸ª &lt;strong&gt;&lt;code&gt;__stubs&lt;/code&gt;ï¼ˆæ¡©ï¼‰&lt;/strong&gt;çš„åŒºï¼Œåœ¨è¿™ä¸ªæ¡©åŒºå­˜æ”¾æœ¬åœ°æœªå®šä¹‰çš„å ä½ç¬¦ã€‚&lt;br&gt;ï¼ˆ2ï¼‰ç¼–è¯‘å™¨ç”Ÿæˆç›¸å…³ä»£ç æ—¶åˆ›å»ºç¬¦å·æ¡©åŒºè°ƒç”¨ï¼Œé“¾æ¥å…¶åœ¨è¿è¡Œæ—¶ä¼šè§£å†³æ¡©åŒºçš„è°ƒç”¨ã€‚&lt;br&gt;ï¼ˆ3ï¼‰è¿æ¥å™¨è§£å†³çš„æ–¹å¼æ˜¯åœ¨è¢«è°ƒç”¨çš„åœ°å€å¤„é˜²æ­¢ä¸€æ¡ &lt;code&gt;JMP&lt;/code&gt; æŒ‡ä»¤ï¼Œ&lt;code&gt;JMP&lt;/code&gt; æŒ‡ä»¤ä¼šå°†æ§åˆ¶æƒäº¤ç»™çœŸå®çš„å‡½æ•°ä½“ï¼Œäºæ­¤åŒæ—¶ä¸ä¼šå¯¹æ ˆæœ‰ä»»ä½•ä¿®æ”¹ï¼Œåœ¨è°ƒç”¨çš„è¿‡ç¨‹å°±åƒç›´æ¥è°ƒç”¨çœŸå®çš„å‡½æ•°ã€‚&lt;br&gt;ï¼ˆ4ï¼‰åœ¨å®é™…é“¾æ¥è¿‡ç¨‹ä¸­ &lt;code&gt;LC_LOAD_DYLB&lt;/code&gt; å‘Šè¯‰è¿æ¥å™¨ä»å“ªé‡Œæ‰¾åˆ°å¯¹åº”çš„ç¬¦å·ï¼Œè¿æ¥å™¨&lt;strong&gt;&lt;code&gt;é‡‡ç”¨é€’å½’çš„æ–¹å¼&lt;/code&gt;&lt;/strong&gt;åŠ è½½æ¯ä¸€ä¸ªæŒ‡å®šçš„åº“ï¼Œå¹¶ä¸”æœç´¢å¯¹åº”åŒ¹é…çš„å­—ç¬¦ã€‚é“¾æ¥çš„åº“æœ‰ä¸€ä¸ªç¬¦å·è¡¨ï¼Œç¬¦å·è¡¨å°†è¿™äº›ç¬¦å·åç§°å’Œåœ°å€å…³è”èµ·æ¥ã€‚ç¬¦å·è¡¨å¯ä»¥é€šè¿‡ &lt;code&gt;Mach-O&lt;/code&gt; ç›®æ ‡æ–‡ä»¶åœ°å€å¯ä»¥é€šè¿‡ &lt;code&gt;LC_SYMTAB&lt;/code&gt; åŠ è½½å‘½ä»¤æŒ‡å®šçš„ &lt;code&gt;symoff&lt;/code&gt; æ‰¾åˆ°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;dyld&lt;/code&gt; æ˜¯ä¸€ä¸ªç”¨æˆ·æ€è¿›ç¨‹ï¼Œæ˜¯ç”±è‹¹æœå…¬å¸æ¥è¿›è¡Œç»´æŠ¤ã€‚ä»å†…æ ¸çš„è§’åº¦æ¥çœ‹ï¼Œ &lt;code&gt;dyld&lt;/code&gt; æ˜¯ä¸€ä¸ªå¯æ’å…¥çš„ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºç¬¬ä¸‰æ–¹è¿æ¥å™¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;Dyld-å…±äº«åº“&quot;&gt;&lt;a href=&quot;#Dyld-å…±äº«åº“&quot; class=&quot;headerlink&quot; title=&quot;Dyld å…±äº«åº“&quot;&gt;&lt;/a&gt;&lt;code&gt;Dyld&lt;/code&gt; å…±äº«åº“&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Dyld&lt;/code&gt; çš„å¦ä¸€ä¸ªæœºåˆ¶å°±æ˜¯å…±äº«åº“ç¼“å­˜ï¼Œå…±äº«åº“ç¼“å­˜ï¼šä¸€äº›åº“ç»è¿‡é¢„å…ˆé“¾æ¥ï¼Œç„¶åä¿å­˜åœ¨ç£ç›˜çš„ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚é‡‡ç”¨å…±äº«åº“ç¼“å­˜çš„é¢„åŠ è½½æ¨¡å¼ï¼Œå¯ä»¥èŠ‚çœåŠ è½½æ—¶é—´ã€‚åœ¨ &lt;code&gt;iOS 3.0&lt;/code&gt; å &lt;code&gt;Apple&lt;/code&gt; å°±å¼€å§‹æŠŠä¸€äº›åŸºç¡€åº“ç§»åˆ°æ¬¡ç¼“å­˜ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¸¸ç”¨åˆ°çš„ &lt;code&gt;UIKit&lt;/code&gt;ã€&lt;code&gt;Foundation&lt;/code&gt;ã€&lt;code&gt;Quartz&lt;/code&gt;ã€&lt;code&gt;AVFoundation&lt;/code&gt;ã€&lt;code&gt;StoreKit&lt;/code&gt; ç­‰ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‚è€ƒèµ„æ–™:&lt;/strong&gt;&lt;br&gt;æ·±å…¥è§£æ &lt;code&gt;Mac OS X &amp;amp; iOS æ“ä½œç³»ç»Ÿ&lt;/code&gt; ç¬¬å››ç« &lt;br&gt;&lt;a href=&quot;https://satanwoo.github.io/2017/10/18/abort/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOSå†…å­˜abort(Jetsam) åŸç†æ¢ç©¶&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://wereadteam.github.io/2017/03/13/Signature/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOS App ç­¾åçš„åŸç†&lt;/a&gt;  &lt;/p&gt;
&lt;p&gt;æœ€åä¸€æ¬¡ä¿®æ”¹ï¼š&lt;/p&gt;
&lt;p&gt;10æœˆ9æ—¥ 02ï¼š09ï¼š45ï¼Œå¹¿å·å¤©æ²³ğŸ &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;iOS-XNU-è¿›ç¨‹åŠ-Mach-O-æ ¼å¼&quot;&gt;&lt;a href=&quot;#iOS-XNU-è¿›ç¨‹åŠ-Mach-O-æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;iOS XNU - è¿›ç¨‹åŠ Mach-O æ ¼å¼&quot;&gt;&lt;/a&gt;iOS XNU - è¿›ç¨‹åŠ Mach-O 
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS XNU å†…æ ¸" scheme="http://yoursite.com/tags/iOS-XNU-%E5%86%85%E6%A0%B8/"/>
    
  </entry>
  
  <entry>
    <title>iOS XNU - å†…å­˜ç®¡ç†æ¨¡å‹</title>
    <link href="http://yoursite.com/2019/10/05/iOS%20XNU%20-%20Mach-O%20%E6%A0%BC%E5%BC%8F/"/>
    <id>http://yoursite.com/2019/10/05/iOS XNU - Mach-O æ ¼å¼/</id>
    <published>2019-10-05T06:14:46.750Z</published>
    <updated>2020-05-20T13:18:18.663Z</updated>
    
    <content type="html">&lt;h1 id=&quot;iOS-XNU-è¿›ç¨‹åŠ-Mach-O-æ ¼å¼&quot;&gt;&lt;a href=&quot;#iOS-XNU-è¿›ç¨‹åŠ-Mach-O-æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;iOS XNU - è¿›ç¨‹åŠ Mach-O æ ¼å¼&quot;&gt;&lt;/a&gt;iOS XNU - è¿›ç¨‹åŠ Mach-O æ ¼å¼&lt;/h1&gt;&lt;p&gt;æœ¬æ¥å°ç¼–æƒ³å…ˆæŠŠå†…å­˜è¿™å—æ¢³ç†ä¸‹ï¼Œä½†æ˜¯è”ç³»åˆ°å†…å­˜åœ¨ &lt;code&gt;iOS&lt;/code&gt; å¹³å°ä¸­ä¹Ÿæ˜¯ &lt;code&gt;app&lt;/code&gt; ç¼–è¯‘åçš„ &lt;code&gt;Mach-O&lt;/code&gt; å¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ‰€ä»¥å°±å…ˆæŠŠ &lt;code&gt;OS&lt;/code&gt; ç¼–è¯‘å¯åŠ¨è¿‡ç¨‹æ¥è®²è¿°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ&quot;&gt;&lt;a href=&quot;#è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ&quot; class=&quot;headerlink&quot; title=&quot;è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ&quot;&gt;&lt;/a&gt;è¿›ç¨‹ç”Ÿå‘½å‘¨æœŸ&lt;/h2&gt;&lt;p&gt;å› ä¸ºå°ç¼–æ˜¯ä¸€ä½ &lt;code&gt;iOSer&lt;/code&gt; è¿™é‡Œè®²è§£è¿›ç¨‹å¯ä»¥å¤§æ¦‚ç†è§£ä¸ºï¼š&lt;strong&gt;è¿›ç¨‹ == &lt;code&gt;App&lt;/code&gt;&lt;/strong&gt;ï¼Œä¸‹é¢ç»™å‡ºè¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸã€‚è¿›ç¨‹çš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸ºï¼š&lt;strong&gt;åˆ›å»ºï¼ˆSIDLï¼‰ã€è¿è¡Œï¼ˆSRUNï¼‰ã€ç¡çœ ï¼ˆSSLEEPï¼‰ã€åœæ­¢ï¼ˆSSTOPï¼‰ã€é€€å‡ºingï¼ˆSZONEï¼‰å’Œç»ˆæ­¢ï¼ˆDeadï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k0gevo7iEONXQTl6x%2F-M7k1mssvT2pBaW1gbna%2F-M7k2QTK31K5V4dNyjvz%2F1877765-12ce1122453ddc54.png?alt=media&amp;amp;token=82c790db-352a-4266-aee2-60679c3d81d7&quot; alt=&quot;process-lifecycle.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;åˆ›å»ºï¼ˆSIDLï¼‰&quot;&gt;&lt;a href=&quot;#åˆ›å»ºï¼ˆSIDLï¼‰&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºï¼ˆSIDLï¼‰&quot;&gt;&lt;/a&gt;åˆ›å»ºï¼ˆSIDLï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;SIDL&lt;/code&gt;&lt;/strong&gt; è¿™ä¸ªçŠ¶æ€æ˜¯è¢«çˆ¶è¿›ç¨‹åˆšåˆš &lt;code&gt;Fork&lt;/code&gt; åˆ›å»ºç”Ÿæˆä¸€ä¸ªå”¯ä¸€çš„ &lt;code&gt;PID&lt;/code&gt;ï¼Œå¤„äºä¸€ä¸ªä¸´æ—¶ç©ºé—²çŠ¶æ€ã€‚æ­¤æ—¶è®©ç„¶è¢«ç§°ä¸ºï¼š&lt;strong&gt;â€œæ­£åœ¨åˆå§‹åŒ–â€&lt;/strong&gt;ï¼Œä¸ä¼šå“åº”ä»»ä½•çš„ä¿¡å·å’Œæ“ä½œã€‚è¿™ä¸ªåˆå§‹åŒ–çš„è¿‡ç¨‹æ˜¯åœ¨å•çº¿ç¨‹ä¸­æ¥è¿›è¡Œå†…å­˜å¸ƒå±€è®¾ç½®å’ŒåŠ è½½æ‰€éœ€è¦çš„å¼•æ¥æ¨¡å—ã€‚&lt;br&gt;å®ç°å¤„ç†å®Œæˆåªæœ‰è¿›ç¨‹å¯ä»¥æ‰§è¡Œï¼ŒåŒæ—¶ä¸ä¼šè¿”å› &lt;strong&gt;&lt;code&gt;SIDL&lt;/code&gt;&lt;/strong&gt; çŠ¶æ€ã€‚&lt;strong&gt;ç›¸å½“ä¸ç”¨æˆ·åœ¨æ‰‹æœºå±å¹•ç‚¹å‡» &lt;code&gt;ICON&lt;/code&gt; æŒ‰é’®åæ‰§è¡Œã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;è¿è¡Œï¼ˆSRUNï¼‰&quot;&gt;&lt;a href=&quot;#è¿è¡Œï¼ˆSRUNï¼‰&quot; class=&quot;headerlink&quot; title=&quot;è¿è¡Œï¼ˆSRUNï¼‰&quot;&gt;&lt;/a&gt;è¿è¡Œï¼ˆSRUNï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;SRUN&lt;/code&gt;&lt;/strong&gt; å¦‚æœåœ¨è¿›ä¸€æ­¥æ¥è¿›è¡Œç»†åˆ†å¯ä»¥åˆ†ä¸ºä¸¤ç§ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;(1)å¯è¿è¡ŒçŠ¶æ€ï¼šå½“ä¸€ä¸ªè¿›ç¨‹è¢«æ·»åŠ åˆ°è¿è¡Œé˜Ÿåˆ—åœ¨ç­‰å¾…æ—¶æœŸï¼Œä½†æ˜¯å› ä¸º &lt;code&gt;CPU&lt;/code&gt; å¿™äºè¿è¡Œå…¶ä»–çš„ &lt;code&gt;App&lt;/code&gt; æ­¤æ—¶è¿˜æ²¡æœ‰åŠ è½½æ”¹è¿›ç¨‹çš„å¯„å­˜å™¨æ—¶ &lt;strong&gt;æ—¢çŸ­æš‚çŠ¶æ€&lt;/strong&gt;ã€‚&lt;br&gt;(2)è¿è¡ŒçŠ¶æ€ï¼šå½“ &lt;code&gt;CPU&lt;/code&gt; ä»è¿è¡Œé˜Ÿåˆ—ä¸­å¼€å§‹æ‰§è¡Œè¿›ç¨‹çš„å¯„å­˜å™¨ï¼Œæ”¹ &lt;code&gt;App&lt;/code&gt; ä¹Ÿå°±å¤„äºè¿è¡Œè½¬å°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ &lt;code&gt;App&lt;/code&gt;(è¿›ç¨‹) åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­æ—¶é—´ç‰‡ç”¨å®Œæˆ–è€…æ˜¯è¢«æ›´é«˜ä¼˜å…ˆçº§çš„è¿›ç¨‹å ç”¨æ—¶ï¼Œæ­¤æ—¶ä¼šç”± è¿è¡Œè½¬æ€åŠ å…¥åˆ°å¯ä»¥è¿è¡Œé˜Ÿåˆ—ä¸­å˜ä¸ºå¯è¿è¡ŒçŠ¶æ€ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ &lt;code&gt;iOS&lt;/code&gt; ä¸­ &lt;code&gt;App&lt;/code&gt; å¯åŠ¨çš„æ ‡å¿—å¦‚ä¸‹ == &lt;code&gt;SRUN&lt;/code&gt; ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ä¸‹é¢æ‰§è¡Œæ˜¯åœ¨ç³»ç»ŸåŠ è½½å®Œ `Mach-O` å’Œ `dyld` é“¾æ¥åº“ä¹‹åæ‰§è¡Œ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class AppDelegate: &lt;span class=&quot;built_in&quot;&gt;UIResponder&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;UIApplicationDelegate&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func application(_ applicatxion: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;, didFinishLaunchingWithOptions launchOptions: [&lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;.LaunchOptionsKey: Any]?) -&amp;gt; Bool &amp;#123; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//æ¯æ¬¡ `App` ç¬¬ä¸€æ¬¡åŠ è½½æˆ–è€…ä»åå° --&amp;gt; å‰å°å‡ä¼šæ‰§è¡Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationDidBecomeActive(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ç¡çœ ï¼ˆSSLEEPï¼‰&quot;&gt;&lt;a href=&quot;#ç¡çœ ï¼ˆSSLEEPï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ç¡çœ ï¼ˆSSLEEPï¼‰&quot;&gt;&lt;/a&gt;ç¡çœ ï¼ˆSSLEEPï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;SSLEEP&lt;/code&gt;&lt;/strong&gt; åœ¨ &lt;code&gt;App&lt;/code&gt; æ‰§è¡Œè¿‡ç¨‹ä¸­å¯èƒ½å‡ºç°ç­‰å¾…æŸä¸€ä¸ªèµ„æºæˆ–è€…æ˜¯è¿›è¡Œåå°å·¥ä½œï¼Œè¿™æ—¶è¿›ç¨‹å°±ä¸è¦ä½¿ç”¨ &lt;code&gt;CPU&lt;/code&gt; ç”šè‡³ä¸ç”¨è¿›å…¥ &lt;strong&gt;å¯è¿è¡Œé˜Ÿåˆ—&lt;/strong&gt; è€Œæ˜¯è¿›è¡Œç¡çœ ã€‚å½“å†æ¬¡è·å–æ”¹èµ„æºæˆ–è€…è¿›è¡Œå‰å° &lt;strong&gt;é€šå¸¸ä¼šé‡æ–°åŠ å…¥åˆ°å¯è¿è¡Œé˜Ÿåˆ—ï¼Œå¹¶ä¸”å½“åœ¨å½“å‰è¿è¡Œé˜Ÿåˆ—ä¹‹åã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;è¿™é‡Œç¡çœ çŠ¶æ€ä¹Ÿå¯ä»¥åœ¨ç»“æŸä¿¡å·æ—¶é—´æ¥å¤„ç†ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;pid_suspend&lt;/code&gt;&lt;/strong&gt; å’Œ &lt;strong&gt;&lt;code&gt;pid_resume&lt;/code&gt;&lt;/strong&gt; å¯ä»¥å®ç° &lt;code&gt;App&lt;/code&gt; è¿›è¡Œä¼‘çœ å’Œå”¤é†’ä¹‹é—´çš„åˆ‡æ¢ã€‚è¿™ä¸ªç¡çœ æˆ‘ä»¬å¯ä»¥æˆä¸º&lt;strong&gt;æ·±åº¦ç¡çœ &lt;/strong&gt;ï¼Œè¿™ä¸ªæ“ä½œæ˜¯åœ¨æˆ‘ä»¬è¯´çš„ &lt;code&gt;Mach&lt;/code&gt; å±‚é¢æ¥å®ç°çš„ï¼Œå¯ä»¥ç©é™æ¬¡æ¥è¿›è¡Œåˆ‡æ¢æ“ä½œã€‚&lt;br&gt;&lt;strong&gt;åœ¨æ‰‹æœºä¸­æˆ‘ä»¬é‡‡ç”¨æŒ‰ &lt;code&gt;HOME&lt;/code&gt; é”®å°±æ˜¯åŸºç¡€æ­¤æ¥å®ç°ï¼ŒApp ç¡çœ çŠ¶æ€ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;åœ¨åº”ç”¨ç¨‹åºä» &lt;code&gt;SRUN&lt;/code&gt; çŠ¶æ€åˆ°æˆ‘ä»¬æ‰€è¯´çš„ &lt;code&gt;SSLEEP&lt;/code&gt; ä¼‘çœ çŠ¶æ€è¿‡ç¨‹ä¸­åœ¨ &lt;code&gt;iOS&lt;/code&gt; ä¼šæ‰§è¡Œå¦‚ä¸‹æ“ä½œï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;å¯ä»¥æ–‡ä»¶ &lt;code&gt;xxxx.plist&lt;/code&gt; è®¾ç½® &lt;code&gt;UIApplicationExitsOnSuspend&lt;/code&gt; || &lt;code&gt;Application does not run in background&lt;/code&gt; è®¾ç½®å¯¹åº”çš„å±æ€§ &lt;code&gt;true&lt;/code&gt; || &lt;code&gt;false&lt;/code&gt; æ¥è®¾ç½®è¿›å…¥åå°è®¾ç½®ï¼Œåœ¨ &lt;code&gt;App&lt;/code&gt; ä¸­æŒ‰ä¸‹ &lt;code&gt;Home&lt;/code&gt; é”® == &lt;code&gt;SSLEEP&lt;/code&gt;ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;class AppDelegate: &lt;span class=&quot;built_in&quot;&gt;UIResponder&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;UIApplicationDelegate&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//ä¸‹é¢æ˜¯åœ¨è¿è¡ŒæœŸé—´ç‚¹å‡» `Home` é”®ï¼Œ`App` è¿›è¡Œåå°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationWillResignActive(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationDidEnterBackground(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//æ­¤ä½ç½®å¦‚æœæœ‰éœ€æ±‚å¯ä»¥å®ç°å»¶è¿Ÿè¿›å…¥åå°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;span class=&quot;comment&quot;&gt;//ä»åå°è¿›å…¥è¿è¡ŒçŠ¶æ€ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationWillEnterForeground(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationDidBecomeActive(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;gt;&lt;/p&gt;
&lt;h3 id=&quot;åœæ­¢ï¼ˆSSTOPï¼‰&quot;&gt;&lt;a href=&quot;#åœæ­¢ï¼ˆSSTOPï¼‰&quot; class=&quot;headerlink&quot; title=&quot;åœæ­¢ï¼ˆSSTOPï¼‰&quot;&gt;&lt;/a&gt;åœæ­¢ï¼ˆSSTOPï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;SSTOP&lt;/code&gt;&lt;/strong&gt; è¿™ä¸ªçŠ¶æ€æ˜¯é€šè¿‡ä¸€ä¸ªç‰¹æ®Šçš„ä¿¡å·&lt;strong&gt;&lt;code&gt;TSTOP&lt;/code&gt; || &lt;code&gt;TOSTOP&lt;/code&gt;&lt;/strong&gt;æ¥æ—¶æ­£åœ¨è¿›è¡Œçš„ &lt;code&gt;App&lt;/code&gt; åœæ­¢è¿è¡Œï¼Œä½¿ç¨‹åºæ¥å¤„åœ¨ &lt;strong&gt;æ·±åº¦ç¡çœ çŠ¶æ€&lt;/strong&gt;ã€‚å¯ä»¥é€šè¿‡ä¿¡å· &lt;strong&gt;&lt;code&gt;CONT&lt;/code&gt;&lt;/strong&gt; æ¥åˆ‡ä¸ºå¯è¿è¡ŒçŠ¶æ€æ¥é‡æ–°è¢«è°ƒåº¦ã€‚ &lt;/p&gt;
&lt;h3 id=&quot;é€€å‡ºingï¼ˆSZONEï¼‰&quot;&gt;&lt;a href=&quot;#é€€å‡ºingï¼ˆSZONEï¼‰&quot; class=&quot;headerlink&quot; title=&quot;é€€å‡ºingï¼ˆSZONEï¼‰&quot;&gt;&lt;/a&gt;é€€å‡ºingï¼ˆSZONEï¼‰&lt;/h3&gt;&lt;p&gt;åœ¨ç¨‹åºæ‰§è¡Œå®Œä¹‹åè¿è¡Œ &lt;code&gt;exit()&lt;/code&gt; æ¥å¯¹ç¨‹åºè¿›è¡Œé€€å‡ºã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;iOS&lt;/code&gt; ä¸­ç¨‹åºçš„å…³é—­ == &lt;code&gt;SZONE&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç¨‹åºåœ¨å…³é—­æ—¶ `iOS` çš„å‡½æ•°è°ƒç”¨ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;class AppDelegate: &lt;span class=&quot;built_in&quot;&gt;UIResponder&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;UIApplicationDelegate&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;      func applicationWillTerminate(_ application: &lt;span class=&quot;built_in&quot;&gt;UIApplication&lt;/span&gt;) &amp;#123;  &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;ç»ˆæ­¢ï¼ˆDeadï¼‰&quot;&gt;&lt;a href=&quot;#ç»ˆæ­¢ï¼ˆDeadï¼‰&quot; class=&quot;headerlink&quot; title=&quot;ç»ˆæ­¢ï¼ˆDeadï¼‰&quot;&gt;&lt;/a&gt;ç»ˆæ­¢ï¼ˆDeadï¼‰&lt;/h3&gt;&lt;p&gt;åœ¨ç¨‹åºé€€å‡ºä¹‹åï¼Œä¹Ÿå°±æ˜¯ä¼šç»ˆæ­¢è¯¥è¿›ç¨‹æ‰€æœ‰çº¿ç¨‹ã€‚åœ¨æ­¤ä¹‹å‰ä¼šæç«¯çš„æ—¶é—´å‡ºç°ä¸€ä¸ªåƒµå°¸çŠ¶æ€ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;åƒµå°¸çŠ¶æ€ï¼š&lt;/strong&gt; è¿›ç¨‹çš„ç©ºå£³ï¼Œå ç”¨çš„èµ„æºå…¨éƒ¨é‡Šæ”¾ï¼Œåªæ˜¯å¯¹åº”çš„ &lt;code&gt;PID&lt;/code&gt; è¿˜åœ¨å ç”¨ã€‚å¦‚æœçˆ¶ç±»è¿›è¡Œæ²¡é¢„é‡Šæ”¾å°±äº¤ç”±çˆ¶ç±»çº¿ç¨‹ï¼Œå¦‚æœé‡Šæ”¾å°±äº¤ç»™å…¶ç¥–å…ˆè¿›ç¨‹ï¼ˆ&lt;code&gt;PID&lt;/code&gt; = 1ï¼‰ å¯ä»¥ç†è§£ä¸ºæ“ä½œç³»ç»Ÿæ¥è¿›è¡Œæ”¶å…»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;&gt;&lt;a href=&quot;#å¯æ‰§è¡Œæ–‡ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å¯æ‰§è¡Œæ–‡ä»¶&quot;&gt;&lt;/a&gt;å¯æ‰§è¡Œæ–‡ä»¶&lt;/h2&gt;&lt;p&gt;ç‰¹æ®Šæ–‡ä»¶åœ¨å†…å­˜ä¸­åŠ è½½æ‰§è¡Œå°±æ˜¯æˆ‘ä»¬æ‰€è§åˆ°çš„è¿›ç¨‹ï¼Œæ‰§è¡Œè¿‡ç¨‹ä¸­æ–‡ä»¶ä¸­ä¼šæœ‰ä¸€ä¸ªç­¾åæ¥è¡¨æ˜å½“å‰æ–‡ä»¶æ˜¯å¦æœ‰æ•ˆï¼šâ€œé­”æ•°â€ã€‚&lt;br&gt;ä¸‹é¢ç»™å‡º &lt;code&gt;OS X&lt;/code&gt; ä¸­å¯¹åº”çš„é­”æ•°å’Œå¯æ‰§è¡Œæ–‡ä»¶ç±»å‹ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;strong&gt;æ‰§è¡Œæ ¼å¼&lt;/strong&gt;&lt;/th&gt;
&lt;th&gt;é­”æ•°&lt;/th&gt;
&lt;th&gt;ç”¨é€”&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;é€šç”¨äºŒè¿›åˆ¶æ ¼å¼&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;0xcafebabess&lt;/code&gt;ï¼ˆå°å°¾é¡ºåºï¼‰   &lt;code&gt;0xbebafeca&lt;/code&gt;ï¼ˆå¤§å°¾é¡ºåºï¼‰&lt;/td&gt;
&lt;td&gt;åŒ…å«å¤šç§æ¶æ„çš„äºŒè¿›åˆ¶æ ¼å¼ï¼Œç›®å‰åªåœ¨ &lt;code&gt;OS X&lt;/code&gt; ä½¿ç”¨ã€‚ ç›®å‰æˆ‘ä»¬è§è¿‡ä¸€äº› &lt;code&gt;Framework&lt;/code&gt; çš„åº“å¯ä»¥åœ¨ &lt;code&gt;Mac&lt;/code&gt; çš„è™šæ‹Ÿæœºä¸Šè¿è¡ŒåŠæ”¯æŒ &lt;code&gt;Intel&lt;/code&gt; çš„ &lt;code&gt;i386&lt;/code&gt;ç­‰ï¼ŒåŒæ—¶ä¹Ÿæ”¯æŒç§»åŠ¨ç«¯çš„ &lt;code&gt;ARM&lt;/code&gt; çš„ 32 ä½å’Œ 64 ä½é«˜é€šå¤„ç†å™¨ã€‚&lt;strong&gt;åŒ…ä½“åå¤§ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Mach-O&lt;/code&gt;&lt;/strong&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;0xfeedface&lt;/code&gt;ï¼ˆ32ä½ï¼‰ &lt;code&gt;0xfeedfacf&lt;/code&gt;ï¼ˆ64ä½ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;code&gt;OS X&lt;/code&gt; åŸç”ŸäºŒè¿›åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹é¢ç»™å‡ºåœ¨ &lt;code&gt;Fat&lt;/code&gt;ï¼ˆé€šç”¨äºŒè¿›åˆ¶æ ¼å¼ï¼‰ VS &lt;code&gt;Mach&lt;/code&gt; æ ¼å¼å¤´æ–‡ä»¶ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k0gevo7iEONXQTl6x%2F-M7k1mssvT2pBaW1gbna%2F-M7k2luA1DFjTMhevnny%2F1877765-898ef103c8cbaa7d.png?alt=media&amp;amp;token=ed90d759-c48e-4306-9a3c-ced32ff741cb&quot; alt=&quot;fat-mach-header-info.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;èƒ–äºŒè¿›åˆ¶ï¼ˆFatï¼‰&quot;&gt;&lt;a href=&quot;#èƒ–äºŒè¿›åˆ¶ï¼ˆFatï¼‰&quot; class=&quot;headerlink&quot; title=&quot;èƒ–äºŒè¿›åˆ¶ï¼ˆFatï¼‰&quot;&gt;&lt;/a&gt;èƒ–äºŒè¿›åˆ¶ï¼ˆFatï¼‰&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;fat_headers&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;magic&lt;/code&gt;ï¼šå›ºå®šå€¼åœ¨ä¸Šé¢ç»™å‡º &lt;code&gt;0xcafebabe&lt;/code&gt;ï¼Œæ¥è¡¨ç¤ºé€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶ï¼›&lt;br&gt;&lt;code&gt;nfa_arch&lt;/code&gt;ï¼šå½“å‰é€šç”¨äºŒè¿›åˆ¶åŒ…å«çš„æ¶æ„æ•°ç›®ã€‚ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;fat_arch&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;cputype&lt;/code&gt;ï¼šå®šä¹‰çš„ &lt;code&gt;CPU&lt;/code&gt; ç±»å‹ï¼›&lt;br&gt;&lt;code&gt;cpusubtype&lt;/code&gt;ï¼šå®šä¹‰çš„æœºå™¨æ ‡è¯†ç¬¦ï¼›&lt;br&gt;&lt;code&gt;offset&lt;/code&gt;ï¼šæ¶æ„çš„äºŒè¿›åˆ¶ä»£ç åœ¨æ•´ä¸ªé€šç”¨äºŒè¿›åˆ¶æ–‡ä»¶ä¸­çš„åç§»é‡ï¼›&lt;br&gt;&lt;code&gt;magic&lt;/code&gt;ï¼šå†…å±‚äºŒè¿›åˆ¶ä»£ç å¤§å°ï¼›&lt;br&gt;&lt;code&gt;magic&lt;/code&gt;ï¼šå¯¹å…¶é¡µè¾¹ç•Œï¼ˆ4kï¼‰ï¼Œè¡¨ç¤º 2 å¹‚å‡½æ•°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨é€šç”¨äºŒè¿›åˆ¶ä»£ç åŠ è½½æ‰§è¡Œæ—¶ï¼Œ&lt;code&gt;Mach&lt;/code&gt; åŠ è½½å™¨ä¼šæ ¹æ®è‡ªå·±çš„æ¶æ„åŠ è½½é€‚åˆæ¶æ„ä»£ç ã€‚æ‰€ä»¥ä¸ç›¸å…³çš„æ¶æ„ä»£ç ä¸ç”¨å ç”¨ç›¸å…³çš„å†…å­˜ï¼Œä½†æ˜¯åŠ è½½æ•´ä¸ª &lt;code&gt;IPA&lt;/code&gt; åŒ…ä½“ä¼šæ¯”è¾ƒå¤§ã€‚è¿™é‡Œå¯ä»¥é‡‡ç”¨ &lt;code&gt;lipo&lt;/code&gt; æ¥å¯¹äºŒè¿›åˆ¶æ–‡ä»¶è¿›è¡Œé˜‰å‰²ï¼Œ&lt;a href=&quot;&quot;&gt;&lt;code&gt;lipo&lt;/code&gt;é˜‰å‰²æ–‡ä»¶&lt;/a&gt;&lt;br&gt;&lt;strong&gt;é€šç”¨äºŒè¿›åˆ¶çš„é•œåƒæ–‡ä»¶åšäº†ä¼˜åŒ–ï¼Œå¯¹å…¶é¡µè¾¹ç•Œï¼Œå†…æ ¸åªéœ€åŠ è½½ç¬¬ä¸€é¡µå°±å¯ä»¥è¯»å–æ–‡ä»¶ã€‚ç”¨è¿™ä¸ªæ–‡ä»¶å½“åšç›®å½•åŠ è½½åˆé€‚çš„é•œåƒã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;Mach-O-äºŒè¿›åˆ¶æ ¼å¼&quot;&gt;&lt;a href=&quot;#Mach-O-äºŒè¿›åˆ¶æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;Mach-O äºŒè¿›åˆ¶æ ¼å¼&quot;&gt;&lt;/a&gt;&lt;code&gt;Mach-O&lt;/code&gt; äºŒè¿›åˆ¶æ ¼å¼&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;&lt;code&gt;mach_header&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;magic&lt;/code&gt;ï¼š&lt;code&gt;0xfeedface&lt;/code&gt; è¡¨ç¤º 32 ä½äºŒè¿›åˆ¶ï¼Œ&lt;code&gt;0xfeedfacf&lt;/code&gt; è¡¨ç¤º 64 ä½äºŒè¿›åˆ¶æ–‡ä»¶ï¼›&lt;br&gt;&lt;code&gt;cputype&lt;/code&gt; &amp;amp; &lt;code&gt;cpusubtype&lt;/code&gt;ï¼š&lt;code&gt;CPU&lt;/code&gt; ç±»å‹å’Œå­ç±»å‹ï¼›&lt;br&gt;&lt;code&gt;filetype&lt;/code&gt;ï¼šæ–‡ä»¶ç±»å‹ï¼ˆå¯æ‰§è¡Œæ–‡ä»¶ã€åº“æ–‡ä»¶ã€æ ¸å¿ƒè½¬å‚¨æ–‡ä»¶ã€å†…æ ¸æ‹“å±•ç­‰ï¼‰ï¼›&lt;br&gt;&lt;code&gt;ncmds&lt;/code&gt; &amp;amp; &lt;code&gt;sizeofncmds&lt;/code&gt;ï¼šç”¨äºåŠ è½½å™¨çš„ â€œåŠ è½½å‘½ä»¤â€ çš„æ¡ç›®å’Œå¤§å°ï¼›&lt;br&gt;&lt;code&gt;flags&lt;/code&gt;ï¼šåŠ¨æ€è¿æ¥å™¨çš„æ ‡å¿—ï¼ˆ&lt;strong&gt;&lt;code&gt;dyld&lt;/code&gt;&lt;/strong&gt;ï¼‰ï¼›&lt;br&gt;&lt;code&gt;Reserved&lt;/code&gt;ï¼š 64 ä½é¢„ç•™ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;æˆ‘ä»¬åœ¨ç›®å‰ç¼–è¯‘è¿‡ç¨‹æ€»é‡‡ç”¨ &lt;code&gt;Bitcode&lt;/code&gt; æ¥è¿›è¡Œç¼–ç å®é™…å°±æ˜¯ç”Ÿæˆ &lt;code&gt;Mach-O&lt;/code&gt; æ–‡ä»¶ï¼Œç„¶ååœ¨ç”± &lt;code&gt;Apple Server&lt;/code&gt; æ ¹æ®åº”ç”¨ç«¯çš„å¤„ç†æ¶æ„æ¥åœ¨å®ç°å®‰è£…æ—¶ç”Ÿæˆå¯¹åº”æ¶æ„çš„ &lt;code&gt;Mach-O&lt;/code&gt;ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;Mach-O-åŠ è½½è¿›ç¨‹&quot;&gt;&lt;a href=&quot;#Mach-O-åŠ è½½è¿›ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;Mach-O åŠ è½½è¿›ç¨‹&quot;&gt;&lt;/a&gt;&lt;code&gt;Mach-O&lt;/code&gt; åŠ è½½è¿›ç¨‹&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k0gevo7iEONXQTl6x%2F-M7k1mssvT2pBaW1gbna%2F-M7k2zQdhpr_Gwptcw_Z%2F1877765-b691948709c528af.png?alt=media&amp;amp;token=6b4e79d8-3066-4827-ab1a-37ee0c4a8da3&quot; alt=&quot;mach-o-loader.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å†…æ ¸åŠ è½½è¿›ç¨‹&quot;&gt;&lt;a href=&quot;#å†…æ ¸åŠ è½½è¿›ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;å†…æ ¸åŠ è½½è¿›ç¨‹&quot;&gt;&lt;/a&gt;å†…æ ¸åŠ è½½è¿›ç¨‹&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰éé…è™šæ‹Ÿå†…å­˜ &lt;code&gt;LC_SEGMENT&lt;/code&gt; || &lt;code&gt;LC_SEGMENT_64&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(2) åˆ›å»ºä¸»çº¿ç¨‹ &lt;code&gt;LC_MAIN&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(2) ä»£ç ç­¾å ``&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;Dyld-åŠ è½½è¿›ç¨‹&quot;&gt;&lt;a href=&quot;#Dyld-åŠ è½½è¿›ç¨‹&quot; class=&quot;headerlink&quot; title=&quot;Dyld åŠ è½½è¿›ç¨‹&quot;&gt;&lt;/a&gt;&lt;code&gt;Dyld&lt;/code&gt; åŠ è½½è¿›ç¨‹&lt;/h3&gt;&lt;p&gt;åœ¨å†…æ ¸æ‰§è¡Œ &lt;code&gt;LC_DYLINKER&lt;/code&gt; æ¥å®ç° &lt;code&gt;Dyld&lt;/code&gt; åŠ¨æ€è¿æ¥å™¨æ¥å¯åŠ¨ï¼Œç„¶åå°±ä¼šæŠŠè¿›ç¨‹çš„æ§åˆ¶æƒæ¥äº¤ç»™ &lt;code&gt;Dyld&lt;/code&gt;ï¼Œå› ä¸ºå†…æ ¸ä¼šæŠŠè¿›ç¨‹çš„å…¥å£ç‚¹è®¾ç½®ä¸º &lt;code&gt;Dyld&lt;/code&gt; çš„å…¥å£ç‚¹ã€‚&lt;br&gt;æ­¤æ—¶è¿æ¥å™¨ &lt;code&gt;Dyld&lt;/code&gt; å°±ä¼šåœ¨å¯åŠ¨æ—¶å› ä¸ºè¿›ç¨‹é‡‡ç”¨åŠ¨æ€é“¾æ¥åœ¨ &lt;code&gt;Mach-O&lt;/code&gt; é•œåƒæ–‡ä»¶ä¸­ â€œç©ºæ´â€ æ¥è¿›è¡Œå¡«è¡¥ã€‚è¿™ä¸ªè¿‡ç¨‹å¯ä»¥æˆä¸ºï¼š&lt;strong&gt;ç¬¦å·ç»‘å®šï¼ˆ&lt;code&gt;binding&lt;/code&gt;ï¼‰&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ç¬¦å·ç»‘å®šå…·ä½“å®ç°è¿‡ç¨‹&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ï¼ˆ1ï¼‰äºŒè¿›åˆ¶ä¸­ä½¿ç”¨å¤–éƒ¨å®šä¹‰çš„å‡½æ•°å’Œç¬¦å·ï¼Œè¿™æ—¶åœ¨æ–‡æœ¬æ®µä¸­ä¼šå­˜åœ¨ä¸€ä¸ª &lt;strong&gt;&lt;code&gt;__stubs&lt;/code&gt;ï¼ˆæ¡©ï¼‰&lt;/strong&gt;çš„åŒºï¼Œåœ¨è¿™ä¸ªæ¡©åŒºå­˜æ”¾æœ¬åœ°æœªå®šä¹‰çš„å ä½ç¬¦ã€‚&lt;br&gt;ï¼ˆ2ï¼‰ç¼–è¯‘å™¨ç”Ÿæˆç›¸å…³ä»£ç æ—¶åˆ›å»ºç¬¦å·æ¡©åŒºè°ƒç”¨ï¼Œé“¾æ¥å…¶åœ¨è¿è¡Œæ—¶ä¼šè§£å†³æ¡©åŒºçš„è°ƒç”¨ã€‚&lt;br&gt;ï¼ˆ3ï¼‰è¿æ¥å™¨è§£å†³çš„æ–¹å¼æ˜¯åœ¨è¢«è°ƒç”¨çš„åœ°å€å¤„é˜²æ­¢ä¸€æ¡ &lt;code&gt;JMP&lt;/code&gt; æŒ‡ä»¤ï¼Œ&lt;code&gt;JMP&lt;/code&gt; æŒ‡ä»¤ä¼šå°†æ§åˆ¶æƒäº¤ç»™çœŸå®çš„å‡½æ•°ä½“ï¼Œäºæ­¤åŒæ—¶ä¸ä¼šå¯¹æ ˆæœ‰ä»»ä½•ä¿®æ”¹ï¼Œåœ¨è°ƒç”¨çš„è¿‡ç¨‹å°±åƒç›´æ¥è°ƒç”¨çœŸå®çš„å‡½æ•°ã€‚&lt;br&gt;ï¼ˆ4ï¼‰åœ¨å®é™…é“¾æ¥è¿‡ç¨‹ä¸­ &lt;code&gt;LC_LOAD_DYLB&lt;/code&gt; å‘Šè¯‰è¿æ¥å™¨ä»å“ªé‡Œæ‰¾åˆ°å¯¹åº”çš„ç¬¦å·ï¼Œè¿æ¥å™¨&lt;strong&gt;&lt;code&gt;é‡‡ç”¨é€’å½’çš„æ–¹å¼&lt;/code&gt;&lt;/strong&gt;åŠ è½½æ¯ä¸€ä¸ªæŒ‡å®šçš„åº“ï¼Œå¹¶ä¸”æœç´¢å¯¹åº”åŒ¹é…çš„å­—ç¬¦ã€‚é“¾æ¥çš„åº“æœ‰ä¸€ä¸ªç¬¦å·è¡¨ï¼Œç¬¦å·è¡¨å°†è¿™äº›ç¬¦å·åç§°å’Œåœ°å€å…³è”èµ·æ¥ã€‚ç¬¦å·è¡¨å¯ä»¥é€šè¿‡ &lt;code&gt;Mach-O&lt;/code&gt; ç›®æ ‡æ–‡ä»¶åœ°å€å¯ä»¥é€šè¿‡ &lt;code&gt;LC_SYMTAB&lt;/code&gt; åŠ è½½å‘½ä»¤æŒ‡å®šçš„ &lt;code&gt;symoff&lt;/code&gt; æ‰¾åˆ°&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;dyld&lt;/code&gt; æ˜¯ä¸€ä¸ªç”¨æˆ·æ€è¿›ç¨‹ï¼Œæ˜¯ç”±è‹¹æœå…¬å¸æ¥è¿›è¡Œç»´æŠ¤ã€‚ä»å†…æ ¸çš„è§’åº¦æ¥çœ‹ï¼Œ &lt;code&gt;dyld&lt;/code&gt; æ˜¯ä¸€ä¸ªå¯æ’å…¥çš„ç»„ä»¶ï¼Œä¹Ÿå¯ä»¥æ›¿æ¢ä¸ºç¬¬ä¸‰æ–¹è¿æ¥å™¨ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;Dyld-å…±äº«åº“&quot;&gt;&lt;a href=&quot;#Dyld-å…±äº«åº“&quot; class=&quot;headerlink&quot; title=&quot;Dyld å…±äº«åº“&quot;&gt;&lt;/a&gt;&lt;code&gt;Dyld&lt;/code&gt; å…±äº«åº“&lt;/h3&gt;&lt;p&gt;&lt;code&gt;Dyld&lt;/code&gt; çš„å¦ä¸€ä¸ªæœºåˆ¶å°±æ˜¯å…±äº«åº“ç¼“å­˜ï¼Œå…±äº«åº“ç¼“å­˜ï¼šä¸€äº›åº“ç»è¿‡é¢„å…ˆé“¾æ¥ï¼Œç„¶åä¿å­˜åœ¨ç£ç›˜çš„ä¸€ä¸ªæ–‡ä»¶ä¸­ã€‚é‡‡ç”¨å…±äº«åº“ç¼“å­˜çš„é¢„åŠ è½½æ¨¡å¼ï¼Œå¯ä»¥èŠ‚çœåŠ è½½æ—¶é—´ã€‚åœ¨ &lt;code&gt;iOS 3.0&lt;/code&gt; å &lt;code&gt;Apple&lt;/code&gt; å°±å¼€å§‹æŠŠä¸€äº›åŸºç¡€åº“ç§»åˆ°æ¬¡ç¼“å­˜ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨å¼€å‘ä¸­å¸¸ç”¨åˆ°çš„ &lt;code&gt;UIKit&lt;/code&gt;ã€&lt;code&gt;Foundation&lt;/code&gt;ã€&lt;code&gt;Quartz&lt;/code&gt;ã€&lt;code&gt;AVFoundation&lt;/code&gt;ã€&lt;code&gt;StoreKit&lt;/code&gt; ç­‰ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;iOS-XNU-è¿›ç¨‹åŠ-Mach-O-æ ¼å¼&quot;&gt;&lt;a href=&quot;#iOS-XNU-è¿›ç¨‹åŠ-Mach-O-æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;iOS XNU - è¿›ç¨‹åŠ Mach-O æ ¼å¼&quot;&gt;&lt;/a&gt;iOS XNU - è¿›ç¨‹åŠ Mach-O 
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS XNU å†…æ ¸" scheme="http://yoursite.com/tags/iOS-XNU-%E5%86%85%E6%A0%B8/"/>
    
  </entry>
  
  <entry>
    <title>iOS XNU - å†…å­˜ç®¡ç†æ¨¡å‹</title>
    <link href="http://yoursite.com/2019/10/04/iOS%20XNU%20-%20%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E6%A8%A1%E5%9E%8B/"/>
    <id>http://yoursite.com/2019/10/04/iOS XNU - å†…å­˜ç®¡ç†æ¨¡å‹/</id>
    <published>2019-10-04T13:01:44.090Z</published>
    <updated>2020-05-20T13:19:40.502Z</updated>
    
    <content type="html">&lt;h1 id=&quot;iOS-XNU-å†…å­˜ç®¡ç†æ¨¡å‹&quot;&gt;&lt;a href=&quot;#iOS-XNU-å†…å­˜ç®¡ç†æ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;iOS XNU - å†…å­˜ç®¡ç†æ¨¡å‹&quot;&gt;&lt;/a&gt;iOS XNU - å†…å­˜ç®¡ç†æ¨¡å‹&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k0gevo7iEONXQTl6x%2F-M7k1DyEEUYr7kV6hskf%2F-M7k1_ydxPinnfXXdwkG%2F1877765-8da36eff2f60a243.png?alt=media&amp;amp;token=c4b48b2c-771b-4997-8e05-de0a27fa2a00&quot; alt=&quot;memory.png&quot;&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;iOS-XNU-å†…å­˜ç®¡ç†æ¨¡å‹&quot;&gt;&lt;a href=&quot;#iOS-XNU-å†…å­˜ç®¡ç†æ¨¡å‹&quot; class=&quot;headerlink&quot; title=&quot;iOS XNU - å†…å­˜ç®¡ç†æ¨¡å‹&quot;&gt;&lt;/a&gt;iOS XNU - å†…å­˜ç®¡ç†æ¨¡å‹&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS XNU å†…æ ¸" scheme="http://yoursite.com/tags/iOS-XNU-%E5%86%85%E6%A0%B8/"/>
    
  </entry>
  
  <entry>
    <title>iOS XNU - æ€»çº²</title>
    <link href="http://yoursite.com/2019/10/04/iOS%20XNU%20%E5%86%85%E6%A0%B8/"/>
    <id>http://yoursite.com/2019/10/04/iOS XNU å†…æ ¸/</id>
    <published>2019-10-04T11:47:23.226Z</published>
    <updated>2020-05-20T13:17:19.793Z</updated>
    
    <content type="html">&lt;h1 id=&quot;iOS-å†…æ ¸-XNU-æ€»çº²&quot;&gt;&lt;a href=&quot;#iOS-å†…æ ¸-XNU-æ€»çº²&quot; class=&quot;headerlink&quot; title=&quot;iOS å†…æ ¸ XNU -æ€»çº²&quot;&gt;&lt;/a&gt;iOS å†…æ ¸ XNU -æ€»çº²&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k0gevo7iEONXQTl6x%2F-M7k3UdMuP01BQXu8CMh%2F-M7k4KoDhvrgVYdwi0Ko%2F1877765-08e5a7043383d728.png?alt=media&amp;amp;token=f2d71aea-77d8-439e-a82c-1a510e91c258&quot; alt=&quot;mach-structature.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æ˜¯ &lt;code&gt;XNU&lt;/code&gt; å†…æ ¸åœ¨æ¶æ„å›¾ï¼Œç”±ä¸Šå›¾æˆ‘ä»¬å¯ä»¥çœ‹å‡º &lt;code&gt;XNU&lt;/code&gt; åŒ…å«ï¼š&lt;strong&gt;&lt;code&gt;Mach&lt;/code&gt; å¾®å†…æ ¸ã€&lt;code&gt;BSD&lt;/code&gt; å±‚ã€&lt;code&gt;libKern&lt;/code&gt; å’Œ &lt;code&gt;I/O Kit&lt;/code&gt;&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Mach-å¾®å†…æ ¸&quot;&gt;&lt;a href=&quot;#Mach-å¾®å†…æ ¸&quot; class=&quot;headerlink&quot; title=&quot;Mach å¾®å†…æ ¸&quot;&gt;&lt;/a&gt;&lt;code&gt;Mach&lt;/code&gt; å¾®å†…æ ¸&lt;/h2&gt;&lt;p&gt;&lt;code&gt;Mach&lt;/code&gt; å¾®å†…æ ¸ç ”å‘è€…æ˜¯å¡å†…åŸºæ¢…éš†å¤§å­¦å¼€å‘çš„æ“ä½œç³»ç»Ÿï¼Œä¸»è¦æ˜¯è‡´åŠ›äºå¼€å‘ä¸€å¥—è½»é‡çº§ä¸”é«˜æ•ˆå¹³å°ã€‚è¿™ä¸ªæˆæœçš„å°±æ˜¯æˆ‘ä»¬è®²è¿°çš„ &lt;code&gt;Mach&lt;/code&gt; å†…æ ¸ã€‚&lt;br&gt;è¯¥æ“ä½œç³»ç»ŸåŒ…å«ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;1ã€è¿›ç¨‹å’Œçº¿ç¨‹çš„æŠ½è±¡ï¼›&lt;br&gt;2ã€è™šæ‹Ÿå†…å­˜ç®¡ç†ï¼›&lt;br&gt;3ã€ä»»åŠ¡è°ƒåº¦ï¼›&lt;br&gt;4ã€è¿›ç¨‹é—´é€šä¿¡å’Œæ¶ˆæ¯ä¼ é€’æœºåˆ¶ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;BSD&quot;&gt;&lt;a href=&quot;#BSD&quot; class=&quot;headerlink&quot; title=&quot;BSD&quot;&gt;&lt;/a&gt;&lt;code&gt;BSD&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;BSD&lt;/code&gt; æ˜¯å»ºç«‹åœ¨ &lt;code&gt;Mach&lt;/code&gt; åŸºç¡€ä¸Šï¼ŒåŒæ ·ä¹Ÿæ˜¯ &lt;code&gt;XNU&lt;/code&gt; ä¸å¯åˆ†å‰²çš„ä¸€éƒ¨åˆ†ã€‚è¿™ä¸€å±‚ä¹Ÿæ˜¯æä¾›äº† &lt;code&gt;POSIX&lt;/code&gt; å…¼å®¹æ€§ï¼Œæä¾›çš„æ›´é«˜å±‚æ¬¡çš„æŠ½è±¡ã€‚åŒ…å«ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;1ã€&lt;code&gt;UNIX&lt;/code&gt;è¿›ç¨‹æ¨¡å‹ï¼›&lt;br&gt;2ã€&lt;code&gt;POSIX&lt;/code&gt; çº¿ç¨‹æ¨¡å‹åŠå…¶ç›¸å…³çš„åŒæ­¥åŸè¯­ï¼›&lt;br&gt;3ã€&lt;code&gt;UNIX&lt;/code&gt;ç”¨æˆ·æ¨¡å‹å’Œç»„ï¼›&lt;br&gt;4ã€ç½‘ç»œåè®®æ ˆï¼›&lt;br&gt;5ã€æ–‡ä»¶è®¿é—®ç³»ç»Ÿï¼›&lt;br&gt;6ã€è®¾å¤‡è®¿é—®ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;libKern&quot;&gt;&lt;a href=&quot;#libKern&quot; class=&quot;headerlink&quot; title=&quot;libKern&quot;&gt;&lt;/a&gt;&lt;code&gt;libKern&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;åœ¨å†…æ ¸æ„å»ºæ—¶éƒ½ä¼šé‡‡ç”¨ &lt;code&gt;C&lt;/code&gt; å’Œæ±‡ç¼–æ¥å®ç°ï¼Œè€Œ &lt;code&gt;XNU&lt;/code&gt; æ˜¯é‡‡ç”¨ &lt;code&gt;I/O Kit&lt;/code&gt; æ¥å®ç°é©±åŠ¨ï¼Œå†æ¬¡åŸºç¡€ä¸Šå¯ä»¥ç’ä½ &lt;code&gt;C++&lt;/code&gt; æ¥å®ç°ç¼–å†™ã€‚äºæ˜¯å°±åœ¨æ­¤çš„åŸºç¡€ä¸ŠåŒ…å« &lt;code&gt;libKern&lt;/code&gt; åº“ã€‚&lt;/p&gt;
&lt;h2 id=&quot;I-O-Kit&quot;&gt;&lt;a href=&quot;#I-O-Kit&quot; class=&quot;headerlink&quot; title=&quot;I/O Kit&quot;&gt;&lt;/a&gt;&lt;code&gt;I/O Kit&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;è¿™æ˜¯ &lt;code&gt;Apple&lt;/code&gt; å¯¹å¸¸è§ &lt;code&gt;XNU&lt;/code&gt; å¼•å…¥ &lt;code&gt;I/O Kit&lt;/code&gt; è®¾å¤‡é©±åŠ¨æ¡†æ¶ï¼Œæ˜¯ä¸€ä¸ªå®Œæ•´çš„è‡ªåŒ…å«æ‰§è¡Œç¯å¢ƒï¼Œè®©å¼€å‘è€…å¿«é€Ÿåˆ›å»ºè®¾å¤‡é©±åŠ¨ç¨‹åºã€‚&lt;br&gt;&lt;code&gt;I/O Kit&lt;/code&gt; å½¢æˆäº†å—é™ç¯å¢ƒ &lt;code&gt;C++&lt;/code&gt;ï¼Œå¹¶ä¸”å¸¦æœ‰ &lt;code&gt;C++&lt;/code&gt; æä¾›çš„åŠŸèƒ½ï¼š&lt;strong&gt;ç»§æ‰¿&lt;/strong&gt;å’Œ&lt;strong&gt;é‡è½½&lt;/strong&gt;ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;iOS-å†…æ ¸-XNU-æ€»çº²&quot;&gt;&lt;a href=&quot;#iOS-å†…æ ¸-XNU-æ€»çº²&quot; class=&quot;headerlink&quot; title=&quot;iOS å†…æ ¸ XNU -æ€»çº²&quot;&gt;&lt;/a&gt;iOS å†…æ ¸ XNU -æ€»çº²&lt;/h1&gt;&lt;p&gt;&lt;img src=&quot;https://gblobs
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS XNU å†…æ ¸" scheme="http://yoursite.com/tags/iOS-XNU-%E5%86%85%E6%A0%B8/"/>
    
  </entry>
  
  <entry>
    <title>iOS UI ä¼˜åŒ– - Core Text</title>
    <link href="http://yoursite.com/2019/07/22/Core%20Text%20%E5%AF%8C%E6%96%87%E6%9C%AC%E7%BC%96%E8%BE%91/"/>
    <id>http://yoursite.com/2019/07/22/Core Text å¯Œæ–‡æœ¬ç¼–è¾‘/</id>
    <published>2019-07-22T14:51:09.042Z</published>
    <updated>2020-05-20T13:05:56.949Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Core-Text-å¯Œæ–‡æœ¬ç¼–è¾‘&quot;&gt;&lt;a href=&quot;#Core-Text-å¯Œæ–‡æœ¬ç¼–è¾‘&quot; class=&quot;headerlink&quot; title=&quot;Core Text å¯Œæ–‡æœ¬ç¼–è¾‘&quot;&gt;&lt;/a&gt;Core Text å¯Œæ–‡æœ¬ç¼–è¾‘&lt;/h1&gt;&lt;p&gt;åœ¨ &lt;code&gt;Core Graphics&lt;/code&gt; åé¢ä¸€ç¯‡æ–‡ç« æœ¬è¯¥å¯¹ &lt;code&gt;Core Image&lt;/code&gt; æ¡†æ¶è¿›è¡Œæ•´ç†ï¼Œä½†æ˜¯åŸºäº &lt;code&gt;Core Graphics&lt;/code&gt; çš„å¯Œæ–‡æœ¬ç¼–è¾‘ &lt;code&gt;Core Text&lt;/code&gt; æ¡†æ¶æ›´æ–¹ä¾¿è®²è¿°ã€‚è€Œä¸”ç»“åˆè‡ªå·±å…´è¶£å’Œå¥½ç©çš„ç¨‹åº¦åœ¨è®²è¿°è‡ªå·±å¯¹ &lt;code&gt;Texture&lt;/code&gt; å³ &lt;code&gt;ASDK&lt;/code&gt; å’Œ &lt;code&gt;YYKit&lt;/code&gt; è¯¦ç»†æè¿°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Core-Text-ç»“æ„å±‚çº§&quot;&gt;&lt;a href=&quot;#Core-Text-ç»“æ„å±‚çº§&quot; class=&quot;headerlink&quot; title=&quot;Core Text ç»“æ„å±‚çº§&quot;&gt;&lt;/a&gt;Core Text ç»“æ„å±‚çº§&lt;/h2&gt;&lt;p&gt;è¿™é‡Œå°ç¼–å¯¹ &lt;code&gt;Core Text&lt;/code&gt; åœ¨å®ç°çš„å±‚æ¬¡ç»“æ„ä¸Šæ‰€å¤„ä½ç½®ï¼Œä»¥åŠåœ¨å¯¹ &lt;code&gt;UIKit&lt;/code&gt; æ¡†æ¶æˆ‘ä»¬å¸¸è§æ§ä»¶ &lt;code&gt;UITextFiled&lt;/code&gt;ã€&lt;code&gt;UITextView&lt;/code&gt; å’Œ &lt;code&gt;UILabel&lt;/code&gt; å…·ä½“å®ç°åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kE8qFvBCueh8O8d1_%2F1877765-d9fa387d512dd42d.png?alt=media&amp;amp;token=3d406869-6df1-4a7c-bcb6-6c228a9d1fce&quot; alt=&quot;Core Text.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯å°ç¼–æ ¹æ® &lt;strong&gt;2018 WWDC&lt;/strong&gt; ä¸­ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2018/221/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;TextKit Best Practices&lt;/a&gt; å’Œ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2013/210&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Introducing Text Kit&lt;/a&gt; å¾—å‡º &lt;code&gt;Core Graphics&lt;/code&gt;ã€&lt;code&gt;Core Text&lt;/code&gt; å’Œ &lt;code&gt;UIKit&lt;/code&gt; ä¸­èƒ½å¤Ÿå®ç°æ–‡æœ¬ç»˜åˆ¶çš„æ§ä»¶å®ç°ç»“æ„å›¾ã€‚&lt;br&gt;æ ¹æ®ä¸Šé¢ç»“æ„å¯ä»¥çœ‹å‡ºï¼š&lt;br&gt;ï¼ˆ1ï¼‰åŸºäº &lt;code&gt;Quartz&lt;/code&gt; å°è£…çš„ &lt;code&gt;Core Graphics&lt;/code&gt; ä¸º &lt;code&gt;Core Text&lt;/code&gt; çš„å®ç°åŸºç¡€ã€‚è€Œä¸” &lt;code&gt;Quartz&lt;/code&gt; å¯ä»¥ç›´æ¥å¤„ç†å­—ä½“å’Œå­—å½¢å°†æ–‡å­—æ¸²æŸ“åˆ°ç•Œé¢ï¼Œä¹Ÿæ˜¯åœ¨ Apple åŸºç¡€åº“ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å­—ä½“æ¨¡å—ã€‚&lt;br&gt;ï¼ˆ2ï¼‰åŸºäº &lt;code&gt;Core Text&lt;/code&gt; å°è£…å®ç°çš„ &lt;code&gt;Text Kit&lt;/code&gt; ä¸ºåœ¨ &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; ä¸­æ–‡æœ¬æ˜¾ç¤ºæ§ä»¶ &lt;code&gt;TypeTextFiled&lt;/code&gt;ã€&lt;code&gt;TypeTextView&lt;/code&gt; ç­‰æä¾›æœ€ç›´æ¥çš„æ¥å£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Core-Text-API-æ—&quot;&gt;&lt;a href=&quot;#Core-Text-API-æ—&quot; class=&quot;headerlink&quot; title=&quot;Core Text API æ—&quot;&gt;&lt;/a&gt;Core Text API æ—&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kEDtfL0uYk56NKxq3%2F1877765-4ace47c5dff6e0f5.png?alt=media&amp;amp;token=c3271fd4-c3ac-48f7-b4b6-f04a2373e841&quot; alt=&quot;Core Text API æ—.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Core Text&lt;/code&gt; ä½œä¸ºåœ¨ &lt;code&gt;OS&lt;/code&gt; å¯¹åº”çš„äº”å¤§å¹³å°å”¯ä¸€æ‹¥æœ‰å®ç°æ–‡å­—ç»˜åˆ¶èƒ½åŠ›çš„è·¨å¹³ å°æ¡†æ¶ï¼Œæ—ç±» &lt;code&gt;API&lt;/code&gt; éƒ½æ˜¯è¡¨ç¤º &lt;code&gt;CTType&lt;/code&gt; å½¢å¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Opaque-Types&quot;&gt;&lt;a href=&quot;#Opaque-Types&quot; class=&quot;headerlink&quot; title=&quot;Opaque Types&quot;&gt;&lt;/a&gt;Opaque Types&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é›†åˆæ•°æ®ç±»å‹&lt;/th&gt;
&lt;th&gt;è¡¨ç¤º &amp;amp; ä½¿ç”¨èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFont&lt;/code&gt;ï¼ˆå­—ä½“ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“ç±»å‹å‚æ•°ã€‚å­—ä½“ç‰¹å¾ä¸­åŸºæœ¬å‚æ•°è¡¨ç¤ºï¼šå­—ä½“å¤§å°ã€å­—ä½“æ‰€å±çš„æ ¼å¼æˆ–è€…æ˜¯è½¬æ¢çŸ©é˜µç­‰ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; æ˜¯åœ¨ &lt;code&gt;UIKit&lt;/code&gt; ä¸­æˆ‘ä»¬ç»å¸¸ä½¿ç”¨è®¾ç½®å­ç±»ç±»å‹çš„ &lt;code&gt;UIFont&lt;/code&gt; çš„ &lt;code&gt;(__birdge CTFont *)&lt;/code&gt; è¡¨ç°å½¢å¼ï¼Œåœ¨é‡‡ç”¨ &lt;code&gt;context&lt;/code&gt; ç»˜åˆ¶ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶ç¡®å®šå­—ä½“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFontCollection&lt;/code&gt;ï¼ˆå­—ä½“ç»„ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“ç»„åˆã€‚å­—ä½“ç»„åˆä¹Ÿå³æ˜¯å¯¹ä¸€ç»„æ–‡å­—æˆ–è€…ä¸€æ®µçŸ­æ–‡å­—å­—ä½“é›†åˆï¼Œæä¾›å¯¹åŒä¸€æ®µæ–‡å­—ä¸åŒæ ¼å¼æ–‡å­—å†…å®¹å­—ä½“è®¿é—®å’Œè·å–ã€‚ä¸€å¥è¯ï¼š&lt;strong&gt;å­—ä½“æ•´ä½“è¡¨ç¤ºã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFontDescriptor&lt;/code&gt;ï¼ˆå­—ä½“æè¿°ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“ç±»å‹æè¿°ã€‚å­—ä½“æè¿°å¯ä»¥ç”¨è·å–ã€æŒ‡å®šæˆ–è€…æ˜¯ä¿®æ”¹å½“å‰å­—ä½“å±æ€§ï¼Œå­—ä½“ç›¸å…³å±æ€§ï¼ˆå­—ä½“åå­—ã€ä½ç½®ç‚¹å¤§å°å’Œå˜åŒ–ç­‰ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFrame&lt;/code&gt;ï¼ˆç»˜åˆ¶ç”»å¸ƒï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå¤šè¡Œæ–‡å­—ç»˜åˆ¶ç”»å¸ƒã€‚&lt;code&gt;CTFrame&lt;/code&gt;ï¼ˆç»˜åˆ¶ç”»å¸ƒï¼‰æ˜¯ &lt;code&gt;Core Text&lt;/code&gt; å®ç°æ–‡å­—ç»˜åˆ¶å¯¹å¤–é›†ä¸­ä½“ç°å½¢å¼ï¼Œå…¶ä¸­ç¡®å®šç»˜åˆ¶å‚æ•°ï¼šç”»å¸ƒåŒºåŸŸï¼ˆ&lt;code&gt;Range&lt;/code&gt;ï¼‰ã€ç»˜åˆ¶è·¯å¾„ï¼ˆ&lt;code&gt;Path&lt;/code&gt;ï¼‰å’Œç»˜åˆ¶æ–‡æœ¬å‚æ•°ä¿¡æ¯ï¼ˆ&lt;code&gt;Attribtes&lt;/code&gt;ï¼‰ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; å¯¹äºå•è¡Œæ¥è¯´å¯ä»¥ç²¾ç¡®è·å–åœ¨ç”»å¸ƒï¼šè¡Œæ•°å’Œæ¯ä¸€è¡Œå¯¹åº”å¼€å¤´åæ ‡ã€‚åœ¨è·å–ç»˜åˆ¶çš„ç”»å¸ƒæ—¶è°ƒç”¨å¯¹åº”çš„ &lt;strong&gt;&lt;code&gt;CTFrameDraw(CTFrame, CGContext)&lt;/code&gt;&lt;/strong&gt; åœ¨ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶æ–‡å­—æ˜¾ç¤ºè¯¦ç»†å†…å®¹ã€‚ &lt;strong&gt;3ã€&lt;/strong&gt; &lt;strong&gt;&lt;code&gt;CTFrame&lt;/code&gt; ä¸ä»…æ”¯æŒåœ¨ &lt;code&gt;main thread&lt;/code&gt; ä¸­è¿›è¡Œç»˜åˆ¶ï¼ŒåŒæ ·ä¹Ÿæ”¯æŒåœ¨ &lt;code&gt;background Thread&lt;/code&gt; è¿›è¡Œå†…å®¹çš„ç»˜åˆ¶ã€‚&lt;/strong&gt; è¿™ä¹Ÿæ˜¯ &lt;code&gt;YYKit&lt;/code&gt; å’Œ &lt;code&gt;Texture&lt;/code&gt; æ”¯æŒåå°ç»˜åˆ¶æ§ä»¶å®ç°çš„åŸºç¡€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFramesetter&lt;/code&gt;ï¼ˆç”»å¸ƒğŸ­ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“å…·ä½“ç»˜åˆ¶ç”Ÿæˆå·¥å‚ã€‚ç”»å¸ƒå·¥å‚æ ¹æ®è¦æ˜¾ç¤ºçš„å¯Œæ–‡æœ¬ä¿¡æ¯ã€æ˜¾ç¤ºç”»å¸ƒè·¯å¾„å’Œç”»å¸ƒå…·ä½“çš„åŒºåŸŸï¼ˆ&lt;code&gt;Range&lt;/code&gt;ï¼‰æ¥ç”Ÿæˆå¯¹åº”å±•ç¤ºçš„æ˜¾ç¤ºç”»å¸ƒçš„æ•ˆæœã€‚&lt;strong&gt;2ã€&lt;/strong&gt; &lt;code&gt;CTFramesetter&lt;/code&gt;ï¼ˆç”»å¸ƒå·¥å‚ï¼‰æ˜¯é‡‡ç”¨ &lt;code&gt;CFFrameDraw&lt;/code&gt; æ¥å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘ç»˜åˆ¶åŸºç¡€ï¼Œä½†æ˜¯å¦‚æœé‡‡ç”¨ &lt;code&gt;CTLineDraw&lt;/code&gt; æˆ–è€…æ˜¯ &lt;code&gt;CTRunDraw&lt;/code&gt; å½¢ä¼¼å°±å¦å½“åˆ«è®ºäº†ã€‚ &lt;strong&gt;&lt;code&gt;YYText&lt;/code&gt; ä¸­ç»˜åˆ¶çš„å°±æ˜¯æŒ‰ç…§ &lt;code&gt;CTLineDraw&lt;/code&gt; å’Œ &lt;code&gt;CTRunDraw&lt;/code&gt; æ¥ç»˜åˆ¶çš„ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTGlyphInfo&lt;/code&gt;ï¼ˆå­—ä½“ä¿¡æ¯ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨å­—ä½“å¯¹äº &lt;code&gt;Glyph ID&lt;/code&gt; ç‰¹æ®Šçš„æ˜ å°„å…³ç³»ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTLine&lt;/code&gt;ï¼ˆç”»å¸ƒä¸­è¡Œï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨å…·ä½“æ‰§è¡Œ &lt;code&gt;Frame&lt;/code&gt;ï¼ˆç”»å¸ƒï¼‰ä¸­ä¸€è¡Œã€‚æ˜¯ç»„æˆç”»å¸ƒç»˜åˆ¶ &lt;code&gt;Frame&lt;/code&gt; ä¸­å•ç‹¬çš„ä¸€è¡Œï¼ŒåŒæ—¶ä¹Ÿæ˜¯å­—ä½“ä¸åŒæ ¼å¼ç»„æˆåœ¨ä¸€è¡Œä¸­ç»„æˆæœ€å°å•å…ƒ &lt;strong&gt;&lt;code&gt;Run&lt;/code&gt;&lt;/strong&gt;ï¼ˆå—ï¼‰çš„é›†åˆã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; åœ¨å®ç°å¯Œæ–‡æœ¬ç»˜åˆ¶çš„è¿‡ç¨‹ä¸­å¯ä»¥é‡‡ç”¨ &lt;strong&gt;&lt;code&gt;CTLineDraw(CTLine, CGContext)&lt;/code&gt;&lt;/strong&gt; æ–¹å¼æ¥ç»˜åˆ¶å½“å‰è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTParagaraphStyle&lt;/code&gt;ï¼ˆæ®µè½æ ¼å¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; æ®µè½æ ¼å¼è¡¨ç¤ºåœ¨æ–‡æœ¬ç»˜åˆ¶æ—¶ï¼Œæ®µè½æ®µè½ä¹‹é—´è®¾ç½®åŸºæœ¬å‚æ•°æˆ–è€…å•ç‹¬ä¸€æ®µä¿¡æ¯åŸºæœ¬æ ¼å¼ã€‚ä¾‹å¦‚ï¼šå¯¹å…¶æ ·å¼ã€æˆªå–æ ·å¼å’Œæ’å¸ƒçš„æ–¹å‘ç­‰ç­‰&lt;strong&gt;2ã€&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRun&lt;/code&gt;ï¼ˆå—ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨å¯Œæ–‡æœ¬ç»˜åˆ¶è¿‡ç¨‹ä¸­æ ¼å¼ç›¸åŒæœ€å°å•å…ƒã€‚æ ¹æ®å­—ä½“è®¾ç½®çš„ &lt;code&gt;CTFont&lt;/code&gt;ï¼ˆå­—ä½“ï¼‰å‚æ•°ä¸åŒåœ¨ç»˜åˆ¶è¿‡ç¨‹ä¸­å¯ä»¥åˆ†å‰²ä¸ºæ ¼å¼ä¸€è‡´ä¸€ä¸ªä¸€ä¸ªå•å…ƒï¼Œæ—¢æ˜¯ &lt;code&gt;Run&lt;/code&gt;ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; åœ¨æ–‡æœ¬ç¼–è¾‘è¿‡ç¨‹ä¸­å¯ä»¥æ ¹æ®åœ¨ç”»å¸ƒä¸­éœ€è¦æ˜¾ç¤º &lt;code&gt;Lines&lt;/code&gt;ï¼Œç„¶ååœ¨ä½†å•ç‹¬ &lt;code&gt;Line&lt;/code&gt; ä¸­è·å¾— &lt;code&gt;Run&lt;/code&gt; é‡‡ç”¨ &lt;strong&gt;&lt;code&gt;CTRunDraw(CTRun, CGContext)&lt;/code&gt;&lt;/strong&gt; æ¥å®ç°å•ä¸ª &lt;code&gt;Run&lt;/code&gt;ï¼ˆå—ï¼‰ç‹¬è‡ªç»˜åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRunDelegate&lt;/code&gt;ï¼ˆå—åè®®ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨è¿è¡Œæ—¶çš„ä¸€ä¸ªè¿è¡Œå§”æ‰˜ï¼Œåœ¨å®ç°è®¡ç®—æ˜¯å¯ä»¥è°ƒæ•´å­—å½¢ä¸Šå‡ã€ä¸‹é™å’Œå½“å‰ç»˜åˆ¶å­—å½¢å®½é«˜ã€‚è¿™ä¸ª &lt;code&gt;API&lt;/code&gt; æ˜¯æˆ‘ä»¬åœ¨å®ç°æ–‡å­—å›¾ç‰‡æ¢æ··æ’çš„åŸºç¡€ï¼Œåœ¨ç”Ÿæˆ &lt;code&gt;Frame&lt;/code&gt; æ—¶è®¡ç®—å½“å‰ &lt;code&gt;Line&lt;/code&gt; é‡Œé¢ &lt;code&gt;Run&lt;/code&gt; éœ€è¦ç»˜åˆ¶ç´ æç±»å‹ï¼Œç„¶ååœ¨æ”¹ç´ æç±»å‹ä½ç½®è®¾ç½® &lt;code&gt;Image&lt;/code&gt; çš„ &lt;code&gt;Ascent&lt;/code&gt;ã€&lt;code&gt;Descent&lt;/code&gt;ã€&lt;code&gt;Width&lt;/code&gt; å’Œ &lt;code&gt;Height&lt;/code&gt; æ¥è®¾ç½®å½“å‰å›¾ç‰‡ç»˜åˆ¶å‚æ•°ä¿¡æ¯ï¼Œç„¶ååœ¨å®é™…ç»˜åˆ¶ä¸­åœ¨å½“å‰éœ€è¦ç»˜åˆ¶çš„ &lt;code&gt;Image&lt;/code&gt; é‡‡ç”¨ &lt;strong&gt;&lt;code&gt;CGContextDrawImage(CGContext, CGRect, CGImageRef)&lt;/code&gt;&lt;/strong&gt; ç»˜åˆ¶å½“å‰å›¾ç‰‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTTextTab&lt;/code&gt;ï¼ˆæ–‡æœ¬æ ‡ç­¾ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨æ–‡æœ¬æ®µè½ä¸­æ ·å¼æ ‡ç­¾ï¼Œç”¨æ¥ä¿å­˜æ®µè½ä¹‹é—´æ®µè½å¯¹å…¶æ–¹å¼å’Œä½ç½®ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTTypesetter&lt;/code&gt;ï¼ˆæ’ç‰ˆå·¥å‚ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“å…·ä½“ç»˜åˆ¶æ¥æ‰§è¡Œå¸ƒå±€ã€‚å¯ä»¥é€šè¿‡ &lt;strong&gt;&lt;code&gt;CTFramesetterCreateWithTypesetter(CTTypesetter)&lt;/code&gt; ç”Ÿæˆä¸Šæ–‡å±•ç¤º &lt;code&gt;CTFramesetter&lt;/code&gt;ï¼ˆç»˜åˆ¶å·¥å‚ï¼‰ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;Reference&quot;&gt;&lt;a href=&quot;#Reference&quot; class=&quot;headerlink&quot; title=&quot;Reference&quot;&gt;&lt;/a&gt;Reference&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é›†åˆæ•°æ®ç±»å‹&lt;/th&gt;
&lt;th&gt;è¡¨ç¤º &amp;amp; ä½¿ç”¨èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Sting Attributes&lt;/code&gt;ï¼ˆå¯Œæ–‡æœ¬å±•ç¤ºæ ·å¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯Œæ–‡æœ¬ä¸‹åˆ’çº¿æ ·å¼è®¾ç½®&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Structure&lt;/code&gt;ï¼ˆç»“æ„ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;CTTextTab&lt;/code&gt;ï¼ˆæ ‡ç­¾ï¼‰ èŒƒå›´å’Œè¡¨ï¼ŒæŸ¥æ‰¾å‘é‡ Headerã€‚&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Enumerations&lt;/code&gt;ï¼ˆæšä¸¾ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Core Text&lt;/code&gt; å­—ä½“æè¿°åŒ¹é…ã€æŒ‡å®šç»‘å®šæ ‡è¯†ç¬¦è‡ªåŠ¨æ¿€æ´»ã€æŒ‡å®š URL å­—ä½“æ³¨å†Œå¤±è´¥ã€å®šä¹‰å­—ä½“æ³¨å†ŒèŒƒæ–‡ç­‰ç­‰ã€‚&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Constants&lt;/code&gt;ï¼ˆå¸¸é‡å€¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Core Text&lt;/code&gt; ä¸­ä½¿ç”¨å¯Œæ–‡æœ¬è®¾ç½®ä¸€äº›å¸¸é‡å€¼ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Fundations&lt;/code&gt;ï¼ˆåŠŸèƒ½ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Core Text&lt;/code&gt; ä¸­ä¸€äº›åŠŸèƒ½å‚æ•°å€¼ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Data Types&lt;/code&gt;ï¼ˆæ•°æ®åˆ†ç±»ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Core Text&lt;/code&gt; ä¸­ &lt;code&gt;ATS&lt;/code&gt; å­—ä½“å‚è€ƒã€å­—ä½“é›†åˆæ’åºæè¿°ç¬¦å›è°ƒå’Œ &lt;code&gt;CT&lt;/code&gt; æè¿°ç¬¦å¤„ç†è¿›åº¦å›è°ƒã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢æ˜¯ &lt;code&gt;Core Text&lt;/code&gt; æ‰€æœ‰çš„ &lt;code&gt;API&lt;/code&gt; çš„æ¥å£ï¼ŒåŠå…¶åœ¨å®ç°å¯Œæ–‡æœ¬ç»˜åˆ¶ä¸­ç›¸å¯¹ç›¸åº”çš„ &lt;code&gt;API&lt;/code&gt; çš„ä¸»è¦åŠŸèƒ½ä½œç”¨ã€‚&lt;strong&gt;å…·ä½“ &lt;code&gt;CTFramesetter&lt;/code&gt; æ€ä¹ˆæ ·é€šè¿‡ &lt;code&gt;NSString&lt;/code&gt; æ¥ç”Ÿæˆ &lt;code&gt;CTFrameRef&lt;/code&gt; ç„¶ååœ¨ &lt;code&gt;UIKit&lt;/code&gt; åŸºç¡€çš„æ˜¾ç¤ºæ§ä»¶ä¸Šç»˜åˆ¶å‡ºæ¥çš„å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Core-Text-æœ€å°ç³»ç»Ÿ&quot;&gt;&lt;a href=&quot;#Core-Text-æœ€å°ç³»ç»Ÿ&quot; class=&quot;headerlink&quot; title=&quot;Core Text æœ€å°ç³»ç»Ÿ&quot;&gt;&lt;/a&gt;&lt;code&gt;Core Text&lt;/code&gt; æœ€å°ç³»ç»Ÿ&lt;/h2&gt;&lt;p&gt;è¿™é‡Œè¯´çš„æœ€å°ç³»ç»Ÿæ¦‚å¿µæ˜¯åœ¨ç”µå­å•ç‰‡æœºä¸­æœ€å°ç³»ç»Ÿå•å…ƒï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯ &lt;code&gt;Core Text&lt;/code&gt; å®ç°æœ€åŸºæœ¬æ–‡å­—æ’ç‰ˆã€‚&lt;br&gt;&lt;strong&gt;ä¸‹é¢è´´å‡ºåœ¨å®ç°ä¸­ç»å…¸ä»£ç ï¼š&lt;/strong&gt;   &lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)drawRect:(&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)rect &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; drawRect:rect];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextSetTextMatrix&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGAffineTransformIdentity&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextTranslateCTM&lt;/span&gt;(context, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size.height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextScaleCTM&lt;/span&gt;(context, &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;-1.0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGMutablePathRef&lt;/span&gt; path = &lt;span class=&quot;built_in&quot;&gt;CGPathCreateMutable&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPathAddRect&lt;/span&gt;(path, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *attString = [[&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; alloc] initWithString:&lt;span class=&quot;string&quot;&gt;@&quot;Hello world! Welcome to learn RICH TEXT knowladge.&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFramesetterRef frameSetter = CTFramesetterCreateWithAttributedString((&lt;span class=&quot;built_in&quot;&gt;CFAttributedStringRef&lt;/span&gt;)attString);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameRef frame = CTFramesetterCreateFrame(frameSetter, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, attString.length), path, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameDraw(frame, context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(frame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(path);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(frameSetter);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»§æ‰¿ &lt;code&gt;UIView&lt;/code&gt; æ¥è‡ªå®šä¹‰ &lt;code&gt;FYView&lt;/code&gt; ç„¶åé‡å†™ &lt;code&gt;drawRect:&lt;/code&gt;ï¼Œåœ¨ä¸Šé¢ &lt;code&gt;drawRect:&lt;/code&gt; é‡æ–°å†™ä¸Šé¢ä»£ç ã€‚&lt;strong&gt;åœ¨ &lt;code&gt;Core Text&lt;/code&gt; å®é™…ç»˜åˆ¶ä¸­ä¸»è¦åˆ†ä¸ºï¼šè®¡ç®—è½¬æ¢åœ¨ &lt;code&gt;UIKit&lt;/code&gt; çš„åæ ‡ã€è®¾ç½®ç»˜åˆ¶ &lt;code&gt;Path&lt;/code&gt;ã€åˆå§‹åŒ– &lt;code&gt;CFFramesetter&lt;/code&gt; ç”»å¸ƒå·¥å‚ç”Ÿæˆç”»å¸ƒå’Œåœ¨ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶ã€‚&lt;/strong&gt;&lt;br&gt;å…·ä½“åˆ†ä¸º 6 ä¸ªæ­¥éª¤ï¼š&lt;br&gt;&lt;strong&gt;Step 1ï¼š&lt;/strong&gt;è·å–å½“å‰ç»˜åˆ¶ä¸Šä¸‹æ–‡ &lt;code&gt;context&lt;/code&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 2ï¼š&lt;/strong&gt;æŠŠ &lt;code&gt;Core Text&lt;/code&gt; ä¸­å·¦ä¸‹è§’çš„åæ ‡ç‚¹è½¬æ¢ä¸º &lt;code&gt;UIKit&lt;/code&gt; å·¦ä¸Šè§’çš„åæ ‡ç‚¹ï¼›&lt;br&gt;&lt;strong&gt;Step 3ï¼š&lt;/strong&gt;è®¾ç½®ç»˜åˆ¶çš„ &lt;code&gt;path&lt;/code&gt; è·¯å¾„ï¼ŒæŠŠå½“å‰ &lt;code&gt;UIView&lt;/code&gt; çš„ &lt;code&gt;bounds&lt;/code&gt; è®¾ç½®ä¸ºç»˜åˆ¶åŒºåŸŸï¼›&lt;br&gt;&lt;strong&gt;Step 4ï¼š&lt;/strong&gt;é€šè¿‡ &lt;code&gt;String&lt;/code&gt; åˆå§‹åŒ– &lt;code&gt;NSAttributedString&lt;/code&gt; æ¥åˆ›å»º &lt;strong&gt;&lt;code&gt;CTFramesetterRef&lt;/code&gt;&lt;/strong&gt; ç„¶åæ ¹æ®ç”»å¸ƒå·¥å‚åˆ›å»º &lt;code&gt;CTFrameRef&lt;/code&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 5ï¼š&lt;/strong&gt;åœ¨ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶ç”»å¸ƒå†…å®¹ï¼›&lt;br&gt;&lt;strong&gt;Step 6ï¼š&lt;/strong&gt;é‡Šæ”¾åˆ›å»º &lt;code&gt;frame&lt;/code&gt;ã€&lt;code&gt;path&lt;/code&gt; å’Œ &lt;code&gt;framesetter&lt;/code&gt; çš„ &lt;code&gt;CFTypeRef&lt;/code&gt; å¯¹è±¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨å½“å‰ &lt;code&gt;Core Text&lt;/code&gt; ç»˜åˆ¶çš„åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘ä»¬åœ¨çœ‹ä¸€ä¸‹å…·ä½“ç»˜åˆ¶å®ç°ä¸­ &lt;code&gt;CTTypeRef&lt;/code&gt; ä¸­ &lt;strong&gt;&lt;code&gt;Framesetter&lt;/code&gt;ã€&lt;code&gt;Frame&lt;/code&gt;ã€ &lt;code&gt;Line&lt;/code&gt; å’Œ &lt;code&gt;Run&lt;/code&gt; ä¹‹é—´çš„å…³ç³»&lt;/strong&gt;ï¼Œä»¥åŠåœ¨å®é™…ç»˜åˆ¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šå¯¹åº”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kEMTkga5I2kb3adio%2F1877765-80857db5a123d571.png?alt=media&amp;amp;token=07b120dd-3bf1-4a2e-b566-33b6005240a7&quot; alt=&quot;Core Text æœ€å°ç³»ç»Ÿ.png&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;å°ç¼–åœ¨å®ç°å›¾æ–‡æ··æ’å®ç°ä¸­ï¼Œè´´å‡ºä¸‹é¢ä¸€æ®µå¯¹äºå¯Œæ–‡æœ¬ &lt;code&gt;CFFrameRef&lt;/code&gt; æ¥è®¡ç®— &lt;code&gt;Image&lt;/code&gt; å¯Œæ–‡æœ¬ç»˜åˆ¶å¸ƒå±€ä»£ç ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å– frameRef ä¸­ Lines&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *lines = (&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)CTFrameGetLines(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; lineCount = lines.count;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å– frameRef ä¸­ Each Line å¼€å¤´ Point&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; lineOrigins[lineCount];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CTFrameGetLineOrigins(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), lineOrigins);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; imgIndex = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//éå† Each Line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; lineCount; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTLineRef lineRef = (__bridge CTLineRef)lines[i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//è·å– Each Line çš„ Run&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *runsArray = (&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)CTLineGetGlyphRuns(lineRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//éå† Each Run&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; runObj &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; runsArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTRunRef runRef = (__bridge CTRunRef)runObj;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *runAttribs = (&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)CTRunGetAttributes(runRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTRunDelegateRef delegate = (__bridge CTRunDelegateRef)[runAttribs valueForKey:(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)kCTRunDelegateAttributeName];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (delegate == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *metaDic = CTRunDelegateGetRefCon(delegate);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (![metaDic isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; runBounds;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; ascent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è·å– run çš„ width&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.size.width = CTRunGetTypographicBounds(runRef, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), &amp;amp;ascent, &amp;amp;descent, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//æ ¹æ®ä¸Šä¸‹åç§»è·å– run çš„ height&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.size.height = ascent + descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; xOffset = CTLineGetOffsetForStringIndex(lineRef, CTRunGetStringRange(runRef).location, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.origin.x = lineOrigins[i].x + xOffset;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.origin.y = lineOrigins[i].y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.origin.y -= descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGPathRef&lt;/span&gt; pathRef = CTFrameGetPath(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; colRect = &lt;span class=&quot;built_in&quot;&gt;CGPathGetBoundingBox&lt;/span&gt;(pathRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; delegateRect = &lt;span class=&quot;built_in&quot;&gt;CGRectOffset&lt;/span&gt;(runBounds, colRect.origin.x, colRect.origin.y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»ä¸Šé¢ä¸¤æ®µä»£ç å¯ä»¥çœ‹å‡ºåœ¨ &lt;code&gt;CTTypeRef&lt;/code&gt; ç±»æ—ä¸­ç±»çš„å…³ç³»å¦‚ä¸‹ï¼š&lt;br&gt;&lt;strong&gt;ï¼ˆ1ï¼‰&lt;/strong&gt; &lt;code&gt;CTFramesetter&lt;/code&gt; é€šè¿‡åˆå§‹åŒ– &lt;code&gt;NSAttributedString&lt;/code&gt; æ¥åˆ›å»ºç»˜åˆ¶ç”»å¸ƒ &lt;code&gt;CTFrameRef&lt;/code&gt; å¯¹åº”çš„ç±»ï¼›&lt;br&gt;&lt;strong&gt;ï¼ˆ2ï¼‰&lt;/strong&gt; é€šè¿‡ç”»å¸ƒ &lt;code&gt;CTFrame&lt;/code&gt; å¯ä»¥è·å–æ‰€æœ‰çš„ &lt;code&gt;Line&lt;/code&gt; åŸºæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šè¡Œæ•°ã€æ¯è¡Œ &lt;code&gt;Start Point&lt;/code&gt;ç­‰å‚æ•°ã€‚å†é€šè¿‡åæ ‡è½¬æ¢å°±å¯ä»¥è®¡ç®—å½“å‰ &lt;code&gt;Line&lt;/code&gt; åœ¨ &lt;code&gt;UIKit&lt;/code&gt; ç•Œé¢ä¸Šå¸ƒå±€ç»˜åˆ¶ä¿¡æ¯ï¼Œ&lt;strong&gt;åœ¨å®é™…çš„ç»˜åˆ¶æ—¶å¯ä»¥é€‰ç”¨ &lt;code&gt;CTLineDraw(CTLineRef, CGContext)&lt;/code&gt; æ¥æ›¿ä»£ &lt;code&gt;CTFrameDraw(CTFrameRef, CGContext)&lt;/code&gt; æ•´ä¸ªç”»å¸ƒåœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶&lt;/strong&gt;ï¼›&lt;br&gt;&lt;strong&gt;ï¼ˆ3ï¼‰&lt;/strong&gt;æ•ˆä»¿ä» &lt;code&gt;CTFrameRef&lt;/code&gt; ä¸­è·å–å¯¹åº”çš„ &lt;code&gt;Line&lt;/code&gt;ï¼ŒåŒæ ·å¯ä»¥åœ¨ &lt;code&gt;Each Line&lt;/code&gt; ä¸­æ¥è·å– &lt;code&gt;Core Text&lt;/code&gt; æœ€åŸºæœ¬çš„å•å…ƒ &lt;code&gt;CTRunRef&lt;/code&gt;ã€‚é€šè¿‡è·å–çš„ &lt;code&gt;Each Line&lt;/code&gt; ä¸­æ‰€æœ‰çš„ &lt;code&gt;Run&lt;/code&gt;ï¼Œç„¶åå€ŸåŠ© &lt;code&gt;CTRunDelegateRef&lt;/code&gt; åœ¨å®é™…ç»˜åˆ¶è¿‡ç¨‹ä¸­åŠ¨æ€è®¾ç½®å½“å‰ &lt;code&gt;Run&lt;/code&gt; å—éœ€è¦ç»˜åˆ¶ &lt;code&gt;Rect&lt;/code&gt; åŒºåŸŸã€‚&lt;strong&gt;åŒæ ·åœ¨å®é™…ç»˜åˆ¶æ—¶ä¹Ÿå¯ä»¥é‡‡ç”¨ &lt;code&gt;CTRunDraw(CTRunRef, CGContext)&lt;/code&gt; æ¥ä»£æ›¿ &lt;code&gt;CTLineDraw(CTLineRef, CGContext)&lt;/code&gt; æ¥å•ç‹¬ç»˜åˆ¶æ¯ä¸ªå­—å½¢å—ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;åœ¨å›¾æ–‡æ··æ’è¿‡ç¨‹ä¸­åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œæ ¹æ®æƒ…å†µçš„ä¸åŒä¹Ÿå¯ä»¥é‡‡ç”¨ä¸åŒçš„æ–¹å¼å®ç°æ’ç‰ˆå¼•æ“å®ç°ï¼š&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;ï¼ˆaï¼‰å¯¹äºæ’ç‰ˆçš„æ•°æ®æ¥æºäº &lt;code&gt;Server&lt;/code&gt; ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦éœ€è¦è®¿é—®åæ‰ä¼šè·å–æ•°æ®ï¼Œç„¶åæ¥åˆå§‹åŒ–æ§ä»¶ï¼Œé‰´äº &lt;code&gt;Network&lt;/code&gt; çš„å»¶è¿Ÿæ€§ï¼Œæˆ‘ä»¬å¯ä»¥é¢„å…ˆè®¾ç½®é€šè¿‡è®¾ç½® &lt;code&gt;CTRunDelegate&lt;/code&gt; æ‹“å±•åœ¨å±•ç¤ºæ—¶çš„ &lt;code&gt;Image&lt;/code&gt; çš„å‚æ•°ä¿¡æ¯ï¼›&lt;br&gt;ï¼ˆbï¼‰å¯¹è¦æ’ç‰ˆçš„æ•°æ®ä¿¡æ¯å·²çŸ¥ï¼Œåœ¨å®ç°çš„åŸºç¡€ä¸Šå¯¹ &lt;code&gt;Image&lt;/code&gt; ä½ç½®æ’å…¥ä¸´æ—¶ä»£æ›¿çš„å­—ç¬¦ä¸²ï¼Œé€šè¿‡ &lt;code&gt;CTDelegateRef&lt;/code&gt; æ¥è·å–å¯¹åº” &lt;code&gt;Image&lt;/code&gt; åŸºæœ¬å‚æ•°è®¾ç½®å½“å‰ &lt;code&gt;Run&lt;/code&gt; å—çš„ç»˜åˆ¶æ—¶ä¸Šä¸‹ç¼©è¿›ï¼Œç„¶åæ·»åŠ åˆ°å¯Œæ–‡æœ¬å­—ç¬¦ä¸²ä¸­æ­¤æ—¶ä¹Ÿå¯ä»¥è®°å½•å½“å‰æ’å…¥å­—ç¬¦ä¸²æ‰€åœ¨çš„ä½ç½®ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Core-Text-å›¾æ–‡æ··æ’å®ç°&quot;&gt;&lt;a href=&quot;#Core-Text-å›¾æ–‡æ··æ’å®ç°&quot; class=&quot;headerlink&quot; title=&quot;Core Text å›¾æ–‡æ··æ’å®ç°&quot;&gt;&lt;/a&gt;Core Text å›¾æ–‡æ··æ’å®ç°&lt;/h2&gt;&lt;p&gt;ç›®å‰ä»¥ &lt;code&gt;Core Text&lt;/code&gt; ä¸ºåŸºç¡€å®ç°å›¾æ–‡æ··æ’å®ç°æ§ä»¶ &lt;code&gt;YYKit&lt;/code&gt; ç³»åˆ—ç»„ä»¶ä¸­ &lt;code&gt;YYText&lt;/code&gt; å®ç°é€»è¾‘æœ€ä¸ºæ¸…æ™°ï¼Œç’ä½çš„æƒ…å†µä¹Ÿæœ€ä¸ºå…¨é¢ã€‚ä¸‹é¢æ ¹æ®è¦å®ç°å›¾æ–‡æ··æ’çš„æ•°æ®æ¥æºåšåŒºåˆ†æ¥åˆ†åˆ«è®²è§£æ’ç‰ˆå¼•æ“å®ç°é€»è¾‘ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ¥è‡ª-Server&quot;&gt;&lt;a href=&quot;#æ¥è‡ª-Server&quot; class=&quot;headerlink&quot; title=&quot;æ¥è‡ª Server&quot;&gt;&lt;/a&gt;æ¥è‡ª &lt;code&gt;Server&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;å½“éœ€è¦æ’ç‰ˆçš„æ•°æ®æ¥è‡ªä¸ &lt;code&gt;Server&lt;/code&gt;ï¼Œå®¢æˆ·ç«¯å’Œåå°æ¥å•†é‡åœ¨æ¨¡æ¿ä¼ è¾“æ•°æ®æ ¼å¼ã€‚è¿™é‡Œåœ¨æœ¬åœ°æ¨¡æ‹Ÿç½‘ç»œæ•°æ®åŠ è½½çš„æ•°æ®æ ¼å¼é‡‡ç”¨ &lt;strong&gt;&lt;code&gt;JSON&lt;/code&gt;&lt;/strong&gt; æ¥å®ç°ï¼Œä¸è¿‡å°ç¼–å»ºè®®å¦‚æœåå°å…è®¸çš„æƒ…å†µä¸‹å¯ä»¥å°è¯• &lt;strong&gt;&lt;code&gt;Protobuf&lt;/code&gt;&lt;/strong&gt; æ•°æ®æ ¼å¼ï¼ˆåé¢å°ç¼–ä¼šåœ¨ç½‘ç»œåè®®ä¸­å¯¹è¯¥æ ¼å¼çš„æ•°æ®è¿›è¡Œè¯¦ç»†çš„è®²è§£ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå¯¹ &lt;code&gt;Core Text&lt;/code&gt; ç»˜åˆ¶å®ç°æ­¥éª¤è¿›è¡Œåˆ’åˆ†ï¼Œç„¶åå¯¹æ¯ä¸€ä¸ªæ­¥éª¤çš„å·¥ä½œè¿›è¡Œæå–æ¥å®ç°ä¸åŒçš„åŠŸèƒ½ã€‚ä¸‹é¢åŒºåˆ†&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;(1)&lt;/strong&gt;&lt;code&gt;FYEvolveDisplay&lt;/code&gt;ï¼šæ˜¾ç¤ºç±»ï¼Œç”¨äºåœ¨å¯Œæ–‡æœ¬å®é™…ç»˜åˆ¶ï¼Œæ’ç‰ˆçš„å›¾ç‰‡çš„å›¾ç‰‡å®ç°å¡«å……å’Œå›¾ç‰‡åŠé“¾æ¥æ–‡æœ¬ç‚¹å‡»æ“ä½œç›‘å¬ï¼›&lt;br&gt;&lt;strong&gt;(2)&lt;/strong&gt;&lt;code&gt;FYFrameParser&lt;/code&gt;ï¼šæ’ç‰ˆç±»ï¼Œå¯¹éœ€è¦æ’ç‰ˆçš„å†…å®¹åŠ è½½è§£æï¼Œç„¶åç”Ÿæˆæ’ç‰ˆï¼›&lt;br&gt;&lt;strong&gt;(3)&lt;/strong&gt;&lt;code&gt;FYFrameParseConfig&lt;/code&gt;ï¼šé…ç½®ç±»ï¼Œåœ¨æ’ç‰ˆç»˜åˆ¶ä¸­æ–‡å­—åŸºæœ¬å‚æ•°çš„ &lt;code&gt;model&lt;/code&gt; é…ç½®å‚æ•°ï¼›&lt;br&gt;&lt;strong&gt;(4)&lt;/strong&gt;&lt;code&gt;FYCoreTextData&lt;/code&gt;ï¼šæ¨¡å‹ç±»ï¼Œä½œä¸ºå®é™…ç»˜åˆ¶ä¸­æ•°æ®æ˜¾ç¤ºæ‰¿è½½ä½“ï¼›&lt;br&gt;&lt;strong&gt;(5)&lt;/strong&gt;&lt;code&gt;FYCoreTextImageData&lt;/code&gt;ï¼šå›¾ç‰‡é…ç½®ç±»ï¼Œåœ¨æ’ç‰ˆç»˜åˆ¶ä¸­å›¾ç‰‡åŸºæœ¬å‚æ•°çš„ &lt;code&gt;model&lt;/code&gt; é…ç½®å‚æ•°ï¼›&lt;br&gt;&lt;strong&gt;(6)&lt;/strong&gt;&lt;code&gt;FYCoreTextLinkData&lt;/code&gt;ï¼šé“¾æ¥æ–‡æœ¬é…ç½®ç±»ï¼Œåœ¨æ’ç‰ˆç»˜åˆ¶ä¸­é“¾æ¥æ–‡å­—åŸºæœ¬å‚æ•°çš„ &lt;code&gt;model&lt;/code&gt; é…ç½®å‚æ•°ï¼›&lt;br&gt;&lt;strong&gt;(7)&lt;/strong&gt;&lt;code&gt;FYCoreTextLinkUtilts&lt;/code&gt;ï¼šé“¾æ¥æ–‡æœ¬å·¥å…·ç±»ï¼Œåœ¨ &lt;code&gt;FYEvolveDisplay&lt;/code&gt; ç‚¹å‡»ä¸­æŸ¥æ‰¾åˆ¤æ–­å½“å‰ç‚¹å‡»åœ¨åœ¨å…·ä½“å“ªä¸ªé“¾æ¥æ–‡å­—ã€‚    &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹é¢æŒ‰ç…§ï¼ˆ1ï¼‰æ•°æ®åŠ è½½è§£æç”Ÿæˆæ˜¾ç¤ºæ‰¿è½½ â€“&amp;gt; ï¼ˆ2ï¼‰ç„¶ååœ¨ç»˜åˆ¶  â€“&amp;gt; ï¼ˆ3ï¼‰æœ€ååœ¨ç‚¹å‡»ç›¸åº”æ­¥éª¤æ¥è´´å‡ºç›¸å…³ä»£ç æ®µ&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&quot;æ•°æ®è§£æ&quot;&gt;&lt;a href=&quot;#æ•°æ®è§£æ&quot; class=&quot;headerlink&quot; title=&quot;æ•°æ®è§£æ&quot;&gt;&lt;/a&gt;æ•°æ®è§£æ&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYFrameParser&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (FYCoreTextData *)parseLocalImageTemplateFile:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)path config:(FYFrameParserConfig *)config &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *imageArray = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; array];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *linkArray = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; array];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//è§£ææ•°æ®æ¨¡æ¿&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *imageTemplateAttrib  = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; loadLocalTemplateFile:path config:config imageArray:imageArray linkArray:linkArray];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//æ ¹æ®é…ç½®ä¿¡æ¯ç”Ÿæˆæ˜¾ç¤ºè½½ä½“&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextData *coreTextData = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; parseAttributeContent:imageTemplateAttrib config:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    coreTextData.imageArray = imageArray;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    coreTextData.linkArray = linkArray;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; coreTextData;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)loadLocalTemplateFile:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                       config:(FYFrameParserConfig *)config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                   imageArray:(&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *)imageArray&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                    linkArray:(&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *)linkArray &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *data = [&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; dataWithContentsOfFile:path];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableAttributedString&lt;/span&gt; *mutableAttrib = [[&lt;span class=&quot;built_in&quot;&gt;NSMutableAttributedString&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (data) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *templateArray = [&lt;span class=&quot;built_in&quot;&gt;NSJSONSerialization&lt;/span&gt; JSONObjectWithData:data options:&lt;span class=&quot;built_in&quot;&gt;NSJSONReadingAllowFragments&lt;/span&gt; error:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([templateArray isKindOfClass: [&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *dic &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; templateArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *typeDic = dic[&lt;span class=&quot;string&quot;&gt;@&quot;type&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([typeDic isEqualToString: &lt;span class=&quot;string&quot;&gt;@&quot;txt&quot;&lt;/span&gt;]) &amp;#123;&lt;span class=&quot;comment&quot;&gt;//parser text data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *textAttrib = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; parseAttributedContentFormDictionary:dic config:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [mutableAttrib appendAttributedString:textAttrib];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([typeDic isEqualToString: &lt;span class=&quot;string&quot;&gt;@&quot;img&quot;&lt;/span&gt;]) &amp;#123;&lt;span class=&quot;comment&quot;&gt;//parser image data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *imageAttrib = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; parseImageDataFromDictionary:dic config:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [mutableAttrib appendAttributedString:imageAttrib];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    FYCoreTextImageData *imageData = [[FYCoreTextImageData alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    imageData.name = dic[&lt;span class=&quot;string&quot;&gt;@&quot;name&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    imageData.url = dic[&lt;span class=&quot;string&quot;&gt;@&quot;url&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    imageData.position = mutableAttrib.length;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [imageArray addObject:imageData];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;([typeDic isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;link&quot;&lt;/span&gt;])&amp;#123;&lt;span class=&quot;comment&quot;&gt;//parser link text data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; startLoc = mutableAttrib.length;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *linkAttrib = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; parseAttributedContentFormDictionary:dic config:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [mutableAttrib appendAttributedString:linkAttrib];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    FYCoreTextLinkData *linkData = [[FYCoreTextLinkData alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; len = mutableAttrib.length - startLoc;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt; range = &lt;span class=&quot;built_in&quot;&gt;NSMakeRange&lt;/span&gt;(startLoc, len);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    linkData.range = range;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    linkData.title = dic[&lt;span class=&quot;string&quot;&gt;@&quot;content&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    linkData.url = dic[&lt;span class=&quot;string&quot;&gt;@&quot;url&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [linkArray addObject:linkData];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; mutableAttrib;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)parseAttributedContentFormDictionary:(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)dict config:(FYFrameParserConfig *)config &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableDictionary&lt;/span&gt; *attribDic = [[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; attributesWithConfig:config] mutableCopy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//Color&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; *color = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; colorFromHexString:dict[&lt;span class=&quot;string&quot;&gt;@&quot;color&quot;&lt;/span&gt;]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (color) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        attribDic[(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)kCTForegroundColorAttributeName] = (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)color.CGColor;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//Size&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; fontSize = [dict[&lt;span class=&quot;string&quot;&gt;@&quot;size&quot;&lt;/span&gt;] floatValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (fontSize &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTFontRef fontRef = CTFontCreateWithName((&lt;span class=&quot;built_in&quot;&gt;CFStringRef&lt;/span&gt;)&lt;span class=&quot;string&quot;&gt;@&quot;ArialMT&quot;&lt;/span&gt;, fontSize, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        attribDic[(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)kCTFontAttributeName] = (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)fontRef;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(fontRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *content = dict[&lt;span class=&quot;string&quot;&gt;@&quot;content&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [[&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; alloc] initWithString:content attributes:attribDic];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)parseImageDataFromDictionary:(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)dict&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                              config:(FYFrameParserConfig *)config &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTRunDelegateCallbacks callbacks;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    memset(&amp;amp;callbacks, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(CTRunDelegateCallbacks));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callbacks.version = kCTRunDelegateVersion1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callbacks.getAscent = ascentCallback;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callbacks.getDescent = descentCallback;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callbacks.getWidth = widthCallback;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTRunDelegateRef delegateRef = CTRunDelegateCreate(&amp;amp;callbacks, (__bridge &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)(dict));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;unichar&lt;/span&gt; objectReplaceChar = &lt;span class=&quot;number&quot;&gt;0xFFCC&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *conetnt = [&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; stringWithCharacters:&amp;amp;objectReplaceChar length:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *attrib = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; attributesWithConfig:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableAttributedString&lt;/span&gt; *space = [[&lt;span class=&quot;built_in&quot;&gt;NSMutableAttributedString&lt;/span&gt; alloc] initWithString:conetnt attributes:attrib];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFAttributedStringSetAttribute&lt;/span&gt;((&lt;span class=&quot;built_in&quot;&gt;CFMutableAttributedStringRef&lt;/span&gt;)space, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), kCTRunDelegateAttributeName, delegateRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(delegateRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; space;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (FYCoreTextData *)parseAttributeContent:(&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)attribContent config:(FYFrameParserConfig *)config &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFramesetterRef frameSetter = CTFramesetterCreateWithAttributedString((&lt;span class=&quot;built_in&quot;&gt;CFAttributedStringRef&lt;/span&gt;) attribContent);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//ç»˜åˆ¶é«˜åº¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; restrictSize = &lt;span class=&quot;built_in&quot;&gt;CGSizeMake&lt;/span&gt;(config.width, &lt;span class=&quot;built_in&quot;&gt;CGFLOAT_MAX&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; coreTextSize = CTFramesetterSuggestFrameSizeWithConstraints(frameSetter, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, restrictSize, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; textHeight = coreTextSize.height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//ç”Ÿæˆ CTFrameRef&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameRef frameRef = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; createFrameRefWithFrameSetter:frameSetter config:config height:textHeight];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextData *coreTextData = [[FYCoreTextData alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    coreTextData.ctFrame = frameRef;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    coreTextData.height = textHeight;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(frameRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(frameSetter);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; coreTextData;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (CTFrameRef)createFrameRefWithFrameSetter:(CTFramesetterRef)frameSetterref&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     config:(FYFrameParserConfig *)config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     height:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)height &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGMutablePathRef&lt;/span&gt; path = &lt;span class=&quot;built_in&quot;&gt;CGPathCreateMutable&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPathAddRect&lt;/span&gt;(path, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, config.width, height));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameRef frameRef = CTFramesetterCreateFrame(frameSetterref, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), path, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(path);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; frameRef;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢æ˜¯æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚æ•°æ®æ¨¡æ¿åŠ è½½æœ¬åœ°æ¨¡æ¿ç”Ÿæˆæ˜¾ç¤ºè½½ä½“ï¼ˆå³ç”»å¸ƒï¼‰è¿‡ç¨‹ã€‚&lt;br&gt;&lt;strong&gt;Step 1ï¼š&lt;/strong&gt; ç”± &lt;code&gt;Step 2&lt;/code&gt; åŠ è½½æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®ï¼Œç„¶åç”± &lt;code&gt;Step 5&lt;/code&gt; æ¥è®¡ç®—ç»˜åˆ¶ç”»å¸ƒçš„åŒºåŸŸå’Œè·¯å¾„ç”Ÿæˆå¯¹åº”ç”»å¸ƒäº¤ç»™æ¨¡å‹ç±»åœ¨è‡ªå®šä¹‰çš„ &lt;code&gt;UIKit&lt;/code&gt; æ§ä»¶ &lt;code&gt;drawRect:&lt;/code&gt; å®Œæˆç»˜åˆ¶ï¼›&lt;br&gt;&lt;strong&gt;Step 2ï¼š&lt;/strong&gt; è·å–æœ¬åœ°çš„æ•°æ®ç„¶åè§£ç ï¼Œéå†å…¶ä¸­æ•°æ®å†…å®¹è§£æå¯¹åº” &lt;code&gt;Text&lt;/code&gt;ã€&lt;code&gt;Image&lt;/code&gt; å’Œ &lt;code&gt;LinkText&lt;/code&gt; æ•°æ®ã€‚&lt;strong&gt;å¦‚æœæ˜¯ &lt;code&gt;Text&lt;/code&gt; ç±»å‹ç”± &lt;code&gt;Step 3&lt;/code&gt; æ¥æ ¹æ®å†…å®¹é…ç½®æ¥ç”Ÿæˆå¯¹åº”çš„ &lt;code&gt;NSAttributedString&lt;/code&gt; æ•°æ®ï¼Œå¦‚æœæ˜¯ &lt;code&gt;Image&lt;/code&gt; ç±»å‹å°±äº¤ç”± &lt;code&gt;Step 4&lt;/code&gt; ä¸´æ—¶å¡«å……å•ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”é€šè¿‡ &lt;code&gt;CTRunDelegateRef&lt;/code&gt; æ¥åœ¨è¿è¡Œæ—¶è®¾ç½®å½“å‰ä¸Šä¸‹ç¼©è¿›ï¼Œå¦‚æœæ˜¯ &lt;code&gt;LinkText&lt;/code&gt; ç±»å‹çš„æ•°æ®è¿˜æ˜¯ç”± &lt;code&gt;Step 3&lt;/code&gt; æ¥å®Œæˆå¤„ç†ï¼Œä½†æ˜¯è®°å½•å½“å‰ &lt;code&gt;NSAttributedString&lt;/code&gt; çš„ &lt;code&gt;Start Index&lt;/code&gt; å’Œ &lt;code&gt;End Index&lt;/code&gt; ä½ç½®&lt;/strong&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 3ï¼š&lt;/strong&gt;æ­¤æ­¥éª¤æ˜¯è§£æ &lt;code&gt;Text&lt;/code&gt; ç±»å‹çš„æ•°æ®ï¼Œæ ¹æ®è®¾ç½®çš„ &lt;code&gt;FYFrameConfig&lt;/code&gt; é…ç½®çš„åŸºç¡€ä¿¡æ¯å¯¹æ•°æ®è¿›è¡Œè§£æç”Ÿæˆå¯¹åº” &lt;code&gt;NSAttributedString&lt;/code&gt; ç±»å‹çš„æ•°æ®ï¼›&lt;br&gt;&lt;strong&gt;Step 4ï¼š&lt;/strong&gt;æ­¤æ­¥éª¤æ˜¯å¯¹ &lt;code&gt;Image&lt;/code&gt; ç±»å‹çš„æ•°æ®ç±»å‹å¯¹åº”çš„ &lt;code&gt;CTRunRef&lt;/code&gt; è¿›è¡Œä¸´æ—¶èµ‹å€¼ä¸€ä¸ªå­—ç¬¦ï¼Œç„¶åé€šè¿‡ &lt;code&gt;CTRunDelegateCallbacks&lt;/code&gt; æ¥è®¾ç½® &lt;code&gt;Run&lt;/code&gt;ï¼ˆå—ï¼‰åœ¨å®é™…ç»˜åˆ¶æ—¶ &lt;code&gt;Ascent&lt;/code&gt;ï¼ˆæ’ç‰ˆä¸Šå‡ï¼‰ å’Œ &lt;code&gt;Descent&lt;/code&gt;ï¼ˆæ’ç‰ˆä¸‹é™ï¼‰é—´è·ä»¥æ­¤æ¥ä½œä¸ºå›¾ç‰‡ç»˜åˆ¶æ—¶çš„é«˜åº¦ã€‚&lt;strong&gt;ç„¶ååœ¨å®é™…ç»˜åˆ¶è¿‡ç¨‹ä¸­éå†å½“å‰ &lt;code&gt;Run&lt;/code&gt;(å—) è®¡ç®—å½“å‰ &lt;code&gt;Image&lt;/code&gt; ç»˜åˆ¶çš„åŒºåŸŸï¼Œè·å–å›¾ç‰‡åé‡‡ç”¨ &lt;code&gt;CGContextDrawImage(CGContext, CGRect, CGImage)&lt;/code&gt; ç»˜åˆ¶å½“å‰å›¾ç‰‡&lt;/strong&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 5ï¼š&lt;/strong&gt;é€šè¿‡ &lt;code&gt;NSAttributedString&lt;/code&gt; æ¥ç”Ÿæˆ &lt;code&gt;CTFrameRef&lt;/code&gt; ç”»å¸ƒå·¥å‚ï¼Œè®¡ç®—å½“å‰éœ€è¦ç»˜åˆ¶å†…å®¹é«˜åº¦ç”± &lt;code&gt;Step 6&lt;/code&gt; æ¥ç”Ÿæˆ &lt;code&gt;CTFrameRef&lt;/code&gt;ï¼ˆç”»å¸ƒï¼‰ç„¶åèµ‹å€¼ç»™ &lt;code&gt;FYCoreTextData&lt;/code&gt; æ¨¡å‹ç±»ç”»å¸ƒï¼›&lt;br&gt;&lt;strong&gt;Step 6ï¼š&lt;/strong&gt; åˆ©ç”¨æœ€å°å•å…ƒä¸­é€šè¿‡è®¾ç½®è·¯å¾„ä½¿ç”¨ &lt;code&gt;CFFramesetterRef&lt;/code&gt;ï¼ˆç»˜åˆ¶ğŸ­ï¼‰æ¥ç”Ÿæˆå¯¹åº”éœ€è¦æ’ç‰ˆçš„ &lt;code&gt;CTFrameRef&lt;/code&gt;ï¼ˆç”»å¸ƒï¼‰ã€‚    &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å®é™…ç»˜åˆ¶&quot;&gt;&lt;a href=&quot;#å®é™…ç»˜åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;å®é™…ç»˜åˆ¶&quot;&gt;&lt;/a&gt;å®é™…ç»˜åˆ¶&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYEvolveDisplayView&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)drawRect:(&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)rect &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; drawRect:rect];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; contextRef = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextSetTextMatrix&lt;/span&gt;(contextRef, &lt;span class=&quot;built_in&quot;&gt;CGAffineTransformIdentity&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextTranslateCTM&lt;/span&gt;(contextRef, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size.height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextScaleCTM&lt;/span&gt;(contextRef, &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;-1.0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTFrameDraw(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData.ctFrame, contextRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (FYCoreTextImageData *imageData &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData.imageArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *image = [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageNamed:imageData.name];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (image) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//CGRect rect = imageData.imageRect;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//NSLog(@&quot;image data rect in display view: x:%f y:%f height:%f width:%f&quot;, rect.origin.x, rect.origin.y, rect.size.height, rect.size.width);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextDrawImage&lt;/span&gt;(contextRef, imageData.imageRect, image.CGImage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYCoreTextData&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)fillReplaceCharWithImagePosition &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageArray.count == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123; &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *lines = (&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)CTFrameGetLines(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; lineCount = lines.count;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; lineOrigins[lineCount];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameGetLineOrigins(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), lineOrigins);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; imgIndex = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextImageData *imageData = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageArray[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; lineCount; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (imageData == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123; &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTLineRef lineRef = (__bridge CTLineRef)lines[i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *runsArray = (&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)CTLineGetGlyphRuns(lineRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; runObj &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; runsArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            CTRunRef runRef = (__bridge CTRunRef)runObj;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *runAttribs = (&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)CTRunGetAttributes(runRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            CTRunDelegateRef delegate = (__bridge CTRunDelegateRef)[runAttribs valueForKey:(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)kCTRunDelegateAttributeName];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (delegate == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *metaDic = CTRunDelegateGetRefCon(delegate);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (![metaDic isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; runBounds;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; ascent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.size.width = CTRunGetTypographicBounds(runRef, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), &amp;amp;ascent, &amp;amp;descent, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.size.height = ascent + descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; xOffset = CTLineGetOffsetForStringIndex(lineRef, CTRunGetStringRange(runRef).location, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.origin.x = lineOrigins[i].x + xOffset;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.origin.y = lineOrigins[i].y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.origin.y -= descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGPathRef&lt;/span&gt; pathRef = CTFrameGetPath(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; colRect = &lt;span class=&quot;built_in&quot;&gt;CGPathGetBoundingBox&lt;/span&gt;(pathRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; delegateRect = &lt;span class=&quot;built_in&quot;&gt;CGRectOffset&lt;/span&gt;(runBounds, colRect.origin.x, colRect.origin.y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            imageData.imageRect = delegateRect;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            imgIndex++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(imgIndex == &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageArray.count) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                imageData = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                imageData = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageArray[imgIndex];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Step 1ï¼š&lt;/strong&gt;ä¸Šé¢æ˜¯åœ¨ &lt;code&gt;FYEvolveDisplayView&lt;/code&gt; ä¸­ &lt;code&gt;drawRect:&lt;/code&gt; é‡‡ç”¨ &lt;code&gt;CTFrameDraw(CTFrameRef, CGContext)&lt;/code&gt; ç»˜åˆ¶åœ¨ &lt;code&gt;UIView&lt;/code&gt; ä¸Šï¼Œç„¶åä» &lt;code&gt;FYCoreTextData&lt;/code&gt; ä¸­é€ä¸ªç»˜åˆ¶ &lt;code&gt;FYCoreTextImageData&lt;/code&gt; å–å‡ºåœ¨ &lt;strong&gt;&lt;code&gt;Step 2&lt;/code&gt;&lt;/strong&gt; è®¡ç®—å½“å‰ &lt;code&gt;Image&lt;/code&gt; å¯¹ä¸€ä¸ªçš„åŒºåŸŸã€‚ç„¶åä½¿ç”¨ &lt;code&gt;CGContextDrawImage(CGContext, CGRect, CGImageRef)&lt;/code&gt; ç»˜åˆ¶ï¼›&lt;br&gt;&lt;strong&gt;Step 2ï¼š&lt;/strong&gt;è¿™é‡Œåœ¨ä¸Šæ–‡ä¸­æœ‰å±•ç¤ºã€‚ä¸»è¦ä¸€ç‚¹ï¼š&lt;code&gt;CTFrameRef&lt;/code&gt; è·å– &lt;code&gt;Line&lt;/code&gt; æ¯è¡Œï¼Œç„¶ååœ¨éå†æ¯è¡Œçš„ &lt;code&gt;Run&lt;/code&gt;ï¼ˆå—ï¼‰åˆ¤æ–­å…¶ &lt;code&gt;CTRunDelegateRef&lt;/code&gt; å¯¹åº”çš„åè®®è®¡ç®—å½“å‰ &lt;code&gt;Image&lt;/code&gt; å¯¹åº”çš„åŒºåŸŸã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å›¾ç‰‡å’Œé“¾æ¥æ–‡å­—ç‚¹å‡»&quot;&gt;&lt;a href=&quot;#å›¾ç‰‡å’Œé“¾æ¥æ–‡å­—ç‚¹å‡»&quot; class=&quot;headerlink&quot; title=&quot;å›¾ç‰‡å’Œé“¾æ¥æ–‡å­—ç‚¹å‡»&quot;&gt;&lt;/a&gt;å›¾ç‰‡å’Œé“¾æ¥æ–‡å­—ç‚¹å‡»&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYEvolveDisplayView&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (instancetype)initWithCoder:(&lt;span class=&quot;built_in&quot;&gt;NSCoder&lt;/span&gt; *)aDecoder &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; = [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; initWithCoder:aDecoder];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; deployGestureRecognizer];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)clickComposeImageInDisplayView:(&lt;span class=&quot;built_in&quot;&gt;UIGestureRecognizer&lt;/span&gt; *)recognizer &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point = [recognizer locationInView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (FYCoreTextImageData *imageData &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData.imageArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; imageRect = imageData.imageRect;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; imagePosCoreText = imageRect.origin;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è½¬æ¢ `Core Text`ï¼ˆå·¦ä¸‹ï¼‰åæ ‡åˆ° `UIKit`ï¼ˆå·¦ä¸Šï¼‰åæ ‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        imagePosCoreText.y = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size.height - imagePosCoreText.y - imageRect.size.height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; rectInScreen = &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(imagePosCoreText.x, imagePosCoreText.y, imageRect.size.width, imageRect.size.height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;CGRectContainsPoint&lt;/span&gt;(rectInScreen, point)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;Click image of name: %@ url: %@&quot;&lt;/span&gt;, imageData.name, imageData.url);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextLinkData *linkData = [FYCoreTextLinkUtils touchLinkTextInDisplayView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; atPoint:point data:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (linkData) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;Click Link Text. The title is: %@, The Url is %@&quot;&lt;/span&gt;, linkData.title, linkData.url);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIGestureRecognizer&lt;/span&gt; *)tapGestureRecognizer &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_tapGestureRecognizer == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _tapGestureRecognizer = [[&lt;span class=&quot;built_in&quot;&gt;UITapGestureRecognizer&lt;/span&gt; alloc] initWithTarget:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; action:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(clickComposeImageInDisplayView:)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _tapGestureRecognizer.delegate = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; _tapGestureRecognizer;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYCoreTextLinkUtils&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (FYCoreTextLinkData *)touchLinkTextInDisplayView:(&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)view atPoint:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point data:(FYCoreTextData *)textData &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameRef frameRef = textData.ctFrame;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFArrayRef&lt;/span&gt; lines = CTFrameGetLines(frameRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!lines) &amp;#123; &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFIndex&lt;/span&gt; count = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetCount&lt;/span&gt;(lines);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; origins[count];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameGetLineOrigins(frameRef, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), origins);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//Translateform coordinate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGAffineTransform&lt;/span&gt; transform = &lt;span class=&quot;built_in&quot;&gt;CGAffineTransformMakeTranslation&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, view.bounds.size.height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    transform = &lt;span class=&quot;built_in&quot;&gt;CGAffineTransformScale&lt;/span&gt;(transform, &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;f, &lt;span class=&quot;number&quot;&gt;-1.0&lt;/span&gt;f);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; count; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; linePoint = origins[i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTLineRef line = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetValueAtIndex&lt;/span&gt;(lines, i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; lineRect = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; gainLineBounds:line linePoint:linePoint];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; flippedRect = &lt;span class=&quot;built_in&quot;&gt;CGRectApplyAffineTransform&lt;/span&gt;(lineRect, transform);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;CGRectContainsPoint&lt;/span&gt;(flippedRect, point)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; relativePoint = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point.x - &lt;span class=&quot;built_in&quot;&gt;CGRectGetMinX&lt;/span&gt;(flippedRect), point.y - &lt;span class=&quot;built_in&quot;&gt;CGRectGetMinY&lt;/span&gt;(flippedRect));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CFIndex&lt;/span&gt; index = CTLineGetStringIndexForPosition(line, relativePoint);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; linkTextAtIndex:index linkArray:textData.linkArray];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (FYCoreTextLinkData *)linkTextAtIndex:(&lt;span class=&quot;built_in&quot;&gt;CFIndex&lt;/span&gt;)index linkArray:(&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)linkArray &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextLinkData *linkData = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (FYCoreTextLinkData *data &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; linkArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSLocationInRange&lt;/span&gt;(index, data.range)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            linkData = data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; linkData;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)gainLineBounds:(CTLineRef)line linePoint:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; ascent = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;f;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; descent = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;f;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; leading = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;f;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; width = (&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)CTLineGetTypographicBounds(line, &amp;amp;ascent, &amp;amp;descent, &amp;amp;leading);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; height = ascent + descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(point.x, point.y - descent, width, height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Step 1ï¼š&lt;/strong&gt;åœ¨å½“å‰ &lt;code&gt;FYEvoloveDisplayView&lt;/code&gt; æ·»åŠ  &lt;code&gt;UITapGestureRecognizer&lt;/code&gt; æ‰‹åŠ¿è¯†åˆ«ï¼Œæ¥è¯†åˆ«ç‚¹å‡»çš„ä½ç½®ã€‚éå†å¯¹åº” &lt;code&gt;FYCoreTextData&lt;/code&gt; ä¸­å›¾ç‰‡ &lt;code&gt;Rect&lt;/code&gt; æ¥æŸ¥æ‰¾ç‚¹å‡»ä½ç½®æ˜¯å¦å¯¹åº” &lt;code&gt;Image&lt;/code&gt;ï¼ŒåŒæ—¶æ‰§è¡Œ &lt;strong&gt;&lt;code&gt;Step 2&lt;/code&gt;&lt;/strong&gt; æ¥æŸ¥æ‰¾ç‚¹å‡»æ˜¯å¦å¯¹åº”é“¾æ¥æ–‡å­—ï¼›&lt;br&gt;&lt;strong&gt;Step 2ï¼š&lt;/strong&gt;åœ¨ &lt;code&gt;CTFrameRef&lt;/code&gt; éå†æ¯ä¸€è¡Œç”± &lt;strong&gt;&lt;code&gt;Step 4&lt;/code&gt;&lt;/strong&gt; æ¥è·å–å¯¹åº”è¡Œ &lt;code&gt;Rect&lt;/code&gt; è½¬å˜ä¸º &lt;code&gt;UIKit&lt;/code&gt; åæ ‡ï¼Œåœ¨è¯¥è¡Œ &lt;code&gt;Rect&lt;/code&gt; åœ¨å½“å‰åŒ…å«ç‚¹å‡» &lt;code&gt;Point&lt;/code&gt; æ—¶ï¼Œåœ¨ç”± &lt;code&gt;Step 3&lt;/code&gt; éå†å¯¹åº”è¾“å‡º &lt;code&gt;FYCoreTextLinkData&lt;/code&gt; é“¾æ¥æ–‡å­—ï¼›&lt;br&gt;&lt;strong&gt;Step 3ï¼š&lt;/strong&gt;åœ¨ç‚¹å‡»æ¯è¡Œ &lt;code&gt;Line&lt;/code&gt; ä¸­é€šè¿‡ç‚¹å‡»æ–‡å­— &lt;code&gt;Line&lt;/code&gt; ä¸­çš„ &lt;code&gt;Index&lt;/code&gt; éå†é“¾æ¥æ–‡å­—å¯¹åº” &lt;code&gt;Range&lt;/code&gt; è·å–å¯¹åº”ç‚¹å‡» &lt;code&gt;FYCoreTextLinkData&lt;/code&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 4ï¼š&lt;/strong&gt;é€šè¿‡å½“å‰è¡Œ &lt;code&gt;Start Point&lt;/code&gt; ç„¶åè·å–å½“å‰ &lt;code&gt;Run&lt;/code&gt; å¯¹åº” &lt;code&gt;Rect&lt;/code&gt; ç„¶åè®¡ç®—å‡ºå¯¹åº” &lt;code&gt;Line&lt;/code&gt; çš„ &lt;code&gt;Rect&lt;/code&gt;ï¼ˆåŒºåŸŸï¼‰ã€‚    &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šé¢ä»£ç çš„ &lt;a href=&quot;https://github.com/Optimize-iOS/FYDraw/tree/master/Core%20Text/FYCoreText&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Demo&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;æœ¬åœ°&quot;&gt;&lt;a href=&quot;#æœ¬åœ°&quot; class=&quot;headerlink&quot; title=&quot;æœ¬åœ°&quot;&gt;&lt;/a&gt;æœ¬åœ°&lt;/h3&gt;&lt;p&gt;åœ¨æœ¬åœ°è·å–å›¾æ–‡æ··æ’çš„æ•°æ®ï¼Œå…·ä½“å†…å®¹ç»˜åˆ¶çš„ä»¥ &lt;strong&gt;&lt;code&gt;YYText&lt;/code&gt;&lt;/strong&gt; å®ç°æ¥è¿›è¡Œè®²è¿°ã€‚è¿™é‡Œä»…ä»…å±•ç¤º &lt;code&gt;YYText&lt;/code&gt; çš„ç±»å›¾ï¼Œç„¶åè´´å‡ºæå‡ºå‡ ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;YYText&lt;/code&gt; ç±»å›¾&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kEXGjgdRqOpHb26gu%2F1877765-3650ddeb5f979ba4.png?alt=media&amp;amp;token=1a9b5b36-922b-4f0a-86ed-63cf9ddcc429&quot; alt=&quot;YYKit(ç±»å›¾).png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹é¢ä¸»è¦è§£å†³ä¸€ä¸‹é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ï¼ˆ1ï¼‰æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›ï¼Ÿ&lt;br&gt;ï¼ˆ2ï¼‰æ€ä¹ˆè®¡ç®— &lt;code&gt;String&lt;/code&gt;ã€&lt;code&gt;Image&lt;/code&gt; å’Œ &lt;code&gt;UIView&lt;/code&gt; å®ç°å›¾æ–‡æ’åºï¼Ÿ&lt;br&gt;ï¼ˆ3ï¼‰æ€ä¹ˆå®ç° &lt;code&gt;String&lt;/code&gt; è®¾ç½® &lt;code&gt;Text&lt;/code&gt; å„ç§æ ¼å¼è®¾ç½®ï¼Ÿ&lt;br&gt;ï¼ˆ4ï¼‰æ€ä¹ˆå®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&lt;br&gt;ï¼ˆ5ï¼‰æ€ä¹ˆå®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›&quot;&gt;&lt;a href=&quot;#æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›&quot; class=&quot;headerlink&quot; title=&quot;æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›&quot;&gt;&lt;/a&gt;æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYText&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (Class)layerClass &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// é‡å†™ TextAsyncLayer ä¹Ÿå³æ˜¯é‡æ–°å®šä¹‰ Layer ç±»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å®ç°å¯¹é‡å®šå‘&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [YYTextAsyncLayer class];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextAsyncLayer å¼‚æ­¥åå°ç»˜åˆ¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.willDisplay) task.willDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_YYTextSentinel *sentinel = _sentinel;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int32_t value = sentinel.value;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; (^isCancelled)() = ^&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; value != sentinel.value;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; size = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; opaque = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.opaque;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; scale = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contentsScale;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç”ŸæˆèƒŒæ™¯é¢œè‰²çš„ CGTypeRef ç±»å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGColorRef&lt;/span&gt; backgroundColor = (opaque &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor) ? &lt;span class=&quot;built_in&quot;&gt;CGColorRetain&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor) : &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åˆ¤æ–­å½“å‰ size å®½é«˜ | å¦‚æœä¸æ»¡ä½æ¡ä»¶ | å°±è¦è¿”å›å½“å‰ Layer Contents æ¡¥æ¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å®é™…ç»˜åˆ¶ è·å–è·å–å½“å‰ç»˜åˆ¶çº¿ç¨‹ï¼Œåœ¨å½“å‰çº¿ç¨‹ä¸­ç»˜åˆ¶ | æä¾›å–æ¶ˆæœºåˆ¶ï¼Œå–æ¶ˆå°±å±•ç¤º | åœ¨è®¾ç½®çš„ CGContext è·å–ç»˜åˆ¶ Image | åˆ¤æ–­å–æ¶ˆçš„åŸºç¡€ä¸Šåœ¨ main thread ç»˜åˆ¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (size.width &amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; || size.height &amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGImageRef&lt;/span&gt; image = (__bridge_retained &lt;span class=&quot;built_in&quot;&gt;CGImageRef&lt;/span&gt;)(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contents);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contents = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (image) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(YYTextAsyncLayerGetReleaseQueue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//é‡Šæ”¾ image&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(image);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGColorRelease&lt;/span&gt;(backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å–åå°é…ç½®çš„çº¿ç¨‹ |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(YYTextAsyncLayerGetDisplayQueue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isCancelled()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGColorRelease&lt;/span&gt;(backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//é…ç½® Context ä¸Šä¸‹æ–‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIGraphicsBeginImageContextWithOptions&lt;/span&gt;(size, opaque, scale);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (opaque &amp;amp;&amp;amp; context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//å°†å½“å‰å›¾å½¢çŠ¶æ€çš„ Copy åŠ å…¥å›¾å½¢å †æ ˆä¸­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGContextSaveGState&lt;/span&gt;(context); &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!backgroundColor || &lt;span class=&quot;built_in&quot;&gt;CGColorGetAlpha&lt;/span&gt;(backgroundColor) &amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;//è®¾ç½®å¡«å……é¢œè‰² | è®¾ç½®ç»˜åˆ¶è·¯å¾„ | Path å¡«å……&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(context, [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; whiteColor].CGColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextAddRect&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, size.width * scale, size.height * scale));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextFillPath&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (backgroundColor) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(context, backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextAddRect&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, size.width * scale, size.height * scale));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextFillPath&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//ä»å †æ ˆä¸­å–å‡ºè®¾ç½® | é’ˆå¯¹æŒ‡é’ˆ retain +1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGContextRestoreGState&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGColorRelease&lt;/span&gt;(backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    task.display(context, size, isCancelled);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isCancelled()) &amp;#123; &lt;span class=&quot;comment&quot;&gt;//å¦‚æœå–æ¶ˆ | ç»“æŸ |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//åœ¨ä¸»çº¿ç¨‹å±•ç¤ºå›è°ƒ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *image = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isCancelled()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isCancelled()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//å¦‚æœæ²¡æœ‰å–æ¶ˆ | æŠŠ image -&amp;gt; contents&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//ç„¶åè¿”å›å±•ç¤º&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contents = (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)(image.CGImage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextAsyncLayer ç»˜åˆ¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[_sentinel increase];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.willDisplay) task.willDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//é€šè¿‡ CGContext è®¾ç½®å½“å‰ç»˜åˆ¶æ¡ä»¶ | è°ƒç”¨ YYTextLayout ç»˜åˆ¶ | CGContext ç»˜åˆ¶ç»˜åˆ¶ç”Ÿæˆ Image | å±•ç¤º&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIGraphicsBeginImageContextWithOptions&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.opaque, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contentsScale);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.opaque &amp;amp;&amp;amp; context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; size = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    size.width *= &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contentsScale;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    size.height *= &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contentsScale;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextSaveGState&lt;/span&gt;(context); &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor || &lt;span class=&quot;built_in&quot;&gt;CGColorGetAlpha&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor) &amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(context, [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; whiteColor].CGColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextAddRect&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, size.width, size.height));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextFillPath&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(context, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextAddRect&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, size.width, size.height));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextFillPath&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;built_in&quot;&gt;CGContextRestoreGState&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è°ƒç”¨å±•ç¤º display æ–¹æ³• | æ˜¾ç¤ºå±•ç¤ºçš„å†…å®¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;task.display(context, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size, ^&amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *image = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contents = (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)(image.CGImage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æŠŠç»˜åˆ¶çš„å†…å®¹ ç”Ÿæˆ image ç„¶åèµ‹å€¼ç»™ content&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è°ƒç”¨ å±•ç¤ºå‡½æ•°å›è°ƒ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢è´´å‡ºåŸºäº &lt;code&gt;YYTextAsyncLayer&lt;/code&gt; å®ç°åœ¨ &lt;code&gt;main thread&lt;/code&gt; å’Œ &lt;code&gt;background thread&lt;/code&gt; ç»˜åˆ¶ä»£ç ã€‚å¯ä»¥çœ‹å‡ºä¸¤è€…åœ¨å®é™…ç»˜åˆ¶çš„æ ¸å¿ƒä»£ç æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯åœ¨å®ç°åå°å¼‚æ­¥ç»˜åˆ¶çš„æ—¶å€™æ·»åŠ  &lt;code&gt;cancel&lt;/code&gt; æœºåˆ¶ã€‚ç„¶å&lt;strong&gt;é€šè¿‡åœ¨ &lt;code&gt;UIGraphicsGetImageFromCurrentImageContext()&lt;/code&gt; è·å–å½“å‰ &lt;code&gt;YYText&lt;/code&gt; é€šè¿‡ &lt;code&gt;YYTextLayout&lt;/code&gt; ç»˜åˆ¶ä¹‹åç”Ÿæˆå¯¹åº”çš„ &lt;code&gt;Image&lt;/code&gt; åœ¨ &lt;code&gt;main thread&lt;/code&gt; å®ç° &lt;code&gt;didDisplay&lt;/code&gt; çš„å›è°ƒç»˜åˆ¶ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;è®¡ç®—-Stringã€Image-å’Œ-UIView-å®ç°å›¾æ–‡æ’åº&quot;&gt;&lt;a href=&quot;#è®¡ç®—-Stringã€Image-å’Œ-UIView-å®ç°å›¾æ–‡æ’åº&quot; class=&quot;headerlink&quot; title=&quot;è®¡ç®— Stringã€Image å’Œ UIView å®ç°å›¾æ–‡æ’åº&quot;&gt;&lt;/a&gt;è®¡ç®— &lt;code&gt;String&lt;/code&gt;ã€&lt;code&gt;Image&lt;/code&gt; å’Œ &lt;code&gt;UIView&lt;/code&gt; å®ç°å›¾æ–‡æ’åº&lt;/h4&gt;&lt;p&gt;è¿™é‡Œè´´å‡ºåœ¨è®¡ç®— &lt;code&gt;String&lt;/code&gt; å’Œ &lt;code&gt;Image&lt;/code&gt;ï¼Œ&lt;code&gt;UIView&lt;/code&gt;ï¼ˆé™„ä»¶ï¼‰ åœ¨å®é™…è®¡ç®—çš„å®ç°ç±»ï¼Œç”±äºä»£ç é‡è¾ƒå¤§å°±ä¸ä¸€ä¸€åˆ—å‡ºç»™å‡ºä¸‹é¢ä¸¤ä¸ªç±»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://github.com/Optimize-iOS/FYDraw/blob/master/YYKitAnalysis/YYText-master/YYText/Component/YYTextLayout.m&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;YYTextLayout&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;&lt;a href=&quot;https://github.com/Optimize-iOS/FYDraw/blob/master/YYKitAnalysis/YYText-master/YYText/Component/YYTextLine.m&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;YYTextLine&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextLayout&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (YYTextLayout *)layoutWithContainer:(YYTextContainer *)container text:(&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)text range:(&lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt;)range &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 9.4 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Line 291&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;YYTextLine *line = [YYTextLine lineWithCTLine:ctLine position:position vertical:isVerticalForm];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextLine &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)setCTLine:(_Nonnull CTLineRef)CTLine &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_CTLine != CTLine) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (CTLine) &lt;span class=&quot;built_in&quot;&gt;CFRetain&lt;/span&gt;(CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_CTLine) &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _CTLine = CTLine;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_CTLine) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//è·å–å½“å‰ Line çš„å®½åº¦å€¼ || è·å–å½“å‰ line çš„ ascent|descent|leading&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _lineWidth = CTLineGetTypographicBounds(_CTLine, &amp;amp;_ascent, &amp;amp;_descent, &amp;amp;_leading);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//è·å–å½“å‰ Line çš„ Range&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CFRange&lt;/span&gt; range = CTLineGetStringRange(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _range = &lt;span class=&quot;built_in&quot;&gt;NSMakeRange&lt;/span&gt;(range.location, range.length);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (CTLineGetGlyphCount(_CTLine) &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;span class=&quot;comment&quot;&gt;//Line ä¸­å­—å½¢çš„æ•°é‡, å³ CTRun&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CFArrayRef&lt;/span&gt; runs = CTLineGetGlyphRuns(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                CTRunRef run = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetValueAtIndex&lt;/span&gt;(runs, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;//è·å–ç¬¬ä¸€ä¸ª run å­—å½¢ | å¤åˆ¶åˆ°ç”¨æˆ·æä¾›çš„æ•°æ®ç¼“å†²åŒº |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; pos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                CTRunGetPositions(run, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), &amp;amp;pos);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                _firstGlyphPos = pos.x;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                _firstGlyphPos = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _trailingWhitespaceWidth = CTLineGetTrailingWhitespaceWidth(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _lineWidth = _ascent = _descent = _leading = _firstGlyphPos = _trailingWhitespaceWidth = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _range = &lt;span class=&quot;built_in&quot;&gt;NSMakeRange&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; reloadBounds];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)reloadBounds &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å– å½“å‰è¡Œæ‰€æœ‰çš„ å­—å½¢ | å½“å‰å­—å½¢çš„æ•°é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFArrayRef&lt;/span&gt; runs = CTLineGetGlyphRuns(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; runCount = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetCount&lt;/span&gt;(runs);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (runCount == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *attachments = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *attachmentRanges = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *attachmentRects = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; r = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; r &amp;lt; runCount; r++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTRunRef run = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetValueAtIndex&lt;/span&gt;(runs, r);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CFIndex&lt;/span&gt; glyphCount = CTRunGetGlyphCount(run);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (glyphCount == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//æ ¹æ® run å­—å½¢å—è·å–æ‰€åœ¨ Attributes åŸºæœ¬è®¾ç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *attrs = (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)CTRunGetAttributes(run);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è·å–ä¸çŸ¥é“ä»€ä¹ˆğŸ‘»ï¼Ÿ Attachment å¯èƒ½æ˜¯ UIImage|UIView|CALayer&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//TODO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        YYTextAttachment *attachment = attrs[YYTextAttachmentAttributeName];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attachment) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; runPosition = &lt;span class=&quot;built_in&quot;&gt;CGPointZero&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            CTRunGetPositions(run, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), &amp;amp;runPosition);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;///åˆ¤æ–­å½“å‰ run æ˜¯å¦æ˜¯ Attachment ç„¶åè·å–å½“å‰ run çš„ä¸Šå‡ã€ä¸‹ç§»å’Œç¼©è¿›&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; ascent, descent, leading, runWidth;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; runTypoBounds;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runWidth = CTRunGetTypographicBounds(run, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), &amp;amp;ascent, &amp;amp;descent, &amp;amp;leading);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_vertical) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;//äº¤æ¢ä¸¤è€…ä¹‹é—´çš„åæ ‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                YYTEXT_SWAP(runPosition.x, runPosition.y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runPosition.y = _position.y + runPosition.y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runTypoBounds = &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(_position.x + runPosition.x - descent, runPosition.y , ascent + descent, runWidth);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// &amp;#123;x, y, width, height&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;//line ä¸­ position | run ä¸­ runWidth å’Œ ascent/descent&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runPosition.x += _position.x;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runPosition.y = _position.y - runPosition.y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runTypoBounds = &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(runPosition.x, runPosition.y - ascent, runWidth, ascent + descent);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt; runRange = YYTextNSRangeFromCFRange(CTRunGetStringRange(run));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//æ·»åŠ é™„ä»¶ | å½“å‰é™„ä»¶ range | å½“å‰ line çš„ rect&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [attachments addObject:attachment];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [attachmentRanges addObject:[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWithRange:runRange]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [attachmentRects addObject:[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWithCGRect:runTypoBounds]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//é™„ä»¶å¤åˆ¶ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _attachments = attachments.count ? attachments : &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _attachmentRanges = attachmentRanges.count ? attachmentRanges : &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _attachmentRects = attachmentRects.count ? attachmentRects : &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨ &lt;code&gt;YYTextLayout&lt;/code&gt; ä¸­è°ƒç”¨ &lt;code&gt;YYTextLine&lt;/code&gt; å®ä¾‹æ–¹å¼è®¡ç®—å½“å‰ &lt;code&gt;CTFrameRef&lt;/code&gt; ä¸­ &lt;code&gt;Each Line&lt;/code&gt; ç›¸å…³å‚æ•°ã€‚&lt;br&gt;åœ¨ &lt;code&gt;YYTextLine&lt;/code&gt; ä¸­å¯ä»¥çœ‹å‡ºä»¥ &lt;code&gt;Line&lt;/code&gt; ä¸ºå•ä½è®¡ç®—å½“å‰ç»˜åˆ¶å‚æ•°ï¼Œç„¶åé€šè¿‡ &lt;strong&gt;&lt;code&gt;reloadBounds&lt;/code&gt;&lt;/strong&gt; æ¥éå†å½“å‰è¡Œçš„ &lt;code&gt;Run&lt;/code&gt; è·å–åœ¨åˆå§‹åŒ– &lt;code&gt;Attachment&lt;/code&gt; æ‰¾å‡ºå½“å‰ &lt;code&gt;Line&lt;/code&gt; ä¸­çš„ &lt;code&gt;UIView&lt;/code&gt;ï¼Œ&lt;code&gt;CALayer&lt;/code&gt; å’Œ &lt;code&gt;UIImage&lt;/code&gt; æ¥è®¾ç½®å½“å‰ &lt;code&gt;Attachment&lt;/code&gt; ç»˜åˆ¶åŒºåŸŸå’ŒèŒƒå›´ã€‚&lt;br&gt;&lt;strong&gt;è¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒä»£ç æ³¨é‡Š&lt;/strong&gt; &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å®ç°-String-è®¾ç½®-Text-å„ç§æ ¼å¼è®¾ç½®&quot;&gt;&lt;a href=&quot;#å®ç°-String-è®¾ç½®-Text-å„ç§æ ¼å¼è®¾ç½®&quot; class=&quot;headerlink&quot; title=&quot;å®ç° String è®¾ç½® Text å„ç§æ ¼å¼è®¾ç½®&quot;&gt;&lt;/a&gt;å®ç° &lt;code&gt;String&lt;/code&gt; è®¾ç½® &lt;code&gt;Text&lt;/code&gt; å„ç§æ ¼å¼è®¾ç½®&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextAttribute &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è®¾ç½®å½“å‰å­—ä½“æ˜¾ç¤ºç±»å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBackedStringAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBackedString&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBindingAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBinding&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextShadowAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextShadow&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextInnerShadowAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextInnerShadow&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextUnderlineAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextUnderline&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextStrikethroughAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextStrikethrough&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å¯¹æ–‡å­—è¿›è¡Œæè¾¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBorderAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBorder&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBackgroundBorderAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBackgroundBorder&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBlockBorderAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBlockBorder&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextAttachmentAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextAttachment&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextHighlightAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextHighlight&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextGlyphTransformAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextGlyphTransform&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//NSAttributedString+YYText&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (YYTextShadow *)yy_textInnerShadowAtIndex:(&lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt;)index &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; yy_attribute:YYTextInnerShadowAttributeName atIndex:index];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)yy_attribute:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)attributeName atIndex:(&lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt;)index &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!attributeName) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (index &amp;gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.length || &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.length == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; index == &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.length) index--;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; attribute:attributeName atIndex:index effectiveRange:&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ (YYTextLayout *)layoutWithContainer:(YYTextContainer *)container text:(&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)text range:(&lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt;)range &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (visibleRange.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        layout.needDrawText = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//TODO TODO &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; (^block)(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *attrs, &lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt; range, &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; *stop) = ^(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *attrs, &lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt; range, &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; *stop) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextHighlightAttributeName]) layout.containsHighlight = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextBlockBorderAttributeName]) layout.needDrawBlockBorder = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextBackgroundBorderAttributeName]) layout.needDrawBackgroundBorder = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextShadowAttributeName] || attrs[&lt;span class=&quot;built_in&quot;&gt;NSShadowAttributeName&lt;/span&gt;]) layout.needDrawShadow = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextUnderlineAttributeName]) layout.needDrawUnderline = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextAttachmentAttributeName]) layout.needDrawAttachment = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextInnerShadowAttributeName]) layout.needDrawInnerShadow = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextStrikethroughAttributeName]) layout.needDrawStrikethrough = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextBorderAttributeName]) layout.needDrawBorder = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨åˆå§‹åŒ– &lt;code&gt;String&lt;/code&gt; è®¾ç½®å­—ä½“ç‰¹å®šçš„æ ¼å¼ï¼Œç„¶åæ ¹æ®æä¾›çš„ &lt;code&gt;Key&lt;/code&gt; å€¼ç±»å‹æ¥ä¿å­˜åœ¨å½“å‰ &lt;code&gt;String&lt;/code&gt; è½¬åŒ–ä¸º &lt;code&gt;NSAttributedString&lt;/code&gt; ç±»å‹çš„æ ¼å¼ä¸­ã€‚&lt;strong&gt;è®¾ç½®å½“å‰ &lt;code&gt;Line&lt;/code&gt; æ‰€å±çš„ &lt;code&gt;YYTextLayout&lt;/code&gt; æ ‡è®°å½“å‰çŠ¶æ€ï¼Œåœ¨ç»˜åˆ¶æ—¶æ¥æ‰§è¡Œåœ¨æ”¹ &lt;code&gt;Line&lt;/code&gt; çš„ &lt;code&gt;Run&lt;/code&gt; æ‰§è¡Œç»˜åˆ¶ï¼ˆ&lt;/strong&gt;åé¢åœ¨ç»˜åˆ¶ä¸­ä¼šè®²è¿°&lt;strong&gt;ï¼‰ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&quot;&gt;&lt;a href=&quot;#å®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;å®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&quot;&gt;&lt;/a&gt;å®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYLabel&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (YYTextAsyncLayerDisplayTask *)newAsyncDisplayTask &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    task.display = ^(&lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context, &lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; size, &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; (^isCancelled)(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//Layout ç»˜åˆ¶å½“å‰ UIView ç•Œé¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [drawLayout drawInContext:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; size:size point:point view:view layer:layer debug:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; cancel:&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è·Ÿæ–°å½“å‰çš„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;///å½“å‰ Label çš„é™„ä»¶ æ­¤é™„ä»¶å½’å±äº Layout ä¸­ attachments å±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (YYTextAttachment *a &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; drawLayout.attachments) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([a.content isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; class]]) [attachmentViews addObject:a.content];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([a.content isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;CALayer&lt;/span&gt; class]]) [attachmentLayers addObject:a.content];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextLayout&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Line 3469&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//TODO ç»˜åˆ¶æ–¹æ³•è°ƒç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)drawInContext:(&lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt;)context&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 size:(&lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt;)size&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                point:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 view:(&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)view&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                layer:(&lt;span class=&quot;built_in&quot;&gt;CALayer&lt;/span&gt; *)layer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                debug:(YYTextDebugOption *)debug&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                cancel:(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; (^)(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;))cancel&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@autoreleasepool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;å®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶&quot;&gt;&lt;a href=&quot;#å®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶&quot;&gt;&lt;/a&gt;å®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYLabel &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesBegan:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt; *)touches withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_highlight || _textTapAction || _textLongPressAction) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _touchBeganPoint = point;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _state.trackingTouch = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _state.swallowTouch = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _state.touchMoved = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//æ·»åŠ å®šæ—¶å™¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; _startLongPressTimer];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_highlight) [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; _showHighlightAnimated:&lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesMoved:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt; *)touches withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_state.trackingTouch) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!_state.touchMoved) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_state.touchMoved) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; _endLongPressTimer];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesEnded:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt; *)touches withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_state.trackingTouch) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; _endLongPressTimer];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!_state.touchMoved &amp;amp;&amp;amp; _textTapAction) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	        _textTapAction(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, _innerText, range, rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2018/221/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;TextKit Best Practices&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2013/210&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Introducing Text Kit&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2013/220&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Text Layouts and Effects with Text Kit&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About Core Text&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/TextFonts/Conceptual/CocoaTextArchitecture/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009459&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About the Cocoa Text System&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/Introduction/Introduction.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About Text Handling in iOS&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/TextLayout/Concepts/LayoutManager.html#//apple_ref/doc/uid/20001805-BBCFEBHA&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;The Layout Manager&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2011/128/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Text Processing&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://cocoapods.org/pods/Graver&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Graver&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://apps.timwhitlock.info/emoji/tables/unicode#block-6c-other-additional-symbols&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Emoji Unicode Tables&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://juejin.im/entry/5922b0ef8d6d810058e760c4&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ–°å¤§é™†ï¼šAsyncDisplayKit&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://pilky.me/36/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Optimising Autolayout&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/#more-41893&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://tech.meituan.com/2017/06/09/webviewperf.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;WebViewæ€§èƒ½ã€ä½“éªŒåˆ†æä¸ä¼˜åŒ–&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://imtangqi.com/2016/02/18/the-notes-of-learning-text-kit/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Text Kit å­¦ä¹ ç¬”è®°&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://objccn.io/issue-5-1/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;åˆè¯† TextKit&lt;/a&gt;     &lt;/p&gt;
&lt;p&gt;ï¼š&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Core-Text-å¯Œæ–‡æœ¬ç¼–è¾‘&quot;&gt;&lt;a href=&quot;#Core-Text-å¯Œæ–‡æœ¬ç¼–è¾‘&quot; class=&quot;headerlink&quot; title=&quot;Core Text å¯Œæ–‡æœ¬ç¼–è¾‘&quot;&gt;&lt;/a&gt;Core Text å¯Œæ–‡æœ¬ç¼–è¾‘&lt;/h1&gt;&lt;p&gt;åœ¨ &lt;code&gt;Core Graphics&lt;/code&gt; åé¢ä¸€ç¯‡æ–‡ç« æœ¬è¯¥å¯¹ &lt;code&gt;Core Image&lt;/code&gt; æ¡†æ¶è¿›è¡Œæ•´ç†ï¼Œä½†æ˜¯åŸºäº &lt;code&gt;Core Graphics&lt;/code&gt; çš„å¯Œæ–‡æœ¬ç¼–è¾‘ &lt;code&gt;Core Text&lt;/code&gt; æ¡†æ¶æ›´æ–¹ä¾¿è®²è¿°ã€‚è€Œä¸”ç»“åˆè‡ªå·±å…´è¶£å’Œå¥½ç©çš„ç¨‹åº¦åœ¨è®²è¿°è‡ªå·±å¯¹ &lt;code&gt;Texture&lt;/code&gt; å³ &lt;code&gt;ASDK&lt;/code&gt; å’Œ &lt;code&gt;YYKit&lt;/code&gt; è¯¦ç»†æè¿°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Core-Text-ç»“æ„å±‚çº§&quot;&gt;&lt;a href=&quot;#Core-Text-ç»“æ„å±‚çº§&quot; class=&quot;headerlink&quot; title=&quot;Core Text ç»“æ„å±‚çº§&quot;&gt;&lt;/a&gt;Core Text ç»“æ„å±‚çº§&lt;/h2&gt;&lt;p&gt;è¿™é‡Œå°ç¼–å¯¹ &lt;code&gt;Core Text&lt;/code&gt; åœ¨å®ç°çš„å±‚æ¬¡ç»“æ„ä¸Šæ‰€å¤„ä½ç½®ï¼Œä»¥åŠåœ¨å¯¹ &lt;code&gt;UIKit&lt;/code&gt; æ¡†æ¶æˆ‘ä»¬å¸¸è§æ§ä»¶ &lt;code&gt;UITextFiled&lt;/code&gt;ã€&lt;code&gt;UITextView&lt;/code&gt; å’Œ &lt;code&gt;UILabel&lt;/code&gt; å…·ä½“å®ç°åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kE8qFvBCueh8O8d1_%2F1877765-d9fa387d512dd42d.png?alt=media&amp;amp;token=3d406869-6df1-4a7c-bcb6-6c228a9d1fce&quot; alt=&quot;Core Text.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯å°ç¼–æ ¹æ® &lt;strong&gt;2018 WWDC&lt;/strong&gt; ä¸­ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2018/221/&quot;&gt;TextKit Best Practices&lt;/a&gt; å’Œ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2013/210&quot;&gt;Introducing Text Kit&lt;/a&gt; å¾—å‡º &lt;code&gt;Core Graphics&lt;/code&gt;ã€&lt;code&gt;Core Text&lt;/code&gt; å’Œ &lt;code&gt;UIKit&lt;/code&gt; ä¸­èƒ½å¤Ÿå®ç°æ–‡æœ¬ç»˜åˆ¶çš„æ§ä»¶å®ç°ç»“æ„å›¾ã€‚&lt;br&gt;æ ¹æ®ä¸Šé¢ç»“æ„å¯ä»¥çœ‹å‡ºï¼š&lt;br&gt;ï¼ˆ1ï¼‰åŸºäº &lt;code&gt;Quartz&lt;/code&gt; å°è£…çš„ &lt;code&gt;Core Graphics&lt;/code&gt; ä¸º &lt;code&gt;Core Text&lt;/code&gt; çš„å®ç°åŸºç¡€ã€‚è€Œä¸” &lt;code&gt;Quartz&lt;/code&gt; å¯ä»¥ç›´æ¥å¤„ç†å­—ä½“å’Œå­—å½¢å°†æ–‡å­—æ¸²æŸ“åˆ°ç•Œé¢ï¼Œä¹Ÿæ˜¯åœ¨ Apple åŸºç¡€åº“ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å­—ä½“æ¨¡å—ã€‚&lt;br&gt;ï¼ˆ2ï¼‰åŸºäº &lt;code&gt;Core Text&lt;/code&gt; å°è£…å®ç°çš„ &lt;code&gt;Text Kit&lt;/code&gt; ä¸ºåœ¨ &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; ä¸­æ–‡æœ¬æ˜¾ç¤ºæ§ä»¶ &lt;code&gt;TypeTextFiled&lt;/code&gt;ã€&lt;code&gt;TypeTextView&lt;/code&gt; ç­‰æä¾›æœ€ç›´æ¥çš„æ¥å£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS UI ç•Œé¢" scheme="http://yoursite.com/tags/iOS-UI-%E7%95%8C%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>iOS UI ä¼˜åŒ– - ç•ªå¤–ç¯‡</title>
    <link href="http://yoursite.com/2019/05/13/iOS%20UI%20%E4%BC%98%E5%8C%96%20-%20%E7%95%AA%E5%A4%96%E7%AF%87/"/>
    <id>http://yoursite.com/2019/05/13/iOS UI ä¼˜åŒ– - ç•ªå¤–ç¯‡/</id>
    <published>2019-05-13T02:40:09.769Z</published>
    <updated>2019-05-13T02:41:50.212Z</updated>
    
    <content type="html">&lt;h2 id=&quot;iOS-UI-ä¼˜åŒ–ç•ªå¤–ç¯‡-åŠ¨ç”»&quot;&gt;&lt;a href=&quot;#iOS-UI-ä¼˜åŒ–ç•ªå¤–ç¯‡-åŠ¨ç”»&quot; class=&quot;headerlink&quot; title=&quot;iOS UI ä¼˜åŒ–ç•ªå¤–ç¯‡ - åŠ¨ç”»&quot;&gt;&lt;/a&gt;iOS UI ä¼˜åŒ–ç•ªå¤–ç¯‡ - åŠ¨ç”»&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/Lision/LSAnimator&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;LSAnimator&lt;/a&gt;    &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;iOS-UI-ä¼˜åŒ–ç•ªå¤–ç¯‡-åŠ¨ç”»&quot;&gt;&lt;a href=&quot;#iOS-UI-ä¼˜åŒ–ç•ªå¤–ç¯‡-åŠ¨ç”»&quot; class=&quot;headerlink&quot; title=&quot;iOS UI ä¼˜åŒ–ç•ªå¤–ç¯‡ - åŠ¨ç”»&quot;&gt;&lt;/a&gt;iOS UI ä¼˜åŒ–ç•ªå¤–ç¯‡ - åŠ¨ç”»&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS UI ç•Œé¢" scheme="http://yoursite.com/tags/iOS-UI-%E7%95%8C%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>iOS UI ä¼˜åŒ– - Core Text</title>
    <link href="http://yoursite.com/2019/05/05/iOS%20UI%20%E4%BC%98%E5%8C%96%20-%20ASDK%20VS%20YYKit/"/>
    <id>http://yoursite.com/2019/05/05/iOS UI ä¼˜åŒ– - ASDK VS YYKit/</id>
    <published>2019-05-05T11:46:11.570Z</published>
    <updated>2020-05-20T13:14:58.978Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Core-Text-å¯Œæ–‡æœ¬ç¼–è¾‘&quot;&gt;&lt;a href=&quot;#Core-Text-å¯Œæ–‡æœ¬ç¼–è¾‘&quot; class=&quot;headerlink&quot; title=&quot;Core Text å¯Œæ–‡æœ¬ç¼–è¾‘&quot;&gt;&lt;/a&gt;Core Text å¯Œæ–‡æœ¬ç¼–è¾‘&lt;/h1&gt;&lt;p&gt;åœ¨ &lt;code&gt;Core Graphics&lt;/code&gt; åé¢ä¸€ç¯‡æ–‡ç« æœ¬è¯¥å¯¹ &lt;code&gt;Core Image&lt;/code&gt; æ¡†æ¶è¿›è¡Œæ•´ç†ï¼Œä½†æ˜¯åŸºäº &lt;code&gt;Core Graphics&lt;/code&gt; çš„å¯Œæ–‡æœ¬ç¼–è¾‘ &lt;code&gt;Core Text&lt;/code&gt; æ¡†æ¶æ›´æ–¹ä¾¿è®²è¿°ã€‚è€Œä¸”ç»“åˆè‡ªå·±å…´è¶£å’Œå¥½ç©çš„ç¨‹åº¦åœ¨è®²è¿°è‡ªå·±å¯¹ &lt;code&gt;Texture&lt;/code&gt; å³ &lt;code&gt;ASDK&lt;/code&gt; å’Œ &lt;code&gt;YYKit&lt;/code&gt; è¯¦ç»†æè¿°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Core-Text-ç»“æ„å±‚çº§&quot;&gt;&lt;a href=&quot;#Core-Text-ç»“æ„å±‚çº§&quot; class=&quot;headerlink&quot; title=&quot;Core Text ç»“æ„å±‚çº§&quot;&gt;&lt;/a&gt;Core Text ç»“æ„å±‚çº§&lt;/h2&gt;&lt;p&gt;è¿™é‡Œå°ç¼–å¯¹ &lt;code&gt;Core Text&lt;/code&gt; åœ¨å®ç°çš„å±‚æ¬¡ç»“æ„ä¸Šæ‰€å¤„ä½ç½®ï¼Œä»¥åŠåœ¨å¯¹ &lt;code&gt;UIKit&lt;/code&gt; æ¡†æ¶æˆ‘ä»¬å¸¸è§æ§ä»¶ &lt;code&gt;UITextFiled&lt;/code&gt;ã€&lt;code&gt;UITextView&lt;/code&gt; å’Œ &lt;code&gt;UILabel&lt;/code&gt; å…·ä½“å®ç°åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kE8qFvBCueh8O8d1_%2F1877765-d9fa387d512dd42d.png?alt=media&amp;amp;token=3d406869-6df1-4a7c-bcb6-6c228a9d1fce&quot; alt=&quot;Core Text.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯å°ç¼–æ ¹æ® &lt;strong&gt;2018 WWDC&lt;/strong&gt; ä¸­ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2018/221/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;TextKit Best Practices&lt;/a&gt; å’Œ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2013/210&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Introducing Text Kit&lt;/a&gt; å¾—å‡º &lt;code&gt;Core Graphics&lt;/code&gt;ã€&lt;code&gt;Core Text&lt;/code&gt; å’Œ &lt;code&gt;UIKit&lt;/code&gt; ä¸­èƒ½å¤Ÿå®ç°æ–‡æœ¬ç»˜åˆ¶çš„æ§ä»¶å®ç°ç»“æ„å›¾ã€‚&lt;br&gt;æ ¹æ®ä¸Šé¢ç»“æ„å¯ä»¥çœ‹å‡ºï¼š&lt;br&gt;ï¼ˆ1ï¼‰åŸºäº &lt;code&gt;Quartz&lt;/code&gt; å°è£…çš„ &lt;code&gt;Core Graphics&lt;/code&gt; ä¸º &lt;code&gt;Core Text&lt;/code&gt; çš„å®ç°åŸºç¡€ã€‚è€Œä¸” &lt;code&gt;Quartz&lt;/code&gt; å¯ä»¥ç›´æ¥å¤„ç†å­—ä½“å’Œå­—å½¢å°†æ–‡å­—æ¸²æŸ“åˆ°ç•Œé¢ï¼Œä¹Ÿæ˜¯åœ¨ Apple åŸºç¡€åº“ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å­—ä½“æ¨¡å—ã€‚&lt;br&gt;ï¼ˆ2ï¼‰åŸºäº &lt;code&gt;Core Text&lt;/code&gt; å°è£…å®ç°çš„ &lt;code&gt;Text Kit&lt;/code&gt; ä¸ºåœ¨ &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; ä¸­æ–‡æœ¬æ˜¾ç¤ºæ§ä»¶ &lt;code&gt;TypeTextFiled&lt;/code&gt;ã€&lt;code&gt;TypeTextView&lt;/code&gt; ç­‰æä¾›æœ€ç›´æ¥çš„æ¥å£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;Core-Text-API-æ—&quot;&gt;&lt;a href=&quot;#Core-Text-API-æ—&quot; class=&quot;headerlink&quot; title=&quot;Core Text API æ—&quot;&gt;&lt;/a&gt;Core Text API æ—&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kEDtfL0uYk56NKxq3%2F1877765-4ace47c5dff6e0f5.png?alt=media&amp;amp;token=c3271fd4-c3ac-48f7-b4b6-f04a2373e841&quot; alt=&quot;Core Text API æ—.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;Core Text&lt;/code&gt; ä½œä¸ºåœ¨ &lt;code&gt;OS&lt;/code&gt; å¯¹åº”çš„äº”å¤§å¹³å°å”¯ä¸€æ‹¥æœ‰å®ç°æ–‡å­—ç»˜åˆ¶èƒ½åŠ›çš„è·¨å¹³ å°æ¡†æ¶ï¼Œæ—ç±» &lt;code&gt;API&lt;/code&gt; éƒ½æ˜¯è¡¨ç¤º &lt;code&gt;CTType&lt;/code&gt; å½¢å¼ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Opaque-Types&quot;&gt;&lt;a href=&quot;#Opaque-Types&quot; class=&quot;headerlink&quot; title=&quot;Opaque Types&quot;&gt;&lt;/a&gt;Opaque Types&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é›†åˆæ•°æ®ç±»å‹&lt;/th&gt;
&lt;th&gt;è¡¨ç¤º &amp;amp; ä½¿ç”¨èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFont&lt;/code&gt;ï¼ˆå­—ä½“ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“ç±»å‹å‚æ•°ã€‚å­—ä½“ç‰¹å¾ä¸­åŸºæœ¬å‚æ•°è¡¨ç¤ºï¼šå­—ä½“å¤§å°ã€å­—ä½“æ‰€å±çš„æ ¼å¼æˆ–è€…æ˜¯è½¬æ¢çŸ©é˜µç­‰ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; æ˜¯åœ¨ &lt;code&gt;UIKit&lt;/code&gt; ä¸­æˆ‘ä»¬ç»å¸¸ä½¿ç”¨è®¾ç½®å­ç±»ç±»å‹çš„ &lt;code&gt;UIFont&lt;/code&gt; çš„ &lt;code&gt;(__birdge CTFont *)&lt;/code&gt; è¡¨ç°å½¢å¼ï¼Œåœ¨é‡‡ç”¨ &lt;code&gt;context&lt;/code&gt; ç»˜åˆ¶ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶ç¡®å®šå­—ä½“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFontCollection&lt;/code&gt;ï¼ˆå­—ä½“ç»„ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“ç»„åˆã€‚å­—ä½“ç»„åˆä¹Ÿå³æ˜¯å¯¹ä¸€ç»„æ–‡å­—æˆ–è€…ä¸€æ®µçŸ­æ–‡å­—å­—ä½“é›†åˆï¼Œæä¾›å¯¹åŒä¸€æ®µæ–‡å­—ä¸åŒæ ¼å¼æ–‡å­—å†…å®¹å­—ä½“è®¿é—®å’Œè·å–ã€‚ä¸€å¥è¯ï¼š&lt;strong&gt;å­—ä½“æ•´ä½“è¡¨ç¤ºã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFontDescriptor&lt;/code&gt;ï¼ˆå­—ä½“æè¿°ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“ç±»å‹æè¿°ã€‚å­—ä½“æè¿°å¯ä»¥ç”¨è·å–ã€æŒ‡å®šæˆ–è€…æ˜¯ä¿®æ”¹å½“å‰å­—ä½“å±æ€§ï¼Œå­—ä½“ç›¸å…³å±æ€§ï¼ˆå­—ä½“åå­—ã€ä½ç½®ç‚¹å¤§å°å’Œå˜åŒ–ç­‰ï¼‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFrame&lt;/code&gt;ï¼ˆç»˜åˆ¶ç”»å¸ƒï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå¤šè¡Œæ–‡å­—ç»˜åˆ¶ç”»å¸ƒã€‚&lt;code&gt;CTFrame&lt;/code&gt;ï¼ˆç»˜åˆ¶ç”»å¸ƒï¼‰æ˜¯ &lt;code&gt;Core Text&lt;/code&gt; å®ç°æ–‡å­—ç»˜åˆ¶å¯¹å¤–é›†ä¸­ä½“ç°å½¢å¼ï¼Œå…¶ä¸­ç¡®å®šç»˜åˆ¶å‚æ•°ï¼šç”»å¸ƒåŒºåŸŸï¼ˆ&lt;code&gt;Range&lt;/code&gt;ï¼‰ã€ç»˜åˆ¶è·¯å¾„ï¼ˆ&lt;code&gt;Path&lt;/code&gt;ï¼‰å’Œç»˜åˆ¶æ–‡æœ¬å‚æ•°ä¿¡æ¯ï¼ˆ&lt;code&gt;Attribtes&lt;/code&gt;ï¼‰ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; å¯¹äºå•è¡Œæ¥è¯´å¯ä»¥ç²¾ç¡®è·å–åœ¨ç”»å¸ƒï¼šè¡Œæ•°å’Œæ¯ä¸€è¡Œå¯¹åº”å¼€å¤´åæ ‡ã€‚åœ¨è·å–ç»˜åˆ¶çš„ç”»å¸ƒæ—¶è°ƒç”¨å¯¹åº”çš„ &lt;strong&gt;&lt;code&gt;CTFrameDraw(CTFrame, CGContext)&lt;/code&gt;&lt;/strong&gt; åœ¨ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶æ–‡å­—æ˜¾ç¤ºè¯¦ç»†å†…å®¹ã€‚ &lt;strong&gt;3ã€&lt;/strong&gt; &lt;strong&gt;&lt;code&gt;CTFrame&lt;/code&gt; ä¸ä»…æ”¯æŒåœ¨ &lt;code&gt;main thread&lt;/code&gt; ä¸­è¿›è¡Œç»˜åˆ¶ï¼ŒåŒæ ·ä¹Ÿæ”¯æŒåœ¨ &lt;code&gt;background Thread&lt;/code&gt; è¿›è¡Œå†…å®¹çš„ç»˜åˆ¶ã€‚&lt;/strong&gt; è¿™ä¹Ÿæ˜¯ &lt;code&gt;YYKit&lt;/code&gt; å’Œ &lt;code&gt;Texture&lt;/code&gt; æ”¯æŒåå°ç»˜åˆ¶æ§ä»¶å®ç°çš„åŸºç¡€ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTFramesetter&lt;/code&gt;ï¼ˆç”»å¸ƒğŸ­ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“å…·ä½“ç»˜åˆ¶ç”Ÿæˆå·¥å‚ã€‚ç”»å¸ƒå·¥å‚æ ¹æ®è¦æ˜¾ç¤ºçš„å¯Œæ–‡æœ¬ä¿¡æ¯ã€æ˜¾ç¤ºç”»å¸ƒè·¯å¾„å’Œç”»å¸ƒå…·ä½“çš„åŒºåŸŸï¼ˆ&lt;code&gt;Range&lt;/code&gt;ï¼‰æ¥ç”Ÿæˆå¯¹åº”å±•ç¤ºçš„æ˜¾ç¤ºç”»å¸ƒçš„æ•ˆæœã€‚&lt;strong&gt;2ã€&lt;/strong&gt; &lt;code&gt;CTFramesetter&lt;/code&gt;ï¼ˆç”»å¸ƒå·¥å‚ï¼‰æ˜¯é‡‡ç”¨ &lt;code&gt;CFFrameDraw&lt;/code&gt; æ¥å®ç°å¯Œæ–‡æœ¬ç¼–è¾‘ç»˜åˆ¶åŸºç¡€ï¼Œä½†æ˜¯å¦‚æœé‡‡ç”¨ &lt;code&gt;CTLineDraw&lt;/code&gt; æˆ–è€…æ˜¯ &lt;code&gt;CTRunDraw&lt;/code&gt; å½¢ä¼¼å°±å¦å½“åˆ«è®ºäº†ã€‚ &lt;strong&gt;&lt;code&gt;YYText&lt;/code&gt; ä¸­ç»˜åˆ¶çš„å°±æ˜¯æŒ‰ç…§ &lt;code&gt;CTLineDraw&lt;/code&gt; å’Œ &lt;code&gt;CTRunDraw&lt;/code&gt; æ¥ç»˜åˆ¶çš„ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTGlyphInfo&lt;/code&gt;ï¼ˆå­—ä½“ä¿¡æ¯ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨å­—ä½“å¯¹äº &lt;code&gt;Glyph ID&lt;/code&gt; ç‰¹æ®Šçš„æ˜ å°„å…³ç³»ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTLine&lt;/code&gt;ï¼ˆç”»å¸ƒä¸­è¡Œï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨å…·ä½“æ‰§è¡Œ &lt;code&gt;Frame&lt;/code&gt;ï¼ˆç”»å¸ƒï¼‰ä¸­ä¸€è¡Œã€‚æ˜¯ç»„æˆç”»å¸ƒç»˜åˆ¶ &lt;code&gt;Frame&lt;/code&gt; ä¸­å•ç‹¬çš„ä¸€è¡Œï¼ŒåŒæ—¶ä¹Ÿæ˜¯å­—ä½“ä¸åŒæ ¼å¼ç»„æˆåœ¨ä¸€è¡Œä¸­ç»„æˆæœ€å°å•å…ƒ &lt;strong&gt;&lt;code&gt;Run&lt;/code&gt;&lt;/strong&gt;ï¼ˆå—ï¼‰çš„é›†åˆã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; åœ¨å®ç°å¯Œæ–‡æœ¬ç»˜åˆ¶çš„è¿‡ç¨‹ä¸­å¯ä»¥é‡‡ç”¨ &lt;strong&gt;&lt;code&gt;CTLineDraw(CTLine, CGContext)&lt;/code&gt;&lt;/strong&gt; æ–¹å¼æ¥ç»˜åˆ¶å½“å‰è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTParagaraphStyle&lt;/code&gt;ï¼ˆæ®µè½æ ¼å¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; æ®µè½æ ¼å¼è¡¨ç¤ºåœ¨æ–‡æœ¬ç»˜åˆ¶æ—¶ï¼Œæ®µè½æ®µè½ä¹‹é—´è®¾ç½®åŸºæœ¬å‚æ•°æˆ–è€…å•ç‹¬ä¸€æ®µä¿¡æ¯åŸºæœ¬æ ¼å¼ã€‚ä¾‹å¦‚ï¼šå¯¹å…¶æ ·å¼ã€æˆªå–æ ·å¼å’Œæ’å¸ƒçš„æ–¹å‘ç­‰ç­‰&lt;strong&gt;2ã€&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRun&lt;/code&gt;ï¼ˆå—ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨å¯Œæ–‡æœ¬ç»˜åˆ¶è¿‡ç¨‹ä¸­æ ¼å¼ç›¸åŒæœ€å°å•å…ƒã€‚æ ¹æ®å­—ä½“è®¾ç½®çš„ &lt;code&gt;CTFont&lt;/code&gt;ï¼ˆå­—ä½“ï¼‰å‚æ•°ä¸åŒåœ¨ç»˜åˆ¶è¿‡ç¨‹ä¸­å¯ä»¥åˆ†å‰²ä¸ºæ ¼å¼ä¸€è‡´ä¸€ä¸ªä¸€ä¸ªå•å…ƒï¼Œæ—¢æ˜¯ &lt;code&gt;Run&lt;/code&gt;ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; åœ¨æ–‡æœ¬ç¼–è¾‘è¿‡ç¨‹ä¸­å¯ä»¥æ ¹æ®åœ¨ç”»å¸ƒä¸­éœ€è¦æ˜¾ç¤º &lt;code&gt;Lines&lt;/code&gt;ï¼Œç„¶ååœ¨ä½†å•ç‹¬ &lt;code&gt;Line&lt;/code&gt; ä¸­è·å¾— &lt;code&gt;Run&lt;/code&gt; é‡‡ç”¨ &lt;strong&gt;&lt;code&gt;CTRunDraw(CTRun, CGContext)&lt;/code&gt;&lt;/strong&gt; æ¥å®ç°å•ä¸ª &lt;code&gt;Run&lt;/code&gt;ï¼ˆå—ï¼‰ç‹¬è‡ªç»˜åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTRunDelegate&lt;/code&gt;ï¼ˆå—åè®®ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨è¿è¡Œæ—¶çš„ä¸€ä¸ªè¿è¡Œå§”æ‰˜ï¼Œåœ¨å®ç°è®¡ç®—æ˜¯å¯ä»¥è°ƒæ•´å­—å½¢ä¸Šå‡ã€ä¸‹é™å’Œå½“å‰ç»˜åˆ¶å­—å½¢å®½é«˜ã€‚è¿™ä¸ª &lt;code&gt;API&lt;/code&gt; æ˜¯æˆ‘ä»¬åœ¨å®ç°æ–‡å­—å›¾ç‰‡æ¢æ··æ’çš„åŸºç¡€ï¼Œåœ¨ç”Ÿæˆ &lt;code&gt;Frame&lt;/code&gt; æ—¶è®¡ç®—å½“å‰ &lt;code&gt;Line&lt;/code&gt; é‡Œé¢ &lt;code&gt;Run&lt;/code&gt; éœ€è¦ç»˜åˆ¶ç´ æç±»å‹ï¼Œç„¶ååœ¨æ”¹ç´ æç±»å‹ä½ç½®è®¾ç½® &lt;code&gt;Image&lt;/code&gt; çš„ &lt;code&gt;Ascent&lt;/code&gt;ã€&lt;code&gt;Descent&lt;/code&gt;ã€&lt;code&gt;Width&lt;/code&gt; å’Œ &lt;code&gt;Height&lt;/code&gt; æ¥è®¾ç½®å½“å‰å›¾ç‰‡ç»˜åˆ¶å‚æ•°ä¿¡æ¯ï¼Œç„¶ååœ¨å®é™…ç»˜åˆ¶ä¸­åœ¨å½“å‰éœ€è¦ç»˜åˆ¶çš„ &lt;code&gt;Image&lt;/code&gt; é‡‡ç”¨ &lt;strong&gt;&lt;code&gt;CGContextDrawImage(CGContext, CGRect, CGImageRef)&lt;/code&gt;&lt;/strong&gt; ç»˜åˆ¶å½“å‰å›¾ç‰‡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTTextTab&lt;/code&gt;ï¼ˆæ–‡æœ¬æ ‡ç­¾ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨æ–‡æœ¬æ®µè½ä¸­æ ·å¼æ ‡ç­¾ï¼Œç”¨æ¥ä¿å­˜æ®µè½ä¹‹é—´æ®µè½å¯¹å…¶æ–¹å¼å’Œä½ç½®ä¿¡æ¯ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CTTypesetter&lt;/code&gt;ï¼ˆæ’ç‰ˆå·¥å‚ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå­—ä½“å…·ä½“ç»˜åˆ¶æ¥æ‰§è¡Œå¸ƒå±€ã€‚å¯ä»¥é€šè¿‡ &lt;strong&gt;&lt;code&gt;CTFramesetterCreateWithTypesetter(CTTypesetter)&lt;/code&gt; ç”Ÿæˆä¸Šæ–‡å±•ç¤º &lt;code&gt;CTFramesetter&lt;/code&gt;ï¼ˆç»˜åˆ¶å·¥å‚ï¼‰ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;Reference&quot;&gt;&lt;a href=&quot;#Reference&quot; class=&quot;headerlink&quot; title=&quot;Reference&quot;&gt;&lt;/a&gt;Reference&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é›†åˆæ•°æ®ç±»å‹&lt;/th&gt;
&lt;th&gt;è¡¨ç¤º &amp;amp; ä½¿ç”¨èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Sting Attributes&lt;/code&gt;ï¼ˆå¯Œæ–‡æœ¬å±•ç¤ºæ ·å¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;å¯Œæ–‡æœ¬ä¸‹åˆ’çº¿æ ·å¼è®¾ç½®&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Structure&lt;/code&gt;ï¼ˆç»“æ„ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;CTTextTab&lt;/code&gt;ï¼ˆæ ‡ç­¾ï¼‰ èŒƒå›´å’Œè¡¨ï¼ŒæŸ¥æ‰¾å‘é‡ Headerã€‚&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Enumerations&lt;/code&gt;ï¼ˆæšä¸¾ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Core Text&lt;/code&gt; å­—ä½“æè¿°åŒ¹é…ã€æŒ‡å®šç»‘å®šæ ‡è¯†ç¬¦è‡ªåŠ¨æ¿€æ´»ã€æŒ‡å®š URL å­—ä½“æ³¨å†Œå¤±è´¥ã€å®šä¹‰å­—ä½“æ³¨å†ŒèŒƒæ–‡ç­‰ç­‰ã€‚&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Constants&lt;/code&gt;ï¼ˆå¸¸é‡å€¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Core Text&lt;/code&gt; ä¸­ä½¿ç”¨å¯Œæ–‡æœ¬è®¾ç½®ä¸€äº›å¸¸é‡å€¼ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Fundations&lt;/code&gt;ï¼ˆåŠŸèƒ½ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Core Text&lt;/code&gt; ä¸­ä¸€äº›åŠŸèƒ½å‚æ•°å€¼ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;Core Text Data Types&lt;/code&gt;ï¼ˆæ•°æ®åˆ†ç±»ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;&lt;code&gt;Core Text&lt;/code&gt; ä¸­ &lt;code&gt;ATS&lt;/code&gt; å­—ä½“å‚è€ƒã€å­—ä½“é›†åˆæ’åºæè¿°ç¬¦å›è°ƒå’Œ &lt;code&gt;CT&lt;/code&gt; æè¿°ç¬¦å¤„ç†è¿›åº¦å›è°ƒã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢æ˜¯ &lt;code&gt;Core Text&lt;/code&gt; æ‰€æœ‰çš„ &lt;code&gt;API&lt;/code&gt; çš„æ¥å£ï¼ŒåŠå…¶åœ¨å®ç°å¯Œæ–‡æœ¬ç»˜åˆ¶ä¸­ç›¸å¯¹ç›¸åº”çš„ &lt;code&gt;API&lt;/code&gt; çš„ä¸»è¦åŠŸèƒ½ä½œç”¨ã€‚&lt;strong&gt;å…·ä½“ &lt;code&gt;CTFramesetter&lt;/code&gt; æ€ä¹ˆæ ·é€šè¿‡ &lt;code&gt;NSString&lt;/code&gt; æ¥ç”Ÿæˆ &lt;code&gt;CTFrameRef&lt;/code&gt; ç„¶ååœ¨ &lt;code&gt;UIKit&lt;/code&gt; åŸºç¡€çš„æ˜¾ç¤ºæ§ä»¶ä¸Šç»˜åˆ¶å‡ºæ¥çš„å‘¢ï¼Ÿ&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Core-Text-æœ€å°ç³»ç»Ÿ&quot;&gt;&lt;a href=&quot;#Core-Text-æœ€å°ç³»ç»Ÿ&quot; class=&quot;headerlink&quot; title=&quot;Core Text æœ€å°ç³»ç»Ÿ&quot;&gt;&lt;/a&gt;&lt;code&gt;Core Text&lt;/code&gt; æœ€å°ç³»ç»Ÿ&lt;/h2&gt;&lt;p&gt;è¿™é‡Œè¯´çš„æœ€å°ç³»ç»Ÿæ¦‚å¿µæ˜¯åœ¨ç”µå­å•ç‰‡æœºä¸­æœ€å°ç³»ç»Ÿå•å…ƒï¼Œè¿™é‡ŒæŒ‡çš„æ˜¯ &lt;code&gt;Core Text&lt;/code&gt; å®ç°æœ€åŸºæœ¬æ–‡å­—æ’ç‰ˆã€‚&lt;br&gt;&lt;strong&gt;ä¸‹é¢è´´å‡ºåœ¨å®ç°ä¸­ç»å…¸ä»£ç ï¼š&lt;/strong&gt;   &lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)drawRect:(&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)rect &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; drawRect:rect];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextSetTextMatrix&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGAffineTransformIdentity&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextTranslateCTM&lt;/span&gt;(context, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size.height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextScaleCTM&lt;/span&gt;(context, &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;-1.0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGMutablePathRef&lt;/span&gt; path = &lt;span class=&quot;built_in&quot;&gt;CGPathCreateMutable&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPathAddRect&lt;/span&gt;(path, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *attString = [[&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; alloc] initWithString:&lt;span class=&quot;string&quot;&gt;@&quot;Hello world! Welcome to learn RICH TEXT knowladge.&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFramesetterRef frameSetter = CTFramesetterCreateWithAttributedString((&lt;span class=&quot;built_in&quot;&gt;CFAttributedStringRef&lt;/span&gt;)attString);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameRef frame = CTFramesetterCreateFrame(frameSetter, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, attString.length), path, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameDraw(frame, context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Step 6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(frame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(path);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(frameSetter);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»§æ‰¿ &lt;code&gt;UIView&lt;/code&gt; æ¥è‡ªå®šä¹‰ &lt;code&gt;FYView&lt;/code&gt; ç„¶åé‡å†™ &lt;code&gt;drawRect:&lt;/code&gt;ï¼Œåœ¨ä¸Šé¢ &lt;code&gt;drawRect:&lt;/code&gt; é‡æ–°å†™ä¸Šé¢ä»£ç ã€‚&lt;strong&gt;åœ¨ &lt;code&gt;Core Text&lt;/code&gt; å®é™…ç»˜åˆ¶ä¸­ä¸»è¦åˆ†ä¸ºï¼šè®¡ç®—è½¬æ¢åœ¨ &lt;code&gt;UIKit&lt;/code&gt; çš„åæ ‡ã€è®¾ç½®ç»˜åˆ¶ &lt;code&gt;Path&lt;/code&gt;ã€åˆå§‹åŒ– &lt;code&gt;CFFramesetter&lt;/code&gt; ç”»å¸ƒå·¥å‚ç”Ÿæˆç”»å¸ƒå’Œåœ¨ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶ã€‚&lt;/strong&gt;&lt;br&gt;å…·ä½“åˆ†ä¸º 6 ä¸ªæ­¥éª¤ï¼š&lt;br&gt;&lt;strong&gt;Step 1ï¼š&lt;/strong&gt;è·å–å½“å‰ç»˜åˆ¶ä¸Šä¸‹æ–‡ &lt;code&gt;context&lt;/code&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 2ï¼š&lt;/strong&gt;æŠŠ &lt;code&gt;Core Text&lt;/code&gt; ä¸­å·¦ä¸‹è§’çš„åæ ‡ç‚¹è½¬æ¢ä¸º &lt;code&gt;UIKit&lt;/code&gt; å·¦ä¸Šè§’çš„åæ ‡ç‚¹ï¼›&lt;br&gt;&lt;strong&gt;Step 3ï¼š&lt;/strong&gt;è®¾ç½®ç»˜åˆ¶çš„ &lt;code&gt;path&lt;/code&gt; è·¯å¾„ï¼ŒæŠŠå½“å‰ &lt;code&gt;UIView&lt;/code&gt; çš„ &lt;code&gt;bounds&lt;/code&gt; è®¾ç½®ä¸ºç»˜åˆ¶åŒºåŸŸï¼›&lt;br&gt;&lt;strong&gt;Step 4ï¼š&lt;/strong&gt;é€šè¿‡ &lt;code&gt;String&lt;/code&gt; åˆå§‹åŒ– &lt;code&gt;NSAttributedString&lt;/code&gt; æ¥åˆ›å»º &lt;strong&gt;&lt;code&gt;CTFramesetterRef&lt;/code&gt;&lt;/strong&gt; ç„¶åæ ¹æ®ç”»å¸ƒå·¥å‚åˆ›å»º &lt;code&gt;CTFrameRef&lt;/code&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 5ï¼š&lt;/strong&gt;åœ¨ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶ç”»å¸ƒå†…å®¹ï¼›&lt;br&gt;&lt;strong&gt;Step 6ï¼š&lt;/strong&gt;é‡Šæ”¾åˆ›å»º &lt;code&gt;frame&lt;/code&gt;ã€&lt;code&gt;path&lt;/code&gt; å’Œ &lt;code&gt;framesetter&lt;/code&gt; çš„ &lt;code&gt;CFTypeRef&lt;/code&gt; å¯¹è±¡ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åœ¨å½“å‰ &lt;code&gt;Core Text&lt;/code&gt; ç»˜åˆ¶çš„åŸºç¡€ä¹‹ä¸Šï¼Œæˆ‘ä»¬åœ¨çœ‹ä¸€ä¸‹å…·ä½“ç»˜åˆ¶å®ç°ä¸­ &lt;code&gt;CTTypeRef&lt;/code&gt; ä¸­ &lt;strong&gt;&lt;code&gt;Framesetter&lt;/code&gt;ã€&lt;code&gt;Frame&lt;/code&gt;ã€ &lt;code&gt;Line&lt;/code&gt; å’Œ &lt;code&gt;Run&lt;/code&gt; ä¹‹é—´çš„å…³ç³»&lt;/strong&gt;ï¼Œä»¥åŠåœ¨å®é™…ç»˜åˆ¶æ˜¾ç¤ºåœ¨ç•Œé¢ä¸Šå¯¹åº”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kEMTkga5I2kb3adio%2F1877765-80857db5a123d571.png?alt=media&amp;amp;token=07b120dd-3bf1-4a2e-b566-33b6005240a7&quot; alt=&quot;Core Text æœ€å°ç³»ç»Ÿ.png&quot;&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;å°ç¼–åœ¨å®ç°å›¾æ–‡æ··æ’å®ç°ä¸­ï¼Œè´´å‡ºä¸‹é¢ä¸€æ®µå¯¹äºå¯Œæ–‡æœ¬ &lt;code&gt;CFFrameRef&lt;/code&gt; æ¥è®¡ç®— &lt;code&gt;Image&lt;/code&gt; å¯Œæ–‡æœ¬ç»˜åˆ¶å¸ƒå±€ä»£ç ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å– frameRef ä¸­ Lines&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *lines = (&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)CTFrameGetLines(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; lineCount = lines.count;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å– frameRef ä¸­ Each Line å¼€å¤´ Point&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; lineOrigins[lineCount];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CTFrameGetLineOrigins(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), lineOrigins);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; imgIndex = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//éå† Each Line&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; lineCount; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTLineRef lineRef = (__bridge CTLineRef)lines[i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//è·å– Each Line çš„ Run&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *runsArray = (&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)CTLineGetGlyphRuns(lineRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//éå† Each Run&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; runObj &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; runsArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTRunRef runRef = (__bridge CTRunRef)runObj;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *runAttribs = (&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)CTRunGetAttributes(runRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTRunDelegateRef delegate = (__bridge CTRunDelegateRef)[runAttribs valueForKey:(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)kCTRunDelegateAttributeName];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (delegate == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *metaDic = CTRunDelegateGetRefCon(delegate);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (![metaDic isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; runBounds;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; ascent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è·å– run çš„ width&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.size.width = CTRunGetTypographicBounds(runRef, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), &amp;amp;ascent, &amp;amp;descent, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//æ ¹æ®ä¸Šä¸‹åç§»è·å– run çš„ height&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.size.height = ascent + descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; xOffset = CTLineGetOffsetForStringIndex(lineRef, CTRunGetStringRange(runRef).location, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.origin.x = lineOrigins[i].x + xOffset;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.origin.y = lineOrigins[i].y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        runBounds.origin.y -= descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGPathRef&lt;/span&gt; pathRef = CTFrameGetPath(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; colRect = &lt;span class=&quot;built_in&quot;&gt;CGPathGetBoundingBox&lt;/span&gt;(pathRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; delegateRect = &lt;span class=&quot;built_in&quot;&gt;CGRectOffset&lt;/span&gt;(runBounds, colRect.origin.x, colRect.origin.y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ä»ä¸Šé¢ä¸¤æ®µä»£ç å¯ä»¥çœ‹å‡ºåœ¨ &lt;code&gt;CTTypeRef&lt;/code&gt; ç±»æ—ä¸­ç±»çš„å…³ç³»å¦‚ä¸‹ï¼š&lt;br&gt;&lt;strong&gt;ï¼ˆ1ï¼‰&lt;/strong&gt; &lt;code&gt;CTFramesetter&lt;/code&gt; é€šè¿‡åˆå§‹åŒ– &lt;code&gt;NSAttributedString&lt;/code&gt; æ¥åˆ›å»ºç»˜åˆ¶ç”»å¸ƒ &lt;code&gt;CTFrameRef&lt;/code&gt; å¯¹åº”çš„ç±»ï¼›&lt;br&gt;&lt;strong&gt;ï¼ˆ2ï¼‰&lt;/strong&gt; é€šè¿‡ç”»å¸ƒ &lt;code&gt;CTFrame&lt;/code&gt; å¯ä»¥è·å–æ‰€æœ‰çš„ &lt;code&gt;Line&lt;/code&gt; åŸºæœ¬ä¿¡æ¯ï¼Œä¾‹å¦‚ï¼šè¡Œæ•°ã€æ¯è¡Œ &lt;code&gt;Start Point&lt;/code&gt;ç­‰å‚æ•°ã€‚å†é€šè¿‡åæ ‡è½¬æ¢å°±å¯ä»¥è®¡ç®—å½“å‰ &lt;code&gt;Line&lt;/code&gt; åœ¨ &lt;code&gt;UIKit&lt;/code&gt; ç•Œé¢ä¸Šå¸ƒå±€ç»˜åˆ¶ä¿¡æ¯ï¼Œ&lt;strong&gt;åœ¨å®é™…çš„ç»˜åˆ¶æ—¶å¯ä»¥é€‰ç”¨ &lt;code&gt;CTLineDraw(CTLineRef, CGContext)&lt;/code&gt; æ¥æ›¿ä»£ &lt;code&gt;CTFrameDraw(CTFrameRef, CGContext)&lt;/code&gt; æ•´ä¸ªç”»å¸ƒåœ¨å½“å‰ä¸Šä¸‹æ–‡ä¸­ç»˜åˆ¶&lt;/strong&gt;ï¼›&lt;br&gt;&lt;strong&gt;ï¼ˆ3ï¼‰&lt;/strong&gt;æ•ˆä»¿ä» &lt;code&gt;CTFrameRef&lt;/code&gt; ä¸­è·å–å¯¹åº”çš„ &lt;code&gt;Line&lt;/code&gt;ï¼ŒåŒæ ·å¯ä»¥åœ¨ &lt;code&gt;Each Line&lt;/code&gt; ä¸­æ¥è·å– &lt;code&gt;Core Text&lt;/code&gt; æœ€åŸºæœ¬çš„å•å…ƒ &lt;code&gt;CTRunRef&lt;/code&gt;ã€‚é€šè¿‡è·å–çš„ &lt;code&gt;Each Line&lt;/code&gt; ä¸­æ‰€æœ‰çš„ &lt;code&gt;Run&lt;/code&gt;ï¼Œç„¶åå€ŸåŠ© &lt;code&gt;CTRunDelegateRef&lt;/code&gt; åœ¨å®é™…ç»˜åˆ¶è¿‡ç¨‹ä¸­åŠ¨æ€è®¾ç½®å½“å‰ &lt;code&gt;Run&lt;/code&gt; å—éœ€è¦ç»˜åˆ¶ &lt;code&gt;Rect&lt;/code&gt; åŒºåŸŸã€‚&lt;strong&gt;åŒæ ·åœ¨å®é™…ç»˜åˆ¶æ—¶ä¹Ÿå¯ä»¥é‡‡ç”¨ &lt;code&gt;CTRunDraw(CTRunRef, CGContext)&lt;/code&gt; æ¥ä»£æ›¿ &lt;code&gt;CTLineDraw(CTLineRef, CGContext)&lt;/code&gt; æ¥å•ç‹¬ç»˜åˆ¶æ¯ä¸ªå­—å½¢å—ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;hr&gt;
&lt;p&gt;&lt;strong&gt;åœ¨å›¾æ–‡æ··æ’è¿‡ç¨‹ä¸­åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼Œæ ¹æ®æƒ…å†µçš„ä¸åŒä¹Ÿå¯ä»¥é‡‡ç”¨ä¸åŒçš„æ–¹å¼å®ç°æ’ç‰ˆå¼•æ“å®ç°ï¼š&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;ï¼ˆaï¼‰å¯¹äºæ’ç‰ˆçš„æ•°æ®æ¥æºäº &lt;code&gt;Server&lt;/code&gt; ä¹Ÿå°±æ˜¯æˆ‘ä»¬éœ€è¦éœ€è¦è®¿é—®åæ‰ä¼šè·å–æ•°æ®ï¼Œç„¶åæ¥åˆå§‹åŒ–æ§ä»¶ï¼Œé‰´äº &lt;code&gt;Network&lt;/code&gt; çš„å»¶è¿Ÿæ€§ï¼Œæˆ‘ä»¬å¯ä»¥é¢„å…ˆè®¾ç½®é€šè¿‡è®¾ç½® &lt;code&gt;CTRunDelegate&lt;/code&gt; æ‹“å±•åœ¨å±•ç¤ºæ—¶çš„ &lt;code&gt;Image&lt;/code&gt; çš„å‚æ•°ä¿¡æ¯ï¼›&lt;br&gt;ï¼ˆbï¼‰å¯¹è¦æ’ç‰ˆçš„æ•°æ®ä¿¡æ¯å·²çŸ¥ï¼Œåœ¨å®ç°çš„åŸºç¡€ä¸Šå¯¹ &lt;code&gt;Image&lt;/code&gt; ä½ç½®æ’å…¥ä¸´æ—¶ä»£æ›¿çš„å­—ç¬¦ä¸²ï¼Œé€šè¿‡ &lt;code&gt;CTDelegateRef&lt;/code&gt; æ¥è·å–å¯¹åº” &lt;code&gt;Image&lt;/code&gt; åŸºæœ¬å‚æ•°è®¾ç½®å½“å‰ &lt;code&gt;Run&lt;/code&gt; å—çš„ç»˜åˆ¶æ—¶ä¸Šä¸‹ç¼©è¿›ï¼Œç„¶åæ·»åŠ åˆ°å¯Œæ–‡æœ¬å­—ç¬¦ä¸²ä¸­æ­¤æ—¶ä¹Ÿå¯ä»¥è®°å½•å½“å‰æ’å…¥å­—ç¬¦ä¸²æ‰€åœ¨çš„ä½ç½®ã€‚&lt;/strong&gt; &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Core-Text-å›¾æ–‡æ··æ’å®ç°&quot;&gt;&lt;a href=&quot;#Core-Text-å›¾æ–‡æ··æ’å®ç°&quot; class=&quot;headerlink&quot; title=&quot;Core Text å›¾æ–‡æ··æ’å®ç°&quot;&gt;&lt;/a&gt;Core Text å›¾æ–‡æ··æ’å®ç°&lt;/h2&gt;&lt;p&gt;ç›®å‰ä»¥ &lt;code&gt;Core Text&lt;/code&gt; ä¸ºåŸºç¡€å®ç°å›¾æ–‡æ··æ’å®ç°æ§ä»¶ &lt;code&gt;YYKit&lt;/code&gt; ç³»åˆ—ç»„ä»¶ä¸­ &lt;code&gt;YYText&lt;/code&gt; å®ç°é€»è¾‘æœ€ä¸ºæ¸…æ™°ï¼Œç’ä½çš„æƒ…å†µä¹Ÿæœ€ä¸ºå…¨é¢ã€‚ä¸‹é¢æ ¹æ®è¦å®ç°å›¾æ–‡æ··æ’çš„æ•°æ®æ¥æºåšåŒºåˆ†æ¥åˆ†åˆ«è®²è§£æ’ç‰ˆå¼•æ“å®ç°é€»è¾‘ã€‚&lt;/p&gt;
&lt;h3 id=&quot;æ¥è‡ª-Server&quot;&gt;&lt;a href=&quot;#æ¥è‡ª-Server&quot; class=&quot;headerlink&quot; title=&quot;æ¥è‡ª Server&quot;&gt;&lt;/a&gt;æ¥è‡ª &lt;code&gt;Server&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;å½“éœ€è¦æ’ç‰ˆçš„æ•°æ®æ¥è‡ªä¸ &lt;code&gt;Server&lt;/code&gt;ï¼Œå®¢æˆ·ç«¯å’Œåå°æ¥å•†é‡åœ¨æ¨¡æ¿ä¼ è¾“æ•°æ®æ ¼å¼ã€‚è¿™é‡Œåœ¨æœ¬åœ°æ¨¡æ‹Ÿç½‘ç»œæ•°æ®åŠ è½½çš„æ•°æ®æ ¼å¼é‡‡ç”¨ &lt;strong&gt;&lt;code&gt;JSON&lt;/code&gt;&lt;/strong&gt; æ¥å®ç°ï¼Œä¸è¿‡å°ç¼–å»ºè®®å¦‚æœåå°å…è®¸çš„æƒ…å†µä¸‹å¯ä»¥å°è¯• &lt;strong&gt;&lt;code&gt;Protobuf&lt;/code&gt;&lt;/strong&gt; æ•°æ®æ ¼å¼ï¼ˆåé¢å°ç¼–ä¼šåœ¨ç½‘ç»œåè®®ä¸­å¯¹è¯¥æ ¼å¼çš„æ•°æ®è¿›è¡Œè¯¦ç»†çš„è®²è§£ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;è¿™é‡Œå¯¹ &lt;code&gt;Core Text&lt;/code&gt; ç»˜åˆ¶å®ç°æ­¥éª¤è¿›è¡Œåˆ’åˆ†ï¼Œç„¶åå¯¹æ¯ä¸€ä¸ªæ­¥éª¤çš„å·¥ä½œè¿›è¡Œæå–æ¥å®ç°ä¸åŒçš„åŠŸèƒ½ã€‚ä¸‹é¢åŒºåˆ†&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;(1)&lt;/strong&gt;&lt;code&gt;FYEvolveDisplay&lt;/code&gt;ï¼šæ˜¾ç¤ºç±»ï¼Œç”¨äºåœ¨å¯Œæ–‡æœ¬å®é™…ç»˜åˆ¶ï¼Œæ’ç‰ˆçš„å›¾ç‰‡çš„å›¾ç‰‡å®ç°å¡«å……å’Œå›¾ç‰‡åŠé“¾æ¥æ–‡æœ¬ç‚¹å‡»æ“ä½œç›‘å¬ï¼›&lt;br&gt;&lt;strong&gt;(2)&lt;/strong&gt;&lt;code&gt;FYFrameParser&lt;/code&gt;ï¼šæ’ç‰ˆç±»ï¼Œå¯¹éœ€è¦æ’ç‰ˆçš„å†…å®¹åŠ è½½è§£æï¼Œç„¶åç”Ÿæˆæ’ç‰ˆï¼›&lt;br&gt;&lt;strong&gt;(3)&lt;/strong&gt;&lt;code&gt;FYFrameParseConfig&lt;/code&gt;ï¼šé…ç½®ç±»ï¼Œåœ¨æ’ç‰ˆç»˜åˆ¶ä¸­æ–‡å­—åŸºæœ¬å‚æ•°çš„ &lt;code&gt;model&lt;/code&gt; é…ç½®å‚æ•°ï¼›&lt;br&gt;&lt;strong&gt;(4)&lt;/strong&gt;&lt;code&gt;FYCoreTextData&lt;/code&gt;ï¼šæ¨¡å‹ç±»ï¼Œä½œä¸ºå®é™…ç»˜åˆ¶ä¸­æ•°æ®æ˜¾ç¤ºæ‰¿è½½ä½“ï¼›&lt;br&gt;&lt;strong&gt;(5)&lt;/strong&gt;&lt;code&gt;FYCoreTextImageData&lt;/code&gt;ï¼šå›¾ç‰‡é…ç½®ç±»ï¼Œåœ¨æ’ç‰ˆç»˜åˆ¶ä¸­å›¾ç‰‡åŸºæœ¬å‚æ•°çš„ &lt;code&gt;model&lt;/code&gt; é…ç½®å‚æ•°ï¼›&lt;br&gt;&lt;strong&gt;(6)&lt;/strong&gt;&lt;code&gt;FYCoreTextLinkData&lt;/code&gt;ï¼šé“¾æ¥æ–‡æœ¬é…ç½®ç±»ï¼Œåœ¨æ’ç‰ˆç»˜åˆ¶ä¸­é“¾æ¥æ–‡å­—åŸºæœ¬å‚æ•°çš„ &lt;code&gt;model&lt;/code&gt; é…ç½®å‚æ•°ï¼›&lt;br&gt;&lt;strong&gt;(7)&lt;/strong&gt;&lt;code&gt;FYCoreTextLinkUtilts&lt;/code&gt;ï¼šé“¾æ¥æ–‡æœ¬å·¥å…·ç±»ï¼Œåœ¨ &lt;code&gt;FYEvolveDisplay&lt;/code&gt; ç‚¹å‡»ä¸­æŸ¥æ‰¾åˆ¤æ–­å½“å‰ç‚¹å‡»åœ¨åœ¨å…·ä½“å“ªä¸ªé“¾æ¥æ–‡å­—ã€‚    &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹é¢æŒ‰ç…§ï¼ˆ1ï¼‰æ•°æ®åŠ è½½è§£æç”Ÿæˆæ˜¾ç¤ºæ‰¿è½½ â€“&amp;gt; ï¼ˆ2ï¼‰ç„¶ååœ¨ç»˜åˆ¶  â€“&amp;gt; ï¼ˆ3ï¼‰æœ€ååœ¨ç‚¹å‡»ç›¸åº”æ­¥éª¤æ¥è´´å‡ºç›¸å…³ä»£ç æ®µ&lt;/strong&gt;&lt;/p&gt;
&lt;h4 id=&quot;æ•°æ®è§£æ&quot;&gt;&lt;a href=&quot;#æ•°æ®è§£æ&quot; class=&quot;headerlink&quot; title=&quot;æ•°æ®è§£æ&quot;&gt;&lt;/a&gt;æ•°æ®è§£æ&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;97&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;98&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;99&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;100&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;101&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;102&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;103&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;104&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;105&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;106&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;107&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;108&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;109&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;110&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;111&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;112&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;113&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;114&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;115&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;116&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;117&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;118&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;119&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;120&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;121&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;122&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;123&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;124&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;125&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;126&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;127&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;128&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;129&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;130&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;131&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;132&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;133&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;134&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;135&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;136&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;137&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;138&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;139&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;140&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;141&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;142&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;143&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;144&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;145&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;146&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;147&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;148&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYFrameParser&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (FYCoreTextData *)parseLocalImageTemplateFile:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)path config:(FYFrameParserConfig *)config &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *imageArray = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; array];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *linkArray = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; array];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//è§£ææ•°æ®æ¨¡æ¿&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *imageTemplateAttrib  = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; loadLocalTemplateFile:path config:config imageArray:imageArray linkArray:linkArray];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//æ ¹æ®é…ç½®ä¿¡æ¯ç”Ÿæˆæ˜¾ç¤ºè½½ä½“&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextData *coreTextData = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; parseAttributeContent:imageTemplateAttrib config:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    coreTextData.imageArray = imageArray;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    coreTextData.linkArray = linkArray;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; coreTextData;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)loadLocalTemplateFile:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)path&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                       config:(FYFrameParserConfig *)config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                   imageArray:(&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *)imageArray&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                    linkArray:(&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *)linkArray &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; *data = [&lt;span class=&quot;built_in&quot;&gt;NSData&lt;/span&gt; dataWithContentsOfFile:path];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableAttributedString&lt;/span&gt; *mutableAttrib = [[&lt;span class=&quot;built_in&quot;&gt;NSMutableAttributedString&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (data) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *templateArray = [&lt;span class=&quot;built_in&quot;&gt;NSJSONSerialization&lt;/span&gt; JSONObjectWithData:data options:&lt;span class=&quot;built_in&quot;&gt;NSJSONReadingAllowFragments&lt;/span&gt; error:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([templateArray isKindOfClass: [&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *dic &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; templateArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *typeDic = dic[&lt;span class=&quot;string&quot;&gt;@&quot;type&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([typeDic isEqualToString: &lt;span class=&quot;string&quot;&gt;@&quot;txt&quot;&lt;/span&gt;]) &amp;#123;&lt;span class=&quot;comment&quot;&gt;//parser text data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *textAttrib = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; parseAttributedContentFormDictionary:dic config:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [mutableAttrib appendAttributedString:textAttrib];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([typeDic isEqualToString: &lt;span class=&quot;string&quot;&gt;@&quot;img&quot;&lt;/span&gt;]) &amp;#123;&lt;span class=&quot;comment&quot;&gt;//parser image data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *imageAttrib = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; parseImageDataFromDictionary:dic config:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [mutableAttrib appendAttributedString:imageAttrib];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    FYCoreTextImageData *imageData = [[FYCoreTextImageData alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    imageData.name = dic[&lt;span class=&quot;string&quot;&gt;@&quot;name&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    imageData.url = dic[&lt;span class=&quot;string&quot;&gt;@&quot;url&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    imageData.position = mutableAttrib.length;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [imageArray addObject:imageData];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;([typeDic isEqualToString:&lt;span class=&quot;string&quot;&gt;@&quot;link&quot;&lt;/span&gt;])&amp;#123;&lt;span class=&quot;comment&quot;&gt;//parser link text data&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; startLoc = mutableAttrib.length;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *linkAttrib = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; parseAttributedContentFormDictionary:dic config:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [mutableAttrib appendAttributedString:linkAttrib];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    FYCoreTextLinkData *linkData = [[FYCoreTextLinkData alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; len = mutableAttrib.length - startLoc;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt; range = &lt;span class=&quot;built_in&quot;&gt;NSMakeRange&lt;/span&gt;(startLoc, len);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    linkData.range = range;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    linkData.title = dic[&lt;span class=&quot;string&quot;&gt;@&quot;content&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    linkData.url = dic[&lt;span class=&quot;string&quot;&gt;@&quot;url&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    [linkArray addObject:linkData];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; mutableAttrib;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)parseAttributedContentFormDictionary:(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)dict config:(FYFrameParserConfig *)config &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableDictionary&lt;/span&gt; *attribDic = [[&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; attributesWithConfig:config] mutableCopy];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//Color&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; *color = [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; colorFromHexString:dict[&lt;span class=&quot;string&quot;&gt;@&quot;color&quot;&lt;/span&gt;]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (color) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        attribDic[(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)kCTForegroundColorAttributeName] = (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)color.CGColor;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//Size&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; fontSize = [dict[&lt;span class=&quot;string&quot;&gt;@&quot;size&quot;&lt;/span&gt;] floatValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (fontSize &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTFontRef fontRef = CTFontCreateWithName((&lt;span class=&quot;built_in&quot;&gt;CFStringRef&lt;/span&gt;)&lt;span class=&quot;string&quot;&gt;@&quot;ArialMT&quot;&lt;/span&gt;, fontSize, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        attribDic[(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)kCTFontAttributeName] = (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)fontRef;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(fontRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *content = dict[&lt;span class=&quot;string&quot;&gt;@&quot;content&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [[&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; alloc] initWithString:content attributes:attribDic];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)parseImageDataFromDictionary:(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)dict&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                              config:(FYFrameParserConfig *)config &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTRunDelegateCallbacks callbacks;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    memset(&amp;amp;callbacks, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;sizeof&lt;/span&gt;(CTRunDelegateCallbacks));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callbacks.version = kCTRunDelegateVersion1;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callbacks.getAscent = ascentCallback;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callbacks.getDescent = descentCallback;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    callbacks.getWidth = widthCallback;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTRunDelegateRef delegateRef = CTRunDelegateCreate(&amp;amp;callbacks, (__bridge &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)(dict));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;unichar&lt;/span&gt; objectReplaceChar = &lt;span class=&quot;number&quot;&gt;0xFFCC&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *conetnt = [&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; stringWithCharacters:&amp;amp;objectReplaceChar length:&lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *attrib = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; attributesWithConfig:config];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableAttributedString&lt;/span&gt; *space = [[&lt;span class=&quot;built_in&quot;&gt;NSMutableAttributedString&lt;/span&gt; alloc] initWithString:conetnt attributes:attrib];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFAttributedStringSetAttribute&lt;/span&gt;((&lt;span class=&quot;built_in&quot;&gt;CFMutableAttributedStringRef&lt;/span&gt;)space, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), kCTRunDelegateAttributeName, delegateRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(delegateRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; space;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 5&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (FYCoreTextData *)parseAttributeContent:(&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)attribContent config:(FYFrameParserConfig *)config &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFramesetterRef frameSetter = CTFramesetterCreateWithAttributedString((&lt;span class=&quot;built_in&quot;&gt;CFAttributedStringRef&lt;/span&gt;) attribContent);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//ç»˜åˆ¶é«˜åº¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; restrictSize = &lt;span class=&quot;built_in&quot;&gt;CGSizeMake&lt;/span&gt;(config.width, &lt;span class=&quot;built_in&quot;&gt;CGFLOAT_MAX&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; coreTextSize = CTFramesetterSuggestFrameSizeWithConstraints(frameSetter, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;, restrictSize, &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; textHeight = coreTextSize.height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//ç”Ÿæˆ CTFrameRef&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameRef frameRef = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; createFrameRefWithFrameSetter:frameSetter config:config height:textHeight];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextData *coreTextData = [[FYCoreTextData alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    coreTextData.ctFrame = frameRef;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    coreTextData.height = textHeight;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(frameRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(frameSetter);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; coreTextData;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 6&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (CTFrameRef)createFrameRefWithFrameSetter:(CTFramesetterRef)frameSetterref&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     config:(FYFrameParserConfig *)config&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                                     height:(&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)height &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGMutablePathRef&lt;/span&gt; path = &lt;span class=&quot;built_in&quot;&gt;CGPathCreateMutable&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPathAddRect&lt;/span&gt;(path, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, config.width, height));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameRef frameRef = CTFramesetterCreateFrame(frameSetterref, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), path, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(path);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; frameRef;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢æ˜¯æ¨¡æ‹Ÿç½‘ç»œè¯·æ±‚æ•°æ®æ¨¡æ¿åŠ è½½æœ¬åœ°æ¨¡æ¿ç”Ÿæˆæ˜¾ç¤ºè½½ä½“ï¼ˆå³ç”»å¸ƒï¼‰è¿‡ç¨‹ã€‚&lt;br&gt;&lt;strong&gt;Step 1ï¼š&lt;/strong&gt; ç”± &lt;code&gt;Step 2&lt;/code&gt; åŠ è½½æœ¬åœ°æ¨¡æ‹Ÿæ•°æ®ï¼Œç„¶åç”± &lt;code&gt;Step 5&lt;/code&gt; æ¥è®¡ç®—ç»˜åˆ¶ç”»å¸ƒçš„åŒºåŸŸå’Œè·¯å¾„ç”Ÿæˆå¯¹åº”ç”»å¸ƒäº¤ç»™æ¨¡å‹ç±»åœ¨è‡ªå®šä¹‰çš„ &lt;code&gt;UIKit&lt;/code&gt; æ§ä»¶ &lt;code&gt;drawRect:&lt;/code&gt; å®Œæˆç»˜åˆ¶ï¼›&lt;br&gt;&lt;strong&gt;Step 2ï¼š&lt;/strong&gt; è·å–æœ¬åœ°çš„æ•°æ®ç„¶åè§£ç ï¼Œéå†å…¶ä¸­æ•°æ®å†…å®¹è§£æå¯¹åº” &lt;code&gt;Text&lt;/code&gt;ã€&lt;code&gt;Image&lt;/code&gt; å’Œ &lt;code&gt;LinkText&lt;/code&gt; æ•°æ®ã€‚&lt;strong&gt;å¦‚æœæ˜¯ &lt;code&gt;Text&lt;/code&gt; ç±»å‹ç”± &lt;code&gt;Step 3&lt;/code&gt; æ¥æ ¹æ®å†…å®¹é…ç½®æ¥ç”Ÿæˆå¯¹åº”çš„ &lt;code&gt;NSAttributedString&lt;/code&gt; æ•°æ®ï¼Œå¦‚æœæ˜¯ &lt;code&gt;Image&lt;/code&gt; ç±»å‹å°±äº¤ç”± &lt;code&gt;Step 4&lt;/code&gt; ä¸´æ—¶å¡«å……å•ä¸ªå­—ç¬¦ä¸²å¹¶ä¸”é€šè¿‡ &lt;code&gt;CTRunDelegateRef&lt;/code&gt; æ¥åœ¨è¿è¡Œæ—¶è®¾ç½®å½“å‰ä¸Šä¸‹ç¼©è¿›ï¼Œå¦‚æœæ˜¯ &lt;code&gt;LinkText&lt;/code&gt; ç±»å‹çš„æ•°æ®è¿˜æ˜¯ç”± &lt;code&gt;Step 3&lt;/code&gt; æ¥å®Œæˆå¤„ç†ï¼Œä½†æ˜¯è®°å½•å½“å‰ &lt;code&gt;NSAttributedString&lt;/code&gt; çš„ &lt;code&gt;Start Index&lt;/code&gt; å’Œ &lt;code&gt;End Index&lt;/code&gt; ä½ç½®&lt;/strong&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 3ï¼š&lt;/strong&gt;æ­¤æ­¥éª¤æ˜¯è§£æ &lt;code&gt;Text&lt;/code&gt; ç±»å‹çš„æ•°æ®ï¼Œæ ¹æ®è®¾ç½®çš„ &lt;code&gt;FYFrameConfig&lt;/code&gt; é…ç½®çš„åŸºç¡€ä¿¡æ¯å¯¹æ•°æ®è¿›è¡Œè§£æç”Ÿæˆå¯¹åº” &lt;code&gt;NSAttributedString&lt;/code&gt; ç±»å‹çš„æ•°æ®ï¼›&lt;br&gt;&lt;strong&gt;Step 4ï¼š&lt;/strong&gt;æ­¤æ­¥éª¤æ˜¯å¯¹ &lt;code&gt;Image&lt;/code&gt; ç±»å‹çš„æ•°æ®ç±»å‹å¯¹åº”çš„ &lt;code&gt;CTRunRef&lt;/code&gt; è¿›è¡Œä¸´æ—¶èµ‹å€¼ä¸€ä¸ªå­—ç¬¦ï¼Œç„¶åé€šè¿‡ &lt;code&gt;CTRunDelegateCallbacks&lt;/code&gt; æ¥è®¾ç½® &lt;code&gt;Run&lt;/code&gt;ï¼ˆå—ï¼‰åœ¨å®é™…ç»˜åˆ¶æ—¶ &lt;code&gt;Ascent&lt;/code&gt;ï¼ˆæ’ç‰ˆä¸Šå‡ï¼‰ å’Œ &lt;code&gt;Descent&lt;/code&gt;ï¼ˆæ’ç‰ˆä¸‹é™ï¼‰é—´è·ä»¥æ­¤æ¥ä½œä¸ºå›¾ç‰‡ç»˜åˆ¶æ—¶çš„é«˜åº¦ã€‚&lt;strong&gt;ç„¶ååœ¨å®é™…ç»˜åˆ¶è¿‡ç¨‹ä¸­éå†å½“å‰ &lt;code&gt;Run&lt;/code&gt;(å—) è®¡ç®—å½“å‰ &lt;code&gt;Image&lt;/code&gt; ç»˜åˆ¶çš„åŒºåŸŸï¼Œè·å–å›¾ç‰‡åé‡‡ç”¨ &lt;code&gt;CGContextDrawImage(CGContext, CGRect, CGImage)&lt;/code&gt; ç»˜åˆ¶å½“å‰å›¾ç‰‡&lt;/strong&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 5ï¼š&lt;/strong&gt;é€šè¿‡ &lt;code&gt;NSAttributedString&lt;/code&gt; æ¥ç”Ÿæˆ &lt;code&gt;CTFrameRef&lt;/code&gt; ç”»å¸ƒå·¥å‚ï¼Œè®¡ç®—å½“å‰éœ€è¦ç»˜åˆ¶å†…å®¹é«˜åº¦ç”± &lt;code&gt;Step 6&lt;/code&gt; æ¥ç”Ÿæˆ &lt;code&gt;CTFrameRef&lt;/code&gt;ï¼ˆç”»å¸ƒï¼‰ç„¶åèµ‹å€¼ç»™ &lt;code&gt;FYCoreTextData&lt;/code&gt; æ¨¡å‹ç±»ç”»å¸ƒï¼›&lt;br&gt;&lt;strong&gt;Step 6ï¼š&lt;/strong&gt; åˆ©ç”¨æœ€å°å•å…ƒä¸­é€šè¿‡è®¾ç½®è·¯å¾„ä½¿ç”¨ &lt;code&gt;CFFramesetterRef&lt;/code&gt;ï¼ˆç»˜åˆ¶ğŸ­ï¼‰æ¥ç”Ÿæˆå¯¹åº”éœ€è¦æ’ç‰ˆçš„ &lt;code&gt;CTFrameRef&lt;/code&gt;ï¼ˆç”»å¸ƒï¼‰ã€‚    &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å®é™…ç»˜åˆ¶&quot;&gt;&lt;a href=&quot;#å®é™…ç»˜åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;å®é™…ç»˜åˆ¶&quot;&gt;&lt;/a&gt;å®é™…ç»˜åˆ¶&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYEvolveDisplayView&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)drawRect:(&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)rect &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; drawRect:rect];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; contextRef = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextSetTextMatrix&lt;/span&gt;(contextRef, &lt;span class=&quot;built_in&quot;&gt;CGAffineTransformIdentity&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextTranslateCTM&lt;/span&gt;(contextRef, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size.height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextScaleCTM&lt;/span&gt;(contextRef, &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;-1.0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTFrameDraw(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData.ctFrame, contextRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (FYCoreTextImageData *imageData &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData.imageArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *image = [&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; imageNamed:imageData.name];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (image) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//CGRect rect = imageData.imageRect;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//NSLog(@&quot;image data rect in display view: x:%f y:%f height:%f width:%f&quot;, rect.origin.x, rect.origin.y, rect.size.height, rect.size.width);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextDrawImage&lt;/span&gt;(contextRef, imageData.imageRect, image.CGImage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYCoreTextData&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)fillReplaceCharWithImagePosition &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageArray.count == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123; &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *lines = (&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)CTFrameGetLines(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; lineCount = lines.count;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; lineOrigins[lineCount];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameGetLineOrigins(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), lineOrigins);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; imgIndex = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextImageData *imageData = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageArray[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; lineCount; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (imageData == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123; &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTLineRef lineRef = (__bridge CTLineRef)lines[i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *runsArray = (&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)CTLineGetGlyphRuns(lineRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; runObj &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; runsArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            CTRunRef runRef = (__bridge CTRunRef)runObj;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *runAttribs = (&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *)CTRunGetAttributes(runRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            CTRunDelegateRef delegate = (__bridge CTRunDelegateRef)[runAttribs valueForKey:(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)kCTRunDelegateAttributeName];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (delegate == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *metaDic = CTRunDelegateGetRefCon(delegate);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (![metaDic isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; runBounds;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; ascent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.size.width = CTRunGetTypographicBounds(runRef, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), &amp;amp;ascent, &amp;amp;descent, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.size.height = ascent + descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; xOffset = CTLineGetOffsetForStringIndex(lineRef, CTRunGetStringRange(runRef).location, &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.origin.x = lineOrigins[i].x + xOffset;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.origin.y = lineOrigins[i].y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runBounds.origin.y -= descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGPathRef&lt;/span&gt; pathRef = CTFrameGetPath(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ctFrame);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; colRect = &lt;span class=&quot;built_in&quot;&gt;CGPathGetBoundingBox&lt;/span&gt;(pathRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; delegateRect = &lt;span class=&quot;built_in&quot;&gt;CGRectOffset&lt;/span&gt;(runBounds, colRect.origin.x, colRect.origin.y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            imageData.imageRect = delegateRect;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            imgIndex++;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(imgIndex == &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageArray.count) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                imageData = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                imageData = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.imageArray[imgIndex];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&amp;gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Step 1ï¼š&lt;/strong&gt;ä¸Šé¢æ˜¯åœ¨ &lt;code&gt;FYEvolveDisplayView&lt;/code&gt; ä¸­ &lt;code&gt;drawRect:&lt;/code&gt; é‡‡ç”¨ &lt;code&gt;CTFrameDraw(CTFrameRef, CGContext)&lt;/code&gt; ç»˜åˆ¶åœ¨ &lt;code&gt;UIView&lt;/code&gt; ä¸Šï¼Œç„¶åä» &lt;code&gt;FYCoreTextData&lt;/code&gt; ä¸­é€ä¸ªç»˜åˆ¶ &lt;code&gt;FYCoreTextImageData&lt;/code&gt; å–å‡ºåœ¨ &lt;strong&gt;&lt;code&gt;Step 2&lt;/code&gt;&lt;/strong&gt; è®¡ç®—å½“å‰ &lt;code&gt;Image&lt;/code&gt; å¯¹ä¸€ä¸ªçš„åŒºåŸŸã€‚ç„¶åä½¿ç”¨ &lt;code&gt;CGContextDrawImage(CGContext, CGRect, CGImageRef)&lt;/code&gt; ç»˜åˆ¶ï¼›&lt;br&gt;&lt;strong&gt;Step 2ï¼š&lt;/strong&gt;è¿™é‡Œåœ¨ä¸Šæ–‡ä¸­æœ‰å±•ç¤ºã€‚ä¸»è¦ä¸€ç‚¹ï¼š&lt;code&gt;CTFrameRef&lt;/code&gt; è·å– &lt;code&gt;Line&lt;/code&gt; æ¯è¡Œï¼Œç„¶ååœ¨éå†æ¯è¡Œçš„ &lt;code&gt;Run&lt;/code&gt;ï¼ˆå—ï¼‰åˆ¤æ–­å…¶ &lt;code&gt;CTRunDelegateRef&lt;/code&gt; å¯¹åº”çš„åè®®è®¡ç®—å½“å‰ &lt;code&gt;Image&lt;/code&gt; å¯¹åº”çš„åŒºåŸŸã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å›¾ç‰‡å’Œé“¾æ¥æ–‡å­—ç‚¹å‡»&quot;&gt;&lt;a href=&quot;#å›¾ç‰‡å’Œé“¾æ¥æ–‡å­—ç‚¹å‡»&quot; class=&quot;headerlink&quot; title=&quot;å›¾ç‰‡å’Œé“¾æ¥æ–‡å­—ç‚¹å‡»&quot;&gt;&lt;/a&gt;å›¾ç‰‡å’Œé“¾æ¥æ–‡å­—ç‚¹å‡»&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYEvolveDisplayView&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (instancetype)initWithCoder:(&lt;span class=&quot;built_in&quot;&gt;NSCoder&lt;/span&gt; *)aDecoder &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; = [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; initWithCoder:aDecoder];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; deployGestureRecognizer];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)clickComposeImageInDisplayView:(&lt;span class=&quot;built_in&quot;&gt;UIGestureRecognizer&lt;/span&gt; *)recognizer &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; point = [recognizer locationInView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (FYCoreTextImageData *imageData &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData.imageArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; imageRect = imageData.imageRect;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; imagePosCoreText = imageRect.origin;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è½¬æ¢ `Core Text`ï¼ˆå·¦ä¸‹ï¼‰åæ ‡åˆ° `UIKit`ï¼ˆå·¦ä¸Šï¼‰åæ ‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        imagePosCoreText.y = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size.height - imagePosCoreText.y - imageRect.size.height;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; rectInScreen = &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(imagePosCoreText.x, imagePosCoreText.y, imageRect.size.width, imageRect.size.height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;CGRectContainsPoint&lt;/span&gt;(rectInScreen, point)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;Click image of name: %@ url: %@&quot;&lt;/span&gt;, imageData.name, imageData.url);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextLinkData *linkData = [FYCoreTextLinkUtils touchLinkTextInDisplayView:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; atPoint:point data:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.coreTextData];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (linkData) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;Click Link Text. The title is: %@, The Url is %@&quot;&lt;/span&gt;, linkData.title, linkData.url);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;UIGestureRecognizer&lt;/span&gt; *)tapGestureRecognizer &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_tapGestureRecognizer == &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _tapGestureRecognizer = [[&lt;span class=&quot;built_in&quot;&gt;UITapGestureRecognizer&lt;/span&gt; alloc] initWithTarget:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; action:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(clickComposeImageInDisplayView:)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _tapGestureRecognizer.delegate = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; _tapGestureRecognizer;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//FYCoreTextLinkUtils&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 2&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (FYCoreTextLinkData *)touchLinkTextInDisplayView:(&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)view atPoint:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point data:(FYCoreTextData *)textData &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameRef frameRef = textData.ctFrame;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFArrayRef&lt;/span&gt; lines = CTFrameGetLines(frameRef);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!lines) &amp;#123; &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFIndex&lt;/span&gt; count = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetCount&lt;/span&gt;(lines);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; origins[count];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    CTFrameGetLineOrigins(frameRef, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), origins);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//Translateform coordinate&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGAffineTransform&lt;/span&gt; transform = &lt;span class=&quot;built_in&quot;&gt;CGAffineTransformMakeTranslation&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, view.bounds.size.height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    transform = &lt;span class=&quot;built_in&quot;&gt;CGAffineTransformScale&lt;/span&gt;(transform, &lt;span class=&quot;number&quot;&gt;1.0&lt;/span&gt;f, &lt;span class=&quot;number&quot;&gt;-1.0&lt;/span&gt;f);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; i = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; i &amp;lt; count; i++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; linePoint = origins[i];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTLineRef line = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetValueAtIndex&lt;/span&gt;(lines, i);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; lineRect = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; gainLineBounds:line linePoint:linePoint];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; flippedRect = &lt;span class=&quot;built_in&quot;&gt;CGRectApplyAffineTransform&lt;/span&gt;(lineRect, transform);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;CGRectContainsPoint&lt;/span&gt;(flippedRect, point)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; relativePoint = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(point.x - &lt;span class=&quot;built_in&quot;&gt;CGRectGetMinX&lt;/span&gt;(flippedRect), point.y - &lt;span class=&quot;built_in&quot;&gt;CGRectGetMinY&lt;/span&gt;(flippedRect));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CFIndex&lt;/span&gt; index = CTLineGetStringIndexForPosition(line, relativePoint);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; linkTextAtIndex:index linkArray:textData.linkArray];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 3&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (FYCoreTextLinkData *)linkTextAtIndex:(&lt;span class=&quot;built_in&quot;&gt;CFIndex&lt;/span&gt;)index linkArray:(&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *)linkArray &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    FYCoreTextLinkData *linkData = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (FYCoreTextLinkData *data &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; linkArray) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSLocationInRange&lt;/span&gt;(index, data.range)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            linkData = data;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; linkData;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 4&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (&lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt;)gainLineBounds:(CTLineRef)line linePoint:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; ascent = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;f;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; descent = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;f;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; leading = &lt;span class=&quot;number&quot;&gt;0.0&lt;/span&gt;f;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; width = (&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt;)CTLineGetTypographicBounds(line, &amp;amp;ascent, &amp;amp;descent, &amp;amp;leading);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; height = ascent + descent;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(point.x, point.y - descent, width, height);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;Step 1ï¼š&lt;/strong&gt;åœ¨å½“å‰ &lt;code&gt;FYEvoloveDisplayView&lt;/code&gt; æ·»åŠ  &lt;code&gt;UITapGestureRecognizer&lt;/code&gt; æ‰‹åŠ¿è¯†åˆ«ï¼Œæ¥è¯†åˆ«ç‚¹å‡»çš„ä½ç½®ã€‚éå†å¯¹åº” &lt;code&gt;FYCoreTextData&lt;/code&gt; ä¸­å›¾ç‰‡ &lt;code&gt;Rect&lt;/code&gt; æ¥æŸ¥æ‰¾ç‚¹å‡»ä½ç½®æ˜¯å¦å¯¹åº” &lt;code&gt;Image&lt;/code&gt;ï¼ŒåŒæ—¶æ‰§è¡Œ &lt;strong&gt;&lt;code&gt;Step 2&lt;/code&gt;&lt;/strong&gt; æ¥æŸ¥æ‰¾ç‚¹å‡»æ˜¯å¦å¯¹åº”é“¾æ¥æ–‡å­—ï¼›&lt;br&gt;&lt;strong&gt;Step 2ï¼š&lt;/strong&gt;åœ¨ &lt;code&gt;CTFrameRef&lt;/code&gt; éå†æ¯ä¸€è¡Œç”± &lt;strong&gt;&lt;code&gt;Step 4&lt;/code&gt;&lt;/strong&gt; æ¥è·å–å¯¹åº”è¡Œ &lt;code&gt;Rect&lt;/code&gt; è½¬å˜ä¸º &lt;code&gt;UIKit&lt;/code&gt; åæ ‡ï¼Œåœ¨è¯¥è¡Œ &lt;code&gt;Rect&lt;/code&gt; åœ¨å½“å‰åŒ…å«ç‚¹å‡» &lt;code&gt;Point&lt;/code&gt; æ—¶ï¼Œåœ¨ç”± &lt;code&gt;Step 3&lt;/code&gt; éå†å¯¹åº”è¾“å‡º &lt;code&gt;FYCoreTextLinkData&lt;/code&gt; é“¾æ¥æ–‡å­—ï¼›&lt;br&gt;&lt;strong&gt;Step 3ï¼š&lt;/strong&gt;åœ¨ç‚¹å‡»æ¯è¡Œ &lt;code&gt;Line&lt;/code&gt; ä¸­é€šè¿‡ç‚¹å‡»æ–‡å­— &lt;code&gt;Line&lt;/code&gt; ä¸­çš„ &lt;code&gt;Index&lt;/code&gt; éå†é“¾æ¥æ–‡å­—å¯¹åº” &lt;code&gt;Range&lt;/code&gt; è·å–å¯¹åº”ç‚¹å‡» &lt;code&gt;FYCoreTextLinkData&lt;/code&gt;ï¼›&lt;br&gt;&lt;strong&gt;Step 4ï¼š&lt;/strong&gt;é€šè¿‡å½“å‰è¡Œ &lt;code&gt;Start Point&lt;/code&gt; ç„¶åè·å–å½“å‰ &lt;code&gt;Run&lt;/code&gt; å¯¹åº” &lt;code&gt;Rect&lt;/code&gt; ç„¶åè®¡ç®—å‡ºå¯¹åº” &lt;code&gt;Line&lt;/code&gt; çš„ &lt;code&gt;Rect&lt;/code&gt;ï¼ˆåŒºåŸŸï¼‰ã€‚    &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šé¢ä»£ç çš„ &lt;a href=&quot;https://github.com/Optimize-iOS/FYDraw/tree/master/Core%20Text/FYCoreText&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Demo&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;h3 id=&quot;æœ¬åœ°&quot;&gt;&lt;a href=&quot;#æœ¬åœ°&quot; class=&quot;headerlink&quot; title=&quot;æœ¬åœ°&quot;&gt;&lt;/a&gt;æœ¬åœ°&lt;/h3&gt;&lt;p&gt;åœ¨æœ¬åœ°è·å–å›¾æ–‡æ··æ’çš„æ•°æ®ï¼Œå…·ä½“å†…å®¹ç»˜åˆ¶çš„ä»¥ &lt;strong&gt;&lt;code&gt;YYText&lt;/code&gt;&lt;/strong&gt; å®ç°æ¥è¿›è¡Œè®²è¿°ã€‚è¿™é‡Œä»…ä»…å±•ç¤º &lt;code&gt;YYText&lt;/code&gt; çš„ç±»å›¾ï¼Œç„¶åè´´å‡ºæå‡ºå‡ ä¸ªé—®é¢˜ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;YYText&lt;/code&gt; ç±»å›¾&lt;/strong&gt; &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kEXGjgdRqOpHb26gu%2F1877765-3650ddeb5f979ba4.png?alt=media&amp;amp;token=1a9b5b36-922b-4f0a-86ed-63cf9ddcc429&quot; alt=&quot;YYKit(ç±»å›¾).png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸‹é¢ä¸»è¦è§£å†³ä¸€ä¸‹é—®é¢˜&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ï¼ˆ1ï¼‰æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›ï¼Ÿ&lt;br&gt;ï¼ˆ2ï¼‰æ€ä¹ˆè®¡ç®— &lt;code&gt;String&lt;/code&gt;ã€&lt;code&gt;Image&lt;/code&gt; å’Œ &lt;code&gt;UIView&lt;/code&gt; å®ç°å›¾æ–‡æ’åºï¼Ÿ&lt;br&gt;ï¼ˆ3ï¼‰æ€ä¹ˆå®ç° &lt;code&gt;String&lt;/code&gt; è®¾ç½® &lt;code&gt;Text&lt;/code&gt; å„ç§æ ¼å¼è®¾ç½®ï¼Ÿ&lt;br&gt;ï¼ˆ4ï¼‰æ€ä¹ˆå®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&lt;br&gt;ï¼ˆ5ï¼‰æ€ä¹ˆå®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›&quot;&gt;&lt;a href=&quot;#æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›&quot; class=&quot;headerlink&quot; title=&quot;æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›&quot;&gt;&lt;/a&gt;æ€ä¹ˆæä¾›åå°ç»˜åˆ¶çš„èƒ½åŠ›&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYText&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (Class)layerClass &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// é‡å†™ TextAsyncLayer ä¹Ÿå³æ˜¯é‡æ–°å®šä¹‰ Layer ç±»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// å®ç°å¯¹é‡å®šå‘&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [YYTextAsyncLayer class];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;92&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;93&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;94&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;95&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;96&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextAsyncLayer å¼‚æ­¥åå°ç»˜åˆ¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.willDisplay) task.willDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;_YYTextSentinel *sentinel = _sentinel;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;int32_t value = sentinel.value;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; (^isCancelled)() = ^&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; value != sentinel.value;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; size = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; opaque = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.opaque;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; scale = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contentsScale;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç”ŸæˆèƒŒæ™¯é¢œè‰²çš„ CGTypeRef ç±»å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGColorRef&lt;/span&gt; backgroundColor = (opaque &amp;amp;&amp;amp; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor) ? &lt;span class=&quot;built_in&quot;&gt;CGColorRetain&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor) : &lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åˆ¤æ–­å½“å‰ size å®½é«˜ | å¦‚æœä¸æ»¡ä½æ¡ä»¶ | å°±è¦è¿”å›å½“å‰ Layer Contents æ¡¥æ¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å®é™…ç»˜åˆ¶ è·å–è·å–å½“å‰ç»˜åˆ¶çº¿ç¨‹ï¼Œåœ¨å½“å‰çº¿ç¨‹ä¸­ç»˜åˆ¶ | æä¾›å–æ¶ˆæœºåˆ¶ï¼Œå–æ¶ˆå°±å±•ç¤º | åœ¨è®¾ç½®çš„ CGContext è·å–ç»˜åˆ¶ Image | åˆ¤æ–­å–æ¶ˆçš„åŸºç¡€ä¸Šåœ¨ main thread ç»˜åˆ¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (size.width &amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt; || size.height &amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGImageRef&lt;/span&gt; image = (__bridge_retained &lt;span class=&quot;built_in&quot;&gt;CGImageRef&lt;/span&gt;)(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contents);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contents = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (image) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(YYTextAsyncLayerGetReleaseQueue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//é‡Šæ”¾ image&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(image);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGColorRelease&lt;/span&gt;(backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å–åå°é…ç½®çš„çº¿ç¨‹ |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(YYTextAsyncLayerGetDisplayQueue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isCancelled()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGColorRelease&lt;/span&gt;(backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//é…ç½® Context ä¸Šä¸‹æ–‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIGraphicsBeginImageContextWithOptions&lt;/span&gt;(size, opaque, scale);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (opaque &amp;amp;&amp;amp; context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//å°†å½“å‰å›¾å½¢çŠ¶æ€çš„ Copy åŠ å…¥å›¾å½¢å †æ ˆä¸­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGContextSaveGState&lt;/span&gt;(context); &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!backgroundColor || &lt;span class=&quot;built_in&quot;&gt;CGColorGetAlpha&lt;/span&gt;(backgroundColor) &amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;//è®¾ç½®å¡«å……é¢œè‰² | è®¾ç½®ç»˜åˆ¶è·¯å¾„ | Path å¡«å……&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(context, [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; whiteColor].CGColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextAddRect&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, size.width * scale, size.height * scale));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextFillPath&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (backgroundColor) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(context, backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextAddRect&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, size.width * scale, size.height * scale));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGContextFillPath&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//ä»å †æ ˆä¸­å–å‡ºè®¾ç½® | é’ˆå¯¹æŒ‡é’ˆ retain +1&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGContextRestoreGState&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CGColorRelease&lt;/span&gt;(backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    task.display(context, size, isCancelled);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isCancelled()) &amp;#123; &lt;span class=&quot;comment&quot;&gt;//å¦‚æœå–æ¶ˆ | ç»“æŸ |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//åœ¨ä¸»çº¿ç¨‹å±•ç¤ºå›è°ƒ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *image = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isCancelled()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;dispatch_async&lt;/span&gt;(dispatch_get_main_queue(), ^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (isCancelled()) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//å¦‚æœæ²¡æœ‰å–æ¶ˆ | æŠŠ image -&amp;gt; contents&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//ç„¶åè¿”å›å±•ç¤º&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contents = (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)(image.CGImage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextAsyncLayer ç»˜åˆ¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[_sentinel increase];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.willDisplay) task.willDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//é€šè¿‡ CGContext è®¾ç½®å½“å‰ç»˜åˆ¶æ¡ä»¶ | è°ƒç”¨ YYTextLayout ç»˜åˆ¶ | CGContext ç»˜åˆ¶ç»˜åˆ¶ç”Ÿæˆ Image | å±•ç¤º&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIGraphicsBeginImageContextWithOptions&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.opaque, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contentsScale);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetCurrentContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.opaque &amp;amp;&amp;amp; context) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; size = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    size.width *= &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contentsScale;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    size.height *= &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contentsScale;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CGContextSaveGState&lt;/span&gt;(context); &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor || &lt;span class=&quot;built_in&quot;&gt;CGColorGetAlpha&lt;/span&gt;(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor) &amp;lt; &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(context, [&lt;span class=&quot;built_in&quot;&gt;UIColor&lt;/span&gt; whiteColor].CGColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextAddRect&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, size.width, size.height));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextFillPath&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextSetFillColorWithColor&lt;/span&gt;(context, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.backgroundColor);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextAddRect&lt;/span&gt;(context, &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, size.width, size.height));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGContextFillPath&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;built_in&quot;&gt;CGContextRestoreGState&lt;/span&gt;(context);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è°ƒç”¨å±•ç¤º display æ–¹æ³• | æ˜¾ç¤ºå±•ç¤ºçš„å†…å®¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;task.display(context, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.bounds.size, ^&amp;#123;&lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&amp;#125;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIImage&lt;/span&gt; *image = &lt;span class=&quot;built_in&quot;&gt;UIGraphicsGetImageFromCurrentImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;UIGraphicsEndImageContext&lt;/span&gt;();&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.contents = (__bridge &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)(image.CGImage);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æŠŠç»˜åˆ¶çš„å†…å®¹ ç”Ÿæˆ image ç„¶åèµ‹å€¼ç»™ content&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è°ƒç”¨ å±•ç¤ºå‡½æ•°å›è°ƒ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (task.didDisplay) task.didDisplay(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢è´´å‡ºåŸºäº &lt;code&gt;YYTextAsyncLayer&lt;/code&gt; å®ç°åœ¨ &lt;code&gt;main thread&lt;/code&gt; å’Œ &lt;code&gt;background thread&lt;/code&gt; ç»˜åˆ¶ä»£ç ã€‚å¯ä»¥çœ‹å‡ºä¸¤è€…åœ¨å®é™…ç»˜åˆ¶çš„æ ¸å¿ƒä»£ç æ˜¯ä¸€æ ·çš„ï¼Œåªæ˜¯åœ¨å®ç°åå°å¼‚æ­¥ç»˜åˆ¶çš„æ—¶å€™æ·»åŠ  &lt;code&gt;cancel&lt;/code&gt; æœºåˆ¶ã€‚ç„¶å&lt;strong&gt;é€šè¿‡åœ¨ &lt;code&gt;UIGraphicsGetImageFromCurrentImageContext()&lt;/code&gt; è·å–å½“å‰ &lt;code&gt;YYText&lt;/code&gt; é€šè¿‡ &lt;code&gt;YYTextLayout&lt;/code&gt; ç»˜åˆ¶ä¹‹åç”Ÿæˆå¯¹åº”çš„ &lt;code&gt;Image&lt;/code&gt; åœ¨ &lt;code&gt;main thread&lt;/code&gt; å®ç° &lt;code&gt;didDisplay&lt;/code&gt; çš„å›è°ƒç»˜åˆ¶ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;è®¡ç®—-Stringã€Image-å’Œ-UIView-å®ç°å›¾æ–‡æ’åº&quot;&gt;&lt;a href=&quot;#è®¡ç®—-Stringã€Image-å’Œ-UIView-å®ç°å›¾æ–‡æ’åº&quot; class=&quot;headerlink&quot; title=&quot;è®¡ç®— Stringã€Image å’Œ UIView å®ç°å›¾æ–‡æ’åº&quot;&gt;&lt;/a&gt;è®¡ç®— &lt;code&gt;String&lt;/code&gt;ã€&lt;code&gt;Image&lt;/code&gt; å’Œ &lt;code&gt;UIView&lt;/code&gt; å®ç°å›¾æ–‡æ’åº&lt;/h4&gt;&lt;p&gt;è¿™é‡Œè´´å‡ºåœ¨è®¡ç®— &lt;code&gt;String&lt;/code&gt; å’Œ &lt;code&gt;Image&lt;/code&gt;ï¼Œ&lt;code&gt;UIView&lt;/code&gt;ï¼ˆé™„ä»¶ï¼‰ åœ¨å®é™…è®¡ç®—çš„å®ç°ç±»ï¼Œç”±äºä»£ç é‡è¾ƒå¤§å°±ä¸ä¸€ä¸€åˆ—å‡ºç»™å‡ºä¸‹é¢ä¸¤ä¸ªç±»ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;a href=&quot;https://github.com/Optimize-iOS/FYDraw/blob/master/YYKitAnalysis/YYText-master/YYText/Component/YYTextLayout.m&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;YYTextLayout&lt;/a&gt;&lt;/strong&gt;&lt;br&gt;&lt;strong&gt;&lt;a href=&quot;https://github.com/Optimize-iOS/FYDraw/blob/master/YYKitAnalysis/YYText-master/YYText/Component/YYTextLine.m&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;YYTextLine&lt;/a&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextLayout&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;+ (YYTextLayout *)layoutWithContainer:(YYTextContainer *)container text:(&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)text range:(&lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt;)range &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Step 9.4 &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Line 291&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;YYTextLine *line = [YYTextLine lineWithCTLine:ctLine position:position vertical:isVerticalForm];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;49&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;50&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;51&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;52&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;53&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;54&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;55&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;56&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;57&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;58&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;59&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;60&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;61&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;62&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;63&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;64&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;65&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;66&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;67&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;68&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;69&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;70&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;71&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;72&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;73&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;74&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;75&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;76&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;77&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;78&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;79&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;80&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;81&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;82&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;83&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;84&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;85&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;86&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;87&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;88&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;89&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;90&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;91&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextLine &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)setCTLine:(_Nonnull CTLineRef)CTLine &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_CTLine != CTLine) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (CTLine) &lt;span class=&quot;built_in&quot;&gt;CFRetain&lt;/span&gt;(CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_CTLine) &lt;span class=&quot;built_in&quot;&gt;CFRelease&lt;/span&gt;(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _CTLine = CTLine;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_CTLine) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//è·å–å½“å‰ Line çš„å®½åº¦å€¼ || è·å–å½“å‰ line çš„ ascent|descent|leading&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _lineWidth = CTLineGetTypographicBounds(_CTLine, &amp;amp;_ascent, &amp;amp;_descent, &amp;amp;_leading);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//è·å–å½“å‰ Line çš„ Range&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CFRange&lt;/span&gt; range = CTLineGetStringRange(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _range = &lt;span class=&quot;built_in&quot;&gt;NSMakeRange&lt;/span&gt;(range.location, range.length);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (CTLineGetGlyphCount(_CTLine) &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;span class=&quot;comment&quot;&gt;//Line ä¸­å­—å½¢çš„æ•°é‡, å³ CTRun&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CFArrayRef&lt;/span&gt; runs = CTLineGetGlyphRuns(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                CTRunRef run = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetValueAtIndex&lt;/span&gt;(runs, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;//è·å–ç¬¬ä¸€ä¸ª run å­—å½¢ | å¤åˆ¶åˆ°ç”¨æˆ·æä¾›çš„æ•°æ®ç¼“å†²åŒº |&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; pos;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                CTRunGetPositions(run, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), &amp;amp;pos);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                _firstGlyphPos = pos.x;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                _firstGlyphPos = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _trailingWhitespaceWidth = CTLineGetTrailingWhitespaceWidth(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _lineWidth = _ascent = _descent = _leading = _firstGlyphPos = _trailingWhitespaceWidth = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            _range = &lt;span class=&quot;built_in&quot;&gt;NSMakeRange&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; reloadBounds];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)reloadBounds &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å– å½“å‰è¡Œæ‰€æœ‰çš„ å­—å½¢ | å½“å‰å­—å½¢çš„æ•°é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;CFArrayRef&lt;/span&gt; runs = CTLineGetGlyphRuns(_CTLine);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; runCount = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetCount&lt;/span&gt;(runs);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (runCount == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *attachments = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *attachmentRanges = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; *attachmentRects = [&lt;span class=&quot;built_in&quot;&gt;NSMutableArray&lt;/span&gt; new];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt; r = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; r &amp;lt; runCount; r++) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        CTRunRef run = &lt;span class=&quot;built_in&quot;&gt;CFArrayGetValueAtIndex&lt;/span&gt;(runs, r);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;CFIndex&lt;/span&gt; glyphCount = CTRunGetGlyphCount(run);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (glyphCount == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;continue&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//æ ¹æ® run å­—å½¢å—è·å–æ‰€åœ¨ Attributes åŸºæœ¬è®¾ç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *attrs = (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)CTRunGetAttributes(run);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è·å–ä¸çŸ¥é“ä»€ä¹ˆğŸ‘»ï¼Ÿ Attachment å¯èƒ½æ˜¯ UIImage|UIView|CALayer&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//TODO&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        YYTextAttachment *attachment = attrs[YYTextAttachmentAttributeName];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attachment) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt; runPosition = &lt;span class=&quot;built_in&quot;&gt;CGPointZero&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            CTRunGetPositions(run, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;), &amp;amp;runPosition);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;///åˆ¤æ–­å½“å‰ run æ˜¯å¦æ˜¯ Attachment ç„¶åè·å–å½“å‰ run çš„ä¸Šå‡ã€ä¸‹ç§»å’Œç¼©è¿›&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGFloat&lt;/span&gt; ascent, descent, leading, runWidth;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CGRect&lt;/span&gt; runTypoBounds;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            runWidth = CTRunGetTypographicBounds(run, &lt;span class=&quot;built_in&quot;&gt;CFRangeMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;), &amp;amp;ascent, &amp;amp;descent, &amp;amp;leading);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_vertical) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;//äº¤æ¢ä¸¤è€…ä¹‹é—´çš„åæ ‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                YYTEXT_SWAP(runPosition.x, runPosition.y);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runPosition.y = _position.y + runPosition.y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runTypoBounds = &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(_position.x + runPosition.x - descent, runPosition.y , ascent + descent, runWidth);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125; &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;// &amp;#123;x, y, width, height&amp;#125;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;comment&quot;&gt;//line ä¸­ position | run ä¸­ runWidth å’Œ ascent/descent&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runPosition.x += _position.x;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runPosition.y = _position.y - runPosition.y;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                runTypoBounds = &lt;span class=&quot;built_in&quot;&gt;CGRectMake&lt;/span&gt;(runPosition.x, runPosition.y - ascent, runWidth, ascent + descent);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt; runRange = YYTextNSRangeFromCFRange(CTRunGetStringRange(run));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//æ·»åŠ é™„ä»¶ | å½“å‰é™„ä»¶ range | å½“å‰ line çš„ rect&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [attachments addObject:attachment];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [attachmentRanges addObject:[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWithRange:runRange]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [attachmentRects addObject:[&lt;span class=&quot;built_in&quot;&gt;NSValue&lt;/span&gt; valueWithCGRect:runTypoBounds]];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//é™„ä»¶å¤åˆ¶ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _attachments = attachments.count ? attachments : &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _attachmentRanges = attachmentRanges.count ? attachmentRanges : &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    _attachmentRects = attachmentRects.count ? attachmentRects : &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨ &lt;code&gt;YYTextLayout&lt;/code&gt; ä¸­è°ƒç”¨ &lt;code&gt;YYTextLine&lt;/code&gt; å®ä¾‹æ–¹å¼è®¡ç®—å½“å‰ &lt;code&gt;CTFrameRef&lt;/code&gt; ä¸­ &lt;code&gt;Each Line&lt;/code&gt; ç›¸å…³å‚æ•°ã€‚&lt;br&gt;åœ¨ &lt;code&gt;YYTextLine&lt;/code&gt; ä¸­å¯ä»¥çœ‹å‡ºä»¥ &lt;code&gt;Line&lt;/code&gt; ä¸ºå•ä½è®¡ç®—å½“å‰ç»˜åˆ¶å‚æ•°ï¼Œç„¶åé€šè¿‡ &lt;strong&gt;&lt;code&gt;reloadBounds&lt;/code&gt;&lt;/strong&gt; æ¥éå†å½“å‰è¡Œçš„ &lt;code&gt;Run&lt;/code&gt; è·å–åœ¨åˆå§‹åŒ– &lt;code&gt;Attachment&lt;/code&gt; æ‰¾å‡ºå½“å‰ &lt;code&gt;Line&lt;/code&gt; ä¸­çš„ &lt;code&gt;UIView&lt;/code&gt;ï¼Œ&lt;code&gt;CALayer&lt;/code&gt; å’Œ &lt;code&gt;UIImage&lt;/code&gt; æ¥è®¾ç½®å½“å‰ &lt;code&gt;Attachment&lt;/code&gt; ç»˜åˆ¶åŒºåŸŸå’ŒèŒƒå›´ã€‚&lt;br&gt;&lt;strong&gt;è¯¦ç»†ä¿¡æ¯å¯ä»¥å‚è€ƒä»£ç æ³¨é‡Š&lt;/strong&gt; &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å®ç°-String-è®¾ç½®-Text-å„ç§æ ¼å¼è®¾ç½®&quot;&gt;&lt;a href=&quot;#å®ç°-String-è®¾ç½®-Text-å„ç§æ ¼å¼è®¾ç½®&quot; class=&quot;headerlink&quot; title=&quot;å®ç° String è®¾ç½® Text å„ç§æ ¼å¼è®¾ç½®&quot;&gt;&lt;/a&gt;å®ç° &lt;code&gt;String&lt;/code&gt; è®¾ç½® &lt;code&gt;Text&lt;/code&gt; å„ç§æ ¼å¼è®¾ç½®&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextAttribute &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è®¾ç½®å½“å‰å­—ä½“æ˜¾ç¤ºç±»å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBackedStringAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBackedString&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBindingAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBinding&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextShadowAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextShadow&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextInnerShadowAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextInnerShadow&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextUnderlineAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextUnderline&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextStrikethroughAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextStrikethrough&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å¯¹æ–‡å­—è¿›è¡Œæè¾¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBorderAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBorder&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBackgroundBorderAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBackgroundBorder&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextBlockBorderAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextBlockBorder&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextAttachmentAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextAttachment&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextHighlightAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextHighlight&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; YYTextGlyphTransformAttributeName = &lt;span class=&quot;string&quot;&gt;@&quot;YYTextGlyphTransform&quot;&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//NSAttributedString+YYText&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (YYTextShadow *)yy_textInnerShadowAtIndex:(&lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt;)index &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; yy_attribute:YYTextInnerShadowAttributeName atIndex:index];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)yy_attribute:(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)attributeName atIndex:(&lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt;)index &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!attributeName) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (index &amp;gt; &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.length || &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.length == &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt; &amp;amp;&amp;amp; index == &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.length) index--;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; attribute:attributeName atIndex:index effectiveRange:&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ (YYTextLayout *)layoutWithContainer:(YYTextContainer *)container text:(&lt;span class=&quot;built_in&quot;&gt;NSAttributedString&lt;/span&gt; *)text range:(&lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt;)range &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (visibleRange.length &amp;gt; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        layout.needDrawText = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//TODO TODO &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; (^block)(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *attrs, &lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt; range, &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; *stop) = ^(&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *attrs, &lt;span class=&quot;built_in&quot;&gt;NSRange&lt;/span&gt; range, &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; *stop) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextHighlightAttributeName]) layout.containsHighlight = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextBlockBorderAttributeName]) layout.needDrawBlockBorder = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextBackgroundBorderAttributeName]) layout.needDrawBackgroundBorder = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextShadowAttributeName] || attrs[&lt;span class=&quot;built_in&quot;&gt;NSShadowAttributeName&lt;/span&gt;]) layout.needDrawShadow = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextUnderlineAttributeName]) layout.needDrawUnderline = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextAttachmentAttributeName]) layout.needDrawAttachment = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextInnerShadowAttributeName]) layout.needDrawInnerShadow = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextStrikethroughAttributeName]) layout.needDrawStrikethrough = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (attrs[YYTextBorderAttributeName]) layout.needDrawBorder = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨åˆå§‹åŒ– &lt;code&gt;String&lt;/code&gt; è®¾ç½®å­—ä½“ç‰¹å®šçš„æ ¼å¼ï¼Œç„¶åæ ¹æ®æä¾›çš„ &lt;code&gt;Key&lt;/code&gt; å€¼ç±»å‹æ¥ä¿å­˜åœ¨å½“å‰ &lt;code&gt;String&lt;/code&gt; è½¬åŒ–ä¸º &lt;code&gt;NSAttributedString&lt;/code&gt; ç±»å‹çš„æ ¼å¼ä¸­ã€‚&lt;strong&gt;è®¾ç½®å½“å‰ &lt;code&gt;Line&lt;/code&gt; æ‰€å±çš„ &lt;code&gt;YYTextLayout&lt;/code&gt; æ ‡è®°å½“å‰çŠ¶æ€ï¼Œåœ¨ç»˜åˆ¶æ—¶æ¥æ‰§è¡Œåœ¨æ”¹ &lt;code&gt;Line&lt;/code&gt; çš„ &lt;code&gt;Run&lt;/code&gt; æ‰§è¡Œç»˜åˆ¶ï¼ˆ&lt;/strong&gt;åé¢åœ¨ç»˜åˆ¶ä¸­ä¼šè®²è¿°&lt;strong&gt;ï¼‰ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;å®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&quot;&gt;&lt;a href=&quot;#å®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&quot; class=&quot;headerlink&quot; title=&quot;å®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&quot;&gt;&lt;/a&gt;å®ç°å…·ä½“ç»˜åˆ¶ï¼Ÿ&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYLabel&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (YYTextAsyncLayerDisplayTask *)newAsyncDisplayTask &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    task.display = ^(&lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt; context, &lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt; size, &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; (^isCancelled)(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//Layout ç»˜åˆ¶å½“å‰ UIView ç•Œé¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [drawLayout drawInContext:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; size:size point:point view:view layer:layer debug:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt; cancel:&lt;span class=&quot;literal&quot;&gt;NULL&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è·Ÿæ–°å½“å‰çš„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;///å½“å‰ Label çš„é™„ä»¶ æ­¤é™„ä»¶å½’å±äº Layout ä¸­ attachments å±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (YYTextAttachment *a &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; drawLayout.attachments) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([a.content isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; class]]) [attachmentViews addObject:a.content];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([a.content isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;CALayer&lt;/span&gt; class]]) [attachmentLayers addObject:a.content];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYTextLayout&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Line 3469&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//TODO ç»˜åˆ¶æ–¹æ³•è°ƒç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)drawInContext:(&lt;span class=&quot;built_in&quot;&gt;CGContextRef&lt;/span&gt;)context&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 size:(&lt;span class=&quot;built_in&quot;&gt;CGSize&lt;/span&gt;)size&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                point:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)point&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                 view:(&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; *)view&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                layer:(&lt;span class=&quot;built_in&quot;&gt;CALayer&lt;/span&gt; *)layer&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                debug:(YYTextDebugOption *)debug&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                cancel:(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; (^)(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;))cancel&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@autoreleasepool&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;å®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶&quot;&gt;&lt;a href=&quot;#å®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶&quot; class=&quot;headerlink&quot; title=&quot;å®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶&quot;&gt;&lt;/a&gt;å®ç°å¯Œæ–‡æœ¬ä¸Šç‚¹å‡»äº‹ä»¶&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;44&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;45&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;46&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;47&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;48&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//YYLabel &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesBegan:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt; *)touches withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_highlight || _textTapAction || _textLongPressAction) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _touchBeganPoint = point;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _state.trackingTouch = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _state.swallowTouch = &lt;span class=&quot;literal&quot;&gt;YES&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        _state.touchMoved = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//æ·»åŠ å®šæ—¶å™¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; _startLongPressTimer];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_highlight) [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; _showHighlightAnimated:&lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;   &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesMoved:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt; *)touches withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_state.trackingTouch) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!_state.touchMoved) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_state.touchMoved) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; _endLongPressTimer];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)touchesEnded:(&lt;span class=&quot;built_in&quot;&gt;NSSet&lt;/span&gt; *)touches withEvent:(&lt;span class=&quot;built_in&quot;&gt;UIEvent&lt;/span&gt; *)event &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (_state.trackingTouch) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; _endLongPressTimer];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!_state.touchMoved &amp;amp;&amp;amp; _textTapAction) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	        ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	        _textTapAction(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, _innerText, range, rect);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2018/221/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;TextKit Best Practices&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2013/210&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Introducing Text Kit&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2013/220&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Text Layouts and Effects with Text Kit&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About Core Text&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/TextFonts/Conceptual/CocoaTextArchitecture/Introduction/Introduction.html#//apple_ref/doc/uid/TP40009459&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About the Cocoa Text System&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/Introduction/Introduction.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About Text Handling in iOS&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/TextLayout/Concepts/LayoutManager.html#//apple_ref/doc/uid/20001805-BBCFEBHA&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;The Layout Manager&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2011/128/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Text Processing&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://cocoapods.org/pods/Graver&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Graver&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://apps.timwhitlock.info/emoji/tables/unicode#block-6c-other-additional-symbols&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Emoji Unicode Tables&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://juejin.im/entry/5922b0ef8d6d810058e760c4&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;æ–°å¤§é™†ï¼šAsyncDisplayKit&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://pilky.me/36/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Optimising Autolayout&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://blog.ibireme.com/2015/11/12/smooth_user_interfaces_for_ios/#more-41893&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOS ä¿æŒç•Œé¢æµç•…çš„æŠ€å·§&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://tech.meituan.com/2017/06/09/webviewperf.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;WebViewæ€§èƒ½ã€ä½“éªŒåˆ†æä¸ä¼˜åŒ–&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://imtangqi.com/2016/02/18/the-notes-of-learning-text-kit/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Text Kit å­¦ä¹ ç¬”è®°&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://objccn.io/issue-5-1/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;åˆè¯† TextKit&lt;/a&gt;     &lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Core-Text-å¯Œæ–‡æœ¬ç¼–è¾‘&quot;&gt;&lt;a href=&quot;#Core-Text-å¯Œæ–‡æœ¬ç¼–è¾‘&quot; class=&quot;headerlink&quot; title=&quot;Core Text å¯Œæ–‡æœ¬ç¼–è¾‘&quot;&gt;&lt;/a&gt;Core Text å¯Œæ–‡æœ¬ç¼–è¾‘&lt;/h1&gt;&lt;p&gt;åœ¨ &lt;code&gt;Core Graphics&lt;/code&gt; åé¢ä¸€ç¯‡æ–‡ç« æœ¬è¯¥å¯¹ &lt;code&gt;Core Image&lt;/code&gt; æ¡†æ¶è¿›è¡Œæ•´ç†ï¼Œä½†æ˜¯åŸºäº &lt;code&gt;Core Graphics&lt;/code&gt; çš„å¯Œæ–‡æœ¬ç¼–è¾‘ &lt;code&gt;Core Text&lt;/code&gt; æ¡†æ¶æ›´æ–¹ä¾¿è®²è¿°ã€‚è€Œä¸”ç»“åˆè‡ªå·±å…´è¶£å’Œå¥½ç©çš„ç¨‹åº¦åœ¨è®²è¿°è‡ªå·±å¯¹ &lt;code&gt;Texture&lt;/code&gt; å³ &lt;code&gt;ASDK&lt;/code&gt; å’Œ &lt;code&gt;YYKit&lt;/code&gt; è¯¦ç»†æè¿°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Core-Text-ç»“æ„å±‚çº§&quot;&gt;&lt;a href=&quot;#Core-Text-ç»“æ„å±‚çº§&quot; class=&quot;headerlink&quot; title=&quot;Core Text ç»“æ„å±‚çº§&quot;&gt;&lt;/a&gt;Core Text ç»“æ„å±‚çº§&lt;/h2&gt;&lt;p&gt;è¿™é‡Œå°ç¼–å¯¹ &lt;code&gt;Core Text&lt;/code&gt; åœ¨å®ç°çš„å±‚æ¬¡ç»“æ„ä¸Šæ‰€å¤„ä½ç½®ï¼Œä»¥åŠåœ¨å¯¹ &lt;code&gt;UIKit&lt;/code&gt; æ¡†æ¶æˆ‘ä»¬å¸¸è§æ§ä»¶ &lt;code&gt;UITextFiled&lt;/code&gt;ã€&lt;code&gt;UITextView&lt;/code&gt; å’Œ &lt;code&gt;UILabel&lt;/code&gt; å…·ä½“å®ç°åŸºç¡€ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kDbQuzCiS4ZyHn30r%2F-M7kE8qFvBCueh8O8d1_%2F1877765-d9fa387d512dd42d.png?alt=media&amp;amp;token=3d406869-6df1-4a7c-bcb6-6c228a9d1fce&quot; alt=&quot;Core Text.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šå›¾æ˜¯å°ç¼–æ ¹æ® &lt;strong&gt;2018 WWDC&lt;/strong&gt; ä¸­ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2018/221/&quot;&gt;TextKit Best Practices&lt;/a&gt; å’Œ &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2013/210&quot;&gt;Introducing Text Kit&lt;/a&gt; å¾—å‡º &lt;code&gt;Core Graphics&lt;/code&gt;ã€&lt;code&gt;Core Text&lt;/code&gt; å’Œ &lt;code&gt;UIKit&lt;/code&gt; ä¸­èƒ½å¤Ÿå®ç°æ–‡æœ¬ç»˜åˆ¶çš„æ§ä»¶å®ç°ç»“æ„å›¾ã€‚&lt;br&gt;æ ¹æ®ä¸Šé¢ç»“æ„å¯ä»¥çœ‹å‡ºï¼š&lt;br&gt;ï¼ˆ1ï¼‰åŸºäº &lt;code&gt;Quartz&lt;/code&gt; å°è£…çš„ &lt;code&gt;Core Graphics&lt;/code&gt; ä¸º &lt;code&gt;Core Text&lt;/code&gt; çš„å®ç°åŸºç¡€ã€‚è€Œä¸” &lt;code&gt;Quartz&lt;/code&gt; å¯ä»¥ç›´æ¥å¤„ç†å­—ä½“å’Œå­—å½¢å°†æ–‡å­—æ¸²æŸ“åˆ°ç•Œé¢ï¼Œä¹Ÿæ˜¯åœ¨ Apple åŸºç¡€åº“ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å­—ä½“æ¨¡å—ã€‚&lt;br&gt;ï¼ˆ2ï¼‰åŸºäº &lt;code&gt;Core Text&lt;/code&gt; å°è£…å®ç°çš„ &lt;code&gt;Text Kit&lt;/code&gt; ä¸ºåœ¨ &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; ä¸­æ–‡æœ¬æ˜¾ç¤ºæ§ä»¶ &lt;code&gt;TypeTextFiled&lt;/code&gt;ã€&lt;code&gt;TypeTextView&lt;/code&gt; ç­‰æä¾›æœ€ç›´æ¥çš„æ¥å£ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS UI ç•Œé¢" scheme="http://yoursite.com/tags/iOS-UI-%E7%95%8C%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>iOS UI ä¼˜åŒ– - Core Graphics</title>
    <link href="http://yoursite.com/2019/03/08/IOS%20UI%20%E4%BC%98%E5%8C%96%20-%20Core%20Graphics/"/>
    <id>http://yoursite.com/2019/03/08/IOS UI ä¼˜åŒ– - Core Graphics/</id>
    <published>2019-03-08T14:07:07.579Z</published>
    <updated>2020-05-20T13:13:45.244Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Core-Graphics-å®ç°æ¢ç´¢&quot;&gt;&lt;a href=&quot;#Core-Graphics-å®ç°æ¢ç´¢&quot; class=&quot;headerlink&quot; title=&quot;Core Graphics å®ç°æ¢ç´¢&quot;&gt;&lt;/a&gt;Core Graphics å®ç°æ¢ç´¢&lt;/h1&gt;&lt;p&gt;åˆæ˜¯ä¸€ä¸ªå¸¸ç”¨ä½†æ˜¯ä¸çŸ¥æ€ä¹ˆå¼€ç¯‡åšæ–‡ã€‚ğŸ¤”ğŸ¤”ğŸ¤”&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Core Graphics&lt;/code&gt; åœ¨ &lt;code&gt;iOS&lt;/code&gt; æ•´ä¸ªæ¶æ„çš„å±‚æ¬¡ç»“æ„å¯ä»¥å’Œä¸Šç¯‡ &lt;code&gt;Core Animation&lt;/code&gt; å®ç°ï¼Œè¿™é‡Œä»…ä»…å±•ç¤º &lt;code&gt;Core Graphics&lt;/code&gt; å®ç°çš„åŸºç¡€å®ç°æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kD55cdBlRKqbyxwvK%2F-M7kDLWE3usJFGTpiN-L%2F1877765-33be471164252941.png?alt=media&amp;amp;token=aab36ea8-f7ee-45b0-ab38-e2b81a42c908&quot; alt=&quot;Core Graphics.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è®²è§£ &lt;code&gt;Core Graphics&lt;/code&gt; ä¹‹å‰è¿˜æ˜¯æŒ‰ç…§å°ç¼–çš„ğŸ‰æƒ¯ï¼Œå¯¹è¯¥æ¡†æ¶ &lt;code&gt;API&lt;/code&gt; çš„æ¥å£è¿›è¡Œæ•´ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kD55cdBlRKqbyxwvK%2F-M7kDV4DmXj8KDHjEHYx%2F1877765-156381bdec28dba6.png?alt=media&amp;amp;token=d89c6f0b-1eb0-4ed0-a2a3-cb4fb23f903c&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-03-16 20.43.18.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œä¸ºåŸºäº &lt;a href=&quot;https://zh.wikipedia.org/wiki/Quartz&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Quartz&lt;/a&gt; çš„æ¡†æ¶ï¼Œä¸Šé¢ ğŸ‘† çš„ &lt;code&gt;API&lt;/code&gt; ç±»å‹ &lt;code&gt;CGType&lt;/code&gt; åœ¨ &lt;code&gt;C&lt;/code&gt; å±‚é¢çš„ç»˜å›¾å¼•æ“ã€‚ä¸»è¦åœ¨ä¸Šé¢ &lt;code&gt;Core Animation æ¢ç´¢&lt;/code&gt; ä¸­éªŒè¯è¿‡ç¨‹ä¸­ä½ç½®å‚æ•°ã€é¢œè‰²å€¼ã€è·¯å¾„ä»¥åŠå›¾åƒç­‰ç­‰æ–¹é¢â€¦â€¦&lt;br&gt;è®²çœŸè¿™ä¸ªæ¡†æ¶ä¸çŸ¥é“æ€ä¹ˆå¼€ç¬”ï¼Œå°±æŒ‰ç…§ä¸Šé¢ &lt;code&gt;API&lt;/code&gt; æ¥å„ä¸ªé˜è¿°è‡ªå·±ç†è§£å§ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Geometric-Data-Type&quot;&gt;&lt;a href=&quot;#Geometric-Data-Type&quot; class=&quot;headerlink&quot; title=&quot;Geometric Data Type&quot;&gt;&lt;/a&gt;Geometric Data Type&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;é›†åˆæ•°æ®ç±»å‹&lt;/th&gt;
&lt;th&gt;è¡¨ç¤º &amp;amp; ä½¿ç”¨èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGFloat&lt;/code&gt;ï¼ˆå•ç²¾åº¦æµ®ç‚¹å‹ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå€¼ç±»å‹çš„æ•°æ®ã€‚&lt;code&gt;iOS&lt;/code&gt; ä¸­é‡‡ç”¨å®æ¥è¿›è¡Œå®šä¹‰ï¼Œ&lt;code&gt;Swift&lt;/code&gt; é‡‡ç”¨æœ€é•¿ç”¨çš„ &lt;code&gt;Struct&lt;/code&gt; æ¥å®ç°ã€‚ 32 ä½ &lt;code&gt;CPU&lt;/code&gt; å  4 ä¸ªå­—èŠ‚ï¼Œ64 ä½ &lt;code&gt;CPU&lt;/code&gt; å  8 ä¸ªå­—èŠ‚ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; åœ¨ &lt;code&gt;iOS&lt;/code&gt; å¼€å‘è¿‡ç¨‹ä¸­å…³äºä½ç½®ï¼Œå®½é«˜çš„å‚æ•°å‡æ˜¯é‡‡ç”¨æ­¤å€¼ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGPoint&lt;/code&gt;ï¼ˆäºŒç»´åæ ‡ä½ç½®ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå€¼ç±»å‹çš„ç‚¹ã€‚ç‚¹çš„åŸºæœ¬å‚æ•° x, y å‡æ˜¯ &lt;code&gt;CGFloat&lt;/code&gt; å€¼ç±»å‹å‚æ•°ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; äºŒç»´åæ ‡ä¸­æ¥ç¡®å®šæ§ä»¶ä½ç½®å¸ƒå±€ä¸­ä¸­å¿ƒç‚¹ã€é”šç‚¹ç­‰ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGSize&lt;/code&gt;ï¼ˆæ§ä»¶å¤§å°ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå€¼ç±»å‹çš„å°ºå¯¸ã€‚å°ºå¯¸åŒæ ·æ˜¯åŸºæœ¬å€¼ç±»å‹å‚æ•° &lt;code&gt;width&lt;/code&gt; &amp;amp; &lt;code&gt;height&lt;/code&gt;ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; åæ ‡ä¸­æ¥åŸºäºå½“å‰æ§ä»¶åœ¨åŸºäºå³ä¸Šè§’ã€å³ä¸‹è§’æˆ–è€…æ˜¯ä¸­å¿ƒç‚¹æ§åˆ¶ç‚¹ä¸‰è€…æ¥ç¡®å®šæ§ä»¶çš„ä½ç½®ã€‚å¯ä»¥æ ¹æ®åœ¨ &lt;code&gt;Layer&lt;/code&gt; ç¡®å®šå¸ƒå±€æ—¶éªŒè¯ä¸­å¿ƒç‚¹ç„¶åç¡®å®š &lt;code&gt;Size&lt;/code&gt; çš„å‚æ•°å¯çŸ¥ã€‚&lt;strong&gt;å¯ä»¥å‚è€ƒä¸Šä¸€ç¯‡æ–‡ç«  Core Animation&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGRect&lt;/code&gt;ï¼ˆæ§ä»¶ä½ç½®ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå€¼ç±»å‹çš„åŒºåŸŸã€‚åŒºåŸŸçš„åŸºæœ¬å€¼ç±»å‹å‚æ•° &lt;code&gt;Point&lt;/code&gt; &amp;amp; &lt;code&gt;Size&lt;/code&gt;ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; æ˜¯æ ¹æ® &lt;code&gt;iOS&lt;/code&gt; ä¸­å³ä¸Šè§’ä¸ºåæ ‡ç³»æ ¹æ®åˆå§‹åŒ–æ§ä»¶å³ä¸Šè§’å‚æ•°ç±»ç¡®å®šæ§ä»¶ä½ç½®ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGVector&lt;/code&gt;ï¼ˆäºŒç»´å‘é‡åæ ‡ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå€¼ç±»å‹å‘é‡ä¸­åç§»ã€‚åç§»çš„å‚æ•° dx, dy ä¹Ÿå‡æ˜¯ &lt;code&gt;CGFloat&lt;/code&gt; å€¼ç±»å‹å‚æ•°ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; åŸºäº &lt;code&gt;SceneKit&lt;/code&gt; çš„ &lt;code&gt;iOS&lt;/code&gt; å¼€å‘å¼•æ“æ¥åšåˆšä½“ä½ç½®åè½¬ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGAffineTransform&lt;/code&gt;ï¼ˆäºŒç»´ä»¿å°„å˜æ¢ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºå€¼ç±»å‹ä»¿å°„å˜æ¢çŸ©é˜µã€‚çŸ©é˜µå‚æ•° a, b, c, d, tx å’Œ ty å‡ä¸º &lt;code&gt;Float&lt;/code&gt; å€¼ç±»å‹ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; &lt;code&gt;UIKit&lt;/code&gt; ä¸­åŸºäº &lt;code&gt;UIView&lt;/code&gt; æ§ä»¶å‡æœ‰æ­¤å‚æ•°ï¼Œå¯ä»¥å®ç°æ§ä»¶åç§»ï¼Œæ—‹è½¬ï¼Œç¼©æ”¾æˆ–è€…å€¾æ–œã€‚&lt;strong&gt;å¾®ä¿¡è¯»ä¹¦æ§ä»¶æ–œå‘åŠ¨ç”»&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ³¨ï¼šä¸Šè¿°æ²¡æœ‰è¯¦ç»†è®²è¿°å…¶å‡ä¸º &lt;code&gt;Struct&lt;/code&gt; å€¼ç±»å‹ç»“æ„&lt;/p&gt;
&lt;h3 id=&quot;CGAffineTransform-ä½¿ç”¨&quot;&gt;&lt;a href=&quot;#CGAffineTransform-ä½¿ç”¨&quot; class=&quot;headerlink&quot; title=&quot;CGAffineTransform ä½¿ç”¨&quot;&gt;&lt;/a&gt;CGAffineTransform ä½¿ç”¨&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;code&gt;CGAffineTransform&lt;/code&gt; åˆå§‹åŒ–ä»¿å°„å˜æ¢åˆå§‹åŒ–ä¸­æ˜¾ç¤º &lt;code&gt;CGAffineTransform.init(a: , b: , c: , d: , tx: , ty: )&lt;/code&gt; æ¥ä½œä¸º &lt;strong&gt;3*3&lt;/strong&gt; çš„çŸ©é˜µã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7m7I-gpIe6G1W653KZ%2F-M7mCs6rbjLXuA4DGrzT%2F1877765-1f9cff8b51261139.png?alt=media&amp;amp;token=b589ad9c-ee9f-432b-8c45-4d831bf96b84&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-04-03 23.22.54.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢æ ¹æ®åœ¨ä»¿å°„å˜æ¢ååæ ‡:&lt;br&gt;X è½´ä¸Šçš„åæ ‡ &lt;strong&gt;X`= ax + cy + tx&lt;/strong&gt;, a è¡¨ç¤ºåœ¨ x è½´çš„ç¼©æ”¾æ¯”ä¾‹ç³»æ•°ï¼Œc è¡¨ç¤ºåœ¨ y è½´åç§»ç³»æ•°åœ¨æ—‹è½¬æ—¶ä½¿ç”¨ï¼Œ tx æ˜¯åœ¨å½“å‰åæ ‡ç³»çš„å¹³ç§»è·ç¦»ã€‚     &lt;/p&gt;
&lt;p&gt;Y è½´ä¸Šçš„åæ ‡ &lt;strong&gt;Y`= bx + dy + ty&lt;/strong&gt;, b è¡¨ç¤ºåœ¨ y è½´çš„ç¼©æ”¾æ¯”ä¾‹ç³»æ•°ï¼Œd è¡¨ç¤ºåœ¨ x è½´åç§»ç³»æ•°åœ¨æ—‹è½¬æ—¶ä½¿ç”¨ï¼Œ ty æ˜¯åœ¨å½“å‰åæ ‡ç³»çš„å¹³ç§»è·ç¦»ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ‰€ä»¥ä¸‹é¢çš„æ–¹å¼å®ç°æ˜¯ &lt;code&gt;==&lt;/code&gt;&lt;/p&gt;
&lt;pre&gt;&lt;code class=&quot;swift&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; transFormTenPixel1 = &lt;span class=&quot;type&quot;&gt;CGAffineTransform&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(a: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, b: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;c&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, d: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, tx: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, ty: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)
&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; transFormTenPiexl2 = &lt;span class=&quot;type&quot;&gt;CGAffineTransform&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(translationX: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;, y: &lt;span class=&quot;number&quot;&gt;10&lt;/span&gt;)

&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; transFormScaleTimes1 = &lt;span class=&quot;type&quot;&gt;CGAffineTransform&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(a: &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, b: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;c&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, d: &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, tx: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, ty: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)
&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; transFormScaleTimes2 = &lt;span class=&quot;type&quot;&gt;CGAffineTransform&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(scaleX: &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, y: &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;)

&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; angle = &lt;span class=&quot;type&quot;&gt;Double&lt;/span&gt;.pi * &lt;span class=&quot;number&quot;&gt;0.3&lt;/span&gt;
&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; transFormRotationAngle1 = &lt;span class=&quot;type&quot;&gt;CGAffineTransform&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(a: cos(angle), b: sin(angle), &lt;span class=&quot;built_in&quot;&gt;c&lt;/span&gt;: -sin(angle), d: cos(angle), tx: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, ty: &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;)
&lt;span class=&quot;keyword&quot;&gt;let&lt;/span&gt; transFormRotationAngle1 = &lt;span class=&quot;type&quot;&gt;CGAffineTransform&lt;/span&gt;.&lt;span class=&quot;keyword&quot;&gt;init&lt;/span&gt;(rotationAngle: angle)
&lt;/code&gt;&lt;/pre&gt;
&lt;h2 id=&quot;2D-Drawing&quot;&gt;&lt;a href=&quot;#2D-Drawing&quot; class=&quot;headerlink&quot; title=&quot;2D Drawing&quot;&gt;&lt;/a&gt;2D Drawing&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;äºŒç»´ç»˜åˆ¶&lt;/th&gt;
&lt;th&gt;è¡¨ç¤º &amp;amp; ä½¿ç”¨çš„ä¼˜åŠ£&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGContext&lt;/code&gt;ï¼ˆç»˜åˆ¶æ¸²æŸ“ä¸Šä¸‹æ–‡ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºè°ƒç”¨ &lt;code&gt;Core Graphics&lt;/code&gt; ç»˜åˆ¶ä¸Šä¸‹æ–‡ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; åœ¨ç»˜åˆ¶è¿‡ç¨‹ä¸­è·å–ä¸Šä¸‹æ–‡ &lt;code&gt;Context&lt;/code&gt; åœ¨ &lt;code&gt;Main Thread&lt;/code&gt; ä¸­æ€»æ˜¯ä¼šå›å» &lt;code&gt;UIKit&lt;/code&gt; å †æ ˆçš„æœ€ä¸Šé¢ï¼Œåœ¨åå°çº¿ç¨‹å¯ä»¥è·å–å½“å‰ä¸Šä¸‹æ–‡ã€‚æ ¹æ®è·å–ä¸Šä¸‹æ–‡çš„ç»˜åˆ¶ç›®çš„å¯ä»¥å®ç°ï¼š&lt;code&gt;PDF&lt;/code&gt;ã€&lt;code&gt;Bitmap&lt;/code&gt;ã€&lt;code&gt;Window&lt;/code&gt;ã€&lt;code&gt;Layer&lt;/code&gt;ã€å’Œ &lt;code&gt;Printer&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGImage&lt;/code&gt;ï¼ˆä½å›¾ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºä½å›¾æˆ–è€…æ˜¯ä½å›¾çš„ &lt;code&gt;Mask&lt;/code&gt;ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; åœ¨ &lt;code&gt;UIKit&lt;/code&gt; ä¸­ &lt;code&gt;UIImage&lt;/code&gt; å¯¹åº”çš„ &lt;code&gt;CGType&lt;/code&gt; ç±»å‹ï¼Œå½“å‰æˆ‘ä»¬ç»˜åˆ¶æˆ–è€…å¯¹å›¾ç‰‡è¿›è¡Œæˆªå–åä¾¿æ˜¯æ­¤ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGPath&lt;/code&gt;ï¼ˆè·¯å¾„ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºç»˜åˆ¶è¿‡ç¨‹ä¸­ç»˜åˆ¶ &lt;code&gt;Path&lt;/code&gt;ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; åŒæ ·æ˜¯å¯¹åº”åœ¨ &lt;code&gt;UIKit&lt;/code&gt; ä¸­å¯¹åº” &lt;code&gt;UIBerizerPath&lt;/code&gt; çš„ &lt;code&gt;CGType&lt;/code&gt; å¯¹åº”ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGMutablePath&lt;/code&gt;ï¼ˆå¯å˜è·¯å¾„ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºè·¯å¾„çš„å¯å˜ç±»å‹ã€‚&lt;strong&gt;2ã€&lt;/strong&gt; &lt;code&gt;CGPath&lt;/code&gt; çš„å¯å˜ç±»å‹ç»“æ„ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGLayer&lt;/code&gt;ï¼ˆç»˜åˆ¶æ¸²æŸ“å±å¹•å¤–å›¾å½¢ç»˜åˆ¶ç”»å¸ƒå†…å®¹ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨ç»˜åˆ¶æ¸²æŸ“ä¸­ä¾æ‰˜çš„å®é™…ç»˜åˆ¶ç”»å¸ƒã€‚&lt;strong&gt;2ã€&lt;/strong&gt; ç±»ä¼¼äºåœ¨ &lt;code&gt;Core Aniation&lt;/code&gt; ä¸­ &lt;code&gt;CALayer&lt;/code&gt; ä½œç”¨æ•ˆæœï¼Œæ˜¯ç»˜åˆ¶æ¸²æŸ“ä¸Šä¸‹æ–‡å®é™…ç»˜åˆ¶è½½ä½“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ³¨ï¼šä¸Šè¿°æ²¡æœ‰è¯¦ç»†è®²è¿°å…¶å‡ä¸º &lt;code&gt;Struct&lt;/code&gt; å€¼ç±»å‹ç»“æ„&lt;/p&gt;
&lt;h2 id=&quot;Colors-Font&quot;&gt;&lt;a href=&quot;#Colors-Font&quot; class=&quot;headerlink&quot; title=&quot;Colors | Font&quot;&gt;&lt;/a&gt;Colors | Font&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è‰²å½©å­—ä½“&lt;/th&gt;
&lt;th&gt;è¡¨ç¤º &amp;amp; ä½¿ç”¨èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGColor&lt;/code&gt;ï¼ˆé¢œè‰²å€¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºé¢œè‰²å€¼ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; å¯¹åº”åœ¨ &lt;code&gt;UIKit&lt;/code&gt; ä¸­ &lt;code&gt;UIColor&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGColorConversionInfo&lt;/code&gt;ï¼ˆè‰²å½©è½¬æ¢ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºè‰²å½©å¤šç©ºé—´è½¬æ¢ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGColorSpace&lt;/code&gt;ï¼ˆæ˜¾ç¤ºé¢œè‰²å€¼è¡¨è¾¾æ ¼å¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºé¢œè‰²å€¼åœ¨å‚¨å­˜ä¸­è¡¨è¾¾æ ¼å¼ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; åœ¨ &lt;code&gt;iOS&lt;/code&gt; å¯ä»¥é‡‡ç”¨çš„æ ¼å¼æœ‰ï¼š&lt;code&gt;HSB&lt;/code&gt;: &lt;code&gt;Hue, saturation, brightness&lt;/code&gt;ã€&lt;code&gt;RGB&lt;/code&gt;ï¼š &lt;code&gt;Red, green, blue&lt;/code&gt;ã€&lt;code&gt;CMYK&lt;/code&gt;ï¼š &lt;code&gt;Cyan, magenta, yellow, black&lt;/code&gt;å’Œ&lt;code&gt;BGR&lt;/code&gt;ï¼š &lt;code&gt;Blue, green, red&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGFont&lt;/code&gt;ï¼ˆç»˜åˆ¶æ–‡æœ¬ä¿¡æ¯ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºç»˜åˆ¶æ–‡æœ¬è¯¦ç»†ä¿¡æ¯ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; åœ¨æ–‡æœ¬ç»˜åˆ¶è¿‡ç¨‹ä¸­å¯¹åº”å½“å‰å­—ä½“æ ¼å¼å€¼ï¼Œå¯¹ç”¨åœ¨ &lt;code&gt;Core Animation&lt;/code&gt; ä¸­ &lt;code&gt;UIFont&lt;/code&gt;ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ³¨ï¼šä¸Šè¿°æ²¡æœ‰è¯¦ç»†è®²è¿°å…¶å‡ä¸º &lt;code&gt;Struct&lt;/code&gt; å€¼ç±»å‹ç»“æ„&lt;/p&gt;
&lt;h2 id=&quot;Working-with-PDF-Decument&quot;&gt;&lt;a href=&quot;#Working-with-PDF-Decument&quot; class=&quot;headerlink&quot; title=&quot;Working with PDF Decument&quot;&gt;&lt;/a&gt;Working with PDF Decument&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;è‰²å½©å­—ä½“&lt;/th&gt;
&lt;th&gt;è¡¨ç¤º &amp;amp; ä½¿ç”¨èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGPDFDocument&lt;/code&gt;ï¼ˆï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CATransaction&lt;/code&gt;ï¼ˆï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;Utility-Support-Classes&quot;&gt;&lt;a href=&quot;#Utility-Support-Classes&quot; class=&quot;headerlink&quot; title=&quot;Utility | Support Classes&quot;&gt;&lt;/a&gt;Utility | Support Classes&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;å¤šç”¨é€”ä»¥åŠæ”¯æŒç±»&lt;/th&gt;
&lt;th&gt;è¡¨ç¤º &amp;amp; ä½¿ç”¨èŒƒå›´&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGDataConsumer&lt;/code&gt;ï¼ˆï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGDataProvider&lt;/code&gt;ï¼ˆï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGShading&lt;/code&gt;ï¼ˆé˜´å½±ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºè®¾ç½®é˜´å½±è¯¦ç»†ä¿¡æ¯ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; å¯¹åº” &lt;code&gt;UIKit&lt;/code&gt; ä¸­ &lt;code&gt;Layer&lt;/code&gt; å±‚ä¸­ &lt;code&gt;Shadow&lt;/code&gt; å±æ€§æ¥è®¾ç½®æ§ä»¶çš„é˜´å½±å€¼ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGGradient&lt;/code&gt;ï¼ˆé¢œè‰²æ¸å˜ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºè®¾ç½®è¿‡æ¸¡è‰²å½©æ¥å£ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; å¯¹åº”åœ¨ &lt;code&gt;CAGradientLayer&lt;/code&gt; æ¥å®ç°é¢œè‰²çš„æ•ˆæœè¿‡æ¸¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGFunction&lt;/code&gt;ï¼ˆååŠ©å·¥å…·ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºåœ¨ &lt;code&gt;CGType&lt;/code&gt; æ–¹æ³•ä¸­åŸºç¡€äº‹ä»¶å›è°ƒã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; æä¾›äº‹ä»¶çš„åŸºç¡€å›è°ƒç±»ä¼¼ä¸æˆ‘ä»¬åœ¨æ–¹æ³•å®šä¹‰çš„ &lt;code&gt;Block&lt;/code&gt; å®ç°ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;code&gt;CGPattern&lt;/code&gt;ï¼ˆæ¨¡å¼ï¼‰&lt;/td&gt;
&lt;td&gt;&lt;strong&gt;1ã€&lt;/strong&gt; è¡¨ç¤ºç»˜åˆ¶ &lt;code&gt;2D&lt;/code&gt; æ¨¡å‹çš„ä¸€ç§æ¨¡å¼ã€‚ &lt;strong&gt;2ã€&lt;/strong&gt; ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;æ­¤ç¯‡åšæ–‡å…ˆåœåœâ€¦. è®²çœŸçœŸå¿ƒæ²¡æœ‰æ€è·¯ã€‚ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;æœªå®Œå¾…ç»­ã€‚ã€‚ã€‚&lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://objccn.io/issue-3-1/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ç»˜åˆ¶åƒç´ åˆ°å±å¹•ä¸Š&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/Introduction/Introduction.html#//apple_ref/doc/uid/TP40007533-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Quartz 2D Programming Guide&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_overview/dq_overview.html#//apple_ref/doc/uid/TP30001066-CH202-TPXREF101&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Overview of Quartz 2D&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/coregraphics&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Core Graphics&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.bignerdranch.com/blog/core-graphics-part-1-in-the-beginning/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Core Graphics, Part 1: In the Beginning&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.bignerdranch.com/blog/core-graphics-part-2-contextually-speaking/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Core Graphics, Part 2: Contextually Speaking&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://www.raywenderlich.com/232990-core-graphics-tutorial-patterns&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Core Graphics Tutorial: Patterns&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2012/506/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Optimizing 2D Graphics and Animation Performance&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2014/419/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Graphics and Animations for iOS Apps&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2017/235/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Building Visually Rich User Experiences&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2018/219/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Image and Graphics Best Practices&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2011/129/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Practical Drawing for iOS Developers&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;&quot;&gt;&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Core-Graphics-å®ç°æ¢ç´¢&quot;&gt;&lt;a href=&quot;#Core-Graphics-å®ç°æ¢ç´¢&quot; class=&quot;headerlink&quot; title=&quot;Core Graphics å®ç°æ¢ç´¢&quot;&gt;&lt;/a&gt;Core Graphics å®ç°æ¢ç´¢&lt;/h1&gt;&lt;p&gt;åˆæ˜¯ä¸€ä¸ªå¸¸ç”¨ä½†æ˜¯ä¸çŸ¥æ€ä¹ˆå¼€ç¯‡åšæ–‡ã€‚ğŸ¤”ğŸ¤”ğŸ¤”&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Core Graphics&lt;/code&gt; åœ¨ &lt;code&gt;iOS&lt;/code&gt; æ•´ä¸ªæ¶æ„çš„å±‚æ¬¡ç»“æ„å¯ä»¥å’Œä¸Šç¯‡ &lt;code&gt;Core Animation&lt;/code&gt; å®ç°ï¼Œè¿™é‡Œä»…ä»…å±•ç¤º &lt;code&gt;Core Graphics&lt;/code&gt; å®ç°çš„åŸºç¡€å®ç°æ¶æ„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kD55cdBlRKqbyxwvK%2F-M7kDLWE3usJFGTpiN-L%2F1877765-33be471164252941.png?alt=media&amp;amp;token=aab36ea8-f7ee-45b0-ab38-e2b81a42c908&quot; alt=&quot;Core Graphics.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨è®²è§£ &lt;code&gt;Core Graphics&lt;/code&gt; ä¹‹å‰è¿˜æ˜¯æŒ‰ç…§å°ç¼–çš„ğŸ‰æƒ¯ï¼Œå¯¹è¯¥æ¡†æ¶ &lt;code&gt;API&lt;/code&gt; çš„æ¥å£è¿›è¡Œæ•´ç†ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7kD55cdBlRKqbyxwvK%2F-M7kDV4DmXj8KDHjEHYx%2F1877765-156381bdec28dba6.png?alt=media&amp;amp;token=d89c6f0b-1eb0-4ed0-a2a3-cb4fb23f903c&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-03-16 20.43.18.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS UI ç•Œé¢" scheme="http://yoursite.com/tags/iOS-UI-%E7%95%8C%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>iOS UI ä¼˜åŒ– - Core Animation</title>
    <link href="http://yoursite.com/2019/01/06/iOS%20UI%20%E4%BC%98%E5%8C%96%20-%20Core%20Animation%20/"/>
    <id>http://yoursite.com/2019/01/06/iOS UI ä¼˜åŒ– - Core Animation /</id>
    <published>2019-01-06T12:39:52.865Z</published>
    <updated>2020-05-20T13:10:00.822Z</updated>
    
    <content type="html">&lt;h1 id=&quot;Core-Animation-å®ç°æ¢ç´¢&quot;&gt;&lt;a href=&quot;#Core-Animation-å®ç°æ¢ç´¢&quot; class=&quot;headerlink&quot; title=&quot;Core Animation å®ç°æ¢ç´¢&quot;&gt;&lt;/a&gt;Core Animation å®ç°æ¢ç´¢&lt;/h1&gt;&lt;p&gt;å°ç¼–å›é¡¾ç²—ç•¥çš„å†™å®Œ 19 å¹´ æƒ³è¦å†™çš„ç³»åˆ—åšæ–‡ä¸­ &lt;code&gt;iOS UI&lt;/code&gt; ä¼˜åŒ–æ€»çº²ä¸­ç¬¬ä¸€ç¯‡åšæ–‡ &lt;code&gt;Core Animation&lt;/code&gt; ä¸€ç›´åœ¨æƒ³æ€ä¹ˆæ ·å±•ç¤ºè‡ªå·±çš„ç†è§£ï¼Œå°±å…ˆä»æˆ‘ä»¬ç†ŸçŸ¥çš„ &lt;code&gt;Core Animation&lt;/code&gt; åœ¨æ•´ä¸ª &lt;code&gt;APP&lt;/code&gt; æä¾›æ¶æ„æ–¹é¢æ¥è¿›è¡ŒOå¯¹æ¯”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k4dwO5EuaRVogKZGQ%2F-M7k6-E548XUtcpJOExw%2F1877765-f0cb74a53c9ba8dc.png?alt=media&amp;amp;token=85da9e64-1e31-4e59-a392-e6346b786a2d&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-15 23.12.22.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šä¸Šå›¾åˆ†åˆ«æ˜¯ä» 2014 å¹´çš„ &lt;code&gt;WWDC&lt;/code&gt; è®²è¿° &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2014/419/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Graphics and Animations for iOS Apps&lt;/a&gt; ä¸­æˆªå– å’Œ 2018 å¹´æœ€æ–°æè¿° &lt;a href=&quot;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514-CH1-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About Core Animation&lt;/a&gt; æ–‡æ¡£è·å–&lt;code&gt;Core Animation&lt;/code&gt; åœ¨æ¶æ„ä¸­å®ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”±ä¸Šé¢æ˜¾ç¤ºå…·ä½“ä¿¡æ¯æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸‹é¢ç»“è®ºï¼š   &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1ã€&lt;code&gt;Core Animation&lt;/code&gt; ä½œä¸ºä¸»è¦å†…å®¹è½½ä½“æ‰¿æ¥å¯¹ &lt;code&gt;iOS&lt;/code&gt; å’Œ &lt;code&gt;OS&lt;/code&gt; å…·ä½“æ˜¾ç¤ºçš„ç»˜åˆ¶ï¼›&lt;br&gt;2ã€&lt;code&gt;UIKit&lt;/code&gt; æ¡†æ¶ä»åˆå§‹åŒ–åˆ°é€šè¿‡ &lt;code&gt;GPU&lt;/code&gt; ç”Ÿæˆçº¹ç†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ˜¯ä¾é  &lt;code&gt;Core Animation&lt;/code&gt;ã€ &lt;code&gt;Core Graphics&lt;/code&gt;ã€ &lt;code&gt;OpenGL ES&lt;/code&gt;(&lt;code&gt;iOS&lt;/code&gt; 11) å’Œ &lt;code&gt;Matel&lt;/code&gt;(&lt;code&gt;iOS&lt;/code&gt; 12)   æ¥å®ç°;&lt;br&gt;3ã€åœ¨ &lt;code&gt;iOS 8.0&lt;/code&gt; ä¸­è‹¹æœå®˜æ–¹å°è¯•ä½¿ç”¨ &lt;code&gt;Metal&lt;/code&gt; æ¥æ›¿ä»£ &lt;code&gt;OpenGL ES&lt;/code&gt; åœ¨ç›®å‰æœ€æ–°çš„å®˜æ–¹æ–‡æ¡£ä¸­å®ç°åœ¨ç»˜åˆ¶ç”Ÿæˆçº¹ç†åº•å±‚æ¶æ„ä¾æ® &lt;code&gt;Metal&lt;/code&gt; è¿›è¡Œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æƒ³è¦æ·±å…¥äº†è§£ä¸€ä¸ªæ¶æ„æˆ‘ä»¬å°±ä»æœ€åŸºæœ¬çš„ç³»ç»Ÿ &lt;code&gt;API&lt;/code&gt; ç€æ‰‹ï¼Œä¸‹é¢æ˜¯å°ç¼–å¯¹ç³»ç»Ÿ &lt;code&gt;API&lt;/code&gt; æ ¹æ®åˆ†ç±»æ¥å¯¹å…·ä½“ç±»çš„ &lt;code&gt;API&lt;/code&gt; è¿›è¡Œæ•´ç†ã€‚ &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7k6M58rz6cyT1AO8Pv%2F1877765-3b86566386d064e4.png?alt=media&amp;amp;token=3e463096-20b5-4bb2-bb15-39ccf7c6525c&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-14 22.50.21.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;çœ‹è¿‡ä¸Šå›¾æˆ‘ä»¬é¦–å…ˆè¦æ˜ç™½åœ¨ &lt;code&gt;Core Animation&lt;/code&gt; ä¸ä»…ä»…æ»¡è¶³æˆ‘ä»¬ &lt;code&gt;UIKit&lt;/code&gt; ç§»åŠ¨ç«¯ &lt;code&gt;iOS&lt;/code&gt; ä½¿ç”¨ï¼Œè€Œä¸”åœ¨ &lt;code&gt;OS&lt;/code&gt; ä¸­çš„ &lt;code&gt;AppKit&lt;/code&gt; åŒæ ·ä¹Ÿæ˜¯å¯¹å…¶è¿›è¡Œå†æ¬¡å°è£…ã€‚ä½†æ˜¯è¿™é‡Œæˆ‘ä»¬ä»…ä»…è®¨è®ºåœ¨ &lt;code&gt;iOS&lt;/code&gt; å¹³å°å…·ä½“å®ç°æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;æ•°æ®è¡¨æ ¼å¯ä»¥çœ‹å‡º &lt;code&gt;Core Animation&lt;/code&gt; åœ¨ &lt;code&gt;iOS&lt;/code&gt; æ¶æ„ä¸­è´Ÿè´£ &lt;code&gt;Layer&lt;/code&gt; çš„å†…å®¹ç»˜åˆ¶å’ŒåŠ¨ç”»çš„æ‰§è¡Œã€‚æ‰§è¡Œç»˜åˆ¶å®ç°çš„ç±»ï¼š&lt;code&gt;CATypeLayer&lt;/code&gt; å’Œ &lt;code&gt;CATypeAnimation&lt;/code&gt; åŠå…¶åœ¨å®ç°åŠ¨ç”»å®ç°å‚æ•°ä¾‹å¦‚ï¼š&lt;code&gt;Animation Group&lt;/code&gt; å’Œ &lt;code&gt;Animation Timing&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h2 id=&quot;Core-Animation-ç»˜åˆ¶&quot;&gt;&lt;a href=&quot;#Core-Animation-ç»˜åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;Core Animation ç»˜åˆ¶&quot;&gt;&lt;/a&gt;Core Animation ç»˜åˆ¶&lt;/h2&gt;&lt;p&gt;ç»†ç»†æƒ³æ¥æˆ‘ä»¬åœ¨åšåº”ç”¨å®é™…ä¸Šå±•ç¤ºç»™ç”¨æˆ·å†…å®¹ï¼Œè€Œåœ¨å±•ç¤ºå†…å®¹åŸºç¡€ä¸Šæˆ‘ä»¬å¤šæ•°æ˜¯é‡‡ç”¨ &lt;code&gt;UIKit&lt;/code&gt; ä¸­çš„ç»§æ‰¿äº &lt;code&gt;UIView&lt;/code&gt; éçº¿ç¨‹å®‰å…¨çš„æ§ä»¶æ¥åšå†…å®¹å±•ç¤ºã€‚è¿™é‡Œæˆ‘ä»¬ä» &lt;code&gt;Core Animation&lt;/code&gt; ç»˜åˆ¶å¼€å§‹å‰–ææ€ä¹ˆå®ç°ï¼Ÿ&lt;/p&gt;
&lt;h3 id=&quot;UIView-VS-Core-Animation&quot;&gt;&lt;a href=&quot;#UIView-VS-Core-Animation&quot; class=&quot;headerlink&quot; title=&quot;UIView VS Core Animation&quot;&gt;&lt;/a&gt;&lt;code&gt;UIView&lt;/code&gt; VS &lt;code&gt;Core Animation&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;code&gt;Core Aimation&lt;/code&gt; çš„ &lt;code&gt;API&lt;/code&gt; çš„æ•°æ®è¡¨ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ° &lt;code&gt;Layer Basics&lt;/code&gt; ä¸­æœ‰ä¸‰ä¸ªç±»åˆ†åˆ«æ˜¯ï¼š&lt;code&gt;CALyer&lt;/code&gt;ã€&lt;code&gt;CALayerDelegate&lt;/code&gt; å’Œ &lt;code&gt;CAAction&lt;/code&gt;ã€‚æ—¢ç„¶ &lt;code&gt;iOS&lt;/code&gt; ä¸­ç•Œé¢çš„åˆå§‹åŒ–å‡æ˜¯ä»¥çˆ¶ç±» &lt;code&gt;UIView&lt;/code&gt;æ¥å®ç°ï¼Œé‚£ä¹ˆ &lt;code&gt;UIView&lt;/code&gt; å’Œä¸‰è€…æœ‰ä»€ä¹ˆå…³ç³»å‘¢ï¼Ÿ&lt;/p&gt;
&lt;h4 id=&quot;UIView-å’Œ-CALayer&quot;&gt;&lt;a href=&quot;#UIView-å’Œ-CALayer&quot; class=&quot;headerlink&quot; title=&quot;UIView å’Œ CALayer&quot;&gt;&lt;/a&gt;&lt;code&gt;UIView&lt;/code&gt; å’Œ &lt;code&gt;CALayer&lt;/code&gt;&lt;/h4&gt;&lt;p&gt;&lt;code&gt;Layer&lt;/code&gt; å±‚ä½œä¸º &lt;code&gt;Core Animation&lt;/code&gt; ä¸»è¦ç»˜åˆ¶åŸºç±»ä¸º &lt;code&gt;UIKit&lt;/code&gt; ä¸­ &lt;code&gt;View&lt;/code&gt; æä¾›å†…å®¹ç»˜åˆ¶çš„å®¹å™¨ï¼ŒåŠ¨ç”»å®ç°åŸºç¡€ã€‚ä¸‹é¢é€šè¿‡å®é™…ä¾‹å­æ¥è¿›è¡Œè§£ç­”ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;é€šè¿‡å®ç° &lt;code&gt;LJView&lt;/code&gt; ç»§æ‰¿ &lt;code&gt;View&lt;/code&gt; å’Œ &lt;code&gt;LJLayer&lt;/code&gt; ç»§æ‰¿ &lt;code&gt;Layer&lt;/code&gt;ï¼Œå¹¶ä¸”é‡å†™ &lt;code&gt;LJView&lt;/code&gt; ä¸­çš„æ–¹æ³• &lt;code&gt;+ (Class)layerClass;&lt;/code&gt; å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;+ (Class)layerClass &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;&amp;lt;%@:%p&amp;gt;(%s)&quot;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.class, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, __func__);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt; [LJLayer class];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç„¶åé‡å†™ä¸‹é¢çš„æ–¹æ³•ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1ã€&lt;code&gt;LJView&lt;/code&gt; çš„æ–¹æ³•ï¼š&lt;code&gt;- (CGPoint)center;&lt;/code&gt;ã€&lt;code&gt;- (void)setBounds:(CGRect)bounds;&lt;/code&gt;ã€&lt;code&gt;- (void)setCenter:(CGPoint)center&lt;/code&gt; å’Œ &lt;code&gt;- (void)setFrame:(CGRect)frame;&lt;/code&gt;&lt;br&gt;2ã€&lt;code&gt;LJLayer&lt;/code&gt; çš„æ–¹æ³•ï¼š&lt;code&gt;- (CGPoint)position;&lt;/code&gt;ã€&lt;code&gt;- (void)setBounds:(CGRect)bounds;&lt;/code&gt;ã€&lt;code&gt;- (void)setPosition:(CGPoint)position;&lt;/code&gt;ã€ å’Œ &lt;code&gt;- (void)setFrame:(CGRect)frame&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;åˆå§‹åŒ– &lt;code&gt;_ljView = [[LJView alloc ] init];&lt;/code&gt; æˆ‘ä»¬å¯ä»¥çœ‹åˆ°æ‰“å°çš„æ—¥å¿—å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æŠŠ LJView çš„ layer åŠ è½½ LJLayer&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x10ca54190&lt;/span&gt;&amp;gt;(+[LJView layerClass])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//1ã€è°ƒç”¨ View ä¸­ç»™å®šçš„ Frame æ¥åˆ›å»º Layer&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer setBounds:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//2ã€åˆ›å»º Layer åé€šè¿‡è°ƒç”¨æ ˆåˆ›å»º View&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x7f9ae840c220&lt;/span&gt;&amp;gt;(-[LJView setFrame:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//3ã€View å›è°ƒä¸­å¿ƒç‚¹ center å®é™…å§”æ‰˜ç»™ Layer çš„ position è¿”å›å½“å‰çš„ä¸­å¿ƒç‚¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x7f9ae840c220&lt;/span&gt;&amp;gt;(-[LJView center])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer position])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//4ã€é€šè¿‡ä¸Šé¢ LJView è®¾ç½® Frame å’Œ Center åï¼ŒLayer å±‚å†æ¬¡é‡æ–°å¯¹å…¶ Frameã€position å’Œ bounds è¿›è¡Œè®¾ç½®ï¼Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è¿™é‡Œä¹Ÿå¯ä»¥çœ‹åˆ° Frame å…¶å®æ˜¯æœ‰ position å’Œ bounds æ¥å†³å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer setFrame:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer setPosition:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer setBounds:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//5ã€View åœ¨å®ç°å¸ƒå±€åï¼Œå†æ¬¡è·å–å…¶ center å†æ¬¡å§”æ‰˜ä¸ Layer position æ¥è·å–ä¸­å¿ƒç‚¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x7f9ae840c220&lt;/span&gt;&amp;gt;(-[LJView center])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer position])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨å®ç° &lt;code&gt;LJView&lt;/code&gt; åœ¨å®ç°åˆå§‹åŒ–çš„è¿‡ç¨‹æ—¶ï¼Œå®é™…ä¼šå§”æ‰˜ç»™ &lt;code&gt;Layer&lt;/code&gt; å±‚çš„ &lt;code&gt;Frame&lt;/code&gt; | &lt;code&gt;Bounds&lt;/code&gt; å’Œ &lt;code&gt;Position&lt;/code&gt; æ¥è¿›è¡Œå…·ä½“å®ä¾‹åŒ–çš„è¿‡ç¨‹ã€‚åœ¨å®ä¾‹åŒ–è¿‡ç¨‹æœ‰ä¸‹é¢å‡ ä¸ªæ­¥éª¤ï¼š  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1ã€&lt;code&gt;View&lt;/code&gt; é€šè¿‡ &lt;code&gt;Layer&lt;/code&gt; ä¸­çš„ &lt;code&gt;bounds&lt;/code&gt; å’Œ &lt;code&gt;position&lt;/code&gt; æ¥ç¡®å®šå…¶çš„ &lt;code&gt;frame&lt;/code&gt;ï¼›&lt;br&gt;2ã€ç„¶å &lt;code&gt;Layer&lt;/code&gt; æ ¹æ®ä¸Šé¢çš„å€¼å†æ¬¡å¯¹å…¶ &lt;code&gt;frame&lt;/code&gt;ã€&lt;code&gt;position&lt;/code&gt; å’Œ &lt;code&gt;bounds&lt;/code&gt; è¿›è¡Œå†æ¬¡è®¾ç½®ï¼›&lt;br&gt;3ã€æœ€å &lt;code&gt;View&lt;/code&gt; å†æ¬¡å§”æ‰˜ &lt;code&gt;Layer&lt;/code&gt; è·å–å½“å‰çš„ä¸­å¿ƒç‚¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;ä¸‹é¢æˆ‘ä»¬åœ¨æ ¹æ®æ¯éƒ¨å…·ä½“æ“ä½œåœ¨çœ‹ä¸‹æ“ä½œå…·ä½“çš„è°ƒç”¨æ ˆ&quot;&gt;&lt;a href=&quot;#ä¸‹é¢æˆ‘ä»¬åœ¨æ ¹æ®æ¯éƒ¨å…·ä½“æ“ä½œåœ¨çœ‹ä¸‹æ“ä½œå…·ä½“çš„è°ƒç”¨æ ˆ&quot; class=&quot;headerlink&quot; title=&quot;ä¸‹é¢æˆ‘ä»¬åœ¨æ ¹æ®æ¯éƒ¨å…·ä½“æ“ä½œåœ¨çœ‹ä¸‹æ“ä½œå…·ä½“çš„è°ƒç”¨æ ˆ&quot;&gt;&lt;/a&gt;ä¸‹é¢æˆ‘ä»¬åœ¨æ ¹æ®æ¯éƒ¨å…·ä½“æ“ä½œåœ¨çœ‹ä¸‹æ“ä½œå…·ä½“çš„è°ƒç”¨æ ˆ&lt;/h4&gt;&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;LJLayer:0x6040002212a0&amp;gt;(-[LJLayer setBounds:])&lt;/code&gt;è°ƒç”¨æ ˆï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kA4g63wJEePiivGKi%2F1877765-742707ecc08ad320.png?alt=media&amp;amp;token=93794a64-9209-4efe-8b78-3c06a8cc0500&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-18 00.27.56.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨å®é™…ä¸­çš„è°ƒç”¨æ ˆæ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;aã€[UIView init] åˆå§‹åŒ–&lt;br&gt;bã€[UIView initWithFrame] è°ƒç”¨ initWithFrame æ–¹æ³•&lt;br&gt;cã€UIViewCommonInitWithFrame é‡‡ç”¨ Common frame åˆå§‹&lt;br&gt;dã€[UIView _createLayerWithFrame] æ ¹æ® frame åˆ›å»º Layer&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;1ã€&lt;code&gt;UIView&lt;/code&gt; åˆå§‹åŒ–æ—¶åˆ›å»º &lt;code&gt;Layer&lt;/code&gt; ç„¶åè°ƒç”¨å…¶æ–¹æ³• &lt;code&gt;setBounds:&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;LJView:0x7f9ae840c220&amp;gt;(-[LJView setFrame:])&lt;/code&gt;è°ƒç”¨æ ˆï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kAKqIbPttONgLlz_k%2F1877765-0dbfaf7c8ca0d82b.png?alt=media&amp;amp;token=fee435d0-d458-4dd7-9ae2-36d693af8e2f&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-18 00.28.16.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨å®é™…ä¸­çš„è°ƒç”¨æ ˆæ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;aã€[UIView init] åˆå§‹åŒ–&lt;br&gt;bã€[UIView initWithFrame] è°ƒç”¨ initWithFrame æ–¹æ³•&lt;br&gt;cã€UIViewCommonInitWithFrame é‡‡ç”¨ Common frame åˆå§‹   &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;2ã€&lt;code&gt;UIView&lt;/code&gt; åœ¨åˆå§‹åˆ›å»º &lt;code&gt;Layer&lt;/code&gt; åå¯¹å…¶ &lt;code&gt;Frame&lt;/code&gt; è¿›è¡Œåˆå§‹åŒ–è°ƒç”¨ &lt;code&gt;setFrame:&lt;/code&gt; æ–¹æ³•ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;LJView:0x7f9ae840c220&amp;gt;(-[LJView center])&lt;/code&gt;è°ƒç”¨æ ˆï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kAdu1R3SZtjJb4KPO%2F1877765-20c3b7df71a0ba52.png?alt=media&amp;amp;token=db5160bf-a307-4421-abb4-f9c059e1e8af&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-18 00.28.30.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;LJLayer:0x6040002212a0&amp;gt;(-[LJLayer position])&lt;/code&gt;è°ƒç”¨æ ˆï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kAruSVmEVtQ0-bXGf%2F1877765-fd919e1a0ded16b2.png?alt=media&amp;amp;token=7fb581fa-ea99-41b1-929c-a09f98cee079&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-18 00.28.52.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨å®é™…ä¸­çš„è°ƒç”¨æ ˆæ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;aã€[UIView init] åˆå§‹åŒ–&lt;br&gt;bã€[UIView initWithFrame] è°ƒç”¨ initWithFrame æ–¹æ³•&lt;br&gt;cã€UIViewCommonInitWithFrame é‡‡ç”¨ Common frame åˆå§‹&lt;br&gt;dã€[LJView setFrame] è°ƒç”¨å…·ä½“ View è®¾ç½® Parent frame å¸ƒå±€&lt;br&gt;eã€[UIView(Geometry) setFrame]&lt;br&gt;fã€[LJView center] è°ƒç”¨ View ä¸­ Center å§”æ‰˜ç»™ Layer çš„ position&lt;br&gt;gã€[LJLayer position]  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;3ã€è¿™é‡Œå¯ä»¥çœ‹å‡ºåœ¨ 2 åŸºç¡€ä¸Šæ¥ç€è°ƒç”¨ &lt;code&gt;View&lt;/code&gt; çš„ &lt;code&gt;Center&lt;/code&gt; ä¸­å¿ƒç‚¹å®é™…æ˜¯å§”æ‰˜ä¸ &lt;code&gt;Layer&lt;/code&gt; çš„ &lt;code&gt;position&lt;/code&gt; ç»§ç»­è°ƒç”¨&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;LJLayer:0x6040002212a0&amp;gt;(-[LJLayer setFrame:])&lt;/code&gt;è°ƒç”¨æ ˆï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kBBZ9BeXPPWIW-6sA%2F1877765-a3d63440b2af10ff.png?alt=media&amp;amp;token=1056946c-2fbc-48a3-8e45-b3d502a542ad&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-18 00.29.11.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;LJLayer:0x6040002212a0&amp;gt;(-[LJLayer setPosition:])&lt;/code&gt;è°ƒç”¨æ ˆï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kBTIdkQgdRKp0k9gO%2F1877765-17fcb682fb15a931.png?alt=media&amp;amp;token=5ee78834-4af0-4925-aff4-507fbbae5fb6&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-18 00.29.27.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨å®é™…ä¸­çš„è°ƒç”¨æ ˆæ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;aã€[UIView init] åˆå§‹åŒ–&lt;br&gt;bã€[UIView initWithFrame] è°ƒç”¨ initWithFrame æ–¹æ³•&lt;br&gt;cã€UIViewCommonInitWithFrame é‡‡ç”¨ Common frame åˆå§‹&lt;br&gt;dã€[LJView setFrame] è°ƒç”¨å…·ä½“ View è®¾ç½® Parent frame å¸ƒå±€&lt;br&gt;eã€[UIView(Geometry) setFrame] è°ƒç”¨ç³»ç»Ÿ View çš„ Frame è®¾ç½®&lt;br&gt;fã€[LJLayer setFrame] è°ƒç”¨æ‹¥æœ‰ Layer çš„ Frame&lt;br&gt;gã€[CALayer setFrame] è°ƒç”¨ç³»ç»Ÿ Layer çš„ Frame è®¾ç½®&lt;br&gt;hã€[LJLayer setPosition] è®¾ç½® Layer çš„ä¸­å¿ƒç‚¹&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;4ã€åœ¨ç¬¬ 2 çš„åŸºç¡€ä¸Šé€šè¿‡è®¾ç½® &lt;code&gt;Layer&lt;/code&gt; çš„ &lt;code&gt;Frame&lt;/code&gt; å®é™…è®¾ç½®å½“å‰çš„ &lt;code&gt;position&lt;/code&gt; ä¸­å¿ƒç‚¹ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;LJLayer:0x6040002212a0&amp;gt;(-[LJLayer setBounds:])&lt;/code&gt;è°ƒç”¨æ ˆï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kBjwD0Nf_a0ssh5iI%2F1877765-b1166a30687d952b.png?alt=media&amp;amp;token=5feb6add-c504-4100-b647-bbe4981dc907&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-18 00.29.41.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨å®é™…ä¸­çš„è°ƒç”¨æ ˆæ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;aã€[UIView init] åˆå§‹åŒ–&lt;br&gt;bã€[UIView initWithFrame] è°ƒç”¨ initWithFrame æ–¹æ³•&lt;br&gt;cã€UIViewCommonInitWithFrame é‡‡ç”¨ Common frame åˆå§‹&lt;br&gt;dã€[LJView setFrame] è°ƒç”¨å…·ä½“ View è®¾ç½® Parent frame å¸ƒå±€&lt;br&gt;eã€[UIView(Geometry) setFrame]&lt;br&gt;fã€[LJLayer setFrame]&lt;br&gt;gã€[CALayer setFrame]&lt;br&gt;hã€[LJLayer setBounds] è®¾ç½® Layer çš„ bounds å®é™…å¸ƒå±€  &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;5ã€åœ¨ç¬¬ 2 çš„åŸºç¡€ä¸Šé€šè¿‡è®¾ç½® &lt;code&gt;Layer&lt;/code&gt; çš„ &lt;code&gt;Frame&lt;/code&gt; å®é™…è®¾ç½®å½“å‰çš„ &lt;code&gt;bounds&lt;/code&gt; ä¸­å¿ƒç‚¹ï¼Œä¹Ÿå°±å¯ä»¥çœ‹å‡º &lt;code&gt;Layer&lt;/code&gt; çš„ &lt;code&gt;Frame&lt;/code&gt; åœ¨è®¾ç½®æƒ…å†µå®é™…æ˜¯æ ¹æ® &lt;code&gt;Layer&lt;/code&gt; çš„ &lt;code&gt;bounds&lt;/code&gt; å’Œ &lt;code&gt;position&lt;/code&gt; æ¥å®é™…å†³å®šå…¶ &lt;code&gt;Frame&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;LJView:0x7f9ae840c220&amp;gt;(-[LJView center])&lt;/code&gt;è°ƒç”¨æ ˆï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kByvPPLqQlXuqrd3k%2F1877765-591e5663da92e76a.png?alt=media&amp;amp;token=0292e6bd-1489-4166-87fa-4ff0130933c4&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-18 00.29.55.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;code&gt;&amp;lt;LJLayer:0x6040002212a0&amp;gt;(-[LJLayer position])&lt;/code&gt;è°ƒç”¨æ ˆï¼š&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kCApjZQtcKicNi7g2%2F1877765-8161cf64cdd86cda.png?alt=media&amp;amp;token=6d80ed68-a6e9-46f9-b38b-65ee5cfa4297&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-18 00.30.09.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºåœ¨å®é™…ä¸­çš„è°ƒç”¨æ ˆæ˜¯ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;aã€[UIView init] åˆå§‹åŒ–&lt;br&gt;bã€[UIView initWithFrame] è°ƒç”¨ initWithFrame æ–¹æ³•&lt;br&gt;cã€UIViewCommonInitWithFrame é‡‡ç”¨ Common frame åˆå§‹&lt;br&gt;dã€[LJView setFrame] è°ƒç”¨å…·ä½“ View è®¾ç½® Parent frame å¸ƒå±€&lt;br&gt;eã€[UIView(Geometry) setFrame]&lt;br&gt;fã€[LJView center] è°ƒç”¨ View ä¸­ Center å§”æ‰˜ç»™ Layer çš„ position&lt;br&gt;gã€[LJLayer position]   &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;6ã€åœ¨ç¬¬ 2 åŸºç¡€ä¸Šè®¾ç½®å®Œç›¸å…³é€šè¿‡ &lt;code&gt;Vi ew&lt;/code&gt; ä¸­å¿ƒç‚¹å§”æ‰˜ç»™ &lt;code&gt;Layer&lt;/code&gt; çš„ &lt;code&gt;position&lt;/code&gt; æ¥è·å–ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸Šé¢åœ¨åˆå§‹åŒ– &lt;code&gt;[[LJView alloc] init]&lt;/code&gt; åœ¨å®é™…è°ƒç”¨è¿‡ç¨‹ä¸­æˆ‘ä»¬å¯ä»¥çœ‹åˆ°é¦–å…ˆæ˜¯é€šè¿‡ &lt;code&gt;[UIView _createLayerWithFrame]&lt;/code&gt; åˆ›å»º &lt;code&gt;Layer&lt;/code&gt; ç„¶åæ ¹æ® &lt;code&gt;Layer&lt;/code&gt; çš„å±æ€§ &lt;code&gt;Poition&lt;/code&gt; å’Œ &lt;code&gt;Bounds&lt;/code&gt; å†³å®š &lt;code&gt;UIView&lt;/code&gt; çš„ &lt;code&gt;Frame&lt;/code&gt; ç¡®å®šå«æœ‰ &lt;code&gt;UIView&lt;/code&gt; åœ¨è§†å›¾æ§åˆ¶å™¨æˆ–è€…æ˜¯çˆ¶ &lt;code&gt;UIVIew&lt;/code&gt; çš„å¸ƒå±€ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æ¥ä¸‹æ¥æˆ‘ä»¬å¯¹åˆå§‹åŒ–åå®ä¾‹ &lt;code&gt;_ljView&lt;/code&gt; å¯¹å…¶ &lt;code&gt;Frame&lt;/code&gt; èµ‹å€¼ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;_ljView.frame = CGRectMake(0, 0, LJScreenWidth(), 200);&lt;/code&gt; æ‰“å°çš„æ—¥å¿—å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x7f9ae840c220&lt;/span&gt;&amp;gt;(-[LJView setFrame:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x7f9ae840c220&lt;/span&gt;&amp;gt;(-[LJView center])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer position])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer setFrame:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer setPosition:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer setBounds:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x7f9ae840c220&lt;/span&gt;&amp;gt;(-[LJView center])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;39931&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;4249519&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x6040002212a0&lt;/span&gt;&amp;gt;(-[LJLayer position])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;åœ¨æ‰“å°çš„å…·ä½“è°ƒç”¨æ ˆæˆ‘ä»¬å¯ä»¥çœ‹å‡ºå†å…·ä½“èµ‹å€¼çš„è¿‡ç¨‹ä¸­å®é™…çš„è°ƒç”¨æ–¹æ³•å°±æ˜¯æˆ‘ä»¬åœ¨è¿›è¡Œ  &lt;code&gt;[[LJView alloc] init]&lt;/code&gt; åˆ›å»ºå…¶ &lt;code&gt;Layer&lt;/code&gt; åè°ƒç”¨æ–¹å¼ï¼š&lt;br&gt;1ã€&lt;code&gt;UIView&lt;/code&gt; å§”æ‰˜å…¶åŒ…å«çš„ &lt;code&gt;Layer&lt;/code&gt; è·å–ä¸­å¿ƒç‚¹æ¥åšåˆ¤æ–­ï¼›&lt;br&gt;2ã€é€šè¿‡ &lt;code&gt;Layer&lt;/code&gt; æ¥é€šè¿‡ &lt;code&gt;Bounds&lt;/code&gt; å’Œ &lt;code&gt;Position&lt;/code&gt; æ¥ç¡®å®šå…¶ &lt;code&gt;Frame&lt;/code&gt;;&lt;br&gt;3ã€å†æ¬¡è·å– &lt;code&gt;UIView&lt;/code&gt; å§”æ‰˜å…¶åŒ…å«çš„ &lt;code&gt;Layer&lt;/code&gt; è·å–ä¸­å¿ƒç‚¹æ¥åšåˆ¤æ–­å½“å‰ä¸­å¿ƒç‚¹ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;UIView-å’Œ-CALayerDelegate-åŠ-CAAction&quot;&gt;&lt;a href=&quot;#UIView-å’Œ-CALayerDelegate-åŠ-CAAction&quot; class=&quot;headerlink&quot; title=&quot;UIView å’Œ CALayerDelegate åŠ CAAction&quot;&gt;&lt;/a&gt;&lt;code&gt;UIView&lt;/code&gt; å’Œ &lt;code&gt;CALayerDelegate&lt;/code&gt; åŠ &lt;code&gt;CAAction&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;æˆ‘ä»¬åœ¨ä½¿ç”¨ &lt;code&gt;UIView&lt;/code&gt; å¸ƒå±€ä¸­ä¸å°‘æœ‰äº›åŠ¨ç”»æ•ˆæœï¼Œåœ¨ &lt;code&gt;iOS&lt;/code&gt; é‡Œç»™å‡ºéå¸¸ç®€æ´çš„åŠ¨ç”» &lt;code&gt;API&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡æˆ‘ä»¬ç»™å‡ºä¸€ä¸ªæœ€ç®€å•çš„ä¾‹å­ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; animateWithDuration:&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; animations:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.view.center = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(LJScreenWidth()/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;300&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ä¸Šè¿°çš„è¿è¡Œä¹‹å‰æˆ‘ä»¬åœ¨ &lt;code&gt;LJView&lt;/code&gt; é‡å†™ä¸‹é¢æ–¹æ³•ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1ã€ &lt;code&gt;CALayerDelegate&lt;/code&gt; æ–¹æ³• &lt;code&gt;- (id&amp;lt;CAAction&amp;gt;)actionForLayer:forKey:&lt;/code&gt;ï¼›&lt;br&gt;2ã€&lt;code&gt;LJLayer&lt;/code&gt; ä¸­æ–¹æ³• &lt;code&gt;- (void)addAnimation: forKey:&lt;/code&gt; åœ¨å…¶ä¸­å®ç° &lt;code&gt;CAAnimationDelegate&lt;/code&gt; å§”æ‰˜ç»™ &lt;code&gt;LJLayer&lt;/code&gt; ç„¶åé‡å†™ &lt;code&gt;- (void)animationDidStart:&lt;/code&gt; å’Œ &lt;code&gt;- (void)animationDidStop: finished:&lt;/code&gt; &lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;è¿è¡Œä¸Šé¢çš„ä»£ç è·å–ä¸‹é¢çš„æ‰“å°æ—¥å¿—ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è®¾ç½®å½“å‰çš„ center ä¸­å¿ƒç‚¹ | è¿™é‡Œä¹Ÿå¯ä»¥çœ‹å‡º UIView å®é™…æ˜¯ç”± Layer æ¥è¿›è¡Œè®¾ç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x7ff306d0d6f0&lt;/span&gt;&amp;gt;(-[LJView setCenter:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x60400023f380&lt;/span&gt;&amp;gt;(-[LJLayer position])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x60400023f380&lt;/span&gt;&amp;gt;(-[LJLayer setPosition:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//é€šè¿‡å®ç° CALayerDelegate å§”æ‰˜ | è¿”å›å½“å‰çš„ CAAction çš„åè®®ç»™ Layer &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//CAAction &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//- (void)runActionForKey:event object:anObject arguments:dict;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x7ff306d0d6f0&lt;/span&gt;&amp;gt;(-[LJView actionForLayer:forKey:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åˆ¤æ–­ Layer å±‚ position æ˜¯å¦å­˜åœ¨ | è·å–å½“å‰ position &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x60400023f380&lt;/span&gt;&amp;gt;(-[LJLayer position])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x60400023f380&lt;/span&gt;&amp;gt;(-[LJLayer position])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//Layer è·å–åŠ¨ç”»æ·»åŠ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] anim : &amp;lt;&lt;span class=&quot;built_in&quot;&gt;CABasicAnimation&lt;/span&gt;: &lt;span class=&quot;number&quot;&gt;0x60400003eb40&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x60400023f380&lt;/span&gt;&amp;gt;(-[LJLayer addAnimation:forKey:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å†æ¬¡é€šè¿‡ View æ¥è·å– actionForLayer:forKey: åˆ¤æ–­æ˜¯å¦åŠ¨ç”»å†æ¬¡å¤©æœº&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJView:&lt;span class=&quot;number&quot;&gt;0x7ff306d0d6f0&lt;/span&gt;&amp;gt;(-[LJView actionForLayer:forKey:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x60400023f380&lt;/span&gt;&amp;gt;(-[LJLayer position])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] anim : (null)&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x60400023f380&lt;/span&gt;&amp;gt;(-[LJLayer addAnimation:forKey:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ‰§è¡ŒåŠ¨ç”»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x60400023f380&lt;/span&gt;&amp;gt;(-[LJLayer animationDidStart:])&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åŠ¨ç”»ç»“æŸ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;2471&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;50545&lt;/span&gt;] &amp;lt;LJLayer:&lt;span class=&quot;number&quot;&gt;0x60400023f380&lt;/span&gt;&amp;gt;(-[LJLayer animationDidStop:finished:])&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬å¯ä»¥çœ‹åˆ°ä¸Šé¢ğŸ‘†åœ¨ &lt;code&gt;UIView&lt;/code&gt; è®¾ç½®å½“å‰ &lt;code&gt;center&lt;/code&gt; èµ‹å€¼çš„æ—¶å€™ï¼Œ&lt;code&gt;LJView&lt;/code&gt; è°ƒç”¨å½“å‰ &lt;code&gt;actionForLayer:forKey:&lt;/code&gt;ï¼Œä¸‹é¢æˆ‘ä»¬åœ¨ &lt;code&gt;[UIView animationWithDuration:animations:]&lt;/code&gt; é‡å†™ä¸‹é¢æ–¹æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;actionForLayer:forKey: %@&quot;&lt;/span&gt;, [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ljView.layer.delegate actionForLayer:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ljView.layer forKey:&lt;span class=&quot;string&quot;&gt;@&quot;position&quot;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[&lt;span class=&quot;built_in&quot;&gt;UIView&lt;/span&gt; animateWithDuration:&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; animations:^&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;actionForLayer:forKey: %@&quot;&lt;/span&gt;, [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ljView.layer.delegate actionForLayer:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ljView.layer forKey:&lt;span class=&quot;string&quot;&gt;@&quot;position&quot;&lt;/span&gt;]);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.ljView.center = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(LJScreenWidth()/&lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;300&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨æ‰“å°çš„å…·ä½“å†…å®¹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åœ¨ UIView block å¤–é¢è®¾ç½®è¿”å› null&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;5104&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;110746&lt;/span&gt;] actionForLayer:forKey: &amp;lt;null&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åœ¨å½“å‰çš„ UIView block ä¸­è¿›è¡Œè®¾ç½®è·å– animationAction å¯¹è±¡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;LJCAStructure[&lt;span class=&quot;number&quot;&gt;5104&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;110746&lt;/span&gt;] actionForLayer:forKey: &amp;lt;_UIViewAdditiveAnimationAction: &lt;span class=&quot;number&quot;&gt;0x604000038cc0&lt;/span&gt;&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æˆ‘ä»¬æ ¹æ®ä¸Šé¢æ‰“å°çš„æ—¥å¿—åœ¨ &lt;code&gt;LJLayer&lt;/code&gt; ä¸­å†™ä¸‹ä¸‹é¢åŠ¨ç”»çš„&lt;strong&gt;ä¼ªä»£ç &lt;/strong&gt;ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)setPosition:(&lt;span class=&quot;built_in&quot;&gt;CGPoint&lt;/span&gt;)position &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;&amp;lt;%@:%p&amp;gt;(%s)&quot;&lt;/span&gt;, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.class, &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;, __func__);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [&lt;span class=&quot;keyword&quot;&gt;super&lt;/span&gt; setPosition:position];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.delegate respondsToSelector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(actionForLayer:forKey:)]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; obj = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.delegate actionForLayer:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; forKey:&lt;span class=&quot;string&quot;&gt;@&quot;position&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!obj) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//éšå¼åŠ¨ç”»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([obj isKindOfClass:[&lt;span class=&quot;built_in&quot;&gt;NSNull&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//ç›´æ¥ç»˜åˆ¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// CAAnimation&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;CAAnimation&lt;/span&gt; *ainmaion;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; addAnimation:ainmaion forKey:&lt;span class=&quot;string&quot;&gt;@&quot;position&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é€šè¿‡ä¸Šé¢åœ¨ç®€å•çš„é€šè¿‡ &lt;code&gt;UIView&lt;/code&gt; çš„ &lt;code&gt;API&lt;/code&gt; å®ç°åŠ¨ç”»ï¼Œæˆ‘ä»¬å¯ä»¥çœ‹å‡ºå½“å‰åœ¨æ‰§è¡ŒåŠ¨ç”»çš„è¿‡ç¨‹ä¸­å…·ä½“å®ç°æµç¨‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;1ã€æˆ‘ä»¬é€šè¿‡å½“å‰çš„ &lt;code&gt;UIView&lt;/code&gt; åœ¨å¯¹å…¶å±æ€§è¿›è¡Œèµ‹å€¼æ—¶ï¼Œ&lt;code&gt;UIView&lt;/code&gt; å§”æ‰˜ç»™ &lt;code&gt;Layer&lt;/code&gt; è¿›è¡Œå±æ€§è®¾ç½®ï¼›&lt;br&gt;2ã€&lt;code&gt;UIView&lt;/code&gt; é€šè¿‡å®ç° &lt;code&gt;CALayerDelegate&lt;/code&gt; å§”æ‰˜æ–¹æ³•ï¼Œé€šè¿‡ &lt;code&gt;iOS&lt;/code&gt; ç³»ç»Ÿæ¥æŸ¥æ‰¾å¯¹åº”çš„ &lt;code&gt;CAAction&lt;/code&gt; æ¥ä¼ é€’ç»™ &lt;code&gt;CALayer&lt;/code&gt;ï¼›&lt;br&gt;3ã€&lt;code&gt;Layer&lt;/code&gt; å±‚è·å–åœ¨ &lt;code&gt;UIView&lt;/code&gt; çš„ &lt;code&gt;CAAimation&lt;/code&gt; æ•°æ®ï¼Œæ·»åŠ åˆ°å½“å‰æ‰§è¡ŒåŠ¨ç”»ä¸­ï¼›&lt;br&gt;4ã€æ‰§è¡ŒåŠ¨ç”»ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h2 id=&quot;Core-Animation-ç»˜åˆ¶-ç‰¹æœ‰-Layer&quot;&gt;&lt;a href=&quot;#Core-Animation-ç»˜åˆ¶-ç‰¹æœ‰-Layer&quot; class=&quot;headerlink&quot; title=&quot;Core Animation ç»˜åˆ¶ - ç‰¹æœ‰ Layer&quot;&gt;&lt;/a&gt;Core Animation ç»˜åˆ¶ - ç‰¹æœ‰ Layer&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;ç‰¹æœ‰ Layer&lt;/th&gt;
&lt;th&gt;Advantages VS Disadvantages&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://zsisme.gitbooks.io/ios-/content/chapter6/CATextLayer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CATextLayer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;çº¯æ–‡æœ¬å¸¦æœ‰æ–‡æœ¬æˆ–è€…æ˜¯æ˜¯æ–‡æœ¬å­—ç¬¦ä¸²åœ¨ &lt;code&gt;UIKit&lt;/code&gt; æ¡†æ¶ä¸­ &lt;code&gt;UILabel&lt;/code&gt; ä»£æ›¿ï¼Œé‡‡ç”¨æ˜¯çš„ &lt;code&gt;Core Text&lt;/code&gt; ç›´æ¥è¿›è¡Œç»˜åˆ¶ã€‚ä½†æ˜¯åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ä¼šå‘ç°åœ¨è®¾ç½® å±…ä¸­æ˜¾ç¤ºé»˜è®¤æ˜¯ &lt;code&gt;x&lt;/code&gt; æ–¹å‘å±…ä¸­ &lt;code&gt;y&lt;/code&gt; è½´æ˜¾ç¤ºè·ç¦» &lt;code&gt;top&lt;/code&gt; ä½†æ˜¯å¯ä»¥ä½¿ç”¨ &lt;code&gt;NSMutableAttributeString&lt;/code&gt; æ¥è¿›è¡Œè®¾ç½®&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://zsisme.gitbooks.io/ios-/content/chapter6/cashapelayer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAShaperLayer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;CAShaperLayer&lt;/code&gt; é€šè¿‡çŸ¢é‡å›¾å½¢æ¥è¿›è¡Œç»˜åˆ¶åœ¨ä½¿ç”¨ç»˜åˆ¶æ—¶ä¸ç”¨åƒä½¿ç”¨ &lt;code&gt;CALayer&lt;/code&gt; ç”Ÿæˆç›¸åº”çš„å¯„å®¿å›¾ç‰‡ä¸æ¶ˆè€—å†…å­˜ï¼Œå¯ä»¥ç»“åˆ &lt;code&gt;Path&lt;/code&gt; æ¥è¿›è¡Œå„ç§å†…å®¹çš„ç»˜åˆ¶å·¥ä½œã€‚ä½¿ç”¨æœ€å¹¿çš„åœºæ™¯å°±æ˜¯æˆ‘ä»¬åœ¨ APP å®ç°ç”»ç¬”æˆ–è€…æ˜¯å†…å®¹çš„ç»˜åˆ¶å·¥ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://zsisme.gitbooks.io/ios-/content/chapter6/cagradientLayer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAGradientLayer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä¸€ä¸ªä½¿ç”¨ç¡¬ä»¶åŠ é€Ÿå¯ä»¥ç»˜åˆ¶å‡ºå¾ˆç‚«çš„ &lt;code&gt;API&lt;/code&gt; æ¥å£å¯ä»¥å®ç°å¤šç§è‰²å½©å¹³æ»‘çš„è¿‡æ¸¡ï¼Œå¤šç§é¢œè‰²çš„é—´éš”ã€‚å¦‚æœä½œä¸º &lt;code&gt;mask&lt;/code&gt; å¯ä»¥åšå‡ºåœ¨ä¸€ä¸ª &lt;code&gt;UILabel&lt;/code&gt; æˆ–è€…æ˜¯ &lt;code&gt;CATextLayer&lt;/code&gt; ä¸Šé¢åšå‡ºå¹³æ»‘è¿‡çš„é¢œè‰²æ•ˆæœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://zsisme.gitbooks.io/ios-/content/chapter6/caemitterlayer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAEmitterLayer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;æ˜¯ä¸€ä¸ªåŸºäºæ ¸å¿ƒåŠ¨ç”»ç²’å­å‘å°„çš„ç³»ç»Ÿã€‚è¿™é‡Œå¯ä»¥æ§åˆ¶ç²’å­ç”Ÿæˆä»¥åŠç²’å­çš„å¼€å§‹ä½ç½®å®ç°å¾ˆå¥½ç²’å­å±•ç¤ºæ•ˆæœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://zsisme.gitbooks.io/ios-/content/chapter6/cascrollLayer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAScrollLayer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ç®¡ç†ç€å¤šä¸ªå­å±‚çš„ä½¿ç”¨ï¼Œç±»ä¼¼äºåœ¨ &lt;code&gt;UIKit&lt;/code&gt; ä¸­å¯æ»‘åŠ¨çš„æ§ä»¶ &lt;code&gt;UIScrollView&lt;/code&gt;ã€‚å¯ä»¥è¯´æ˜¯åœ¨æ²¡æœ‰å¯¹ç‚¹å‡»ç›¸åº”çš„æƒ…å†µä¸‹ &lt;code&gt;UIScrollView&lt;/code&gt; å¾ˆå¥½çš„å›¾å±‚æ›¿ä»£ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://zsisme.gitbooks.io/ios-/content/chapter6/catiledLayer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CATiledLayer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;å¯¹å›¾ç‰‡å®ç°åˆ†å‰²æ˜¾ç¤ºï¼Œåœ¨ &lt;code&gt;UI&lt;/code&gt; ç•Œé¢ä¸Šæˆ‘ä»¬å¯ä»¥æ“ä½œå’Œçœ‹åˆ°çš„å›¾ç‰‡éƒ½ä¼šé€šè¿‡ &lt;code&gt;OpenGL ES&lt;/code&gt; ç”Ÿæˆçº¹ç†æœ€åç»˜åˆ¶åœ¨å±å¹•ä¸Šã€‚å½“æ˜¾ç¤ºçš„å›¾ç‰‡è¿‡å¤§æˆ–è€…è¶…å‡ºéœ€è¦ç»˜åˆ¶çš„æ˜¾ç¤ºå†…å®¹ä¸Šï¼Œä¼šåœ¨æ˜¾ç¤ºæ—¶å¯¹å›¾ç‰‡è¿›è¡ŒåŠ å‹ç”ŸæˆåŸç”Ÿæ•°æ®æ˜¾ç¤ºè¿™æ—¶å¯èƒ½ä¼šå‡ºç°å¡é¡¿ç°è±¡ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://zsisme.gitbooks.io/ios-/content/chapter6/catransformlayer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CATransformLayer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;å®ç° 3D å±‚æ¬¡å±•ç¤ºï¼Œå¤šä½¿ç”¨åœ¨åœ°å›¾ç±»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://zsisme.gitbooks.io/ios-/content/chapter6/careplicatorLayer.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAReplicatorLayer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;è¦è‡ªåŠ¨å¤åˆ¶ä¸€ä¸ªæˆ–å¤šä¸ªå­å±‚æ—¶ä½¿ç”¨ã€‚replicatorä¸ºæ‚¨åˆ›å»ºå‰¯æœ¬ï¼Œå¹¶ä½¿ç”¨æ‚¨æŒ‡å®šçš„å±æ€§æ¥æ›´æ”¹å‰¯æœ¬çš„å¤–è§‚æˆ–å±æ€§ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://www.objc.io/issues/18-games/metal/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAMetalLayer&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä¸»è¦æ˜¯ç®¡ç† &lt;code&gt;Metal Texture Pool&lt;/code&gt; æ¸²æŸ“ &lt;code&gt;MTL Texture&lt;/code&gt; åˆ°æ˜¾ç¤ºçª—å£ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;Core-Animation-åŠ¨ç”»-æ¢ç´¢&quot;&gt;&lt;a href=&quot;#Core-Animation-åŠ¨ç”»-æ¢ç´¢&quot; class=&quot;headerlink&quot; title=&quot;Core Animation åŠ¨ç”» - æ¢ç´¢&quot;&gt;&lt;/a&gt;Core Animation åŠ¨ç”» - æ¢ç´¢&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;CAAnimation API&lt;/th&gt;
&lt;th&gt;Function&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/boilWater/AnimationDome/tree/master/AnimationDome/View/ComplexAnimation&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAAnimation&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä½œä¸º &lt;code&gt;QuartzCore&lt;/code&gt; å…¶ä»–åŠ¨ç”»çš„çˆ¶ç±»ï¼Œå®ç°åŠ¨ç”»çš„åŸºæœ¬æ¥å£ã€‚å¯ä»¥é€šè¿‡ç³»ç»Ÿ &lt;code&gt;CAMediaTimingFunction&lt;/code&gt; åŠ¨ç”»æˆ–è€…äºŒæ¬¡æœ¬å¡å°”æ›²çº¿è®¾ç½®åŠ¨ç”»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/boilWater/AnimationDome/tree/master/AnimationDome/View/AffineAnimationView&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAPropertyAnimation&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä½œä¸º &lt;code&gt;CAAnimation&lt;/code&gt; çš„å­ç±»ï¼Œæä¾›å±æ€§è®¾ç½®æ¥å®ç°æ˜¾ç¤ºåŠ¨ç”»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/boilWater/AnimationDome/blob/master/AnimationDome/View/BaseAnimationViw&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CABasicAnimation&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä½œä¸º &lt;code&gt;CAPropertyAnimation&lt;/code&gt; é»˜è®¤æ‰§è¡ŒåŠ¨ç”»çš„ &lt;code&gt;View&lt;/code&gt; çš„ &lt;code&gt;Center&lt;/code&gt; å³å®é™… &lt;code&gt;Layer&lt;/code&gt; å±‚çš„ &lt;code&gt;Position&lt;/code&gt; ä¸­å¿ƒç‚¹ä½ç½®æŒ‡å®šå¼€å§‹ä½ç½®åˆ°ç»ˆç‚¹ä¸­å¿ƒä½ç½®çš„åŠ¨ç”»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/boilWater/AnimationDome/blob/master/AnimationDome/View/CALayerView&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAKeyframeAnimation&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä½œä¸º &lt;code&gt;CAPropertyAnimation&lt;/code&gt; çš„å­ç±»ã€‚åŒæ ·æ˜¯æŠŠ &lt;code&gt;Center&lt;/code&gt; ä½œä¸ºé»˜è®¤åŠ¨ç”»æ ‡ç‚¹ï¼Œé€šè¿‡ &lt;code&gt;keyTimes&lt;/code&gt; å’Œ &lt;code&gt;timingFunctions&lt;/code&gt; æ¥å¯¹åŠ¨ç”»è®¾ç½®åœ¨æ€»åŠ¨ç”»æ—¶é—´ï¼Œæ—¶é—´é—´éš”å¯¹åº”çš„åŠ¨ç”»æ‰§è¡Œæ–¹å¼ã€‚æˆ–è€…æ˜¯ç›´æ¥ä½¿ç”¨ &lt;code&gt;values&lt;/code&gt; ç„¶åé€šè¿‡è®¡ç®—æ—¶é—´é—´éš”æ¥åˆ†éš”åŠ¨ç”»å®ç°å¤šç§åŠ¨ç”»æ•ˆæœå åŠ ã€‚é€šè¿‡ &lt;code&gt;path&lt;/code&gt; æ¥ç”Ÿæˆè·¯å¾„åŠ¨ç”»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/boilWater/AnimationDome/tree/master/AnimationDome/View/ComplexAnimation&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CASpringAnimation&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä½œä¸º &lt;code&gt;CABasicAnimation&lt;/code&gt; å­ç±»ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/boilWater/AnimationDome/tree/master/AnimationDome/View/FadeAnimationView&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CATransition&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä½œä¸º &lt;code&gt;CAAnimation&lt;/code&gt; çš„å­ç±»ï¼Œå®ä¾‹ç®€å•çš„åŠ¨ç”»æ•ˆæœã€‚ä¾‹å¦‚ï¼š&lt;code&gt;fade&lt;/code&gt;ï¼Œ&lt;code&gt;moveIn&lt;/code&gt;ï¼Œ&lt;code&gt;push&lt;/code&gt; å’Œ &lt;code&gt;reveal&lt;/code&gt; è®¾ç½®è¿›å…¥æ–¹å‘ç±»å‹ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://github.com/boilWater/AnimationDome/tree/master/AnimationDome/View/GroupAnimationView&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;CAAnimationGroup&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;ä½œä¸º &lt;code&gt;CAAnimation&lt;/code&gt; å­ç±»ã€‚å¯¹ &lt;code&gt;CAAnimation&lt;/code&gt; è¿›è¡Œæ ˆæ•´åˆï¼Œå®ç°åŠ¨ç”»å®ç°æ ˆåŠ¨ç”»ç»„çš„æ ˆæ‰§è¡Œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;åœ¨å¥½ä¹…ä¹‹å‰å°±å®ç°æ ¹æ®å†™è¿‡ç®€å•çš„åŠ¨ç”»å®ç°åœ¨åŠ¨ç”»çš„ä»‹ç»ä¸­é“¾æ¥å®ç°åŸºç¡€å®ç°ç±»ï¼Œå…·ä½“å®ç°é¡¹ç›®&lt;a href=&quot;https://github.com/boilWater/AnimationDome&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AnimationDome&lt;/a&gt;ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡è¿™é‡Œä¸»è¦é’ˆå¯¹ &lt;code&gt;CAKeyFrameAnimation&lt;/code&gt; ç³»ç»Ÿç¼“å†²å’Œè‡ªå®šä¹‰å‡½æ•°ç¼“å†²å®ç°ï¼ŒåŠåœ¨å®ç°ç¼“å†²è¿‡ç¨‹ä¸­æˆ‘ä»¬é€šè¿‡å®šä¹‰ &lt;code&gt;timingFundations&lt;/code&gt;ï¼Œ&lt;code&gt;values&lt;/code&gt; å’Œ &lt;code&gt;path&lt;/code&gt; ä¸‰è€…ä¹‹é—´å¯¹åº”çš„å…³ç³»ã€‚&lt;/p&gt;
&lt;h3 id=&quot;CAMediaTimingFundation-å’Œ-Path-å…³ç³»&quot;&gt;&lt;a href=&quot;#CAMediaTimingFundation-å’Œ-Path-å…³ç³»&quot; class=&quot;headerlink&quot; title=&quot;CAMediaTimingFundation å’Œ Path å…³ç³»&quot;&gt;&lt;/a&gt;CAMediaTimingFundation å’Œ Path å…³ç³»&lt;/h3&gt;&lt;p&gt;ä¸Šé¢æˆ‘ä»¬å¯ä»¥çœ‹å‡ºé‡‡ç”¨ç³»ç»Ÿå®šä¹‰çš„ &lt;code&gt;kCAMediaTimingFunctionEaseIn&lt;/code&gt;ï¼Œ&lt;code&gt;kCAMediaTimingFunctionEaseInEaseOut&lt;/code&gt; å’Œ &lt;code&gt;kCAMediaTimingFunctionDefault&lt;/code&gt; ç”Ÿæˆå¯¹åº”çš„æ•ˆæœå›¾ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;&lt;code&gt;Gif&lt;/code&gt; è§†é¢‘æ–‡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kCdPSGdLTAQr27yr6%2F1877765-cceb63f3c0a04111.gif?alt=media&amp;amp;token=ff05d3a2-6533-49f5-b76a-83f6e3431903&quot; alt=&quot;CAMediaTimingFuncation-System-Interface.gif&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ä¸‰è€…ç›´æ¥å¯¹ç”¨ CADeiaTimingFundation å¯¹åº”çš„ Path è·¯å¾„ç»˜åˆ¶&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šé»„è‰²æ˜¯å‡ºå‘ç‚¹ï¼Œäº®é’æ˜¯ç»ˆç‚¹ï¼Œè“è‰²æ˜¯æ§åˆ¶ç‚¹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kCmqbv1ULwhrRHDLk%2F1877765-c171b2f31898d656.png?alt=media&amp;amp;token=f3f6f654-d379-4864-9d79-2df979431dd3&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-27 16.59.10.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æˆ‘ä»¬å‚è€ƒç³»ç»Ÿçš„ &lt;code&gt;CAMediaTimingFundation&lt;/code&gt; æ¥è‡ªå®šä¹‰ç¼“å†²ï¼Œ&lt;a href=&quot;http://robertpenner.com/easing/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒèµ„æ–™&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7kCvKJdsXPZ5db-JNq%2F1877765-6ea8515e574f2f3a.png?alt=media&amp;amp;token=bb099dc2-cac7-4d80-9fbc-b5a6316670d9&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-27 17.22.59.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šé¢è‡ªå®šä¹‰ç¼“å†²ç±»å‹å¯¹åº”çš„ä»£ç å®ç°ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;easeInQuint = &lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunction&lt;/span&gt;(controlPoints: &lt;span class=&quot;number&quot;&gt;0.6&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0.04&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0.98&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0.335&lt;/span&gt;)           &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;easeInOutQuint = &lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunction&lt;/span&gt;(controlPoints: &lt;span class=&quot;number&quot;&gt;0.86&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0.07&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;)     &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;easeInOutBack = &lt;span class=&quot;built_in&quot;&gt;CAMediaTimingFunction&lt;/span&gt;(controlPoints: &lt;span class=&quot;number&quot;&gt;0.68&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;-0.55&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0.265&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;1.55&lt;/span&gt;)&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ä¸Šé¢çš„åšæ–‡ä¸­å°ç¼–æ ¹æ®ä¸€äº›åšæ–‡å’Œ &lt;code&gt;WWDC&lt;/code&gt; ä»‹ç»ã€‚æ¥å¯¹ &lt;code&gt;UIKit&lt;/code&gt; ä¸­ &lt;code&gt;UIView&lt;/code&gt; å’Œ &lt;code&gt;QuartzCore&lt;/code&gt; ä¸­çš„ &lt;code&gt;Layer&lt;/code&gt; ä¸¤è€…ä¹‹é—´ç»†èŠ‚åšæ¢è®¨ï¼Œæ¥&lt;strong&gt;éªŒè¯ &lt;code&gt;Core Animation&lt;/code&gt; åœ¨å®é™…åº”ç”¨ä¸­ä¸º &lt;code&gt;UI&lt;/code&gt; æ§ä»¶æä¾›ç»˜åˆ¶çš„ä¾æ®ã€‚&lt;/strong&gt;å¯ä»¥çœ‹å‡ºåœ¨å®é™…ç»˜åˆ¶çš„è¿‡ç¨‹ä¸­ç³»ç»Ÿä¼šé€šè¿‡ &lt;code&gt;GPU&lt;/code&gt; æ¥è®¡ç®—å¸ƒå±€ä¹Ÿå°±æ˜¯åœ¨ &lt;a href=&quot;http://boilwater.github.io/2019/01/06/iOS%20UI%20ä¼˜åŒ–%20ä¸€/#&amp;amp;gid=1&amp;amp;pid=1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOS UI ä¼˜åŒ–åšæ–‡å¤§çº²-Core Animation ä½œç”¨åŸŸ&lt;/a&gt; &lt;code&gt;Layout&lt;/code&gt; ä¸­å¸ƒå±€çš„è®¡ç®—ã€‚è¿™ä¸ªä¹Ÿæ˜¯ &lt;code&gt;ASDK&lt;/code&gt; ä½œè€…è®¤ä¸ºå¯ä»¥ä¼˜åŒ–çš„åœ°æ–¹ã€‚&lt;/p&gt;
&lt;p&gt;æ¥è‡ªå®šä¹‰ç¼“å†²å‡½æ•°å®ç°å¸§åŠ¨ç”»çš„æ•ˆæœã€‚&lt;/p&gt;
&lt;h3 id=&quot;å‚è€ƒèµ„æ–™ï¼š&quot;&gt;&lt;a href=&quot;#å‚è€ƒèµ„æ–™ï¼š&quot; class=&quot;headerlink&quot; title=&quot;å‚è€ƒèµ„æ–™ï¼š&quot;&gt;&lt;/a&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/h3&gt;&lt;p&gt;&lt;a href=&quot;http://robertpenner.com/easing/penner_chapter7_tweening.pdf&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Dynamic Visuals&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514-CH1-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;About Core Animation&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/AdvancedAnimationTricks/AdvancedAnimationTricks.html#//apple_ref/doc/uid/TP40004514-CH8-SW3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Animation Tricks&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/ReactingtoLayerChanges/ReactingtoLayerChanges.html#//apple_ref/doc/uid/TP40004514-CH7-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Changing a Layerâ€™s Default Behavior&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/ImprovingAnimationPerformance/ImprovingAnimationPerformance.html#//apple_ref/doc/uid/TP40004514-CH9-SW1&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Improving Animation Performance&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/LayerStyleProperties/LayerStyleProperties.html#//apple_ref/doc/uid/TP40004514-CH10-SW18&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Layer Style Property Animations&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://zsisme.gitbooks.io/ios-/content/index.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOS Core Animation: Advanced Techniques&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;è‹¹æœçš„å®˜æ–¹è§†é¢‘ï¼š&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2012/217/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Layer-Backed Views: AppKit + Core Animation&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2014/419/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Graphics and Animations for iOS Apps&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2012/506/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Optimizing 2D Graphics and Animation Performance&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2015/803/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Designing with Animation&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;ä½œè€…ï¼š JackJin Bai  &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡ä¿®æ”¹æ—¶é—´ï¼š 2019/1/6 20ï¼š37ï¼š26&lt;br&gt;å†™äºï¼šå¹¿å·å¸‚å¤©æ²³å…¬å›­å®¶é‡Œ &lt;/p&gt;
&lt;p&gt;ç¬¬äºŒæ¬¡ä¿®æ”¹æ—¶é—´ï¼š 2019/1/18 02ï¼š02ï¼š44&lt;br&gt;å†™äºï¼šå¹¿å·å¸‚å¤©æ²³å…¬å›­å®¶é‡Œ &lt;/p&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;Core-Animation-å®ç°æ¢ç´¢&quot;&gt;&lt;a href=&quot;#Core-Animation-å®ç°æ¢ç´¢&quot; class=&quot;headerlink&quot; title=&quot;Core Animation å®ç°æ¢ç´¢&quot;&gt;&lt;/a&gt;Core Animation å®ç°æ¢ç´¢&lt;/h1&gt;&lt;p&gt;å°ç¼–å›é¡¾ç²—ç•¥çš„å†™å®Œ 19 å¹´ æƒ³è¦å†™çš„ç³»åˆ—åšæ–‡ä¸­ &lt;code&gt;iOS UI&lt;/code&gt; ä¼˜åŒ–æ€»çº²ä¸­ç¬¬ä¸€ç¯‡åšæ–‡ &lt;code&gt;Core Animation&lt;/code&gt; ä¸€ç›´åœ¨æƒ³æ€ä¹ˆæ ·å±•ç¤ºè‡ªå·±çš„ç†è§£ï¼Œå°±å…ˆä»æˆ‘ä»¬ç†ŸçŸ¥çš„ &lt;code&gt;Core Animation&lt;/code&gt; åœ¨æ•´ä¸ª &lt;code&gt;APP&lt;/code&gt; æä¾›æ¶æ„æ–¹é¢æ¥è¿›è¡ŒOå¯¹æ¯”ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k4dwO5EuaRVogKZGQ%2F-M7k6-E548XUtcpJOExw%2F1877765-f0cb74a53c9ba8dc.png?alt=media&amp;amp;token=85da9e64-1e31-4e59-a392-e6346b786a2d&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-15 23.12.22.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨ï¼šä¸Šå›¾åˆ†åˆ«æ˜¯ä» 2014 å¹´çš„ &lt;code&gt;WWDC&lt;/code&gt; è®²è¿° &lt;a href=&quot;https://developer.apple.com/videos/play/wwdc2014/419/&quot;&gt;Advanced Graphics and Animations for iOS Apps&lt;/a&gt; ä¸­æˆªå– å’Œ 2018 å¹´æœ€æ–°æè¿° &lt;a href=&quot;https://developer.apple.com/library/archive/documentation/Cocoa/Conceptual/CoreAnimation_guide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40004514-CH1-SW1&quot;&gt;About Core Animation&lt;/a&gt; æ–‡æ¡£è·å–&lt;code&gt;Core Animation&lt;/code&gt; åœ¨æ¶æ„ä¸­å®ç°ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç”±ä¸Šé¢æ˜¾ç¤ºå…·ä½“ä¿¡æ¯æˆ‘ä»¬å¯ä»¥å¾—å‡ºä¸‹é¢ç»“è®ºï¼š   &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;1ã€&lt;code&gt;Core Animation&lt;/code&gt; ä½œä¸ºä¸»è¦å†…å®¹è½½ä½“æ‰¿æ¥å¯¹ &lt;code&gt;iOS&lt;/code&gt; å’Œ &lt;code&gt;OS&lt;/code&gt; å…·ä½“æ˜¾ç¤ºçš„ç»˜åˆ¶ï¼›&lt;br&gt;2ã€&lt;code&gt;UIKit&lt;/code&gt; æ¡†æ¶ä»åˆå§‹åŒ–åˆ°é€šè¿‡ &lt;code&gt;GPU&lt;/code&gt; ç”Ÿæˆçº¹ç†æ˜¾ç¤ºåœ¨å±å¹•ä¸Šæ˜¯ä¾é  &lt;code&gt;Core Animation&lt;/code&gt;ã€ &lt;code&gt;Core Graphics&lt;/code&gt;ã€ &lt;code&gt;OpenGL ES&lt;/code&gt;(&lt;code&gt;iOS&lt;/code&gt; 11) å’Œ &lt;code&gt;Matel&lt;/code&gt;(&lt;code&gt;iOS&lt;/code&gt; 12)   æ¥å®ç°;&lt;br&gt;3ã€åœ¨ &lt;code&gt;iOS 8.0&lt;/code&gt; ä¸­è‹¹æœå®˜æ–¹å°è¯•ä½¿ç”¨ &lt;code&gt;Metal&lt;/code&gt; æ¥æ›¿ä»£ &lt;code&gt;OpenGL ES&lt;/code&gt; åœ¨ç›®å‰æœ€æ–°çš„å®˜æ–¹æ–‡æ¡£ä¸­å®ç°åœ¨ç»˜åˆ¶ç”Ÿæˆçº¹ç†åº•å±‚æ¶æ„ä¾æ® &lt;code&gt;Metal&lt;/code&gt; è¿›è¡Œã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;æƒ³è¦æ·±å…¥äº†è§£ä¸€ä¸ªæ¶æ„æˆ‘ä»¬å°±ä»æœ€åŸºæœ¬çš„ç³»ç»Ÿ &lt;code&gt;API&lt;/code&gt; ç€æ‰‹ï¼Œä¸‹é¢æ˜¯å°ç¼–å¯¹ç³»ç»Ÿ &lt;code&gt;API&lt;/code&gt; æ ¹æ®åˆ†ç±»æ¥å¯¹å…·ä½“ç±»çš„ &lt;code&gt;API&lt;/code&gt; è¿›è¡Œæ•´ç†ã€‚ &lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k69JihU77jBBE8Kvm%2F-M7k6M58rz6cyT1AO8Pv%2F1877765-3b86566386d064e4.png?alt=media&amp;amp;token=3e463096-20b5-4bb2-bb15-39ccf7c6525c&quot; alt=&quot;å±å¹•å¿«ç…§ 2019-01-14 22.50.21.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS UI ç•Œé¢" scheme="http://yoursite.com/tags/iOS-UI-%E7%95%8C%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>iOS UI ä¼˜åŒ– - æ€»çº²</title>
    <link href="http://yoursite.com/2019/01/06/iOS%20UI%20%E4%BC%98%E5%8C%96%20%E4%B8%80/"/>
    <id>http://yoursite.com/2019/01/06/iOS UI ä¼˜åŒ– ä¸€/</id>
    <published>2019-01-06T12:23:44.435Z</published>
    <updated>2020-05-20T13:10:56.397Z</updated>
    
    <content type="html">&lt;h1 id=&quot;iOS-UI-ä¼˜åŒ–åšæ–‡å¤§çº²&quot;&gt;&lt;a href=&quot;#iOS-UI-ä¼˜åŒ–åšæ–‡å¤§çº²&quot; class=&quot;headerlink&quot; title=&quot;iOS UI ä¼˜åŒ–åšæ–‡å¤§çº²&quot;&gt;&lt;/a&gt;iOS UI ä¼˜åŒ–åšæ–‡å¤§çº²&lt;/h1&gt;&lt;p&gt;2019 å¹´å¼€å¹´ç¬¬ä¸€ç¯‡åšæ–‡ï¼Œä»Šå¤©å…ˆèµ·ä¸ªå¤´ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¹´ç¬¬ä¸€ä¸ªä¸»é¢˜æ˜¯å…³äº UI ç•Œé¢å®ç°åŸç†ï¼ŒUI ç›®å‰å®ç°ä¸»è¦æ–¹å¼åœ¨å…¶å®ç°ä¸Šç›¸å…³ç¼ºé™·ã€‚å¼€å§‹ä» &lt;code&gt;Core Animation&lt;/code&gt; æ¡†æ¶æ€»ç»“ä»¥åŠå®ç°æ–¹å¼ä¸Šè®²è§£ï¼Œç„¶åä» &lt;code&gt;Core Graphics&lt;/code&gt; å’Œ &lt;code&gt;Core Iamge&lt;/code&gt; åœ¨ç»˜åˆ¶å±‚é¢ä¸‰è€…å¦‚ä½•æŠŠ &lt;code&gt;UIKit&lt;/code&gt; æ§ä»¶å¦‚ä½•å®ç°ç»˜åˆ¶äº¤ç”± &lt;code&gt;OpenGL ES&lt;/code&gt; | &lt;code&gt;Metal&lt;/code&gt; æ¥å®ç°æ¯ä¸€å¸§ç»˜åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ååˆ†æ &lt;code&gt;FB&lt;/code&gt; å¼€æºçš„æ¡†æ¶ &lt;code&gt;ASDK&lt;/code&gt; å’Œ &lt;code&gt;YYKit&lt;/code&gt; å®ç° &lt;code&gt;UI&lt;/code&gt; ä¼˜åŒ–æ–¹å¼ï¼Œå¯¹ &lt;code&gt;Core Text&lt;/code&gt; è¿›è¡Œæœ€åå°è£…æ¥ç»“æŸ &lt;code&gt;UI&lt;/code&gt; ä¸“é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;iOS-UI-æ¶æ„å›¾&quot;&gt;&lt;a href=&quot;#iOS-UI-æ¶æ„å›¾&quot; class=&quot;headerlink&quot; title=&quot;iOS UI æ¶æ„å›¾&quot;&gt;&lt;/a&gt;iOS UI æ¶æ„å›¾&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k4dwO5EuaRVogKZGQ%2F-M7k5364d7UKuT45LmSr%2F1877765-c39a990fda4aa0a0.png?alt=media&amp;amp;token=63fb3ec2-1d90-4faf-836b-f768f0853d82&quot; alt=&quot;iOS UI Strcture.png&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Core-Animation-å¤§çº²&quot;&gt;&lt;a href=&quot;#Core-Animation-å¤§çº²&quot; class=&quot;headerlink&quot; title=&quot;Core Animation å¤§çº²&quot;&gt;&lt;/a&gt;Core Animation å¤§çº²&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-3b86566386d064e4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;Core Animation API&lt;/code&gt;&lt;/a&gt;&lt;/th&gt;
&lt;th&gt;å±‚æ¬¡ &amp;amp; ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-f0cb74a53c9ba8dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;1ã€APP ç»“æ„å±‚æ¬¡&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Animation&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; ä½œä¸º &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; å†…å®¹å®é™…ç»˜åˆ¶ä¸»è¦æ‰¿æ‹…çš„è½½ä½“ï¼Œä¸ºå…·ä½“åœ¨å±å¹•ä¸Šæ§ä»¶å†…å®¹ç»˜åˆ¶ï¼Œå¸ƒå±€ä»¥åŠæä¾›éšå¼å’Œæ˜¾ç¤ºåŠ¨ç”»æä¾›ä¼˜é›…çš„ &lt;code&gt;API&lt;/code&gt; æ¥å£ã€‚&lt;strong&gt;bã€&lt;/strong&gt; ä½œä¸ºç¡¬ä»¶ç»˜åˆ¶è¾“å…¥æŠŠéœ€è¦æ˜¾ç¤ºå…·ä½“å†…å®¹ä¼ å…¥ &lt;code&gt;GPU&lt;/code&gt; ç”Ÿæˆçº¹ç†åœ¨å±å¹•ä¸Šè¿›è¡Œæ¸²æŸ“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;http://boilwater.github.io/2019/01/06/iOS%20UI%20ä¼˜åŒ–%20-%20Core%20Animation%20/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;2ã€ä½œç”¨&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Animation&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; é€šè¿‡ &lt;code&gt;CATypeLayer&lt;/code&gt; ç±»æ—æ˜¾ç¤ºæ•ˆæœï¼Œä½ç½®å¸ƒå±€ä¸º &lt;code&gt;UIKit&lt;/code&gt; å±‚æä¾›åº•å±‚ç»˜åˆ¶å®ç°ã€‚&lt;strong&gt;bã€&lt;/strong&gt;å±å¹•ä¸Šç›´æ¥ä¸æ¸²æŸ“ç¡¬ä»¶ç›´æ¥è¿›è¡Œå†…å®¹ç»˜åˆ¶ï¼Œå®ç°å„ç§é…·ç‚«çš„æ•ˆæœä»¥åŠæ›´åŠ é«˜æ•ˆç»˜åˆ¶ã€‚&lt;strong&gt;cã€&lt;/strong&gt; é€šè¿‡ &lt;code&gt;CATypeAnimation&lt;/code&gt; åŠå…¶å±æ€§ &lt;code&gt;CATypeTiming&lt;/code&gt; å®ç°å„ç§åŠ¨ç”»æ•ˆæœç±»å‹ã€‚&lt;strong&gt;dã€&lt;/strong&gt;ä¸º &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; ä»£ç å—åŠ¨ç”»ä»£ç†å¯¹è±¡ï¼Œæä¾›å…·ä½“å®ç°æ”¯æŒã€‚&lt;strong&gt;åœ¨ iOS çš„ä¸»è¦èŒèƒ½æ˜¯ä¸º UIKit æ¡†æ¶åœ¨ APP UI æ§ä»¶å®ç°åŸºç¡€ä¸Šçš„ç»˜åˆ¶ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k4dwO5EuaRVogKZGQ%2F-M7k5GsNlbg6znTObpcw%2F1877765-5a0f1f734a47cb5d.png?alt=media&amp;amp;token=317a772c-48d6-4bc5-82a2-11e20bf16275&quot; alt=&quot;Core Animation.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šå‚è€ƒèµ„æ–™ä¼šåœ¨ &lt;a href=&quot;http://boilwater.github.io/2019/01/06/iOS%20UI%20ä¼˜åŒ–%20-%20Core%20Animation%20/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOS UI ä¼˜åŒ– - Core Animation&lt;/a&gt; æœ€åç»™å‡ºï¼š&lt;br&gt;åœ¨ &lt;code&gt;Core Animation&lt;/code&gt; ä¸­å¯ä»¥çœ‹åˆ°åœ¨ &lt;code&gt;Application&lt;/code&gt; ä¸­ &lt;code&gt;Handle Events&lt;/code&gt; å¤„ç†æ‰‹åŠ¿åŸç†å®é™…å°±æ˜¯æˆ‘ä»¬å“åº”é“¾å¤„ç†è¿‡ç¨‹ã€‚&lt;br&gt;&lt;a href=&quot;http://boilwater.github.io/2017/05/15/iOS-Responder%20Chain/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å“åº”é“¾&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://boilwater.github.io/2017/01/13/APPæ§ä»¶åœ¨å±å¹•ä¸Šæ˜¾ç¤º/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;iOS ç©ºé—´ç»˜åˆ¶åŸç†&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Core-Graphics-å¤§çº²&quot;&gt;&lt;a href=&quot;#Core-Graphics-å¤§çº²&quot; class=&quot;headerlink&quot; title=&quot;Core Graphics å¤§çº²&quot;&gt;&lt;/a&gt;Core Graphics å¤§çº²&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-156381bdec28dba6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;Core Graphics API&lt;/code&gt;&lt;/a&gt;&lt;/th&gt;
&lt;th&gt;å±‚æ¬¡ &amp;amp; ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-f0cb74a53c9ba8dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;1ã€APP ç»“æ„å±‚æ¬¡&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Graphics&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; ä½œä¸ºåŸºäº &lt;code&gt;Quartz&lt;/code&gt; ç»˜å›¾å¼•æ“æ¥å®ç°åœ¨ &lt;code&gt;iOS&lt;/code&gt; å’Œ &lt;code&gt;OS X&lt;/code&gt; 2D å›¾å½¢ç»˜åˆ¶åŠŸèƒ½ï¼Œæ¥å£å®ç°æ˜¯åŸºäº &lt;code&gt;C&lt;/code&gt; ä¸ç¬¦åˆ &lt;code&gt;iOS&lt;/code&gt; ä¸­ &lt;code&gt;ARC&lt;/code&gt; å†…å­˜ç®¡ç†æ–¹å¼éœ€è¦è¿›è¡Œæ‰‹åŠ¨ç®¡ç†å…¶å†…å­˜ã€‚ &lt;strong&gt;bã€&lt;/strong&gt; ä½œä¸º &lt;code&gt;CA&lt;/code&gt; å±‚å…·ä½“æ˜¾ç¤ºå†…å®¹ &lt;code&gt;CATypeLayer&lt;/code&gt; å±‚å®é™…ç»˜åˆ¶æ‰§è¡Œè€…å’Œ &lt;code&gt;OpenGL&lt;/code&gt;æˆ–è€…&lt;code&gt;Metal&lt;/code&gt; ä¸€èµ·æ‰¿æ‹…èµ·ç•Œé¢å…·ä½“çš„ç»˜åˆ¶å·¥ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;http://boilwater.github.io/2019/03/08/IOS%20UI%20ä¼˜åŒ–%20-%20Core%20Graphics/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;2ã€APP ä½œç”¨&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Graphics&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; é€šè¿‡æä¾›åŸºç¡€çš„ &lt;code&gt;API&lt;/code&gt; æ¥å£æ¥å®ç°æ§ä»¶åœ¨ &lt;code&gt;UI&lt;/code&gt; å±‚é¢å¸ƒå±€ï¼Œè‰²å½©å¡«å……ï¼Œç”»å¸ƒç»˜åˆ¶ç­‰å…·ä½“çš„ç»˜åˆ¶å®ç°ã€‚&lt;strong&gt;bã€&lt;/strong&gt; é€šè¿‡é’ˆå¯¹ä¸åŒçš„ç»˜åˆ¶å¯¹è±¡ï¼š&lt;code&gt;Window&lt;/code&gt;ã€&lt;code&gt;CALayer&lt;/code&gt;ã€&lt;code&gt;Bitmap&lt;/code&gt;ã€&lt;code&gt;PDF&lt;/code&gt; å’Œ &lt;code&gt;Printer&lt;/code&gt; æ¥ç”Ÿæˆå¯¹åº”çš„ &lt;code&gt;Context&lt;/code&gt; å®ç°å…·ä½“å†…å®¹çš„ç»˜åˆ¶ç”Ÿæˆå¯è§†åŒ–çš„æ•ˆæœå±•ç¤ºåœ¨å±å¹•ä¸Šã€‚ &lt;strong&gt;cã€&lt;/strong&gt; åœ¨æ–‡æœ¬ç»˜åˆ¶çš„è¿‡ç¨‹ä¸­æˆ‘çŒœæµ‹ä½¿ç”¨ &lt;code&gt;PDF&lt;/code&gt; æ–‡æ¡£è§£æçš„åŠŸèƒ½ï¼Œä¸º &lt;code&gt;Core Text&lt;/code&gt; æä¾›å®é™…çš„è®¡ç®—ï¼Œ&lt;strong&gt;ä¾æ® &lt;code&gt;Quartz&lt;/code&gt; ä½¿ç”¨è½®å»“å‘¨å›´åƒç´ æ˜¾ç¤ºæ¥å®ç°æŠ—é”¯é½¿å®Œç¾å±•ç°æ–‡æœ¬æ˜¾ç¤ºã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;Core-Text-å¤§çº²&quot;&gt;&lt;a href=&quot;#Core-Text-å¤§çº²&quot; class=&quot;headerlink&quot; title=&quot;Core Text å¤§çº²&quot;&gt;&lt;/a&gt;Core Text å¤§çº²&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-4ace47c5dff6e0f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;Core Text API&lt;/code&gt;&lt;/a&gt;&lt;/th&gt;
&lt;th&gt;å±‚æ¬¡ &amp;amp; ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-9f0af182b0f5d5ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;1ã€APP ç»“æ„å±‚æ¬¡&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Text&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; ä½œä¸ºåŸºäº &lt;code&gt;Core Graphics&lt;/code&gt; å°è£…å®ç°ï¼Œæ˜¯ &lt;code&gt;Apple&lt;/code&gt; åŸºç¡€åº“ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å­—ä½“ç»˜åˆ¶æ¨¡å—ã€‚&lt;strong&gt;bã€&lt;/strong&gt;  åœ¨ &lt;code&gt;iOS 7&lt;/code&gt; ä¹‹ååœ¨æ­¤åŸºç¡€ä¹‹ä¸Šå®ç°çš„ &lt;code&gt;Text Kit&lt;/code&gt; å®ç°è·¨ &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; æ¥ä½œä¸ºæ–‡æœ¬ç»˜åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://www.jianshu.com/p/684e2a323620&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;2ã€ä½œç”¨&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Text&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; é€šè¿‡ä»¥ &lt;code&gt;Core Text&lt;/code&gt; ä¸ºåŸºç¡€å®ç°æ–‡å­—ç»˜åˆ¶ &lt;code&gt;Text Kit&lt;/code&gt; æ¥å®ç°å¯Œæ–‡æœ¬ç»˜åˆ¶ï¼Œå±•ç¤ºä¸°å¯Œå¤šå½©çš„æ–‡å­—æ•ˆæœã€‚&lt;strong&gt;bã€&lt;/strong&gt; æä¾›åå°ç»˜åˆ¶èƒ½åŠ›ï¼Œåœ¨å®é™…ç»˜åˆ¶è¿‡ç¨‹ä¸­å¯ä»¥æ”¾åœ¨ &lt;code&gt;Background Thread&lt;/code&gt; æ¥å®ç°ç»˜åˆ¶å·¥ä½œã€‚&lt;strong&gt;cã€&lt;/strong&gt; åœ¨å®ç°ä¸­å¯ä»¥é€šè¿‡ &lt;code&gt;CTRunDelegate&lt;/code&gt; æ¥è®¾ç½® &lt;code&gt;CTRun&lt;/code&gt; æ¥å®ç°å›¾æ–‡æ··æ’æ¥æ—¶æ›´åŠ ä¸°å¯Œçš„æ•ˆæœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Text Kit å®ç°é€»è¾‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k4dwO5EuaRVogKZGQ%2F-M7k5evvrWy4lYF4OTVl%2F1877765-df9bbf81678c6a58.png?alt=media&amp;amp;token=88f672d0-d2b2-47a9-84e7-30ea30f20bc0&quot; alt=&quot;Text Kit.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŒæ—¶ä¹Ÿä¼šå¯¹æœ¬æ–‡è¿›è¡Œåœ¨æ¯ä¸€åšæ–‡æ›´æ–°ï¼ï¼ï¼&lt;/p&gt;
&lt;/blockquote&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;blockquote&gt;
&lt;p&gt;ä½œè€…ï¼š JackJin Bai&lt;br&gt;ç¬¬ä¸€æ¬¡ä¿®æ”¹æ—¶é—´ï¼š 2019/1/6 20:37: 26&lt;br&gt;å†™äºï¼šå¹¿å·å¸‚å¤©æ²³å…¬å›­å®¶é‡Œ  &lt;/p&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;h1 id=&quot;iOS-UI-ä¼˜åŒ–åšæ–‡å¤§çº²&quot;&gt;&lt;a href=&quot;#iOS-UI-ä¼˜åŒ–åšæ–‡å¤§çº²&quot; class=&quot;headerlink&quot; title=&quot;iOS UI ä¼˜åŒ–åšæ–‡å¤§çº²&quot;&gt;&lt;/a&gt;iOS UI ä¼˜åŒ–åšæ–‡å¤§çº²&lt;/h1&gt;&lt;p&gt;2019 å¹´å¼€å¹´ç¬¬ä¸€ç¯‡åšæ–‡ï¼Œä»Šå¤©å…ˆèµ·ä¸ªå¤´ã€‚&lt;/p&gt;
&lt;p&gt;ä»Šå¹´ç¬¬ä¸€ä¸ªä¸»é¢˜æ˜¯å…³äº UI ç•Œé¢å®ç°åŸç†ï¼ŒUI ç›®å‰å®ç°ä¸»è¦æ–¹å¼åœ¨å…¶å®ç°ä¸Šç›¸å…³ç¼ºé™·ã€‚å¼€å§‹ä» &lt;code&gt;Core Animation&lt;/code&gt; æ¡†æ¶æ€»ç»“ä»¥åŠå®ç°æ–¹å¼ä¸Šè®²è§£ï¼Œç„¶åä» &lt;code&gt;Core Graphics&lt;/code&gt; å’Œ &lt;code&gt;Core Iamge&lt;/code&gt; åœ¨ç»˜åˆ¶å±‚é¢ä¸‰è€…å¦‚ä½•æŠŠ &lt;code&gt;UIKit&lt;/code&gt; æ§ä»¶å¦‚ä½•å®ç°ç»˜åˆ¶äº¤ç”± &lt;code&gt;OpenGL ES&lt;/code&gt; | &lt;code&gt;Metal&lt;/code&gt; æ¥å®ç°æ¯ä¸€å¸§ç»˜åˆ¶ã€‚&lt;/p&gt;
&lt;p&gt;æœ€ååˆ†æ &lt;code&gt;FB&lt;/code&gt; å¼€æºçš„æ¡†æ¶ &lt;code&gt;ASDK&lt;/code&gt; å’Œ &lt;code&gt;YYKit&lt;/code&gt; å®ç° &lt;code&gt;UI&lt;/code&gt; ä¼˜åŒ–æ–¹å¼ï¼Œå¯¹ &lt;code&gt;Core Text&lt;/code&gt; è¿›è¡Œæœ€åå°è£…æ¥ç»“æŸ &lt;code&gt;UI&lt;/code&gt; ä¸“é¢˜ã€‚&lt;/p&gt;
&lt;h2 id=&quot;iOS-UI-æ¶æ„å›¾&quot;&gt;&lt;a href=&quot;#iOS-UI-æ¶æ„å›¾&quot; class=&quot;headerlink&quot; title=&quot;iOS UI æ¶æ„å›¾&quot;&gt;&lt;/a&gt;iOS UI æ¶æ„å›¾&lt;/h2&gt;&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k4dwO5EuaRVogKZGQ%2F-M7k5364d7UKuT45LmSr%2F1877765-c39a990fda4aa0a0.png?alt=media&amp;amp;token=63fb3ec2-1d90-4faf-836b-f768f0853d82&quot; alt=&quot;iOS UI Strcture.png&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;Core-Animation-å¤§çº²&quot;&gt;&lt;a href=&quot;#Core-Animation-å¤§çº²&quot; class=&quot;headerlink&quot; title=&quot;Core Animation å¤§çº²&quot;&gt;&lt;/a&gt;Core Animation å¤§çº²&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-3b86566386d064e4.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;&gt;&lt;code&gt;Core Animation API&lt;/code&gt;&lt;/a&gt;&lt;/th&gt;
&lt;th&gt;å±‚æ¬¡ &amp;amp; ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-f0cb74a53c9ba8dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;&gt;1ã€APP ç»“æ„å±‚æ¬¡&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Animation&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; ä½œä¸º &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; å†…å®¹å®é™…ç»˜åˆ¶ä¸»è¦æ‰¿æ‹…çš„è½½ä½“ï¼Œä¸ºå…·ä½“åœ¨å±å¹•ä¸Šæ§ä»¶å†…å®¹ç»˜åˆ¶ï¼Œå¸ƒå±€ä»¥åŠæä¾›éšå¼å’Œæ˜¾ç¤ºåŠ¨ç”»æä¾›ä¼˜é›…çš„ &lt;code&gt;API&lt;/code&gt; æ¥å£ã€‚&lt;strong&gt;bã€&lt;/strong&gt; ä½œä¸ºç¡¬ä»¶ç»˜åˆ¶è¾“å…¥æŠŠéœ€è¦æ˜¾ç¤ºå…·ä½“å†…å®¹ä¼ å…¥ &lt;code&gt;GPU&lt;/code&gt; ç”Ÿæˆçº¹ç†åœ¨å±å¹•ä¸Šè¿›è¡Œæ¸²æŸ“ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;http://boilwater.github.io/2019/01/06/iOS%20UI%20ä¼˜åŒ–%20-%20Core%20Animation%20/&quot;&gt;2ã€ä½œç”¨&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Animation&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; é€šè¿‡ &lt;code&gt;CATypeLayer&lt;/code&gt; ç±»æ—æ˜¾ç¤ºæ•ˆæœï¼Œä½ç½®å¸ƒå±€ä¸º &lt;code&gt;UIKit&lt;/code&gt; å±‚æä¾›åº•å±‚ç»˜åˆ¶å®ç°ã€‚&lt;strong&gt;bã€&lt;/strong&gt;å±å¹•ä¸Šç›´æ¥ä¸æ¸²æŸ“ç¡¬ä»¶ç›´æ¥è¿›è¡Œå†…å®¹ç»˜åˆ¶ï¼Œå®ç°å„ç§é…·ç‚«çš„æ•ˆæœä»¥åŠæ›´åŠ é«˜æ•ˆç»˜åˆ¶ã€‚&lt;strong&gt;cã€&lt;/strong&gt; é€šè¿‡ &lt;code&gt;CATypeAnimation&lt;/code&gt; åŠå…¶å±æ€§ &lt;code&gt;CATypeTiming&lt;/code&gt; å®ç°å„ç§åŠ¨ç”»æ•ˆæœç±»å‹ã€‚&lt;strong&gt;dã€&lt;/strong&gt;ä¸º &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; ä»£ç å—åŠ¨ç”»ä»£ç†å¯¹è±¡ï¼Œæä¾›å…·ä½“å®ç°æ”¯æŒã€‚&lt;strong&gt;åœ¨ iOS çš„ä¸»è¦èŒèƒ½æ˜¯ä¸º UIKit æ¡†æ¶åœ¨ APP UI æ§ä»¶å®ç°åŸºç¡€ä¸Šçš„ç»˜åˆ¶ã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k4dwO5EuaRVogKZGQ%2F-M7k5GsNlbg6znTObpcw%2F1877765-5a0f1f734a47cb5d.png?alt=media&amp;amp;token=317a772c-48d6-4bc5-82a2-11e20bf16275&quot; alt=&quot;Core Animation.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;æ³¨ï¼šå‚è€ƒèµ„æ–™ä¼šåœ¨ &lt;a href=&quot;http://boilwater.github.io/2019/01/06/iOS%20UI%20ä¼˜åŒ–%20-%20Core%20Animation%20/&quot;&gt;iOS UI ä¼˜åŒ– - Core Animation&lt;/a&gt; æœ€åç»™å‡ºï¼š&lt;br&gt;åœ¨ &lt;code&gt;Core Animation&lt;/code&gt; ä¸­å¯ä»¥çœ‹åˆ°åœ¨ &lt;code&gt;Application&lt;/code&gt; ä¸­ &lt;code&gt;Handle Events&lt;/code&gt; å¤„ç†æ‰‹åŠ¿åŸç†å®é™…å°±æ˜¯æˆ‘ä»¬å“åº”é“¾å¤„ç†è¿‡ç¨‹ã€‚&lt;br&gt;&lt;a href=&quot;http://boilwater.github.io/2017/05/15/iOS-Responder%20Chain/&quot;&gt;å“åº”é“¾&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://boilwater.github.io/2017/01/13/APPæ§ä»¶åœ¨å±å¹•ä¸Šæ˜¾ç¤º/&quot;&gt;iOS ç©ºé—´ç»˜åˆ¶åŸç†&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;Core-Graphics-å¤§çº²&quot;&gt;&lt;a href=&quot;#Core-Graphics-å¤§çº²&quot; class=&quot;headerlink&quot; title=&quot;Core Graphics å¤§çº²&quot;&gt;&lt;/a&gt;Core Graphics å¤§çº²&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-156381bdec28dba6.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;&gt;&lt;code&gt;Core Graphics API&lt;/code&gt;&lt;/a&gt;&lt;/th&gt;
&lt;th&gt;å±‚æ¬¡ &amp;amp; ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-f0cb74a53c9ba8dc.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;&gt;1ã€APP ç»“æ„å±‚æ¬¡&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Graphics&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; ä½œä¸ºåŸºäº &lt;code&gt;Quartz&lt;/code&gt; ç»˜å›¾å¼•æ“æ¥å®ç°åœ¨ &lt;code&gt;iOS&lt;/code&gt; å’Œ &lt;code&gt;OS X&lt;/code&gt; 2D å›¾å½¢ç»˜åˆ¶åŠŸèƒ½ï¼Œæ¥å£å®ç°æ˜¯åŸºäº &lt;code&gt;C&lt;/code&gt; ä¸ç¬¦åˆ &lt;code&gt;iOS&lt;/code&gt; ä¸­ &lt;code&gt;ARC&lt;/code&gt; å†…å­˜ç®¡ç†æ–¹å¼éœ€è¦è¿›è¡Œæ‰‹åŠ¨ç®¡ç†å…¶å†…å­˜ã€‚ &lt;strong&gt;bã€&lt;/strong&gt; ä½œä¸º &lt;code&gt;CA&lt;/code&gt; å±‚å…·ä½“æ˜¾ç¤ºå†…å®¹ &lt;code&gt;CATypeLayer&lt;/code&gt; å±‚å®é™…ç»˜åˆ¶æ‰§è¡Œè€…å’Œ &lt;code&gt;OpenGL&lt;/code&gt;æˆ–è€…&lt;code&gt;Metal&lt;/code&gt; ä¸€èµ·æ‰¿æ‹…èµ·ç•Œé¢å…·ä½“çš„ç»˜åˆ¶å·¥ä½œã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;http://boilwater.github.io/2019/03/08/IOS%20UI%20ä¼˜åŒ–%20-%20Core%20Graphics/&quot;&gt;2ã€APP ä½œç”¨&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Graphics&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; é€šè¿‡æä¾›åŸºç¡€çš„ &lt;code&gt;API&lt;/code&gt; æ¥å£æ¥å®ç°æ§ä»¶åœ¨ &lt;code&gt;UI&lt;/code&gt; å±‚é¢å¸ƒå±€ï¼Œè‰²å½©å¡«å……ï¼Œç”»å¸ƒç»˜åˆ¶ç­‰å…·ä½“çš„ç»˜åˆ¶å®ç°ã€‚&lt;strong&gt;bã€&lt;/strong&gt; é€šè¿‡é’ˆå¯¹ä¸åŒçš„ç»˜åˆ¶å¯¹è±¡ï¼š&lt;code&gt;Window&lt;/code&gt;ã€&lt;code&gt;CALayer&lt;/code&gt;ã€&lt;code&gt;Bitmap&lt;/code&gt;ã€&lt;code&gt;PDF&lt;/code&gt; å’Œ &lt;code&gt;Printer&lt;/code&gt; æ¥ç”Ÿæˆå¯¹åº”çš„ &lt;code&gt;Context&lt;/code&gt; å®ç°å…·ä½“å†…å®¹çš„ç»˜åˆ¶ç”Ÿæˆå¯è§†åŒ–çš„æ•ˆæœå±•ç¤ºåœ¨å±å¹•ä¸Šã€‚ &lt;strong&gt;cã€&lt;/strong&gt; åœ¨æ–‡æœ¬ç»˜åˆ¶çš„è¿‡ç¨‹ä¸­æˆ‘çŒœæµ‹ä½¿ç”¨ &lt;code&gt;PDF&lt;/code&gt; æ–‡æ¡£è§£æçš„åŠŸèƒ½ï¼Œä¸º &lt;code&gt;Core Text&lt;/code&gt; æä¾›å®é™…çš„è®¡ç®—ï¼Œ&lt;strong&gt;ä¾æ® &lt;code&gt;Quartz&lt;/code&gt; ä½¿ç”¨è½®å»“å‘¨å›´åƒç´ æ˜¾ç¤ºæ¥å®ç°æŠ—é”¯é½¿å®Œç¾å±•ç°æ–‡æœ¬æ˜¾ç¤ºã€‚&lt;/strong&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h2 id=&quot;Core-Text-å¤§çº²&quot;&gt;&lt;a href=&quot;#Core-Text-å¤§çº²&quot; class=&quot;headerlink&quot; title=&quot;Core Text å¤§çº²&quot;&gt;&lt;/a&gt;Core Text å¤§çº²&lt;/h2&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-4ace47c5dff6e0f5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;&gt;&lt;code&gt;Core Text API&lt;/code&gt;&lt;/a&gt;&lt;/th&gt;
&lt;th&gt;å±‚æ¬¡ &amp;amp; ä½œç”¨&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://upload-images.jianshu.io/upload_images/1877765-9f0af182b0f5d5ee.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot;&gt;1ã€APP ç»“æ„å±‚æ¬¡&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Text&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; ä½œä¸ºåŸºäº &lt;code&gt;Core Graphics&lt;/code&gt; å°è£…å®ç°ï¼Œæ˜¯ &lt;code&gt;Apple&lt;/code&gt; åŸºç¡€åº“ä¸­å”¯ä¸€ä¸€ä¸ªå¤„ç†å­—ä½“ç»˜åˆ¶æ¨¡å—ã€‚&lt;strong&gt;bã€&lt;/strong&gt;  åœ¨ &lt;code&gt;iOS 7&lt;/code&gt; ä¹‹ååœ¨æ­¤åŸºç¡€ä¹‹ä¸Šå®ç°çš„ &lt;code&gt;Text Kit&lt;/code&gt; å®ç°è·¨ &lt;code&gt;UIKit&lt;/code&gt; å’Œ &lt;code&gt;AppKit&lt;/code&gt; æ¥ä½œä¸ºæ–‡æœ¬ç»˜åˆ¶ã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;&lt;a href=&quot;https://www.jianshu.com/p/684e2a323620&quot;&gt;2ã€ä½œç”¨&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;code&gt;Core Text&lt;/code&gt; &lt;strong&gt;aã€&lt;/strong&gt; é€šè¿‡ä»¥ &lt;code&gt;Core Text&lt;/code&gt; ä¸ºåŸºç¡€å®ç°æ–‡å­—ç»˜åˆ¶ &lt;code&gt;Text Kit&lt;/code&gt; æ¥å®ç°å¯Œæ–‡æœ¬ç»˜åˆ¶ï¼Œå±•ç¤ºä¸°å¯Œå¤šå½©çš„æ–‡å­—æ•ˆæœã€‚&lt;strong&gt;bã€&lt;/strong&gt; æä¾›åå°ç»˜åˆ¶èƒ½åŠ›ï¼Œåœ¨å®é™…ç»˜åˆ¶è¿‡ç¨‹ä¸­å¯ä»¥æ”¾åœ¨ &lt;code&gt;Background Thread&lt;/code&gt; æ¥å®ç°ç»˜åˆ¶å·¥ä½œã€‚&lt;strong&gt;cã€&lt;/strong&gt; åœ¨å®ç°ä¸­å¯ä»¥é€šè¿‡ &lt;code&gt;CTRunDelegate&lt;/code&gt; æ¥è®¾ç½® &lt;code&gt;CTRun&lt;/code&gt; æ¥å®ç°å›¾æ–‡æ··æ’æ¥æ—¶æ›´åŠ ä¸°å¯Œçš„æ•ˆæœã€‚&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;strong&gt;Text Kit å®ç°é€»è¾‘&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://gblobscdn.gitbook.com/assets%2F-M7k4T_Ro92aishHjmI4%2F-M7k4dwO5EuaRVogKZGQ%2F-M7k5evvrWy4lYF4OTVl%2F1877765-df9bbf81678c6a58.png?alt=media&amp;amp;token=88f672d0-d2b2-47a9-84e7-30ea30f20bc0&quot; alt=&quot;Text Kit.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åŒæ—¶ä¹Ÿä¼šå¯¹æœ¬æ–‡è¿›è¡Œåœ¨æ¯ä¸€åšæ–‡æ›´æ–°ï¼ï¼ï¼&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS UI ç•Œé¢" scheme="http://yoursite.com/tags/iOS-UI-%E7%95%8C%E9%9D%A2/"/>
    
  </entry>
  
  <entry>
    <title>iOS 11 æ–°ç‰¹æ€§</title>
    <link href="http://yoursite.com/2017/12/21/iOS%2011%20%E6%96%B0%E7%89%B9%E6%80%A7/"/>
    <id>http://yoursite.com/2017/12/21/iOS 11 æ–°ç‰¹æ€§/</id>
    <published>2017-12-20T16:04:50.000Z</published>
    <updated>2018-01-15T08:58:27.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;code&gt;iOS 11&lt;/code&gt; çš„æœ€æ–°æŠ€æœ¯å‘å¸ƒåœ¨ &lt;strong&gt;6æœˆ6å·&lt;/strong&gt;ï¼Œç”±äºå°ç¼–åœ¨å·¥ä½œä¸Šçš„åŸå› åªèƒ½åœ¨ä»Šå¤©æŠŠ &lt;code&gt;iOS 11&lt;/code&gt;çš„ç›¸å…³ä¿¡æ¯æ•´ç†å‡ºæ¥å¯¹åé¢çš„å¼€å‘ä¾¿åˆ©ä»¥åŠåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥æ›´å¥½çš„é¿å…è¸©è¿‡çš„å‘ã€‚&lt;/p&gt;
&lt;h1 id=&quot;æ–°å¢çš„æ¡†æ¶&quot;&gt;&lt;a href=&quot;#æ–°å¢çš„æ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;æ–°å¢çš„æ¡†æ¶&quot;&gt;&lt;/a&gt;æ–°å¢çš„æ¡†æ¶&lt;/h1&gt;&lt;p&gt;å¯¹äºä¸Šä¸€ä¸ªç‰ˆæœ¬æ€»ä½“æ¥è¯´æ–°å¢åŠ ä¸¤ä¸ªä¸»è¦å¤§çš„æ¡†æ¶ &lt;code&gt;Core ML&lt;/code&gt; å’Œ &lt;code&gt;ARKit&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;Core-ML-æ¡†æ¶&quot;&gt;&lt;a href=&quot;#Core-ML-æ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;Core ML æ¡†æ¶&quot;&gt;&lt;/a&gt;&lt;code&gt;Core ML&lt;/code&gt; æ¡†æ¶&lt;/h2&gt;&lt;p&gt;åªä»å»å¹´çš„æ—¶å€™ &lt;code&gt;AlphaGo&lt;/code&gt; æ‰“è´¥æä¸–çŸ³ï¼Œä»Šå¹´çš„å‡çº§ç‰ˆçš„ &lt;code&gt;AlphaGo&lt;/code&gt; ä¹Ÿæˆ˜èƒœä¸­å›½çš„æŸ¯æ´ï¼Œåˆ°æœ€è¿‘å‰ç«¯æ—¶é—´å‡çº§ç‰ˆçš„ &lt;code&gt;AlphaZero&lt;/code&gt; ä¹Ÿæˆ˜èƒœäº†å‰ä»£çš„ &lt;code&gt;AlphaGo&lt;/code&gt;ã€‚æ„Ÿè§‰åé¢ &lt;code&gt;AI&lt;/code&gt; åªèƒ½æ˜¯æœ€è¿‘æœ€ç«çš„ç§‘æŠ€ï¼Œè€Œä¸”ç›®å‰ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥åé¢ç§‘æŠ€æ›´æ–°æ›¿ä»£å¯èƒ½æ˜¯å¯¹&lt;strong&gt;ä¾æ®é‡å¤æ€§è®­ç»ƒè·å–æŠ€èƒ½é‡å¤å•æ ·å·¥ä½œçš„äººå‘˜&lt;/strong&gt;ä¼˜åŒ–ï¼ˆè¿™æ˜¯åè¯ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ &lt;code&gt;Core ML&lt;/code&gt; æ˜¯ &lt;code&gt;Apple&lt;/code&gt; æä¾›çš„å·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯æ ¹æ®æ•°æ®è¿›è¡Œç›¸å…³è®­ç»ƒå¥½å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ä¸€ä¸ªæ•°æ®åŒ£å­ã€‚å°ç¼–è®²çš„ç›´ç™½ä¸€ç‚¹ï¼Œå°±æ˜¯ä½ å¾€åŒ£å­ä¸­è¾“å…¥æ•°æ®ç„¶åè·å–ç›¸åº”çš„ç»“æœæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Core ML&lt;/code&gt; èƒŒåæ˜¯å¯¹ &lt;code&gt;iOS&lt;/code&gt; çš„è§†è§‰è¯†åˆ« &lt;code&gt;Vision&lt;/code&gt; æ¡†æ¶å’Œ &lt;code&gt;Foundation&lt;/code&gt; ä¸­è¯­ä¹‰ç›¸å…³åˆ†æçš„ &lt;code&gt;API&lt;/code&gt;ã€‚ä¸€èˆ¬ç§»åŠ¨ç«¯çš„å¼€å‘è€…å¯ä»¥ä½¿ç”¨ç›¸å…³çš„æ¥å£æ¥è·å–ç›¸å…³äººè„¸è¯†åˆ«æˆ–è€…æ˜¯æ–‡å­—çš„è¯†åˆ«ç»“æœã€‚&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;ARKit-æ¡†æ¶&quot;&gt;&lt;a href=&quot;#ARKit-æ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;ARKit æ¡†æ¶&quot;&gt;&lt;/a&gt;&lt;code&gt;ARKit&lt;/code&gt; æ¡†æ¶&lt;/h2&gt;&lt;p&gt;&lt;a href=&quot;https://developer.apple.com/documentation/arkit&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;ARKit&lt;/code&gt;&lt;/a&gt; åœ¨å°ç¼–çš„ä¸Šä¸€å®¶å…¬å¸æ˜¯åšäº§å“å…¬å¸ï¼Œå¯¹ä¸€äº›æ–°æŠ€æœ¯éƒ½æœ‰è‡ªå·±çš„ç§¯ç´¯ã€‚å¯¹ &lt;code&gt;ARKit&lt;/code&gt; åœ¨ &lt;code&gt;Apple&lt;/code&gt; ä¸Šå‘å¸ƒæ„Ÿè§‰è¿˜æ˜¯å¬å¥½ç©çš„ã€‚å› ä¸ºåœ¨åˆšåˆšæ¯•ä¸šæ—¶å€™å’Œå¥½å®¤å‹ä¸€èµ·åšè§†é¢‘æ’­æ”¾å™¨ï¼Œç”±äºæ’­æ”¾å†…å®¹æ¥æºçš„ç‰ˆæƒé—®é¢˜è¢« &lt;code&gt;App Stroe&lt;/code&gt; æ‹’æ¥ä¸Šæ¶ï¼Œæ¥ç€æˆ‘ä»¬å¼€å§‹åš &lt;code&gt;AR&lt;/code&gt; ç›¸å…³ &lt;code&gt;App&lt;/code&gt; å› ä¸ºæŠ€æœ¯åŸå› åœ¨æ¨¡å‹ä¸Šæç½®ã€‚å°±è¿™ä¸€æ ·å¤§åŠå¹´è¿‡å»ï¼ˆå›§ï¼‰ã€‚&lt;br&gt;ä¸è¿‡è‹¹æœæ­£å¼å‘å¸ƒä¹‹åï¼Œååº”å¹³å¹³ï¼Œæœ€åæ²¦è½ä¸ºå®¶å±…ç›¸å…³ &lt;code&gt;APP&lt;/code&gt;ã€‚&lt;br&gt;åœ¨ &lt;code&gt;ARKit&lt;/code&gt; ä¸­ä½¿ç”¨çš„ &lt;code&gt;View&lt;/code&gt; å‡æ˜¯ä½œä¸º &lt;code&gt;SceneKit&lt;/code&gt; ç›¸å…³çš„å»¶ä¼¸ï¼Œåœ¨å¼€å‘è¿‡ç¨‹ä¸­æˆ‘ä»¬è§åˆ°çš„çœŸå®çš„ä¸–ç•Œéƒ½æ˜¯å½’äºç³»ç»Ÿæ¥è¿›è¡Œç›¸å…³å¤„ç†ã€‚ä½œä¸ºå¼€å‘è€…åªéœ€è¦ç•Œé¢ç›¸æ¡†ä¸­äº‹ç‰©æ”¾åˆ°åˆé€‚çš„ä½ç½®ï¼Œå¹¶ä¸”è®©ä»–ä»¬è¿›è¡Œç›¸å…³çš„äº’åŠ¨å³å¯ã€‚&lt;/p&gt;
&lt;h1 id=&quot;æ–°å¢çš„åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#æ–°å¢çš„åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;æ–°å¢çš„åŠŸèƒ½&quot;&gt;&lt;/a&gt;æ–°å¢çš„åŠŸèƒ½&lt;/h1&gt;&lt;p&gt;&lt;code&gt;iOS 11&lt;/code&gt;é™¤åœ¨æ¡†æ¶å¤–æœ‰æ‰€æ›´æ–°ç›¸å…³çš„å†…å®¹ï¼Œåœ¨åŠŸèƒ½çš„æ–¹é¢ä¹Ÿåšäº†äº›ç›¸å…³å‡çº§å’Œæ›´æ”¹ã€‚æ¯”å¦‚åœ¨ç½‘ç»œæ–¹é¢ã€&lt;code&gt;Xcode 9&lt;/code&gt;ã€32 ä½å¤„ç†å™¨æ”¯æŒå’Œ &lt;code&gt;WebKit&lt;/code&gt; çš„ç‰¹æ€§ç­‰ã€‚&lt;/p&gt;
&lt;h2 id=&quot;ç½‘ç»œéƒ¨åˆ†&quot;&gt;&lt;a href=&quot;#ç½‘ç»œéƒ¨åˆ†&quot; class=&quot;headerlink&quot; title=&quot;ç½‘ç»œéƒ¨åˆ†&quot;&gt;&lt;/a&gt;ç½‘ç»œéƒ¨åˆ†&lt;/h2&gt;&lt;h3 id=&quot;ECN-æ˜¾ç¤ºæ‹¥å µé€šçŸ¥&quot;&gt;&lt;a href=&quot;#ECN-æ˜¾ç¤ºæ‹¥å µé€šçŸ¥&quot; class=&quot;headerlink&quot; title=&quot;ECN (æ˜¾ç¤ºæ‹¥å µé€šçŸ¥)&quot;&gt;&lt;/a&gt;ECN (æ˜¾ç¤ºæ‹¥å µé€šçŸ¥)&lt;/h3&gt;&lt;p&gt;ç½‘ç»œæ‹¥å µå‘ç”Ÿæ—¶å› ä¸ºå‘é€æ–¹æ— æ³•åŠæ—¶çŸ¥æ™“ç½‘ç»œæƒ…å†µï¼Œåœ¨å‘ç°ä¸¢åŒ…æ—¶å°±ä¼šä¸æ–­çš„é‡æ–°é‡å‘ï¼Œé—´æ¥å¯¼è‡´ç½‘ç»œä¼šæ›´åŠ æ‹¥å µä½¿ç½‘ç»œæƒ…å†µæ›´åŠ ç³Ÿç³•ã€‚ç›®å‰ &lt;code&gt;ECN&lt;/code&gt; çš„å‡ºç°å°±è§£å†³æ­¤é—®é¢˜ï¼Œ &lt;code&gt;ECN&lt;/code&gt; ä½œä¸º &lt;code&gt;TCP&lt;/code&gt; å’Œ &lt;code&gt;IP&lt;/code&gt; çš„åè®®æ‰©å±•ï¼Œå­˜åœ¨äº &lt;code&gt;IP&lt;/code&gt; çš„å¤´æ–‡ä»¶ä¸­ &lt;code&gt;1 bit&lt;/code&gt; çš„æ‹¥å¡å€¼çš„çŠ¶æ€å€¼ï¼Œæ˜¯ç”±æ¥æ”¶æ–¹å›å¤ç»™å‘é€æ–¹ï¼Œå‘é€æ–¹æ¥å—åˆ°æ­¤æ¶ˆæ¯çš„è¯·æ±‚ååœæ­¢ç»§ç»­å‘é€æ•°æ®åŒ…ï¼Œç›´åˆ°æ‹¥å¡çš„çŠ¶æ€åœæ­¢æ‰å¼€å§‹ç»§ç»­å‘é€æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡æ˜¯å®é™…æƒ…å†µä¸­ä½¿ç”¨æ—¶ &lt;code&gt;ECN&lt;/code&gt; éœ€è¦ç»“åˆå®¢æˆ·ç«¯ã€æœåŠ¡ç«¯å’Œç½‘ç»œç«¯ä¸‰ä¸ªæ–¹é¢çš„æ”¯æŒï¼Œç›®å‰ &lt;code&gt;ECN&lt;/code&gt; å±äº &lt;code&gt;Linux&lt;/code&gt; å†…æ ¸ï¼Œåªéœ€è¦å‡çº§ &lt;code&gt;Linux&lt;/code&gt; å°±å¯ä»¥è·å–æ”¯æŒï¼Œ&lt;code&gt;Apple&lt;/code&gt; ç»™å‡ºäº† &lt;code&gt;Server&lt;/code&gt; å¯¹ &lt;code&gt;ECN&lt;/code&gt; çš„æ”¯æŒç‡ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-f28899d2fc311282.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2018-01-15 11.58.23.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯æ–¹é¢ï¼Œ &lt;code&gt;iOS 10.3&lt;/code&gt; å¼€å§‹ï¼Œæœ‰è¿‡åŠçš„é€šè¿‡ &lt;code&gt;wifi&lt;/code&gt; å’Œå°‘é‡é€šè¿‡ç§»åŠ¨ç½‘ç»œè¿›è¡Œçš„ &lt;code&gt;TCP&lt;/code&gt; è¿æ¥å·²ç»æ‰“å¼€äº† &lt;code&gt;ECN&lt;/code&gt;ï¼Œæ²¡æœ‰æ”¶åˆ°ç›¸å…³çš„é—®é¢˜æŠ¥å‘Šã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æœé›†çš„ä¸€äº›å›½å®¶ç½‘ç»œæ‹¥å µçš„æ•°æ®ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-b4f2f7bde92d7e13.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2018-01-15 12.02.25.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å®¢æˆ·ç«¯ä» &lt;code&gt;iOS 11&lt;/code&gt; å¼€å§‹ï¼Œæ‰€æœ‰ &lt;code&gt;TCP&lt;/code&gt; è¯·æ±‚éƒ½ä¼šæ”¯æŒ &lt;code&gt;EC&lt;/code&gt;Nï¼ˆå…¨éƒ¨ &lt;code&gt;Wifi&lt;/code&gt; å’Œéƒ¨åˆ†ç™½åå•ç§»åŠ¨è¿è¥å•†ï¼‰ï¼›æœåŠ¡ç«¯æœ‰ &lt;code&gt;74%&lt;/code&gt; çš„ç½‘ç«™æ”¯æŒäº† &lt;code&gt;ECN&lt;/code&gt;ï¼Œä¹Ÿä¼šæœ‰è¶Šæ¥è¶Šå¤šçš„ç½‘ç»œæœåŠ¡å•†å¼€å§‹æ”¯æŒ &lt;code&gt;ECN&lt;/code&gt; æ¥è¿›ä¸€æ­¥æå‡ç”¨æˆ·ä½“éªŒï¼›ï¼ˆæœåŠ¡å•†åªéœ€è¦åœ¨ä½ çš„ç½‘ç»œæ¥å…¥ç‚¹æ”¯æŒ &lt;code&gt;ECN&lt;/code&gt; å³å¯ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä½¿ç”¨ &lt;code&gt;ECN&lt;/code&gt; å®ç°æ ‡è®°è¿æ¥æ‹¥å¡ï¼Œå¯ä»¥æ›´åŠ é«˜æ•ˆï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å‡å°‘é‡å‘æ¬¡æ•°ï¼›&lt;/li&gt;
&lt;li&gt;é™ä½å»¶è¿Ÿï¼›&lt;/li&gt;
&lt;li&gt;æå‡ç”¨æˆ·ä½“éªŒã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;ECN&lt;/code&gt; çš„åŒæ—¶ï¼Œéœ€è¦åœ¨ç»“åˆä½¿ç”¨ &lt;a href=&quot;https://wiki.openwrt.org/doc/uci/sqm&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;&lt;code&gt;SQM&lt;/code&gt;(Smart Queue Management)&lt;/a&gt; æ¥å®ç°æ•°æ®ç¼“å­˜ï¼Œè¿™æ ·å¯ä»¥å®ç°æå‰å‘ŠçŸ¥å‘é€è€…å½“å‰çš„ç½‘ç»œzhekuaiï¼Œå¯ä»¥æœ€å¤§ç¨‹åº¦ä¸Šå®ç°é¿å…æ‹¥å¡å‡ºç°ã€‚&lt;/p&gt;
&lt;h2 id=&quot;WKWebView-Cookie-ç®¡ç†&quot;&gt;&lt;a href=&quot;#WKWebView-Cookie-ç®¡ç†&quot; class=&quot;headerlink&quot; title=&quot;WKWebView Cookie ç®¡ç†&quot;&gt;&lt;/a&gt;&lt;code&gt;WKWebView Cookie&lt;/code&gt; ç®¡ç†&lt;/h2&gt;&lt;h3 id=&quot;URLSession-Adaptable-Connectivity-API&quot;&gt;&lt;a href=&quot;#URLSession-Adaptable-Connectivity-API&quot; class=&quot;headerlink&quot; title=&quot;URLSession Adaptable Connectivity API&quot;&gt;&lt;/a&gt;&lt;code&gt;URLSession Adaptable Connectivity API&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;ç°åœ¨å¯ä»¥é€šè¿‡ &lt;code&gt;urlSession(_:taskIsWaitingForConnectivity:)&lt;/code&gt; è®©è¯·æ±‚ç­‰å¾…ç½‘ç»œæ­£å¸¸åå†è‡ªåŠ¨å°è¯•ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tNc79gy1fjoxl26swrj315o0n6q3o.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;URLSessionTask-Scheduling-API&quot;&gt;&lt;a href=&quot;#URLSessionTask-Scheduling-API&quot; class=&quot;headerlink&quot; title=&quot;URLSessionTask Scheduling API&quot;&gt;&lt;/a&gt;&lt;code&gt;URLSessionTask Scheduling API&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;é€šè¿‡ &lt;code&gt;URLSessionTask Scheduling API&lt;/code&gt; å¯ä»¥åœ¨ &lt;code&gt;App&lt;/code&gt; æ²¡æœ‰è¿è¡Œçš„æ—¶å€™ä¸‹è½½å†…å®¹ï¼Œè€Œæ‰‹æœºä¹Ÿä¼šç»“åˆå®é™…ç”µé‡ï¼Œä½¿ç”¨çŠ¶æ€å»å†³å®šæ˜¯å¦æ‰§è¡Œã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws2.sinaimg.cn/large/006tNc79gy1fjoxl1y1z1j315o0n9wfy.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;iOS-11å¼€å‘æ–°ç‰¹æ€§ä¹‹-WebKit-æ”¯æŒ-WebRTC&quot;&gt;&lt;a href=&quot;#iOS-11å¼€å‘æ–°ç‰¹æ€§ä¹‹-WebKit-æ”¯æŒ-WebRTC&quot; class=&quot;headerlink&quot; title=&quot;iOS 11å¼€å‘æ–°ç‰¹æ€§ä¹‹ WebKit æ”¯æŒ WebRTC&quot;&gt;&lt;/a&gt;&lt;code&gt;iOS 11&lt;/code&gt;å¼€å‘æ–°ç‰¹æ€§ä¹‹ &lt;code&gt;WebKit&lt;/code&gt; æ”¯æŒ &lt;code&gt;WebRTC&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;&lt;code&gt;iOS 11&lt;/code&gt; çš„ &lt;code&gt;WebKit&lt;/code&gt; ä¸­æ”¯æŒäº† &lt;code&gt;WebRTC&lt;/code&gt; ç›¸å…³çš„æ¥å£ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws4.sinaimg.cn/large/006tNc79gy1fjp0ig1bgij31800pg7bu.jpg&quot; alt=&quot;WebRTC&quot;&gt; &lt;/p&gt;
&lt;p&gt;ç›®å‰ &lt;code&gt;WKWebView&lt;/code&gt; è¿˜æ²¡æœ‰æ”¯æŒ &lt;code&gt;getUserMedia&lt;/code&gt; æ— æ³•è·å– &lt;code&gt;MediaStream&lt;/code&gt;ï¼Œæ— æ³•ä¼ è¾“éŸ³è§†é¢‘æµï¼Œæ‰€ä»¥ &lt;code&gt;App&lt;/code&gt; åµŒå¥—çš„ &lt;code&gt;WebView&lt;/code&gt; è¿˜æ— æ³•ä½¿ç”¨ &lt;code&gt;WebRTC&lt;/code&gt;ï¼Œå¿…é¡»å¾—ç”¨ &lt;code&gt;Safrai App&lt;/code&gt; æ‰å¯ä»¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€æ—¦ &lt;code&gt;WKWebView&lt;/code&gt; æ”¯æŒ &lt;code&gt;MediaStream&lt;/code&gt; (&lt;code&gt;getUserMedia&lt;/code&gt;)ï¼Œä¹‹åæœ‹å‹åœˆé‡Œé¢çš„ &lt;code&gt;Web&lt;/code&gt; ä¼šæœ‰æ›´å¤šå¯èƒ½æ€§ï¼Œæ¯”å¦‚ç›´æ¥éŸ³è§†é¢‘çš„åˆæˆï¼Œè¿˜æœ‰å®æ—¶è§†é¢‘é€šä¿¡ã€&lt;code&gt;WebAR&lt;/code&gt; çš„ä¸œè¥¿è¿›è¡Œä¼ æ’­ã€‚å€ŸåŠ©å°ç¨‹åºçš„å…¥å£ï¼Œæƒ³è±¡ç©ºé—´è¿˜æ˜¯æ¯”è¾ƒå¤šçš„ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å‚è€ƒèµ„æ–™ï¼š&lt;/strong&gt;   &lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ChenYilong/WebRTC/tree/master/WebRTC&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€ŠWebRTCåœ¨iOSç«¯çš„å®ç°ã€‹&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;http://geek.csdn.net/news/detail/201894?spm=5176.100239.blogcont221561.55.4cb1f06dZvDWv3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;ã€Šè‹¹æœç»ˆäºå…¥ä¼™ WebRTCï¼Œæ–°ä¸€ä»£ç§»åŠ¨ Web åº”ç”¨çˆ†å‘è·¯ä¸Šè¿˜æœ‰å“ªäº›å‘ï¼Ÿã€‹&lt;/a&gt;&lt;/p&gt;
&lt;h2 id=&quot;iOS-11-å¼€å‘æ–°ç‰¹æ€§-Xcode9-æ–°ç‰¹æ€§&quot;&gt;&lt;a href=&quot;#iOS-11-å¼€å‘æ–°ç‰¹æ€§-Xcode9-æ–°ç‰¹æ€§&quot; class=&quot;headerlink&quot; title=&quot;iOS 11 å¼€å‘æ–°ç‰¹æ€§ Xcode9 æ–°ç‰¹æ€§&quot;&gt;&lt;/a&gt;&lt;code&gt;iOS 11&lt;/code&gt; å¼€å‘æ–°ç‰¹æ€§ &lt;code&gt;Xcode9&lt;/code&gt; æ–°ç‰¹æ€§&lt;/h2&gt;&lt;h3 id=&quot;æ·»åŠ -GitHub-åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#æ·»åŠ -GitHub-åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;æ·»åŠ  GitHub åŠŸèƒ½&quot;&gt;&lt;/a&gt;æ·»åŠ  &lt;code&gt;GitHub&lt;/code&gt; åŠŸèƒ½&lt;/h3&gt;&lt;p&gt;åœ¨ &lt;code&gt;Xcode 9&lt;/code&gt; å¼•å…¥äº† &lt;code&gt;Github&lt;/code&gt; æºä»£ç çš„ç®¡ç†ï¼Œå¯ä»¥å±•ç¤ºåœ¨å¼€å‘è¿‡ç¨‹ä¸­ &lt;code&gt;Branch&lt;/code&gt; å’Œ &lt;code&gt;Tag&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-86d87d764dc4bef1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2018-01-15 15.06.20.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;åŒå‡»å¯ä»¥çœ‹å‡º &lt;code&gt;Commit&lt;/code&gt; çš„å…·ä½“å†…å®¹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-585e13685c4e651e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2018-01-15 15.12.03.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥ç›´æ¥æŸ¥çœ‹æœ¬æ¬¡å…·ä½“æäº¤çš„å†…å®¹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-00bf3028c1d92fc5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2018-01-15 15.12.49.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;åˆ›å»ºæ–°çš„é¢œè‰²-Asset-Catalog&quot;&gt;&lt;a href=&quot;#åˆ›å»ºæ–°çš„é¢œè‰²-Asset-Catalog&quot; class=&quot;headerlink&quot; title=&quot;åˆ›å»ºæ–°çš„é¢œè‰² Asset Catalog&quot;&gt;&lt;/a&gt;åˆ›å»ºæ–°çš„é¢œè‰² &lt;code&gt;Asset Catalog&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;å¯ä»¥ zai &lt;code&gt;Asset Catalog&lt;/code&gt; ä¸­ä½¿ç”¨é¢œè‰²æ¥åˆ›å»ºå›¾ç‰‡ï¼Œç„¶åæ ¹æ®é¢œè‰²å¡«å……æ¥å®ç°å›¾ç‰‡å±•ç¤ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;https://ws3.sinaimg.cn/large/006tKfTcgy1fjolad575yj30z50fe74h.jpg&quot; alt=&quot;&quot;&gt;&lt;/p&gt;
&lt;h2 id=&quot;iOS-å¼€å‘æ–°ç‰¹æ€§-Tips&quot;&gt;&lt;a href=&quot;#iOS-å¼€å‘æ–°ç‰¹æ€§-Tips&quot; class=&quot;headerlink&quot; title=&quot;iOS å¼€å‘æ–°ç‰¹æ€§ Tips&quot;&gt;&lt;/a&gt;&lt;code&gt;iOS å¼€å‘æ–°ç‰¹æ€§ Tips&lt;/code&gt;&lt;/h2&gt;&lt;h3 id=&quot;DeviceCheck&quot;&gt;&lt;a href=&quot;#DeviceCheck&quot; class=&quot;headerlink&quot; title=&quot;DeviceCheck&quot;&gt;&lt;/a&gt;&lt;code&gt;DeviceCheck&lt;/code&gt;&lt;/h3&gt;&lt;p&gt;&lt;code&gt;DeviceCheck&lt;/code&gt; å…è®¸å¼€å‘è€…å¯ä»¥é€šè¿‡å…¬å¸è‡ªå·±çš„æœåŠ¡å™¨å’Œ &lt;code&gt;Apple&lt;/code&gt; æœåŠ¡å™¨é€šè®¯ï¼Œå¹¶ä¸ºä¸¤ä¸ªè®¾å¤‡è®¾ç½®ä¸¤ä¸ª &lt;code&gt;Bit&lt;/code&gt; æ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨è®¾å¤‡ä¸Šä½¿ç”¨ &lt;code&gt;DeviceCheck API&lt;/code&gt; æ¥ç”Ÿæˆ &lt;code&gt;token&lt;/code&gt;ï¼Œç„¶åæŠŠæ­¤ &lt;code&gt;token&lt;/code&gt; å‘é€ç»™å…¬å¸çš„æœåŠ¡å™¨ï¼Œåœ¨ç”±å…¬å¸çš„æœåŠ¡å™¨å‘é€åˆ° &lt;code&gt;Apple&lt;/code&gt; çš„ &lt;code&gt;API&lt;/code&gt; è¿›è¡Œé€šè®¯ï¼Œå¯ä»¥æ¥åšæ›´æ–°æˆ–è€…æ˜¯æŸ¥è¯¢è¯¥è®¾å¤‡çš„å€¼ã€‚æ ¹æ®è¿™ä¸¤ä¸ªå­—èŠ‚çš„æ•°æ®å¯ä»¥ç”¨æ¥è¿½è¸ªç”¨æˆ·ã€‚&lt;/p&gt;
&lt;p&gt;æ ¹æ®æ­¤åŠŸèƒ½ï¼Œå¯ä»¥ç”¨åœ¨å‘æ¬ºè¯ˆçš„é¢†åŸŸï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ 7 å¤©ï¼›&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨è€…å°å·åé˜²æ­¢é‡æ–°æ³¨å†Œè´¦å·æ¥å•ï¼›&lt;/li&gt;
&lt;li&gt;æ‰‹æœº &lt;code&gt;App&lt;/code&gt; ç”¨æˆ·æ˜¯å¦æ˜¯ç¬¬ä¸€æ¬¡é¢†å–çº¢åŒ…ï¼›&lt;/li&gt;
&lt;li&gt;é˜²æ­¢ç”¨æˆ·æ‰“å¼€å¤šä¸ª &lt;code&gt;App&lt;/code&gt;ï¼Œä¾‹å¦‚ï¼šåœ¨åŒä¸€æ¬¾æ‰‹æœºä¸Šå¼€ 5 ä¸ª App;&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;åœ¨ &lt;code&gt;iOS 10.3&lt;/code&gt; æ­£å¼ç‰ˆæœ¬ä¹‹åï¼Œ&lt;code&gt;App&lt;/code&gt; åˆ é™¤å &lt;code&gt;keychain&lt;/code&gt; ä¸ä¼šè¢«æ¸…ç†ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;h2 id=&quot;iOS-11-å¼€å‘æ–°ç‰¹æ€§åœæ­¢æ”¯æŒ-32-ä½-App&quot;&gt;&lt;a href=&quot;#iOS-11-å¼€å‘æ–°ç‰¹æ€§åœæ­¢æ”¯æŒ-32-ä½-App&quot; class=&quot;headerlink&quot; title=&quot;iOS 11 å¼€å‘æ–°ç‰¹æ€§åœæ­¢æ”¯æŒ 32 ä½ App&quot;&gt;&lt;/a&gt;&lt;code&gt;iOS 11&lt;/code&gt; å¼€å‘æ–°ç‰¹æ€§åœæ­¢æ”¯æŒ 32 ä½ &lt;code&gt;App&lt;/code&gt;&lt;/h2&gt;&lt;p&gt;iOS11 æ”¾å¼ƒæ”¯æŒ iPhone5ã€iPhone5cã€iPad4 ï¼Œæ ‡å¿—ç€åœ¨ç¡¬ä»¶å±‚é¢ï¼Œ32ä½è®¾å¤‡é€€å‡ºäº†å†å²èˆå°ï¼ŒiOS ç³»ç»Ÿä¸å†å…¼å®¹32ä½è®¾å¤‡ã€‚&lt;/p&gt;
&lt;p&gt;åŒæ—¶ iOS11 ä¹Ÿå°†ä¸å†æ”¯æŒ 32ä½ APP è¿è¡Œ, 32ä½ APP åœ¨ APPStore æ— æ³•è¢«æœåˆ°ï¼Œå·²ç»ä¸‹è½½çš„ APP æ— æ³•åœ¨â€œå·²è´­â€é¡¹ç›®ä¸­å®‰è£…ã€‚&lt;/p&gt;
&lt;p&gt;iOS 11 åªå…¼å®¹ 64-bit è®¾å¤‡ï¼Œä¹Ÿå°±æ˜¯æ­è½½ A7 ä»¥ä¸Šå¤„ç†å™¨çš„è®¾å¤‡ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;iOS 11&lt;/code&gt; çš„æœ€æ–°æŠ€æœ¯å‘å¸ƒåœ¨ &lt;strong&gt;6æœˆ6å·&lt;/strong&gt;ï¼Œç”±äºå°ç¼–åœ¨å·¥ä½œä¸Šçš„åŸå› åªèƒ½åœ¨ä»Šå¤©æŠŠ &lt;code&gt;iOS 11&lt;/code&gt;çš„ç›¸å…³ä¿¡æ¯æ•´ç†å‡ºæ¥å¯¹åé¢çš„å¼€å‘ä¾¿åˆ©ä»¥åŠåœ¨å®é™…å¼€å‘è¿‡ç¨‹ä¸­å¯ä»¥æ›´å¥½çš„é¿å…è¸©è¿‡çš„å‘ã€‚&lt;/p&gt;
&lt;h1 id=&quot;æ–°å¢çš„æ¡†æ¶&quot;&gt;&lt;a href=&quot;#æ–°å¢çš„æ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;æ–°å¢çš„æ¡†æ¶&quot;&gt;&lt;/a&gt;æ–°å¢çš„æ¡†æ¶&lt;/h1&gt;&lt;p&gt;å¯¹äºä¸Šä¸€ä¸ªç‰ˆæœ¬æ€»ä½“æ¥è¯´æ–°å¢åŠ ä¸¤ä¸ªä¸»è¦å¤§çš„æ¡†æ¶ &lt;code&gt;Core ML&lt;/code&gt; å’Œ &lt;code&gt;ARKit&lt;/code&gt;&lt;/p&gt;
&lt;h2 id=&quot;Core-ML-æ¡†æ¶&quot;&gt;&lt;a href=&quot;#Core-ML-æ¡†æ¶&quot; class=&quot;headerlink&quot; title=&quot;Core ML æ¡†æ¶&quot;&gt;&lt;/a&gt;&lt;code&gt;Core ML&lt;/code&gt; æ¡†æ¶&lt;/h2&gt;&lt;p&gt;åªä»å»å¹´çš„æ—¶å€™ &lt;code&gt;AlphaGo&lt;/code&gt; æ‰“è´¥æä¸–çŸ³ï¼Œä»Šå¹´çš„å‡çº§ç‰ˆçš„ &lt;code&gt;AlphaGo&lt;/code&gt; ä¹Ÿæˆ˜èƒœä¸­å›½çš„æŸ¯æ´ï¼Œåˆ°æœ€è¿‘å‰ç«¯æ—¶é—´å‡çº§ç‰ˆçš„ &lt;code&gt;AlphaZero&lt;/code&gt; ä¹Ÿæˆ˜èƒœäº†å‰ä»£çš„ &lt;code&gt;AlphaGo&lt;/code&gt;ã€‚æ„Ÿè§‰åé¢ &lt;code&gt;AI&lt;/code&gt; åªèƒ½æ˜¯æœ€è¿‘æœ€ç«çš„ç§‘æŠ€ï¼Œè€Œä¸”ç›®å‰ä¹Ÿå¯ä»¥çœ‹å‡ºæ¥åé¢ç§‘æŠ€æ›´æ–°æ›¿ä»£å¯èƒ½æ˜¯å¯¹&lt;strong&gt;ä¾æ®é‡å¤æ€§è®­ç»ƒè·å–æŠ€èƒ½é‡å¤å•æ ·å·¥ä½œçš„äººå‘˜&lt;/strong&gt;ä¼˜åŒ–ï¼ˆè¿™æ˜¯åè¯ï¼‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸è¿‡ &lt;code&gt;Core ML&lt;/code&gt; æ˜¯ &lt;code&gt;Apple&lt;/code&gt; æä¾›çš„å·²ç»è®­ç»ƒå¥½çš„æ¨¡å‹ï¼Œä¹Ÿå°±æ˜¯è¯´æ˜¯æ ¹æ®æ•°æ®è¿›è¡Œç›¸å…³è®­ç»ƒå¥½å¯ä»¥ç›´æ¥ä½¿ç”¨çš„ä¸€ä¸ªæ•°æ®åŒ£å­ã€‚å°ç¼–è®²çš„ç›´ç™½ä¸€ç‚¹ï¼Œå°±æ˜¯ä½ å¾€åŒ£å­ä¸­è¾“å…¥æ•°æ®ç„¶åè·å–ç›¸åº”çš„ç»“æœæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Core ML&lt;/code&gt; èƒŒåæ˜¯å¯¹ &lt;code&gt;iOS&lt;/code&gt; çš„è§†è§‰è¯†åˆ« &lt;code&gt;Vision&lt;/code&gt; æ¡†æ¶å’Œ &lt;code&gt;Foundation&lt;/code&gt; ä¸­è¯­ä¹‰ç›¸å…³åˆ†æçš„ &lt;code&gt;API&lt;/code&gt;ã€‚ä¸€èˆ¬ç§»åŠ¨ç«¯çš„å¼€å‘è€…å¯ä»¥ä½¿ç”¨ç›¸å…³çš„æ¥å£æ¥è·å–ç›¸å…³äººè„¸è¯†åˆ«æˆ–è€…æ˜¯æ–‡å­—çš„è¯†åˆ«ç»“æœã€‚&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>WCDB</title>
    <link href="http://yoursite.com/2017/11/20/WCDB%20%E5%AD%A6%E4%B9%A0%E4%BD%BF%E7%94%A8%E5%BF%83%E5%BE%97%E7%BB%8F/"/>
    <id>http://yoursite.com/2017/11/20/WCDB å­¦ä¹ ä½¿ç”¨å¿ƒå¾—ç»/</id>
    <published>2017-11-20T09:11:10.000Z</published>
    <updated>2017-11-20T10:17:44.000Z</updated>
    
    <content type="html">&lt;p&gt;ä¹‹æ‰€ä»¥åœ¨å…³æ³¨åˆ° &lt;code&gt;WCDB&lt;/code&gt; æ˜¯å› ä¸ºåœ¨æ–°çš„ä¸€å®¶å…¬å¸é‡æ„æ•°æ®åº“æ¥è§£å†³èƒ¶æ°´ä»£ç é—®é¢˜ï¼Œæ¢è€Œè¨€ä¹‹åœ¨ä½¿ç”¨ &lt;code&gt;SQLite&lt;/code&gt; æ•°æ®ä¸­å°½é‡å‡å°‘ &lt;code&gt;SQL&lt;/code&gt; ä¸­å¢ã€åˆ ã€æ”¹å’ŒæŸ¥è¯­å¥çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;WCDB&lt;/code&gt; æ˜¯è…¾è®¯å¾®ä¿¡å¼€æºåœ¨ 2017/06/09 å·å¼€æºçš„ä¸€ç§å˜ç§æ•°æ®åº“ï¼Œæœ¬è´¨ä¹Ÿæ˜¯åŸºäº &lt;code&gt;SQLite&lt;/code&gt; ã€‚&lt;/p&gt;
&lt;h2 id=&quot;WCDB-ç®€ä»‹&quot;&gt;&lt;a href=&quot;#WCDB-ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;WCDB ç®€ä»‹&quot;&gt;&lt;/a&gt;&lt;code&gt;WCDB&lt;/code&gt; ç®€ä»‹&lt;/h2&gt;&lt;p&gt;WCDB æœ¬è´¨ä¸Šå¯¹ &lt;code&gt;SQLite&lt;/code&gt; æ•°æ®åº“ OC++ çš„ç»„ä»¶ï¼Œé‡‡ç”¨çš„æ–¹å¼æ˜¯ï¼š&lt;br&gt;ï¼ˆ1ï¼‰ä½¿ç”¨ &lt;code&gt;ORM&lt;/code&gt; æ˜ å°„æ¥å®Œæˆè‡ªå®šä¹‰æ•°æ®è¡¨å’Œç›¸å…³çš„ç´¢å¼•ï¼Œè¿™é‡Œå°±è§£å†³å…¬å¸èƒ¶æ°´ä»£ç é—®é¢˜&lt;br&gt;ï¼ˆ2ï¼‰ä½¿ç”¨ &lt;code&gt;WING&lt;/code&gt; æ¥è§£å†³ &lt;code&gt;SQL&lt;/code&gt; æŸ¥è¯¢è¿‡ç¨‹ä¸­ç»å¸¸ä½¿ç”¨æŸ¥è¯¢è¿‡ç¨‹ä¸­å­—ç¬¦ä¸²çš„æ‹¼è£…é—®é¢˜&lt;br&gt;ï¼ˆ3ï¼‰å¤šçº¿ç¨‹å®ç°è¯»å–æ•°æ®æ—¶çš„å¹¶å‘æ“ä½œï¼Œåœ¨ä¿®æ”¹æˆ–è€…æ’å…¥æ•°æ®æ—¶æ‰§è¡Œä¸²è¡Œæ“ä½œ&lt;br&gt;ï¼ˆ4ï¼‰åœ¨æ•°æ®åº“å‘ç”Ÿé¡ºæ€€æ—¶å®ç°ä¿®å¤åŠŸèƒ½&lt;br&gt;ï¼ˆ5ï¼‰å¯ä»¥å®ç°åœ¨æ‰§è¡Œ &lt;code&gt;SQL&lt;/code&gt; æ¶ˆè€—çš„æ—¶é—´ï¼Œå¯ä»¥å¸®åŠ©æ€§èƒ½çš„ç›‘æ§&lt;br&gt;ï¼ˆ6ï¼‰é‡‡ç”¨é˜²æ³¨å…¥çš„ &lt;code&gt;SQL&lt;/code&gt; è¯­å¥ï¼Œé¿å…æ¶æ„è¾“å…¥æŸåæ•°æ®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ç®€å•çš„ä»‹ç»ä¸Šé¢åœ¨ &lt;code&gt;WCDB&lt;/code&gt; å…·ä½“å®ç°&lt;/p&gt;
&lt;h3 id=&quot;ORM-å®ç°åŸç†&quot;&gt;&lt;a href=&quot;#ORM-å®ç°åŸç†&quot; class=&quot;headerlink&quot; title=&quot;ORM å®ç°åŸç†&quot;&gt;&lt;/a&gt;&lt;code&gt;ORM&lt;/code&gt; å®ç°åŸç†&lt;/h3&gt;&lt;p&gt;äºæ•°æ®åº“è¡¨å’Œç´¢å¼•é‡‡ç”¨çš„&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;ä¹‹æ‰€ä»¥åœ¨å…³æ³¨åˆ° &lt;code&gt;WCDB&lt;/code&gt; æ˜¯å› ä¸ºåœ¨æ–°çš„ä¸€å®¶å…¬å¸é‡æ„æ•°æ®åº“æ¥è§£å†³èƒ¶æ°´ä»£ç é—®é¢˜ï¼Œæ¢è€Œè¨€ä¹‹åœ¨ä½¿ç”¨ &lt;code&gt;SQLite&lt;/code&gt; æ•°æ®ä¸­å°½é‡å‡å°‘ &lt;code&gt;SQL&lt;/code&gt; ä¸­å¢ã€åˆ ã€æ”¹å’ŒæŸ¥è¯­å¥çš„ä½¿ç”¨ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;WCDB&lt;
    
    </summary>
    
      <category term="WCDB" scheme="http://yoursite.com/categories/WCDB/"/>
    
    
      <category term="æ•°æ®åº“" scheme="http://yoursite.com/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
  </entry>
  
  <entry>
    <title>SQLite å­¦ä¹ -å¤šè¡¨æŸ¥è¯¢</title>
    <link href="http://yoursite.com/2017/11/18/SQLite%20%E5%AD%A6%E4%B9%A0-%E5%A4%9A%E8%A1%A8%E6%9F%A5%E8%AF%A2&%E8%BF%90%E7%AE%97&%E8%A1%A8%E8%BE%BE/"/>
    <id>http://yoursite.com/2017/11/18/SQLite å­¦ä¹ -å¤šè¡¨æŸ¥è¯¢&è¿ç®—&è¡¨è¾¾/</id>
    <published>2017-11-18T15:57:40.000Z</published>
    <updated>2017-11-22T16:15:24.000Z</updated>
    
    <content type="html">&lt;p&gt;å‰ç¯‡åšæ–‡å°ç¼–å†™äº†åŸºæœ¬çš„ &lt;code&gt;SQLite&lt;/code&gt; æ“ä½œæ–¹å¼ï¼Œå¦‚æœåªæ˜¯å¯¹æ•°æ®åº“é‡‡å–åŸºæœ¬çš„æ“ä½œçœ‹å®Œå°ç¼–ç¬¬ä¸€ç¯‡åšæ–‡å°±å¯ä»¥ã€‚åé¢å°ç¼–å°†ä¼šè®²è¿°ä¸€äº›æ•°æ®çš„ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤æ‚çš„æ“ä½œæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡å°†ä¼šåˆ—å‡ºä¸‹é¢çš„æ•°æ®åº“ç›¸å…³çŸ¥è¯†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤šè¡¨æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;è¿ç®—ç¬¦&lt;/li&gt;
&lt;li&gt;è¡¨è¾¾å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;å¤šè¡¨æŸ¥è¯¢&quot;&gt;&lt;a href=&quot;#å¤šè¡¨æŸ¥è¯¢&quot; class=&quot;headerlink&quot; title=&quot;å¤šè¡¨æŸ¥è¯¢&quot;&gt;&lt;/a&gt;å¤šè¡¨æŸ¥è¯¢&lt;/h2&gt;&lt;p&gt;æ¥ç€ä¸Šç¯‡æ–‡ç« å°ç¼–æŠŠæ•°æ®åº“ä¸­æŸ¥è¯¢ä½¿ç”¨çš„å¤šè¡¨æŸ¥è¯¢ç»™å¤§å®¶åšè®²è§£ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¤šè¡¨æŸ¥è¯¢è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„å…³é”®è¯æ˜¯: &lt;code&gt;join&lt;/code&gt;ï¼Œè€Œä¸”åœ¨å¤šè¡¨è¿æ¥æŸ¥è¯¢è¿‡ç¨‹ä¸­æœ‰ä¸‰ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;åˆ†åˆ«æ˜¯ï¼šäº¤å‰è¿æ¥ã€å†…è¿æ¥å’Œå¤–è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸‹æ“ä½œå‡ä»¥ &lt;code&gt;Employee&lt;/code&gt; å’Œ &lt;code&gt;Programmer&lt;/code&gt; ä¸¤ä¸ªè¡¨æ ¼ä¸ºåŸºç¡€æ¥å®ç°ä½¿ç”¨ç”¨ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å†…å®¹æ˜¯ä¹±å–çš„ï¼Œä¸Šæ¬¡å–åå¯èƒ½æ°”åˆ°åœ¨æ„çš„äººï¼Œåé¢åå­—å‡æ˜¯ä¹±å–ï¼ï¼ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-2dfc0cb76093a392.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-20 01.14.27.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h3 id=&quot;äº¤å‰è¿æ¥-CROSS-JION&quot;&gt;&lt;a href=&quot;#äº¤å‰è¿æ¥-CROSS-JION&quot; class=&quot;headerlink&quot; title=&quot;äº¤å‰è¿æ¥(CROSS JION)&quot;&gt;&lt;/a&gt;äº¤å‰è¿æ¥(CROSS JION)&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰&lt;/strong&gt;äº¤å‰è¿æ¥ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨å®ç°äº¤å‰è¿æ¥è¿‡ç¨‹ä¸­æ•°æ®åº“ä¸­æ¯ä¸€è¡Œå’Œæ¯ä¸€è¡Œä¼šåšå¯¹æ¯”ï¼Œç”Ÿæˆä¸€å¼ æŸ¥æ‰¾å‡ºæ¥å†…å®¹å¾ˆå¤§çš„æ•°æ®ã€‚ä¾‹å¦‚ï¼šå¦‚æœä¸€ä¸ªè¡¨æ ¼æœ‰ a è¡Œï¼Œå¦ä¸€ä¸ªè¡¨æ ¼æœ‰ b è¡Œï¼Œç”Ÿæˆçš„è¡¨æ ¼å¤§å°ä¸º &lt;strong&gt;a * b&lt;/strong&gt; è¡Œå†…å®¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰&lt;/strong&gt;ä½¿ç”¨æ ¼å¼ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ä¸»è¦å®ç° SELECT å…·ä½“è¡Œ FROM æ•°æ®åº“1 CROSS JION æ•°æ®åº“2;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SELECT column_one, column_two, ... FROM tableName_one CROSS JION tableName_two;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ3ï¼‰&lt;/strong&gt;æ“ä½œå®ä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-d2f9875f3f82c169.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-19 23.43.21.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;å†…è¿æ¥-INNER-JION&quot;&gt;&lt;a href=&quot;#å†…è¿æ¥-INNER-JION&quot; class=&quot;headerlink&quot; title=&quot;å†…è¿æ¥(INNER JION)&quot;&gt;&lt;/a&gt;å†…è¿æ¥(INNER JION)&lt;/h3&gt;&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰&lt;/strong&gt;å†…è¿æ¥ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨å†…è¿æ¥ä¸­å¯ä»¥å®ç°æ ¹æ®ç›¸å…³çš„æ¡ä»¶å®ç°è¡¨ä¸­ç¬¦åˆæ¡ä»¶çš„æ•°æ®ä¸¤è¡Œè¿›è¡ŒåŒ¹é…å½¢æˆä¸€ä¸ªç»“æœè¡Œã€‚æ˜¾ç¤ºçš„æ•°æ®å†…å®¹æ²¡æœ‰äº¤å‰è¿æ¥å¤§ã€‚&lt;strong&gt;ä¹Ÿæ˜¯æ•°æ®åº“å¤šè¡¨æŸ¥è¯¢çš„é»˜è®¤å®ç°æ–¹å¼ã€‚&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰&lt;/strong&gt;ä½¿ç”¨æ ¼å¼ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.1&lt;/strong&gt; è¿è¡¨æŸ¥è¯¢è¿‡ç¨‹ä¸‰ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;INNER JION : é»˜è®¤é“¾æ¥æ–¹å¼ï¼Œ &lt;code&gt;INNER&lt;/code&gt; å¯ä»¥çœç•¥&lt;/li&gt;
&lt;li&gt;JION â€¦ USING : è§£å†³è¾ƒé•¿æ¡ä»¶ï¼Œä¿æŒèŠ‚ä¿­æ¥å£°æ˜å†…è¿æ¥æ–¹å¼&lt;/li&gt;
&lt;li&gt;NATURAL JOIN : ç±»ä¼¼äº USING æ–¹æ³•ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æ£€æµ‹ä¸€åˆ—å€¼æ˜¯å¦ç›¸ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2.2&lt;/strong&gt; è¿è¡¨æŸ¥è¯¢æ ‡å‡†æ ¼å¼&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//é‡‡ç”¨ INNER JION æ–¹å¼æŸ¥è¯¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//SELECT å…·ä½“è¡Œ FROM æ•°æ®åº“1 INNERï¼ˆå¯ä»¥çœç•¥ï¼‰JOIN æ•°æ®åº“2 ON æ•°æ®è¡Œæè¿°;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SELECT column_one, column_two, ... FROM tableName_one INNER JION tableName_two ON Condition_Expression;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//é‡‡ç”¨ JION...USING ç›¸ç­‰è¿æ¥æŸ¥è¯¢æ–¹å¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SELECT * FROM tableName_one JION tableName_two USING(column_one, ...);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//é‡‡ç”¨ NATURAL JION è‡ªç„¶è¿æ¥æŸ¥è¯¢æ–¹å¼&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SELECT * FROM tableName_one NATURAL JION tableName_two;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ3ï¼‰&lt;/strong&gt;æ“ä½œå®ä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.1&lt;/strong&gt;é‡‡ç”¨ &lt;code&gt;INNER JION&lt;/code&gt; è¿è¡¨æŸ¥è¯¢&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-0a55fba6da7b1789.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-20 00.10.57.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.2&lt;/strong&gt; é‡‡ç”¨ &lt;code&gt;JION...USING()&lt;/code&gt; è¿è¡¨æŸ¥è¯¢&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-7685938dc35e7563.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-22 22.05.44.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.3&lt;/strong&gt; é‡‡ç”¨ &lt;code&gt;NATURE&lt;/code&gt; è¿è¡¨æŸ¥è¯¢&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-1d1d594962201b69.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-22 22.12.18.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ä¸‰ç§æŸ¥è¯¢æ–¹å¼ç‰¹ç‚¹å°ç»“&lt;/strong&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æœ‰ä¸Šé¢è¿è¡¨æŸ¥è¯¢å®ä¾‹å¯ä»¥çœ‹å‡ºï¼š&lt;br&gt;&lt;strong&gt;&lt;code&gt;INNER JION&lt;/code&gt; &lt;/strong&gt; åœ¨å®ç°å¤šæ¡ä»¶æŸ¥è¯¢è¿‡ç¨‹ä¸­éœ€è¦ä½¿ç”¨å¤šä¸ª Condations æƒ…å†µï¼Œä½¿ç”¨æ›´åŠ çµæ´»å¯ä»¥æœ‰ &lt;code&gt;&amp;gt;&lt;/code&gt;ã€&lt;code&gt;&amp;lt;&lt;/code&gt;ã€ç­‰&lt;br&gt;&lt;strong&gt;&lt;code&gt;JION...USING()&lt;/code&gt;&lt;/strong&gt; åœ¨å®ç°å®Œå…¨çš„ç­‰äºçš„åŸºç¡€ä¸Šå¯ä»¥å®ç”¨ï¼Œè¿™æ ·ä¸éœ€è¦å†™å…·ä½“çš„ &lt;code&gt;=&lt;/code&gt; è¯­å¥&lt;br&gt;&lt;strong&gt;&lt;code&gt;NATURE&lt;/code&gt;&lt;/strong&gt;å¯ä»¥å®ç°åˆ—çš„ç›¸ç­‰ï¼Œä½†æ˜¯ä½¿ç”¨åœºæ™¯æ˜¯åœ¨è¡¨æ ¼ä¸­&lt;strong&gt;ä»…æœ‰ä¸€åˆ—æ˜¯ç›¸ç­‰çš„&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;å¤–è¿æ¥-OUTER-JOIN&quot;&gt;&lt;a href=&quot;#å¤–è¿æ¥-OUTER-JOIN&quot; class=&quot;headerlink&quot; title=&quot;å¤–è¿æ¥(OUTER JOIN)&quot;&gt;&lt;/a&gt;å¤–è¿æ¥(OUTER JOIN)&lt;/h3&gt;&lt;p&gt;åœ¨å¤–è¿æ¥å¤šè¡¨æŸ¥è¯¢ä¸­æœ‰ä¸‰ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ1ï¼‰&lt;/strong&gt;å¤–è¿æ¥ç‰¹ç‚¹ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt; å¤–è¿æ¥å¯ä»¥è¯´æ˜¯å†…è¿æ¥çš„è¡ç”Ÿï¼Œåœ¨æ­¤åŸºç¡€ä¸Šå¯ä»¥å®ç°åœ¨æ¡ä»¶æ²¡æœ‰ç¬¦åˆçš„åŸºç¡€ä¸Šä¹Ÿä¼šæŠŠæ•°æ®åˆ—ä¸¾å‡ºæ¥ã€‚è€Œä¸”å¤–è¿æ¥åˆ†ä¸ºï¼šLEFTã€RIGHT å’Œ FULL è¿æ¥ä¸‰ç§æƒ…å†µï¼Œ&lt;strong&gt;&lt;code&gt;SQLite&lt;/code&gt;ä»…ä»…æ”¯æŒ &lt;code&gt;LEFT&lt;/code&gt; é“¾æ¥æ–¹å¼&lt;/strong&gt;ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ2ï¼‰&lt;/strong&gt;ä½¿ç”¨æ ¼å¼ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;INNER JION : é»˜è®¤é“¾æ¥æ–¹å¼ï¼Œ &lt;code&gt;INNER&lt;/code&gt; å¯ä»¥çœç•¥&lt;/li&gt;
&lt;li&gt;JION â€¦ USING : è§£å†³è¾ƒé•¿æ¡ä»¶ï¼Œä¿æŒèŠ‚ä¿­æ¥å£°æ˜å†…è¿æ¥æ–¹å¼&lt;/li&gt;
&lt;li&gt;NATURAL JOIN : ç±»ä¼¼äº USING æ–¹æ³•ï¼Œä½†æ˜¯ä¼šè‡ªåŠ¨æ£€æµ‹ä¸€åˆ—å€¼æ˜¯å¦ç›¸ç­‰&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;2.1&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//SELECT å…·ä½“è¡Œ FROM æ•°æ®åº“1 INNERï¼ˆå¯ä»¥çœç•¥ï¼‰JOIN æ•°æ®åº“2 ON æ•°æ®è¡Œæè¿°;&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SELECT column_one, column_two, ... FROM tableName_one LEFT OUTER JION tableName ON Condition_Expression;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;ï¼ˆ3ï¼‰&lt;/strong&gt;æ“ä½œå®ä¾‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-f591c5239159984c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-20 00.23.21.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å‘å¸ƒæ—¶é—´ï¼š11/19/2017 00:12:12&lt;br&gt;ç‰ˆæœ¬ç¬¬ä¸€æ¬¡ä¿®æ”¹ï¼š11/20/2017 00:33:37&lt;br&gt;ä¸è¡Œæ‰›ä¸ä½äº†ã€‚&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å‰ç¯‡åšæ–‡å°ç¼–å†™äº†åŸºæœ¬çš„ &lt;code&gt;SQLite&lt;/code&gt; æ“ä½œæ–¹å¼ï¼Œå¦‚æœåªæ˜¯å¯¹æ•°æ®åº“é‡‡å–åŸºæœ¬çš„æ“ä½œçœ‹å®Œå°ç¼–ç¬¬ä¸€ç¯‡åšæ–‡å°±å¯ä»¥ã€‚åé¢å°ç¼–å°†ä¼šè®²è¿°ä¸€äº›æ•°æ®çš„ç›¸å¯¹æ¥è¯´æ¯”è¾ƒå¤æ‚çš„æ“ä½œæ–¹å¼ã€‚&lt;/p&gt;
&lt;p&gt;æœ¬ç¯‡å°†ä¼šåˆ—å‡ºä¸‹é¢çš„æ•°æ®åº“ç›¸å…³çŸ¥è¯†ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å¤šè¡¨æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;è¿ç®—ç¬¦&lt;/li&gt;
&lt;li&gt;è¡¨è¾¾å¼&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;å¤šè¡¨æŸ¥è¯¢&quot;&gt;&lt;a href=&quot;#å¤šè¡¨æŸ¥è¯¢&quot; class=&quot;headerlink&quot; title=&quot;å¤šè¡¨æŸ¥è¯¢&quot;&gt;&lt;/a&gt;å¤šè¡¨æŸ¥è¯¢&lt;/h2&gt;&lt;p&gt;æ¥ç€ä¸Šç¯‡æ–‡ç« å°ç¼–æŠŠæ•°æ®åº“ä¸­æŸ¥è¯¢ä½¿ç”¨çš„å¤šè¡¨æŸ¥è¯¢ç»™å¤§å®¶åšè®²è§£ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¤šè¡¨æŸ¥è¯¢è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„å…³é”®è¯æ˜¯: &lt;code&gt;join&lt;/code&gt;ï¼Œè€Œä¸”åœ¨å¤šè¡¨è¿æ¥æŸ¥è¯¢è¿‡ç¨‹ä¸­æœ‰ä¸‰ç§æƒ…å†µã€‚&lt;/p&gt;
&lt;p&gt;åˆ†åˆ«æ˜¯ï¼šäº¤å‰è¿æ¥ã€å†…è¿æ¥å’Œå¤–è¿æ¥ã€‚&lt;/p&gt;
&lt;p&gt;ä¸€ä¸‹æ“ä½œå‡ä»¥ &lt;code&gt;Employee&lt;/code&gt; å’Œ &lt;code&gt;Programmer&lt;/code&gt; ä¸¤ä¸ªè¡¨æ ¼ä¸ºåŸºç¡€æ¥å®ç°ä½¿ç”¨ç”¨ä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å†…å®¹æ˜¯ä¹±å–çš„ï¼Œä¸Šæ¬¡å–åå¯èƒ½æ°”åˆ°åœ¨æ„çš„äººï¼Œåé¢åå­—å‡æ˜¯ä¹±å–ï¼ï¼ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-2dfc0cb76093a392.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-20 01.14.27.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="æ•°æ®åº“" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="SQLite" scheme="http://yoursite.com/tags/SQLite/"/>
    
  </entry>
  
  <entry>
    <title>SQLite å­¦ä¹ -åŸºç¡€çŸ¥è¯†</title>
    <link href="http://yoursite.com/2017/11/14/SQLite%20%E5%AD%A6%E4%B9%A0-%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86/"/>
    <id>http://yoursite.com/2017/11/14/SQLite å­¦ä¹ -åŸºæœ¬çŸ¥è¯†/</id>
    <published>2017-11-14T12:24:13.000Z</published>
    <updated>2017-11-22T16:15:20.000Z</updated>
    
    <content type="html">&lt;p&gt;å‡ å¤©å¾—é—²ï¼Œä¸Šå‘¨ä¸€æƒ³æŠŠæ•°æ®åº“ç›¸å…³çŸ¥è¯†æ•´ç†ä¸€ä»½å½“åšåœ¨çœ‹åˆ°æ•°æ®åº“åç»­ï¼Œä½†æ˜¯ä¸€ç›´éƒ½åœ¨çœ‹å…¬å¸çš„é¡¹ç›®é‡æ„å·¥ä½œã€‚ä»Šå¤©ç»ˆäºæŠŠç›¸å…³çš„æŠ€æœ¯é—®é¢˜è§£å†³ï¼Œæ‰“ç®—é‡æ–°æ•´ç†ä¸€ä»½æ–°çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;
&lt;h1 id=&quot;æ•°æ®åº“&quot;&gt;&lt;a href=&quot;#æ•°æ®åº“&quot; class=&quot;headerlink&quot; title=&quot;æ•°æ®åº“&quot;&gt;&lt;/a&gt;æ•°æ®åº“&lt;/h1&gt;&lt;p&gt;å°ç¼–åœ¨è¿™é‡Œæå‡ºä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ•°æ®åº“ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨ç³»ç»Ÿç¼–è¯‘æˆ–è€…è¿è¡ŒæœŸé—´åŒæ—¶ä½¿ç”¨å†…å­˜æˆ–è€…ç›¸å…³å˜é‡å‚¨å­˜åœ¨å †ä¸­å¯ä»¥å®ç°ç›¸å…³æ•°æ®ä¿å­˜ã€‚ä½†æ˜¯åœ¨å ç”¨çš„å†…å­˜æˆ–è€…æ˜¯å †ä¸­çš„ç›¸å…³å†…å®¹åœ¨ç¨‹åº &lt;code&gt;KILL&lt;/code&gt; ä¹‹åï¼Œç›¸å…³çš„æ•°æ®ä¹Ÿä¼šè¢«ç³»ç»Ÿå›æ”¶ã€‚æˆ‘ä»¬ä¸ºäº†ä¿å­˜ç›¸å…³çš„æ•°æ®å®ç°æ°¸ä¹…æ€§çš„å‚¨å­˜çš„ï¼Œå°±æ˜¯è€ƒè™‘ç£ç›˜çš„å‚¨å­˜èƒ½åŠ›ã€‚è¿™æ—¶æ–‡ä»¶å‚¨å­˜å’Œæ•°æ®åº“å‚¨å­˜å°±ä¼šæ˜¯æˆ‘ä»¬é€‰æ‹©çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;å°ç¼–è¿™é‡Œå°±ä»¥ &lt;code&gt;SQLite&lt;/code&gt; æ¥è®²è§£ç›¸å…³æ•°æ®åŸºæœ¬åŸç†å’Œæ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&quot;SQLite&quot;&gt;&lt;a href=&quot;#SQLite&quot; class=&quot;headerlink&quot; title=&quot;SQLite&quot;&gt;&lt;/a&gt;SQLite&lt;/h2&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;é¦–å…ˆè¦æ˜ç™½ &lt;code&gt;SQLite&lt;/code&gt; æ•°æ®åº“çš„ä½¿ç”¨ä¸éœ€è¦è¿›è¡Œç›¸å…³çš„é…ç½®ï¼Œä¹Ÿä¸éœ€è¦ç›¸å…³çš„ä»¥æ¥å…³ç³»å°±æ˜¯é€šè¿‡ &lt;code&gt;API&lt;/code&gt; çš„è°ƒç”¨å°±å¯ä»¥å®ç°åŸºæœ¬çš„æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;åœ¨æ•°æ®æ“ä½œè¿‡ç¨‹ä¸­ç»å¸¸ä½¿ç”¨çš„å°±æ˜¯ï¼šå¢ã€åˆ ã€æ”¹å’ŒæŸ¥å››ä¸­åŸºæœ¬çš„æ“ä½œã€‚&lt;/p&gt;
&lt;h3 id=&quot;å…³é”®å­—&quot;&gt;&lt;a href=&quot;#å…³é”®å­—&quot; class=&quot;headerlink&quot; title=&quot;å…³é”®å­—&quot;&gt;&lt;/a&gt;å…³é”®å­—&lt;/h3&gt;&lt;p&gt;é¦–å…ˆæ˜¯æ•°æ®åº“è¡¨åˆ›å»ºã€æ’å…¥æ–°çš„ä¸€è¡Œå’Œåˆ é™¤ï¼š&lt;code&gt;CREATE&lt;/code&gt;ã€&lt;code&gt;ALTER&lt;/code&gt; å’Œ &lt;code&gt;DROP&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;å…·ä½“æ¯ä¸€è¡Œçš„å¢åˆ æ”¹æŸ¥ï¼š&lt;code&gt;INSERT&lt;/code&gt;ã€&lt;code&gt;DELETE&lt;/code&gt;ã€&lt;code&gt;SELECT&lt;/code&gt; å’Œ &lt;code&gt;UPDATE&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;!-- more --&gt;
&lt;h3 id=&quot;æ“ä½œå®ä¾‹&quot;&gt;&lt;a href=&quot;#æ“ä½œå®ä¾‹&quot; class=&quot;headerlink&quot; title=&quot;æ“ä½œå®ä¾‹&quot;&gt;&lt;/a&gt;æ“ä½œå®ä¾‹&lt;/h3&gt;&lt;h4 id=&quot;1ï¼‰æ•°æ®è¡¨ä¸­åˆ—çš„ç›¸å…³æ“ä½œå’Œå®ä¾‹&quot;&gt;&lt;a href=&quot;#1ï¼‰æ•°æ®è¡¨ä¸­åˆ—çš„ç›¸å…³æ“ä½œå’Œå®ä¾‹&quot; class=&quot;headerlink&quot; title=&quot;1ï¼‰æ•°æ®è¡¨ä¸­åˆ—çš„ç›¸å…³æ“ä½œå’Œå®ä¾‹&quot;&gt;&lt;/a&gt;1ï¼‰æ•°æ®è¡¨ä¸­åˆ—çš„ç›¸å…³æ“ä½œå’Œå®ä¾‹&lt;/h4&gt;&lt;p&gt;&lt;strong&gt;å°ç¼–ä¸€ä¸‹æ“ä½œæ˜¯åœ¨ &lt;code&gt;MAC&lt;/code&gt; ä¸Šæ“ä½œ&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;åœ¨ç»ˆç«¯æ•°æ®çš„åˆ›å»ºï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(1)&lt;/strong&gt;æ•°æ®åº“åˆ›å»º&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºæ•°æ®åº“ JackJin.db &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Sqlite3 JackJin.db&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(2)&lt;/strong&gt;åˆ›å»ºæ•°æ®åº“è¡¨&lt;/p&gt;
&lt;p&gt;åˆ›å»ºæ•°æ®åº“çš„åŸºæœ¬çš„è¯­æ³•æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ•°æ®åº“è¡¨æ ¼åˆ›å»ºçš„åŸºæœ¬çš„è¯­æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CREATE TABLE table_name(column_one type, column_two type, ...);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//create table è¡¨å(è¡Œå å½“å‰è¡Œæ•°æ®ç±»å‹, ...);&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å°ç¼–ä»¥å…¬å¸ä¸ºä¾‹åœ¨ç»ˆç«¯æ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-cf01782ef4981d1f.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-14 20.16.10.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°æ’æ›²&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(2.1)&lt;/strong&gt;æ•°æ®åº“è¡¨æ ¼æŸ¥è¯¢&lt;/p&gt;
&lt;p&gt;æ•°æ®åº“ç›¸å…³æ“ä½œçš„è¯­æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç®€å•è¡¨æ ¼æŸ¥è¯¢ -- åªåˆ—å‡ºè¡¨æ ¼åç§°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.tables&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è¯¦ç»†è¡¨æ ¼æŸ¥è¯¢ -- åˆ—å‡ºè¡¨æ ¼åç§°å’Œç›¸å…³åˆ›å»ºæ‰§è¡Œè¯­å¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.schme&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ç»ˆç«¯çš„åŸºæœ¬æ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-547fdedc07179652.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-14 21.27.54.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(3)&lt;/strong&gt;å¯¹è¡¨ç°æœ‰çš„åˆ—æ“ä½œ&lt;/p&gt;
&lt;p&gt;ç°æœ‰è¡¨æ ¼ä¸­çš„åˆ—æ“ä½œåˆ†ä¸ºä¸‰ç§æƒ…å†µï¼šæ–°å¢åˆ—ã€åˆ é™¤å·²æœ‰çš„åˆ—å’Œä¿®æ”¹ç°æœ‰åˆ—çš„å±æ€§ã€‚&lt;/p&gt;
&lt;p&gt;æ“ä½œçš„åŸºæœ¬è¯­æ³•ç»“æ„ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ–°å¢ åŸºæœ¬çš„è¯­æ³•ç»“æ„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ALTER TABLE table_name ADD column &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åˆ é™¤ åŸºæœ¬çš„è¯­æ³•ç»“æ„&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ALTER TABLE table_name DROP COLUMN column;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ä¿®æ”¹åˆ—å­—æ®µçš„å±æ€§&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ALTER TABLE table_name ALTER COLUMN column &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ç»ˆç«¯çš„åŸºæœ¬æ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.1&lt;/strong&gt; å¯¹æ•°æ®è¡¨æ–°å¢åˆ—&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-bc3c0b6014f5352e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-14 21.41.07.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.2&lt;/strong&gt; å¯¹æ•°æ®è¡¨åˆ é™¤åˆ—&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-20278094efeb67e7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-14 21.51.55.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;3.3&lt;/strong&gt; å¯¹æ•°æ®ä¿®æ”¹ç›¸å…³åˆ—å±æ€§&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-d9a5593f194d23af.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-14 21.55.28.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨ä¸Šé¢çš„è¡¨æ ¼ä¸­å¯ä»¥çœ‹å‡ºåœ¨æ“ä½œè¿‡ç¨‹ä¸­ &lt;strong&gt;æ–°å¢åŠ çš„åˆ—æˆåŠŸ&lt;/strong&gt;ï¼Œ ä½†åœ¨å®ç°æ•°æ®è¡¨åˆ é™¤å’Œä¿®æ”¹åˆ—çš„ç›¸å…³ä¿¡æ¯ä¸­å¤±è´¥ã€‚ å°ç¼–æ‰¾äº†ä¸‹èµ„æ–™ï¼š&lt;code&gt;Sqlite3&lt;/code&gt; å€¼æ”¯æŒç›¸å…³å¢åŠ å’Œé‡åæ°‘æ“ä½œã€‚ &lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;2ï¼‰æ•°æ®è¡¨ä¸­è¡Œçš„ç›¸å…³æ“ä½œå’Œå®ä¾‹&quot;&gt;&lt;a href=&quot;#2ï¼‰æ•°æ®è¡¨ä¸­è¡Œçš„ç›¸å…³æ“ä½œå’Œå®ä¾‹&quot; class=&quot;headerlink&quot; title=&quot;2ï¼‰æ•°æ®è¡¨ä¸­è¡Œçš„ç›¸å…³æ“ä½œå’Œå®ä¾‹&quot;&gt;&lt;/a&gt;2ï¼‰æ•°æ®è¡¨ä¸­è¡Œçš„ç›¸å…³æ“ä½œå’Œå®ä¾‹&lt;/h4&gt;&lt;p&gt;åœ¨æ•°æ®åº“ä¸­è¡Œçš„æ“ä½œæœ‰å¢ã€åˆ ã€æ”¹å’ŒæŸ¥ï¼Œå››ä¸­åŸºæœ¬æ“ä½œçš„æ–¹å¼ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(1)&lt;/strong&gt;æ’å…¥æ•°æ®&lt;/p&gt;
&lt;p&gt;åœ¨æ•°æ®è¡¨æ’å…¥æ•°æ®ä¸¤ç§æ–¹å¼:&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;1.1 æ•°æ®è¡¨&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å¯¹ç°æœ‰è¡¨æ ¼æ’å…¥æ•°æ®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;INSERT INTO table_name VALUES (param_one, param_two, ...);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;è¿™ç§æ–¹å¼æ˜¯è¦å¯¹æ‰€æœ‰çš„å‚æ•°è¿›è¡Œæ•°æ®è¡¨çš„æ’å…¥ï¼ï¼ï¼&lt;/strong&gt;&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;1.2 å±€éƒ¨çš„å‚æ•°é€‰æ‹©æ’å…¥&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//å®ç°æ•°æ®è¡¨æ•°æ®çš„å±€éƒ¨æ•°æ®æ’å…¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;INSERT INTO table_name(column_one, column_two, ...) VALUES (param_one, param_two, ...);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç»ˆç«¯çš„å®ä¾‹æ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-c274918e872d9441.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-14 22.29.39.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;å°æ’æ›²&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;ç”±ä¸Šé¢çœ‹å‡ºå°ç¼–åœ¨æŸ¥çœ‹æ•°æ®è¾“å‡ºè¿›è¡Œç›¸å…³æ ¼å¼åŒ–æ“ä½œï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åœ¨è¾“å‡ºæ—¶åŒ…æ‹¬è¡Œå¤´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlite&amp;gt; .header on&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlite&amp;gt; .mode colum&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;(2)&lt;/strong&gt;åˆ é™¤æ•°æ®&lt;/p&gt;
&lt;p&gt;åˆ é™¤æ•°æ®ä¹Ÿæœ‰ä¸¤ç§æ“ä½œæ–¹æ³•ï¼š&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;2.1 åˆ é™¤æ•°æ®æŒ‰ç…§æ¡ä»¶&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ•°æ®åº“æ“ä½œçš„åŸºæœ¬è¯­æ³• condition æ˜¯åˆ é™¤çš„æ¡ä»¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DELETE FROM table_name WHERE condition;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;2.1 åˆ é™¤å…¨éƒ¨æ•°æ®&lt;/strong&gt;&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//åˆ é™¤æ•°æ®åº“ä¸­çš„å…¨éƒ¨æ•°æ®å†…å®¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;DELETE FROM table_name;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åˆ é™¤æ•°æ®çš„å®åŠ›æ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-1f4ae7490d89e45e.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-14 23.06.16.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ä¸Šé¢å¯ä»¥çœ‹å‡ºå°ç¼–ä¸ºäº†æ›´å¥½çš„å±•ç¤ºæ•°æ® &lt;code&gt;DELETE&lt;/code&gt; æ•ˆæœå°±åœ¨åŸæ¥çš„åŸºç¡€åˆå¢åŠ ä¸€æ¡æ•°æ®ï¼Œæ›´å¥½å±•ç¤ºåˆ é™¤è¿‡ç¨‹ä¸­æ•ˆæœã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;&lt;strong&gt;(3)&lt;/strong&gt;ä¿®æ”¹æ•°æ®&lt;/p&gt;
&lt;p&gt;æ•°æ®ä¿®æ”¹åŸºæœ¬è¯­æ³•ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ•°æ®ä¿®æ”¹çš„åŸºæœ¬è¯­æ³•ç±»å‹ condation æ˜¯æ•°æ®ä¿®æ”¹æ¡ä»¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;UPDATE table_name SET column_one = value1, column_two = value2, ... WHERE condation;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ•°æ®ä¿®æ”¹çš„å®ä¾‹æ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-0924ab7dde94b7a5.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-14 23.16.47.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;(4)&lt;/strong&gt;æŸ¥è¯¢æ•°æ®&lt;/p&gt;
&lt;p&gt;æ•°æ®æŸ¥è¯¢çš„åŸºæœ¬æ“ä½œåŸºæœ¬åˆ†ä¸ºä¸¤ç§ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;å•ä¸ªè¡¨æ ¼æ•°æ®æŸ¥è¯¢&lt;/li&gt;
&lt;li&gt;å¤šä¸ªè¡¨æ ¼æ•°æ®æŸ¥è¯¢&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;4.1 å•æ ‡æ•°æ®æŸ¥è¯¢&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;å•æ ‡çš„æ•°æ®æŸ¥è¯¢è¿‡ç¨‹ä¸­ä¸€èˆ¬åˆ†ä¸ºä¸¤ç§æƒ…å†µï¼š&lt;br&gt;æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®å’ŒæŒ‰æ¡ä»¶æ•°æ®æŸ¥è¯¢ã€‚&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;a.&lt;/strong&gt;æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®  &lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//**a.**æŸ¥è¯¢æ‰€æœ‰çš„æ•°æ®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SELECT * FROM table_name;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;b.&lt;/strong&gt;æŒ‰æ¡ä»¶æŸ¥è¯¢æ•°æ®  &lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//**b.**æŒ‰æ¡ä»¶æŸ¥è¯¢æ•°æ® column1 æ˜¯è¦æŸ¥è¯¢åˆ—å &amp;amp;condation æ˜¯è¦æŸ¥è¯¢çš„æ¡ä»¶&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;SELECT column1, column2, ... FROM table_name WHERE condation;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-cdd0cd24fa746483.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-14 23.31.54.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ç›®å‰å°ç¼–å¯¹ &lt;code&gt;SQLite&lt;/code&gt; çš„åŸºæœ¬æ“ä½œåšæ–‡åˆ°è¿™é‡Œçš„ï¼Œå¯ä»¥çœ‹å‡ºåœ¨å¤šæ¡ä»¶æŸ¥è¯¢è¿‡ç¨‹ä¸­æ“ä½œå¤±è´¥çš„å°æ¡ˆä¾‹ã€‚&lt;/p&gt;
&lt;p&gt;åé¢ä¼šæ•´ç†æ•°æ®ä¹‹é—´æ¯”è¾ƒå¤æ‚çš„å…³ç³»æ“ä½œã€‚&lt;/p&gt;
&lt;p&gt;å‘å¸ƒäºï¼š2017/11/14 23:34:40&lt;br&gt;åœ°ç‚¹ï¼šè®¯ç¾ç§‘æŠ€å¹¿åœº 1 åº§ 10 æ¥¼&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å‡ å¤©å¾—é—²ï¼Œä¸Šå‘¨ä¸€æƒ³æŠŠæ•°æ®åº“ç›¸å…³çŸ¥è¯†æ•´ç†ä¸€ä»½å½“åšåœ¨çœ‹åˆ°æ•°æ®åº“åç»­ï¼Œä½†æ˜¯ä¸€ç›´éƒ½åœ¨çœ‹å…¬å¸çš„é¡¹ç›®é‡æ„å·¥ä½œã€‚ä»Šå¤©ç»ˆäºæŠŠç›¸å…³çš„æŠ€æœ¯é—®é¢˜è§£å†³ï¼Œæ‰“ç®—é‡æ–°æ•´ç†ä¸€ä»½æ–°çŸ¥è¯†ç‚¹ã€‚&lt;/p&gt;
&lt;h1 id=&quot;æ•°æ®åº“&quot;&gt;&lt;a href=&quot;#æ•°æ®åº“&quot; class=&quot;headerlink&quot; title=&quot;æ•°æ®åº“&quot;&gt;&lt;/a&gt;æ•°æ®åº“&lt;/h1&gt;&lt;p&gt;å°ç¼–åœ¨è¿™é‡Œæå‡ºä¸€ä¸ªé—®é¢˜ï¼šä¸ºä»€ä¹ˆè¦ä½¿ç”¨æ•°æ®åº“ï¼Ÿ&lt;/p&gt;
&lt;p&gt;åœ¨ç³»ç»Ÿç¼–è¯‘æˆ–è€…è¿è¡ŒæœŸé—´åŒæ—¶ä½¿ç”¨å†…å­˜æˆ–è€…ç›¸å…³å˜é‡å‚¨å­˜åœ¨å †ä¸­å¯ä»¥å®ç°ç›¸å…³æ•°æ®ä¿å­˜ã€‚ä½†æ˜¯åœ¨å ç”¨çš„å†…å­˜æˆ–è€…æ˜¯å †ä¸­çš„ç›¸å…³å†…å®¹åœ¨ç¨‹åº &lt;code&gt;KILL&lt;/code&gt; ä¹‹åï¼Œç›¸å…³çš„æ•°æ®ä¹Ÿä¼šè¢«ç³»ç»Ÿå›æ”¶ã€‚æˆ‘ä»¬ä¸ºäº†ä¿å­˜ç›¸å…³çš„æ•°æ®å®ç°æ°¸ä¹…æ€§çš„å‚¨å­˜çš„ï¼Œå°±æ˜¯è€ƒè™‘ç£ç›˜çš„å‚¨å­˜èƒ½åŠ›ã€‚è¿™æ—¶æ–‡ä»¶å‚¨å­˜å’Œæ•°æ®åº“å‚¨å­˜å°±ä¼šæ˜¯æˆ‘ä»¬é€‰æ‹©çš„å¯¹è±¡ã€‚&lt;/p&gt;
&lt;p&gt;å°ç¼–è¿™é‡Œå°±ä»¥ &lt;code&gt;SQLite&lt;/code&gt; æ¥è®²è§£ç›¸å…³æ•°æ®åŸºæœ¬åŸç†å’Œæ“ä½œã€‚&lt;/p&gt;
&lt;h2 id=&quot;SQLite&quot;&gt;&lt;a href=&quot;#SQLite&quot; class=&quot;headerlink&quot; title=&quot;SQLite&quot;&gt;&lt;/a&gt;SQLite&lt;/h2&gt;
    
    </summary>
    
      <category term="æ•°æ®åº“" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="SQLite" scheme="http://yoursite.com/tags/SQLite/"/>
    
  </entry>
  
  <entry>
    <title>SQLite æ•°æ®åº“åŸºæœ¬æ“ä½œ</title>
    <link href="http://yoursite.com/2017/11/07/SQLite%20%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C/"/>
    <id>http://yoursite.com/2017/11/07/SQLite åŸºæœ¬æ“ä½œ/</id>
    <published>2017-11-06T16:49:29.000Z</published>
    <updated>2017-11-12T16:41:44.000Z</updated>
    
    <content type="html">&lt;p&gt;&lt;code&gt;Sqlite&lt;/code&gt; å­¦ä¹ æ€»ç»“&lt;/p&gt;
&lt;h3 id=&quot;SQLite-çš„å®‰è£…&quot;&gt;&lt;a href=&quot;#SQLite-çš„å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;SQLite çš„å®‰è£…&quot;&gt;&lt;/a&gt;&lt;code&gt;SQLite&lt;/code&gt; çš„å®‰è£…&lt;/h3&gt;&lt;p&gt;ä¸€èˆ¬åœ¨ &lt;code&gt;MAC&lt;/code&gt; ä¸Šé¢ç³»ç»Ÿä¼šè‡ªå¸¦ &lt;code&gt;Sqlite&lt;/code&gt; çš„æ•°æ®åº“ç‰ˆæœ¬çš„ã€‚&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æœ¬åœ°çš„æ•°æ®åº“ç‰ˆæœ¬å·å‘¢ï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥æ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼ˆä»¥ &lt;code&gt;mac&lt;/code&gt; ä¸ºä¾‹ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sqlite3&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å°ç¼–çš„ &lt;code&gt;MAC&lt;/code&gt; ä¸Šè¾“å‡ºçš„å†…å®¹æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SQLite version &lt;span class=&quot;number&quot;&gt;3.16&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-11&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-04&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;19&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;39&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//å¯ä»¥çœ‹åˆ° SQLite çš„ç‰ˆæœ¬ä¿¡æ¯å’Œå®‰è£…æ—¶é—´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enter &lt;span class=&quot;string&quot;&gt;&quot;.help&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; usage hints.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Connected to a transient &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;-memory database.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Use &lt;span class=&quot;string&quot;&gt;&quot;.open FILENAME&quot;&lt;/span&gt; to reopen on a persistent database.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;SQLite-è¯­æ³•åŸºæœ¬æ“ä½œ&quot;&gt;&lt;a href=&quot;#SQLite-è¯­æ³•åŸºæœ¬æ“ä½œ&quot; class=&quot;headerlink&quot; title=&quot;SQLite è¯­æ³•åŸºæœ¬æ“ä½œ&quot;&gt;&lt;/a&gt;SQLite è¯­æ³•åŸºæœ¬æ“ä½œ&lt;/h3&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;ï¼ˆ1ï¼‰åˆ›å»ºè¡¨æ ¼&lt;br&gt;åˆ›å»ºæ•°æ®è¡¨æ ¼åŸºæœ¬æ“ä½œè¯­æ³•æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CREATE TABLE datebase_name(&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;column_1 datetype PRIMARY-KEY, &lt;span class=&quot;comment&quot;&gt;//å¯ä»¥æœ‰å¤šä¸ªKEYï¼ˆä¸»ï¼‰é”®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;column_2 datetype,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;column_3 datetype,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;... ...&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¾‹å¦‚åˆ›å»ºç­çº§çš„ &lt;code&gt;Table&lt;/code&gt; è¡¨æ ¼ï¼Œä»¥ &lt;code&gt;ID&lt;/code&gt; ä¸ºä¸»é”®ã€‚å®ä¾‹å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;CREATE TABLE ClassRoom(RoomID &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; perimary key, StudentNumber &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, Grade &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;æŸ¥è¯¢æ•°æ®åº“åˆ›å»ºæ˜¯å¦æˆåŠŸï¼š&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlite&amp;gt; .table &lt;span class=&quot;comment&quot;&gt;//ç»ˆç«¯è¾“å…¥è¯­å¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;ClassRoom&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å¦‚æœæŸ¥è¯¢æ•°æ®åº“ç»†èŠ‚ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;sqlite&amp;gt; .schema &lt;span class=&quot;comment&quot;&gt;//æŸ¥è¯¢æ•°æ®å†…å®¹å…·ä½“ç»†èŠ‚&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlite&amp;gt; .schema&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CREATE TABLE ClassRoom(RoomID &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; perimary key, StudentNumber &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, Grade &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;CREATE TABLE Person(StudentID &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, name &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;, age &lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt;, address &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;, sex &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sqlite&amp;gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-0cbae91e21960869.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-09 00.47.12.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰è¡¨æ ¼åˆ é™¤&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;drop table &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; exist Person;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨å¼€å§‹æ—¶å¯¹æ•°æ®è¡¨æ ¼è¿›è¡Œåˆ é™¤ï¼Œå¾—åˆ°ä¸‹é¢çš„ç»“æœï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-823005bd8316d1a9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-09 00.47.24.png&quot;&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;ç»è¿‡å°ç¼–ç¿»çœ‹èµ„æ–™ï¼ŒåŸæ¥æ˜¯åœ¨åˆ›å»ºæ•°æ®åº“æ—¶åªæ˜¯åˆ›å»ºè¡¨æ ¼ã€‚å¹¶æ²¡æœ‰åˆ›å»ºæ•°æ® &lt;code&gt;Table&lt;/code&gt; æ‰€æ”¾çš„æ•°æ®åº“ã€‚è€Œä¸”åœ¨ &lt;code&gt;sqlite3&lt;/code&gt; ä½¿ç”¨è¿‡ç¨‹ä¸­æ¯ä¸ªè¯­å¥åé¢çš„ç»“å°¾éœ€è¦æ·»åŠ  &lt;strong&gt;&lt;code&gt;;&lt;/code&gt;&lt;/strong&gt; æ¥ç»“å°¾ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡æ˜¯ä½¿ç”¨ç»ˆç«¯å¯¹è¡¨æ ¼è¿›è¡Œåˆ é™¤çš„æ­£ç¡®æ“ä½œï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-d49a8edb2ff9f6ec.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-09 09.38.41.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆ3ï¼‰æ•°æ®æ’å…¥  &lt;/p&gt;
&lt;p&gt;å¯¹åˆ›å»ºå¥½çš„æ•°æ®åº“ &lt;code&gt;Table&lt;/code&gt;è¿›è¡Œæ•°æ®åº“çš„æ’å…¥æ“ä½œå®ç°æœ‰ä¸¤ç§ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ–¹å¼ä¸€&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;insert into table_name(colum1, colum2, ...) values (param1, param2, ...);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ–¹å¼äºŒ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;insert into table_name values(param1, param2, ...);&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;å…·ä½“å®ä¾‹å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-592676815750a18a.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;1877765-0ee21d54775d5afa.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;ï¼ˆ4ï¼‰æ•°æ®å¢åŠ &lt;br&gt;ï¼ˆ5ï¼‰æ•°æ®ä¿®æ”¹&lt;br&gt;ï¼ˆ6ï¼‰æ•°æ®æŸ¥æ‰¾  &lt;/p&gt;
&lt;p&gt;åœ¨æ•°æ®æŸ¥æ‰¾è¿‡ç¨‹ä¸­æˆ‘ä»¬æ¯”è¾ƒå¸¸ç”¨çš„æŸ¥æ‰¾æ–¹å¼æ˜¯ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŸ¥è¯¢æ‰€æœ‰æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å–æ•°æ®åº“ä¸­æ‰€æœ‰çš„æ•°æ®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;select * from table_name;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;å…·ä½“å®ä¾‹å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-a8d6824986b306b8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-09 09.52.36.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;åœ¨æ•°æ®æ˜¾ç¤ºçš„è¿‡ç¨‹ä¸­å¯ä»¥ä½¿æ•°æ®æ¸…æ¥šçš„ç½—åˆ—å‡ºæ¥ï¼Œå…·ä½“å®ç°ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;.header on &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;.mode colum&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;&lt;strong&gt;å…·ä½“å®ä¾‹å¦‚ä¸‹ï¼š&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-82d28393caab51f8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-09 09.56.02.png&quot;&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æŒ‰æ¡ä»¶æŸ¥è¯¢æ•°æ®&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-a5f1beaa1ce3c512.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;1877765-e896caf5ebdd870a.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-dac9d62e5bc97abf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;1877765-a6b05887d4902804.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;SQLite-è¡¨è¾¾å¼&quot;&gt;&lt;a href=&quot;#SQLite-è¡¨è¾¾å¼&quot; class=&quot;headerlink&quot; title=&quot;SQLite è¡¨è¾¾å¼&quot;&gt;&lt;/a&gt;SQLite è¡¨è¾¾å¼&lt;/h3&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-b9d54e53707bdc24.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;å±å¹•å¿«ç…§ 2017-11-09 10.05.51.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;SQLite&lt;/code&gt; ç´¢å¼•çš„å®ç°&lt;/p&gt;
&lt;p&gt;ç‰ˆæœ¬æäº¤æ—¶é—´ï¼š&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡æäº¤ï¼š11/7/2017 00:45:30&lt;br&gt;ç¬¬äºŒæ¬¡æäº¤ï¼š11/10/2017 00:19:35&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;http://www.runoob.com/sqlite/sqlite-tutorial.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.runoob.com/sqlite/sqlite-tutorial.html&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;&lt;code&gt;Sqlite&lt;/code&gt; å­¦ä¹ æ€»ç»“&lt;/p&gt;
&lt;h3 id=&quot;SQLite-çš„å®‰è£…&quot;&gt;&lt;a href=&quot;#SQLite-çš„å®‰è£…&quot; class=&quot;headerlink&quot; title=&quot;SQLite çš„å®‰è£…&quot;&gt;&lt;/a&gt;&lt;code&gt;SQLite&lt;/code&gt; çš„å®‰è£…&lt;/h3&gt;&lt;p&gt;ä¸€èˆ¬åœ¨ &lt;code&gt;MAC&lt;/code&gt; ä¸Šé¢ç³»ç»Ÿä¼šè‡ªå¸¦ &lt;code&gt;Sqlite&lt;/code&gt; çš„æ•°æ®åº“ç‰ˆæœ¬çš„ã€‚&lt;/p&gt;
&lt;p&gt;æŸ¥çœ‹æœ¬åœ°çš„æ•°æ®åº“ç‰ˆæœ¬å·å‘¢ï¼Œå¯ä»¥åœ¨ç»ˆç«¯è¾“å…¥æ‰§è¡Œä¸‹é¢çš„è¯­å¥ï¼ˆä»¥ &lt;code&gt;mac&lt;/code&gt; ä¸ºä¾‹ï¼‰ï¼š&lt;/p&gt;
&lt;p&gt;&lt;code&gt;sqlite3&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;å°ç¼–çš„ &lt;code&gt;MAC&lt;/code&gt; ä¸Šè¾“å‡ºçš„å†…å®¹æ˜¯ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SQLite version &lt;span class=&quot;number&quot;&gt;3.16&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;.0&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;2016&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-11&lt;/span&gt;&lt;span class=&quot;number&quot;&gt;-04&lt;/span&gt; &lt;span class=&quot;number&quot;&gt;19&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;09&lt;/span&gt;:&lt;span class=&quot;number&quot;&gt;39&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//å¯ä»¥çœ‹åˆ° SQLite çš„ç‰ˆæœ¬ä¿¡æ¯å’Œå®‰è£…æ—¶é—´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Enter &lt;span class=&quot;string&quot;&gt;&quot;.help&quot;&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; usage hints.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Connected to a transient &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt;-memory database.&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;Use &lt;span class=&quot;string&quot;&gt;&quot;.open FILENAME&quot;&lt;/span&gt; to reopen on a persistent database.&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;SQLite-è¯­æ³•åŸºæœ¬æ“ä½œ&quot;&gt;&lt;a href=&quot;#SQLite-è¯­æ³•åŸºæœ¬æ“ä½œ&quot; class=&quot;headerlink&quot; title=&quot;SQLite è¯­æ³•åŸºæœ¬æ“ä½œ&quot;&gt;&lt;/a&gt;SQLite è¯­æ³•åŸºæœ¬æ“ä½œ&lt;/h3&gt;
    
    </summary>
    
      <category term="æ•°æ®åº“" scheme="http://yoursite.com/categories/%E6%95%B0%E6%8D%AE%E5%BA%93/"/>
    
    
      <category term="SQLite" scheme="http://yoursite.com/tags/SQLite/"/>
    
  </entry>
  
  <entry>
    <title>å¼€å‘æ¶æ„è®¾è®¡</title>
    <link href="http://yoursite.com/2017/09/01/%E5%BC%80%E5%8F%91%E6%9E%B6%E6%9E%84%E8%AE%BE%E8%AE%A1/"/>
    <id>http://yoursite.com/2017/09/01/å¼€å‘æ¶æ„è®¾è®¡/</id>
    <published>2017-09-01T09:42:32.000Z</published>
    <updated>2018-01-16T02:23:57.000Z</updated>
    
    <content type="html"></content>
    
    <summary type="html">
    
    </summary>
    
      <category term="æ¶æ„" scheme="http://yoursite.com/categories/%E6%9E%B6%E6%9E%84/"/>
    
    
      <category term="ç§»åŠ¨å¼€å‘" scheme="http://yoursite.com/tags/%E7%A7%BB%E5%8A%A8%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>iOS-é•œå¤´é‡‡é›†(AVCaptureDevice)</title>
    <link href="http://yoursite.com/2017/08/17/iOS-%E9%95%9C%E5%A4%B4%E9%87%87%E9%9B%86(AVCaptureDevice)/"/>
    <id>http://yoursite.com/2017/08/17/iOS-é•œå¤´é‡‡é›†(AVCaptureDevice)/</id>
    <published>2017-08-17T09:42:32.000Z</published>
    <updated>2017-08-25T09:29:18.000Z</updated>
    
    <content type="html">&lt;p&gt;æ‰¿æ¥ä¸Šä¸€ç¯‡åšæ–‡å°ç¼–è®²è¿°åœ¨é•œå¤´é‡‡é›†è¿‡ç¨‹æ‰€éœ€çŸ¥è¯†ç‚¹å’Œ &lt;code&gt;AVCaptureSession&lt;/code&gt; åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œæœ¬ç¯‡åšæ–‡å°†è¦è®²è¿° &lt;code&gt;AVCaptureDevice&lt;/code&gt; ç›¸å…³ä½¿ç”¨æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾ä¸ºæœ¬åšæ–‡å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-02f3ce2f37fba73c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;AVCaptureDeviceåšæ–‡å†™ä½œæ€ç»´å¯¼å›¾.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h1 id=&quot;AVCaptureDevice&quot;&gt;&lt;a href=&quot;#AVCaptureDevice&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDevice&quot;&gt;&lt;/a&gt;AVCaptureDevice&lt;/h1&gt;&lt;p&gt;AVCaptureDevice åœ¨è¿™ä¸ªé‡‡é›†è¿‡ç¨‹ä¸­ç›¸å½“äºåœ¨å‘ç”µè¿‡ç¨‹ä¸­â€œå‘ç”µè®¾å¤‡â€ï¼Œæä¾›å®ç°æ‘„åƒå¤´å’Œéº¦å…‹é£ç›¸å…³åˆå§‹åŒ–ã€‚è€Œä¸”å¯ä»¥å¯¹æ‘„åƒå¤´è¿›è¡Œä¸€äº›åŸºæœ¬è®¾ç½®ï¼Œä¾‹å¦‚ï¼šé—ªå…‰ç¯ã€æ‰‹ç”µç­’ã€èšç„¦ã€æ›å…‰ã€ç™½å¹³è¡¡ç­‰ä¸€äº›åŸºæœ¬è®¾ç½®ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;AVCaptureDevice å®ç°æ‘„åƒå¤´åˆå§‹åŒ–&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;åœ¨ &lt;code&gt;AVCaptureDevice&lt;/code&gt; åˆå§‹åŒ–å‰éœ€è¦å¯¹é•œå¤´ç”³è¯·æƒé™ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; ([&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; authorizationStatusForMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusAuthorized&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//è·å–æˆæƒæˆåŠŸ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusNotDetermined&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;//ç›®å‰ç”¨æˆ·ä¸ºé€‰æ‹©&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            dispatch_suspend(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.sessionQueue);&lt;span class=&quot;comment&quot;&gt;//self.seaaionQueue æ˜¯ä¸²è¡Œçº¿ç¨‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; requestAccessForMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt; completionHandler:^(&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; granted) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!granted) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                    &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.setupResult = FYCameraCaptureSetupResultNotAuthorized;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                dispatch_resume(&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.sessionQueue);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;default&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;          &lt;span class=&quot;comment&quot;&gt;//å¤„ç†å…¶ä½™æƒ…å†µ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;è¯·æ±‚ç¡¬ä»¶çš„è·å–çŠ¶æ€ï¼Œå¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusNotDetermined&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//ç”¨æˆ·æš‚æ—¶æ²¡æœ‰åšç›¸å…³é€‰ç€&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusRestricted&lt;/span&gt;    = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//æ²¡æœ‰æ”¹åª’ä½“ç±»å‹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusDenied&lt;/span&gt;        = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//ç”¨æˆ·æ‹’ç»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVAuthorizationStatusAuthorized&lt;/span&gt;    = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//ç”¨æˆ·å…è®¸&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨è·å–å¯¹ &lt;code&gt;AVCaptureDevice&lt;/code&gt; ä½¿ç”¨å…è®¸çš„æƒ…å†µä¸­ï¼Œå¯ä»¥è·å–ä¸Šé¢å››ä¸­æƒ…å†µã€‚å¯ä»¥ä¾æ¬¡å¯¹ä¸Šé¢ä¸‰ç§æƒ…å†µè¿›è¡Œå¤„ç†ã€‚ä¸‹é¢ğŸ‘‡åˆ—å‡ºåˆå§‹æ–¹æ³•ã€‚ &lt;/p&gt;
&lt;p&gt;1ï¼‰ &lt;code&gt;AVCaptureDevice&lt;/code&gt;åŸºæœ¬åˆå§‹æ–¹æ³•&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ–¹æ³•(1)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *videoDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//æ–¹æ³•(2)&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *videoDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithDeviceType:&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInDuoCamera&lt;/span&gt; mediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt; position:&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionBack&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;2ï¼‰&lt;code&gt;AVCaptureDevice&lt;/code&gt; å®ç°é•œå¤´è‡ªåŠ¨å˜ç„¦&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceType&lt;/span&gt;&amp;gt; *deviceType = @[&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInWideAngleCamera&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInDualCamera&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceDiscoverySession&lt;/span&gt; *videoDeviceDiscoverySession = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceDiscoverySession&lt;/span&gt; discoverySessionWithDeviceTypes:deviceType mediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt; position:&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionUnspecified&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//è·å– devices &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *&amp;gt; *devices = videoDeviceDiscoverySession.devices;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ä½¿ç”¨ &lt;code&gt;AVCaptureDeviceDiscoverySession&lt;/code&gt; è·å– &lt;code&gt;AVCaptureDevice&lt;/code&gt; è¿‡ç¨‹ä¸­ï¼Œä½¿ç”¨ &lt;code&gt;AVCaptureDeviceType&lt;/code&gt;ã€‚&lt;br&gt;ä¸‹é¢åˆ—å‡º &lt;code&gt;AVCaptureDeviceType&lt;/code&gt; ç§ç±»ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//AVCaptureDeviceType ç§ç±»&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInMicrophone&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºéº¦å…‹é£&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInWideAngleCamera&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºå¹¿è§’ç›¸æœº&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInTelephotoCamera&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºæ¯”å¹¿è§’ç›¸æœºæ›´é•¿çš„ç„¦è·ã€‚åªæœ‰ä½¿ç”¨ AVCaptureDeviceDiscoverySession å¯ä»¥ä½¿ç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInDualCamera&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//åˆ›å»ºå˜ç„¦çš„ç›¸æœºï¼Œå¯ä»¥å®ç°å¹¿è§’å’Œå˜ç„¦çš„è‡ªåŠ¨åˆ‡æ¢ã€‚ä½¿ç”¨åŒAVCaptureDeviceTypeBuiltInTelephotoCamera ä¸€æ ·ã€‚&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceTypeBuiltInDuoCamera&lt;/span&gt; &lt;span class=&quot;comment&quot;&gt;//iOS 10.2 è¢« AVCaptureDeviceTypeBuiltInDualCamera æ›¿æ¢&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨é‡Šï¼š&lt;code&gt;iOS 10.2&lt;/code&gt; ä¹‹åæ·»åŠ è‡ªåŠ¨å˜ç„¦åŠŸèƒ½, è€Œä¸”åœ¨æŸ¥æ‰¾è‡ªåŠ¨å˜ç„¦é•œå¤´æ—¶éœ€è¦é‡‡ç”¨ &lt;code&gt;AVCaptureDeviceDiscoverySession&lt;/code&gt; è¿›è¡ŒæŸ¥æ‰¾ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AVCaptureDevice&lt;/code&gt; å®ç°çš„é€šçŸ¥&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡åˆ—å‡ºé€šçŸ¥çš„ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// Notification type &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceWasConnectedNotification&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//è®¾å¤‡è¢«é“¾æ¥æ—¶å‘å‡ºé€šçŸ¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceWasDisconnectedNotification&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//è®¾å¤‡è¢«å»å»é™¤æ—¶å‘å‡ºé€šçŸ¥&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceSubjectAreaDidChangeNotification&lt;/span&gt;&lt;span class=&quot;comment&quot;&gt;//è®¾å¤‡ä¸­åœºæ™¯æ”¹å˜æ—¶å‘å‡ºé€šçŸ¥ï¼Œæ—¢é¢„è§ˆå‘ç”Ÿå˜åŒ–&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;AVCaptureDevice&lt;/code&gt; çš„ä½ç½®&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionUnspecified&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;comment&quot;&gt;//ä¸ç¡®å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionBack&lt;/span&gt;        = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//åç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevicePositionFront&lt;/span&gt;       = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//å‰ç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;// å¦‚æœåˆå§‹çš„ AVMediaType æ˜¯ AVMediaTypeVideo è¡¨ç¤ºå‰ç½®å’Œåç½®æ‘„åƒå¤´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;AVCaptureDeviceFlash-é—ªå…‰ç¯&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceFlash-é—ªå…‰ç¯&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceFlash(é—ªå…‰ç¯)&quot;&gt;&lt;/a&gt;AVCaptureDeviceFlash(é—ªå…‰ç¯)&lt;/h4&gt;&lt;p&gt;åœ¨å…‰çº¿ä¸è¶³çš„æƒ…å†µä¸‹ï¼Œéœ€è¦å¼€å¯å±å¹•çš„é—ªå…‰ç¯æ¥è¿›è¡Œè¡¥å…‰ã€‚ä¾¿äºé•œå¤´å¯ä»¥æ•æ‰æ›´å¥½çš„åœºæ™¯ï¼Œæ‹æ‘„å‡ºå¥½çš„ç…§ç‰‡å’Œè§†é¢‘ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;iOS 10_0&lt;/code&gt;ä¹‹å‰é—ªå…‰ç¯è®¾ç½®&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *errorProperty = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device hasFlash]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isFlashAvailable]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isFlashModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeOn&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; result = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result = [device lockForConfiguration:&amp;amp;errorProperty];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (result) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                [device setFlashMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeOn&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : CONFIGURATION CAPTURE DEVICE FLASH FAILURE, ERROR CODE:%ld&quot;&lt;/span&gt;, (&lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt;)errorProperty.code);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : FLASH IS UNAVAILABLE BECAUSE THE DEVCICE OVERHEATS&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : SOFTWARE DEVICE HAVE NO FLASH&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;/li&gt;
&lt;li&gt;&lt;p&gt;&lt;code&gt;iOS 10_0&lt;/code&gt;ä¹‹åè®¾ç½®&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *outputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.outputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureOutput&lt;/span&gt; *output &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; outputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([output isMemberOfClass:[&lt;span class=&quot;built_in&quot;&gt;AVCapturePhotoOutput&lt;/span&gt; class]]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;AVCapturePhotoOutput&lt;/span&gt; *photoOutput = (&lt;span class=&quot;built_in&quot;&gt;AVCapturePhotoOutput&lt;/span&gt; *)output;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; flashSupported = [[photoOutput supportedFlashModes] containsObject:@(&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeAuto&lt;/span&gt;)];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (flashSupported) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;AVCapturePhotoSettings&lt;/span&gt; *photoSettings = photoOutput.photoSettingsForSceneMonitoring;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            photoSettings.flashMode = &lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeAuto&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : PHOTOOUTPUT CAN NOT SUPPORT AVCAPTUREMODE TYPE&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡åˆ—å‡ºé—ªå…‰ç¯ç±»å‹ï¼š&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeOff&lt;/span&gt;  = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é—ªå…‰ç¯å…³é—­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeOn&lt;/span&gt;   = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é—ªå…‰ç¯å¼€å¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFlashModeAuto&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é—ªå…‰ç¯è‡ªåŠ¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;å¤ªå›°äº†ï¼Œæ™šä¸Šè·‘ 10 å…¬é‡Œã€‚ç›®å‰ğŸ‘éƒ½çä¸å¼€ã€‚&lt;/code&gt;&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;åœ¨ iPhone 6s å¼€å§‹ï¼Œå¦‚æœæ˜¯å‰ç½®æ‘„åƒå¤´å¹¶ä¸”å¼€å¯é—ªå…‰ç¯ï¼Œå¯ä»¥å®ç°å±å¹•é—ªå…‰ç¯è¡¥å…‰ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h4 id=&quot;AVCaptureDeviceTorch-æ‰‹ç”µç­’&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceTorch-æ‰‹ç”µç­’&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceTorch(æ‰‹ç”µç­’)&quot;&gt;&lt;/a&gt;AVCaptureDeviceTorch(æ‰‹ç”µç­’)&lt;/h4&gt;&lt;p&gt;åœ¨å…‰çº¿ä¸æ˜¯å¾ˆæš—çš„æƒ…å†µä¸‹æˆ‘ä»¬å¯ä»¥ç”¨æ‰‹æœºçš„ LED ç¯å½“åšæ‰‹ç”µç­’ä½¿ç”¨ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device hasTorch]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isFlashAvailable]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isTorchModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOn&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; result = &lt;span class=&quot;literal&quot;&gt;NO&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result = [device lockForConfiguration:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (result) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                [device setTorchMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOn&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : CONFIGURATION DEVICE TORCH FAIL AND ERROR CODE %ld&quot;&lt;/span&gt;, (&lt;span class=&quot;keyword&quot;&gt;long&lt;/span&gt;)error.code);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;comment&quot;&gt;// Torch light&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            result = [device setTorchModeOnWithLevel:&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt; error:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!result) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : DEVICE SET TORCH FAILURE AND ERROR CODE %ld&quot;&lt;/span&gt;, error.code);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : DEVICE CAN NO SUPPORT TORCH&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : SOFTHARE DEVICE TORCH IS UNAVAILABLE BECAUSE OVERHEATS&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;ERROR : SOFFHARE DEVICE HAS NO TORCH&quot;&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢åˆ—å‡º &lt;code&gt;Torch&lt;/code&gt; ç±»å‹ï¼Œä½¿ç”¨æ–¹æ³•å’Œé—ªå…³ç¯ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOff&lt;/span&gt;  = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//å…³é—­&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeOn&lt;/span&gt;   = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//æ‰“å¼€&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureTorchModeAuto&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//è‡ªåŠ¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;AVCaptureDeviceFocus-èšç„¦&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceFocus-èšç„¦&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceFocus(èšç„¦)&quot;&gt;&lt;/a&gt;AVCaptureDeviceFocus(èšç„¦)&lt;/h4&gt;&lt;p&gt;å®ç°æ‘„åƒå¤´èšç„¦æœ‰ä¸¤ç§æƒ…å†µï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;é•œå¤´ä½ç½®(AVCaptureFocusMode)&lt;/li&gt;
&lt;li&gt;èŒƒå›´çƒ§è‹—(AVCaptureAutoFocusRangeRestriction)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1ï¼‰é•œå¤´ä½ç½®(AVCaptureFocusMode)&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isFocusModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeAutoFocus&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device lockForConfiguration:&amp;amp;error]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [device setFocusMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeAutoFocus&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//è®¾ç½®èšç„¦åœ¨è®¾å¤‡åæ ‡çš„ä¸­ç‚¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (device.focusPointOfInterestSupported) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            device.focusPointOfInterest = &lt;span class=&quot;built_in&quot;&gt;CGPointMake&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;0.5&lt;/span&gt;);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°ä»£ç å®ç°èšç„¦åœ¨è®¾å¤‡åæ ‡ ä¸­å¿ƒä½ç½®ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢ğŸ‘‡åˆ—å‡ºå®ç°èšç„¦è®¾ç½®ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeLocked&lt;/span&gt;              = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é”å®šå½“å‰é•œå¤´ä½ç½®&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeAutoFocus&lt;/span&gt;           = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é•œå¤´è‡ªåŠ¨è°ƒç„¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureFocusModeContinuousAutoFocus&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é•œå¤´è¿ç»­è‡ªåŠ¨è°ƒç„¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;AVCaptureDeviceExposure-æ›å…‰&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceExposure-æ›å…‰&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceExposure(æ›å…‰)&quot;&gt;&lt;/a&gt;AVCaptureDeviceExposure(æ›å…‰)&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isExposureModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeAutoExpose&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device lockForConfiguration:&amp;amp;error]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         [device setExposureMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeAutoExpose&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šè¿°ä»£ç å®ç°è‡ªåŠ¨è°ƒèŠ‚æ›å…‰ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢åˆ—å‡ºç›¸å…³æ›å…‰è®¾ç½®ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeLocked&lt;/span&gt;                            = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é”å®š&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeAutoExpose&lt;/span&gt;                        = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//è‡ªåŠ¨å¯¹ç„¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeContinuousAutoExposure&lt;/span&gt;            = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//å®ç°è¿ç»­è‡ªåŠ¨å¯¹ç„¦&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureExposureModeCustom&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NS_ENUM_AVAILABLE_IOS&lt;/span&gt;(&lt;span class=&quot;number&quot;&gt;8&lt;/span&gt;_0) = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//é€šè¿‡ ISO å’Œ æ›å…‰æ—¶é—´å®ç°&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;AVCaptureDeviceWhiteBalance-ç™½å¹³è¡¡&quot;&gt;&lt;a href=&quot;#AVCaptureDeviceWhiteBalance-ç™½å¹³è¡¡&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDeviceWhiteBalance(ç™½å¹³è¡¡)&quot;&gt;&lt;/a&gt;AVCaptureDeviceWhiteBalance(ç™½å¹³è¡¡)&lt;/h4&gt;&lt;ul&gt;
&lt;li&gt;ç±»å‹è®¾ç½®(AVCaptureWhiteBalanceMode)&lt;/li&gt;
&lt;li&gt;RGBå…·ä½“å€¼(AVCaptureWhiteBalanceGains)&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;1ï¼‰ç±»å‹è®¾ç½®ç™½å¹³è¡¡&lt;br&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device isWhiteBalanceModeSupported:&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeAutoWhiteBalance&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device lockForConfiguration:&amp;amp;error]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         [device setWhiteBalanceMode:&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeAutoWhiteBalance&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     [device unlockForConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;&lt;/p&gt;
&lt;p&gt;ä¸Šè¿°å®ç°ç™½å¹³è¡¡è‡ªåŠ¨è°ƒæ•´è®¾ç½®ï¼Œä¸‹é¢ğŸ‘‡åˆ—å‡ºç™½å¹³è¡¡ç±»å‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeLocked&lt;/span&gt;                     = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeAutoWhiteBalance&lt;/span&gt;           = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceModeContinuousAutoWhiteBalance&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;2ï¼‰RGB å€¼è®¾ç½®ç™½å¹³è¡¡&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *device = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt; *inputs = &lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt;.session.inputs;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;for&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *input &lt;span class=&quot;keyword&quot;&gt;in&lt;/span&gt; inputs) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([device.deviceType isEqual:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;         device = input.device;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; maxWhiteBalance = device.maxWhiteBalanceGain;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; redGain =  MIN(&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;, maxWhiteBalance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; greenGain = MIN(&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;, maxWhiteBalance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;keyword&quot;&gt;float&lt;/span&gt; blueGain = MIN(&lt;span class=&quot;number&quot;&gt;2.0&lt;/span&gt;, maxWhiteBalance);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureWhiteBalanceGains&lt;/span&gt; whiteBalanceGains = &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     redGain,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     greenGain,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     blueGain&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt; [device setWhiteBalanceModeLockedWithDeviceWhiteBalanceGains:whiteBalanceGains completionHandler:&lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h4 id=&quot;é¢å¤–é™„åŠ åŠŸèƒ½&quot;&gt;&lt;a href=&quot;#é¢å¤–é™„åŠ åŠŸèƒ½&quot; class=&quot;headerlink&quot; title=&quot;é¢å¤–é™„åŠ åŠŸèƒ½&quot;&gt;&lt;/a&gt;é¢å¤–é™„åŠ åŠŸèƒ½&lt;/h4&gt;&lt;p&gt;é™„åŠ åŠŸèƒ½ï¼šå¯ä»¥è·å– &lt;code&gt;AVCaptureDevice&lt;/code&gt; ä¸€äº›ç›¸å…³çš„å‚æ•°ã€‚&lt;/p&gt;
&lt;p&gt;ä¾‹å¦‚ï¼š&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;è§†é¢‘å½•åˆ¶è¿‡ç¨‹ä¸­ &lt;code&gt;min&lt;/code&gt; å’Œ &lt;code&gt;max&lt;/code&gt; çš„å¸§ç‡å’Œå¸§æ—¶é—´é—´éš”ã€‚ &lt;/li&gt;
&lt;li&gt;æ›å…‰ &lt;code&gt;ISO&lt;/code&gt; çš„ &lt;code&gt;min&lt;/code&gt; å’Œ &lt;code&gt;max&lt;/code&gt; å€¼å’Œæ›å…‰æ—¶é—´çš„ &lt;code&gt;min&lt;/code&gt; å’Œ &lt;code&gt;max&lt;/code&gt; å€¼ç­‰ã€‚&lt;/li&gt;
&lt;li&gt;è¾“å…¥çš„ç‹¬ä¸€çš„ &lt;code&gt;ID&lt;/code&gt; å’Œè¾“å…¥æºçš„è®¾å¤‡ åå­—ï¼ˆ&lt;code&gt;localizedName&lt;/code&gt;ï¼‰ã€‚&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturedevice?changes=latest_minor&amp;amp;language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureDevice&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturedeviceposition&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureDevicePosition&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturetorchmode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureTorchMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcaptureflashmode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureFlashMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturefocusmode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureFocusMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcaptureexposuremode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureExposureMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturewhitebalancemode?language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureWhiteBalanceMode&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://support.vsco.co/hc/en-us/articles/203226980-Advanced-Camera-Controls-for-iOS-Setting-Manual-White-Balance&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Advanced Camera Controls for iOS: Setting Manual White Balance&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å‘å¸ƒï¼š2017/8/15 23:16:32 æ˜ŸæœŸäºŒ&lt;br&gt;ç¬¬äºŒæ¬¡å‘å¸ƒï¼š2017/8/16 00:17:59 æ˜ŸæœŸä¸‰&lt;br&gt;ç¬¬ä¸‰æ¬¡å‘å¸ƒï¼š2017/8/16 20:53:56 æ˜ŸæœŸä¸‰&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æ‰¿æ¥ä¸Šä¸€ç¯‡åšæ–‡å°ç¼–è®²è¿°åœ¨é•œå¤´é‡‡é›†è¿‡ç¨‹æ‰€éœ€çŸ¥è¯†ç‚¹å’Œ &lt;code&gt;AVCaptureSession&lt;/code&gt; åŸºæœ¬ä½¿ç”¨æ–¹æ³•ï¼Œæœ¬ç¯‡åšæ–‡å°†è¦è®²è¿° &lt;code&gt;AVCaptureDevice&lt;/code&gt; ç›¸å…³ä½¿ç”¨æ–¹æ³•ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹å›¾ä¸ºæœ¬åšæ–‡å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-02f3ce2f37fba73c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;AVCaptureDeviceåšæ–‡å†™ä½œæ€ç»´å¯¼å›¾.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS-é•œå¤´é‡‡é›†(Camera capture &amp; AVCaptureSession)</title>
    <link href="http://yoursite.com/2017/08/11/iOS-Camera%20Capture%20(iOS%20%E9%95%9C%E5%A4%B4%E9%87%87%E9%9B%86)/"/>
    <id>http://yoursite.com/2017/08/11/iOS-Camera Capture (iOS é•œå¤´é‡‡é›†)/</id>
    <published>2017-08-10T16:07:15.000Z</published>
    <updated>2017-08-25T09:26:48.000Z</updated>
    
    <content type="html">&lt;p&gt;iPhone æ‰‹æœºåœ¨å›¾ç‰‡æ‹ç…§å’Œè§†é¢‘å½•åˆ¶æ–¹é¢æœ‰å¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼Œå°ç¼–è®¤ä¸ºå¦‚æœå¾ˆå¥½ä½¿ç”¨ iPhone æ‹æ‘„å‡ºå¾ˆå¥½ç…§ç‰‡ &amp;amp; å½•åˆ¶å¾ˆæœ‰è¶£çš„è§†é¢‘ã€‚æœ¬ç« å°†è¯¦ç»†è®²è§£ &lt;code&gt;AVCaptureSession&lt;/code&gt; ï¼Œå¹¶æœ€åç»™å‡º &lt;code&gt;FYCameraKit&lt;/code&gt; é¡¹ç›®Demoã€‚&lt;br&gt;ä¸‹é¢å°ç¼–ä¸ºå¤§å®¶è®²è§£ iOS æ‹ç…§å’Œè§†é¢‘å½•åˆ¶åŠŸèƒ½å®ç°ï¼Œä¸‹å›¾æ˜¯é•œå¤´é‡‡é›†éœ€è¦çš„ç±»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-b727b7f54b3df9bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Camera Capture (iOS é•œå¤´é‡‡é›†).png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;æ€»ä½“ä»‹ç»&quot;&gt;&lt;a href=&quot;#æ€»ä½“ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;æ€»ä½“ä»‹ç»&quot;&gt;&lt;/a&gt;æ€»ä½“ä»‹ç»&lt;/h2&gt;&lt;p&gt;åœ¨æ•´ä¸ªé•œå¤´é‡‡é›†è¿‡ç¨‹å°ç¼–æŠŠæ•´ä¸ªè¿‡ç¨‹æ¯”ä½œæˆ‘ä»¬å¸¸è§å‘ç”µè¿‡ç¨‹ï¼šå‡æ˜¯é€šè¿‡ç‰¹å®šçš„æ­¥éª¤å®ç°å¾—åˆ°æœ€åçš„äº§ç‰©ã€‚ä¸‹é¢ğŸ‘‡åšè¯¦ç»†è§£é‡Šï¼š&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureSession-å‘ç”µæœº&quot;&gt;&lt;a href=&quot;#AVCaptureSession-å‘ç”µæœº&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureSession (å‘ç”µæœº)&quot;&gt;&lt;/a&gt;AVCaptureSession (å‘ç”µæœº)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureSession&lt;/code&gt; ï¼šä½œä¸ºéŸ³è§†é¢‘æ•æ‰ä¼šè¯ï¼ŒæŠŠé•œå¤´å’Œéº¦å…‹é£æ•æ‰åˆ°çš„éŸ³è§†é¢‘æºè¾“å‡ºåˆ°è®¾å¤‡ä¸­ã€‚&lt;br&gt;æç¤ºï¼šå¯ä»¥æœ‰å¤šä¸ªè¾“å…¥å’Œè¾“å‡ºã€‚&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureDevice-å‘ç”µè®¾å¤‡&quot;&gt;&lt;a href=&quot;#AVCaptureDevice-å‘ç”µè®¾å¤‡&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureDevice (å‘ç”µè®¾å¤‡)&quot;&gt;&lt;/a&gt;AVCaptureDevice (å‘ç”µè®¾å¤‡)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureDevice&lt;/code&gt;ï¼šè¾“å…¥è®¾å¤‡ï¼ŒåŒ…æ‹¬ï¼šæ‘„åƒå¤´å’Œéº¦å…‹é£ã€‚å¯ä»¥é€šè¿‡è®¾ç½®ä¸€äº›å‚æ•°æ¥è°ƒèŠ‚è®¾å¤‡é‡‡é›†æ•ˆæœï¼ˆä¾‹å¦‚ï¼šæ›å…‰ï¼Œç™½å¹³è¡¡å’Œèšç„¦ç­‰ï¼‰ã€‚&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureInput-æ°´é£èƒ½æº&quot;&gt;&lt;a href=&quot;#AVCaptureInput-æ°´é£èƒ½æº&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureInput (æ°´é£èƒ½æº)&quot;&gt;&lt;/a&gt;AVCaptureInput (æ°´é£èƒ½æº)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureInput&lt;/code&gt;ï¼šè¾“å…¥æ•°æ®ç®¡ç†å¯¹è±¡ï¼Œç»è¿‡ AVCaptureDevice å®ç°åˆå§‹åŒ–ï¼Œç„¶åæ·»åŠ åˆ° AVCaptureSession (å‘ç”µæœº) ä¸­è¿›è¡Œç›¸åº”çš„è¾“å‡ºã€‚&lt;br&gt;å­ç±»ï¼š&lt;code&gt;AVCaptureDeviceInput&lt;/code&gt;ã€&lt;code&gt;AVCaptureScreenInput&lt;/code&gt;å’Œ&lt;code&gt;AVCaptureMetadataInput&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureOutput-ç”µåŠ›&quot;&gt;&lt;a href=&quot;#AVCaptureOutput-ç”µåŠ›&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureOutput (ç”µåŠ›)&quot;&gt;&lt;/a&gt;AVCaptureOutput (ç”µåŠ›)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureOut&lt;/code&gt;ï¼šæ•°æ®è¾“å‡ºç®¡ç†ï¼Œé€šè¿‡ AVCaptureSession ä¸­è¾“å‡ºã€‚å¯ä»¥é€šè¿‡ç›¸å…³çš„åè®®å®å¯¹åº”çš„æ•°æ®è¾“å‡ºã€‚&lt;br&gt;å­ç±»ï¼š&lt;code&gt;AVCaptureFileOutput&lt;/code&gt;ã€&lt;code&gt;AVCapturePhotoOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureStillImageOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureVideoDataOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureAudioDataOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureAudioPreviewOutput&lt;/code&gt;ã€&lt;code&gt;AVCaptureDepthDataOutput&lt;/code&gt;å’Œ&lt;code&gt;AVCaptureMetadataOutput&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h3 id=&quot;AVCaptureVideoPreviewLayer-å‘ç”µé¢„è§ˆ&quot;&gt;&lt;a href=&quot;#AVCaptureVideoPreviewLayer-å‘ç”µé¢„è§ˆ&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureVideoPreviewLayer (å‘ç”µé¢„è§ˆ)&quot;&gt;&lt;/a&gt;AVCaptureVideoPreviewLayer (å‘ç”µé¢„è§ˆ)&lt;/h3&gt;&lt;p&gt;&lt;code&gt;AVCaptureVideoPreviewLayer&lt;/code&gt;ï¼šå¯ä»¥æ”¯æŒåœ¨æ‹æ‘„è¿‡ç¨‹ä¸­è¿›è¡Œç›¸å…³çš„é¢„è§ˆï¼Œåªéœ€è¦åœ¨åˆå§‹æ—¶å®ç°å¯¹åº”çš„ AVCaptureSession å³å¯ã€‚&lt;/p&gt;
&lt;h2 id=&quot;è§†é¢‘å½•åˆ¶&quot;&gt;&lt;a href=&quot;#è§†é¢‘å½•åˆ¶&quot; class=&quot;headerlink&quot; title=&quot;è§†é¢‘å½•åˆ¶&quot;&gt;&lt;/a&gt;è§†é¢‘å½•åˆ¶&lt;/h2&gt;&lt;p&gt;ä¸‹é¢å±•ç¤ºåœ¨è‹¹æœå®˜æ–¹å¼€å‘æ–‡æ¡£ç»™å‡ºçš„å›¾ï¼š&lt;br&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-4cbf9ba736afdb69.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Video Capture(iOS è§†é¢‘å½•åˆ¶).png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;è§†é¢‘å½•åˆ¶æ€»æ¦‚&quot;&gt;&lt;a href=&quot;#è§†é¢‘å½•åˆ¶æ€»æ¦‚&quot; class=&quot;headerlink&quot; title=&quot;è§†é¢‘å½•åˆ¶æ€»æ¦‚&quot;&gt;&lt;/a&gt;è§†é¢‘å½•åˆ¶æ€»æ¦‚&lt;/h3&gt;&lt;ul&gt;
&lt;li&gt;åˆ›å»º &lt;code&gt;AVCaptureSession&lt;/code&gt; å¯¹è±¡&lt;/li&gt;
&lt;li&gt;ä½¿ç”¨ &lt;code&gt;AVCaptureDevice&lt;/code&gt; é™æ€æ–¹æ³•è·å–è®¾å¤‡å¸¸ä½¿ç”¨è®¾å¤‡ï¼Œä¾‹å¦‚ï¼šæ‹ç…§å’Œå½•åƒéœ€è¦çš„æ‘„åƒå¤´ï¼Œå½•éŸ³æ‰€éœ€çš„éº¦å…‹é£&lt;/li&gt;
&lt;li&gt;åˆ©ç”¨è¾“å…¥è®¾å¤‡ &lt;code&gt;AVCaptureDevice&lt;/code&gt; åˆå§‹åŒ– &lt;code&gt;AVCaptureDeviceInput&lt;/code&gt; å¯¹è±¡&lt;/li&gt;
&lt;li&gt;åˆå§‹åŒ–è¾“å‡ºæ•°æ®ç®¡ç†å¯¹è±¡ï¼Œæ‹ç…§è¿›è¡Œåˆå§‹åŒ– &lt;code&gt;AVCaptureStillImageOutput&lt;/code&gt; å¯¹è±¡ï¼Œæ‹ç…§åˆå§‹åŒ– &lt;code&gt;AVCaptureMovieFileOutput&lt;/code&gt; å¯¹è±¡&lt;/li&gt;
&lt;li&gt;å°†æ•°æ®è¾“å…¥å¯¹è±¡ &lt;code&gt;AVCaptureDeviceInput&lt;/code&gt;  å’Œæ•°æ®è¾“å‡ºå¯¹è±¡   &lt;code&gt;AVCaptureDeviceOutput&lt;/code&gt;  æ·»åŠ åˆ°åª’ä½“ä¼šè¯ç®¡ç†å¯¹è±¡   &lt;code&gt;AVCaptureSession&lt;/code&gt; ä¸­&lt;/li&gt;
&lt;li&gt;åˆ›å»ºé¢„è§ˆçš„å›¾å±‚   &lt;code&gt;AVCaptureVideoPreviewLayer&lt;/code&gt;   æŒ‡å®šåª’ä½“ä¼šè¯ï¼Œæ·»åŠ å›¾å±‚åˆ°å®¹å™¨ï¼Œè°ƒç”¨  &lt;code&gt;AVCaptureSession&lt;/code&gt;  ä¸­çš„ &lt;code&gt;StartRunning&lt;/code&gt;  æ–¹æ³•å¼€å§‹æ•æ‰&lt;/li&gt;
&lt;li&gt;å°†æ•æ‰åˆ°å†…å®¹ä¿å­˜åˆ°æŒ‡å®šæ–‡ä»¶ä¸­&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&quot;è¯¦è§£é•œå¤´é‡‡é›†ç±»&quot;&gt;&lt;a href=&quot;#è¯¦è§£é•œå¤´é‡‡é›†ç±»&quot; class=&quot;headerlink&quot; title=&quot;è¯¦è§£é•œå¤´é‡‡é›†ç±»&quot;&gt;&lt;/a&gt;è¯¦è§£é•œå¤´é‡‡é›†ç±»&lt;/h2&gt;&lt;h3 id=&quot;AVCaptureSession&quot;&gt;&lt;a href=&quot;#AVCaptureSession&quot; class=&quot;headerlink&quot; title=&quot;AVCaptureSession&quot;&gt;&lt;/a&gt;AVCaptureSession&lt;/h3&gt;&lt;p&gt;å°ç¼–æŸ¥çœ‹ &lt;code&gt;AVCaptureSession.h&lt;/code&gt;æ–‡ä»¶çœ‹åˆ°ï¼Œåœ¨é•œå¤´é‡‡é›†çš„è¿‡ç¨‹ä¸­æœ‰ä¸¤ç§å®ç°æ–¹å¼ã€‚&lt;/p&gt;
&lt;blockquote&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨ç³»ç»Ÿ &lt;code&gt;AVCaptureSession&lt;/code&gt;è‡ªåŠ¨é…ç½®è¾“å…¥å’Œè¾“å‡º&lt;/li&gt;
&lt;li&gt;æ‰‹åŠ¨é…ç½®è¾“å…¥å’Œè¾“å‡ºä¹‹é—´çš„å¯¹åº”å…³ç³»&lt;/li&gt;
&lt;/ul&gt;
&lt;/blockquote&gt;
&lt;p&gt;ï¼ˆ1ï¼‰ AVCaptureSession åˆå§‹åŒ–&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;ä½¿ç”¨&lt;code&gt;AVCaptureSession&lt;/code&gt; è‡ªåŠ¨é…ç½®è¾“å…¥å’Œè¾“å‡ºä¹‹é—´å¯¹åº”å…³ç³»&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureSession&lt;/span&gt; *captureSession = [[&lt;span class=&quot;built_in&quot;&gt;AVCaptureSession&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *audioCaptureDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeAudio&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *audioInput = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; deviceInputWithDevice:audioCaptureDevice error:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[captureSession beginConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (audioInput) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;//// Handle the failure.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [captureSession commitConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([captureSession canAddInput:audioInput]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [captureSession addInput:audioInput];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;comment&quot;&gt;// Handle the failure.&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [captureSession commitConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢ä»£ç æ˜¯ &lt;code&gt;AVCaptureSession&lt;/code&gt; è¿›è¡Œåˆå§‹åŒ–å¹¶ä¸”å®ç°åˆå§‹åŒ–éº¦å…‹é£è¿›è¡Œç›¸å…³éŸ³é¢‘å½•åˆ¶ï¼Œå¹¶æ·»åŠ åˆ° &lt;code&gt;AVCaptureSession&lt;/code&gt;ä¸­ã€‚&lt;br&gt;&lt;code&gt;beginConfiguration&lt;/code&gt; &amp;amp; &lt;code&gt;commitConfiguration&lt;/code&gt; åœ¨è¿›è¡Œé…ç½® &lt;code&gt;AVCaptureSession&lt;/code&gt; çš„ç›¸å…³å±æ€§å€¼æ—¶éœ€è¦å¯¹è¿™ä¸¤ä¸ªå‡½æ•°è°ƒç”¨ï¼Œå¹¶ä¸”è¿™ä¸¤ä¸ªå‡½æ•°æ˜¯æˆå¯¹å‡ºç°ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ‰‹åŠ¨é…ç½® &lt;code&gt;AVCaptureSession&lt;/code&gt; è¾“å…¥å’Œè¾“å‡ºä¹‹é—´å¯¹åº”å…³ç³»&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureSession&lt;/span&gt; *session = [[&lt;span class=&quot;built_in&quot;&gt;AVCaptureSession&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [session beginConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *videoDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeVideo&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *videoInput = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; deviceInputWithDevice:videoDevice error:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!videoInput) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//handle configuration video device&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureInputPort&lt;/span&gt; *videoPort = videoInput.ports[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; *audioDevice = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDevice&lt;/span&gt; defaultDeviceWithMediaType:&lt;span class=&quot;built_in&quot;&gt;AVMediaTypeAudio&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; *audioInput = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureDeviceInput&lt;/span&gt; deviceInputWithDevice:audioDevice error:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (!videoInput) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//handle configuration audio device&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureInputPort&lt;/span&gt; *audioPort = audioInput.ports[&lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSArray&lt;/span&gt;&amp;lt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureInputPort&lt;/span&gt; *&amp;gt; *inputPorts = @[videoPort, audioPort];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureVideoDataOutput&lt;/span&gt; *videoDataOutput = [[&lt;span class=&quot;built_in&quot;&gt;AVCaptureVideoDataOutput&lt;/span&gt; alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureConnection&lt;/span&gt; *connection = [&lt;span class=&quot;built_in&quot;&gt;AVCaptureConnection&lt;/span&gt; connectionWithInputPorts:inputPorts output:videoDataOutput];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; ([session canAddConnection:connection]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [session addConnection:connection];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;span class=&quot;keyword&quot;&gt;else&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;comment&quot;&gt;//handle session can not add AVCaptureConnection&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        [session commitConfiguration];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;return&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    [session commitConfiguration];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸Šé¢ğŸ‘†ä»£ç æ˜¯ä½¿ç”¨ &lt;code&gt;AVCaptureConnection&lt;/code&gt;å®ç°åœ¨ &lt;code&gt;AVCaptureSession&lt;/code&gt; ä½¿è¾“å…¥å’Œè¾“å‡ºè¿›è¡Œè‡ªå·±é…ç½®ã€‚&lt;br&gt;è¯¦ç»†çš„ç»†èŠ‚ä¼šåœ¨ &lt;code&gt;FYCameraKit&lt;/code&gt; è¿›è¡Œè¯¦ç»†çš„è®²è§£ã€‚ &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;æ³¨é‡Šï¼š&lt;br&gt;1ï¼‰åªæœ‰åœ¨è°ƒç”¨ &lt;code&gt;beginConfiguration&lt;/code&gt; æ—¶æˆ‘ä»¬å¯¹ &lt;code&gt;AVCaptureSession&lt;/code&gt; é…ç½®æ‰ä¼šè¢«çœŸæ­£å¼€å§‹ä¿®æ”¹ã€‚&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ï¼ˆ2ï¼‰ AVCaptureSession ä¸­æ–­&lt;/p&gt;
&lt;p&gt;åœ¨éŸ³è§†é¢‘å½•åˆ¶è¿‡ç¨‹ä¸­å¯èƒ½å¯¹å› ä¸ºç”µè¯å¯¼è‡´ä¸­æ–­ï¼Œå¼€å‘è¿‡ç¨‹ä¸­æä¾›ä¸­æ–­ç»“æŸåè·å–ä¸­æ–­äº§ç”Ÿçš„åŸå› ã€‚&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;æ³¨å†Œä¸­æ–­ç›‘å¬ &amp;amp; åˆ é™¤ç›‘å¬&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç›‘å¬æ³¨å†Œ&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] addObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; selector:&lt;span class=&quot;keyword&quot;&gt;@selector&lt;/span&gt;(handleCaptureSession:) name:&lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionEndedNotification&lt;/span&gt; object:_session];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;comment&quot;&gt;//ç›‘å¬æ¸…é™¤   &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[[&lt;span class=&quot;built_in&quot;&gt;NSNotificationCenter&lt;/span&gt; defaultCenter] removeObserver:&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; name:&lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionEndedNotification&lt;/span&gt; object:_session];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;ä»ä¼ é€’çš„ &lt;code&gt;userInfo&lt;/code&gt; é€šè¿‡å…³é”® &lt;code&gt;key&lt;/code&gt; è·å–åŸå› ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonKey&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;è·å–å…·ä½“çš„ä¸­æ–­åŸå› ï¼š&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NS_ENUM&lt;/span&gt;(&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt;, &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReason&lt;/span&gt;) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceNotAvailableInBackground&lt;/span&gt;               = &lt;span class=&quot;number&quot;&gt;1&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//ä»åå°è¿è¡Œå¼€å¯ cameraï¼Œä¸å¤Ÿ iOS 9.0 ä¹‹åä¸æä¾›ä¸­æ–­ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonAudioDeviceInUseByAnotherClient&lt;/span&gt;                   = &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//éŸ³é¢‘è½¯è½¯ä»¶è¢«å ç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceInUseByAnotherClient&lt;/span&gt;                   = &lt;span class=&quot;number&quot;&gt;3&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//è§†é¢‘è½¯ä»¶è¢«å ç”¨&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceNotAvailableWithMultipleForegroundApps&lt;/span&gt; = &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;,&lt;span class=&quot;comment&quot;&gt;//å…¨å±æˆ–è€…æ˜¯å½•åˆ¶å±å¹•å˜åŒ–&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;ç›‘å¬äº‹ä»¶çš„å¤„ç†&lt;/li&gt;
&lt;/ul&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)handleCaptureSession:(&lt;span class=&quot;built_in&quot;&gt;NSNotification&lt;/span&gt; *)notification &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReason&lt;/span&gt; reason = [[notification.userInfo objectForKey:&lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonKey&lt;/span&gt;] unsignedIntegerValue];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;switch&lt;/span&gt; (reason) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceNotAvailableInBackground&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;comment&quot;&gt;//handle device not available background&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonAudioDeviceInUseByAnotherClient&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;comment&quot;&gt;//handle that audio was occupied  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceInUseByAnotherClient&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;comment&quot;&gt;//handle that video was occupied  &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;keyword&quot;&gt;case&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;AVCaptureSessionInterruptionReasonVideoDeviceNotAvailableWithMultipleForegroundApps&lt;/span&gt;:&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;           &lt;span class=&quot;comment&quot;&gt;//handle that UI was multiple&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;            &lt;span class=&quot;keyword&quot;&gt;break&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;å®ç°æ‹ç…§å’Œè§†é¢‘å½•åˆ¶çš„ &lt;code&gt;FYCameraKit&lt;/code&gt; çš„ä¸‹è½½åœ°å€ï¼š &lt;a href=&quot;https://github.com/boilWater/FYCameraKit&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;FYCameraKit&lt;/a&gt; &lt;/p&gt;
&lt;p&gt;å‚è€ƒèµ„æ–™ï¼š&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturesession?changes=latest_minor&amp;amp;language=objc&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureSession&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcapturedevice&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureDevice&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://developer.apple.com/documentation/avfoundation/avcaptureconnection?changes=latest_minor&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;AVCaptureConnection&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;ç¬¬ä¸€æ¬¡å‘å¸ƒï¼š2017/8/10 20:49:21 æ˜ŸæœŸå››&lt;br&gt;ç¬¬äºŒæ¬¡å‘å¸ƒï¼š2017/8/10 23:36:34 æ˜ŸæœŸå››&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;iPhone æ‰‹æœºåœ¨å›¾ç‰‡æ‹ç…§å’Œè§†é¢‘å½•åˆ¶æ–¹é¢æœ‰å¾ˆå¼ºå¤§çš„åŠŸèƒ½ï¼Œå°ç¼–è®¤ä¸ºå¦‚æœå¾ˆå¥½ä½¿ç”¨ iPhone æ‹æ‘„å‡ºå¾ˆå¥½ç…§ç‰‡ &amp;amp; å½•åˆ¶å¾ˆæœ‰è¶£çš„è§†é¢‘ã€‚æœ¬ç« å°†è¯¦ç»†è®²è§£ &lt;code&gt;AVCaptureSession&lt;/code&gt; ï¼Œå¹¶æœ€åç»™å‡º &lt;code&gt;FYCameraKit&lt;/code&gt; é¡¹ç›®Demoã€‚&lt;br&gt;ä¸‹é¢å°ç¼–ä¸ºå¤§å®¶è®²è§£ iOS æ‹ç…§å’Œè§†é¢‘å½•åˆ¶åŠŸèƒ½å®ç°ï¼Œä¸‹å›¾æ˜¯é•œå¤´é‡‡é›†éœ€è¦çš„ç±»ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-b727b7f54b3df9bf.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-Camera Capture (iOS é•œå¤´é‡‡é›†).png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS-è§†é¢‘å¤§çº²æ€»ç»“</title>
    <link href="http://yoursite.com/2017/06/09/iOS-%E8%A7%86%E9%A2%91%E5%A4%A7%E7%BA%B2%E6%80%BB%E7%BB%93/"/>
    <id>http://yoursite.com/2017/06/09/iOS-è§†é¢‘å¤§çº²æ€»ç»“/</id>
    <published>2017-06-08T16:31:48.000Z</published>
    <updated>2017-06-13T15:30:57.000Z</updated>
    
    <content type="html">&lt;p&gt;æœ¬æ¬¡åšå®¢æ€è·¯æ¥è‡ªä¸å…¬å¸çš„ä¸€æ¬¡æŠ€æœ¯åˆ†äº«ã€‚å‰æ®µæ—¶é—´è¢«å…¬å¸å§”æ´¾åšè§†é¢‘ç›¸å…³çš„å¼€å‘ï¼Œå°±æŠŠè§†é¢‘æ€»ä½“å†…å®¹æ¢³ç†ä¸€ä¸‹å½“åšå¤‡å¿˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æœ¬åšæ–‡çš„å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-bbdb773a30fc44a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-è§†é¢‘å¤§çº²æ€»ç»“.png&quot;&gt;&lt;/p&gt;
&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;h2 id=&quot;æµåª’ä½“æ•°æ®æ¥æ”¶åˆ°æ’­æ”¾&quot;&gt;&lt;a href=&quot;#æµåª’ä½“æ•°æ®æ¥æ”¶åˆ°æ’­æ”¾&quot; class=&quot;headerlink&quot; title=&quot;æµåª’ä½“æ•°æ®æ¥æ”¶åˆ°æ’­æ”¾&quot;&gt;&lt;/a&gt;æµåª’ä½“æ•°æ®æ¥æ”¶åˆ°æ’­æ”¾&lt;/h2&gt;&lt;p&gt;åœ¨ç½‘ç»œä¼ è¾“è¿‡ç¨‹ä¸­æˆ‘ä»¬æ¥æ”¶åˆ°ç›¸å…³åª’ä½“æ•°æ®è¦ç»è¿‡ä¸€äº›åˆ—çš„å¤„ç†æ¥å®ç°å¯¹åª’ä½“æ•°æ®çš„æ’­æ”¾ï¼Œå…·ä½“è¿‡ç¨‹å¦‚ä¸‹å›¾ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-aab07b57fde17c34.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS è§†é¢‘æ’­æ”¾æµç¨‹å›¾.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºæˆ‘ä»¬åœ¨è·å–æµåª’ä½“åè®®éœ€è¦ç»è¿‡ä¸€ä¸‹å¤„ç†æ–¹å¼ï¼š&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;è§£åè®® â€”&amp;gt; è§£å°è£…  â€”&amp;gt; éŸ³è§†é¢‘çš„è§£ç  ï¼ˆå®ç°éŸ³è§†é¢‘åŒæ­¥ &amp;amp; æ’­æ”¾ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id=&quot;æµåª’ä½“æ•°æ®è§£æ&quot;&gt;&lt;a href=&quot;#æµåª’ä½“æ•°æ®è§£æ&quot; class=&quot;headerlink&quot; title=&quot;æµåª’ä½“æ•°æ®è§£æ&quot;&gt;&lt;/a&gt;æµåª’ä½“æ•°æ®è§£æ&lt;/h3&gt;&lt;p&gt;åœ¨è·å–æµåª’ä½“æ•°æ®åï¼Œè¦å¯¹å…¶è¿›è¡Œåè®®çš„è§£ææ¥è·å–å°è£…çš„åª’ä½“æ•°æ®è¿›è¡Œæ’­æ”¾ã€‚æˆ‘ä»¬å¸¸è§çš„åè®®ï¼š&lt;code&gt;HTTP&lt;/code&gt;ã€&lt;code&gt;RTMP&lt;/code&gt;å’Œ&lt;code&gt;MMS&lt;/code&gt;åª’ä½“åè®®&lt;/p&gt;
&lt;h4 id=&quot;åè®®ç®€ä»‹&quot;&gt;&lt;a href=&quot;#åè®®ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;åè®®ç®€ä»‹&quot;&gt;&lt;/a&gt;åè®®ç®€ä»‹&lt;/h4&gt;&lt;ul&gt;&lt;br&gt;&lt;li&gt;HTTPï¼šè¶…æ–‡æœ¬ä¼ è¾“åè®®ï¼ˆHyperText Transfer Protocolï¼‰æ˜¯ä¸€ä¸ªå®¢æˆ·ç«¯ï¼ˆç”¨æˆ·ï¼‰å’ŒæœåŠ¡ç«¯ï¼ˆç½‘ç«™ï¼‰è¯·æ±‚å’Œåº”ç­”çš„æ ‡å‡†ã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/è¶…æ–‡æœ¬ä¼ è¾“åè®®&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;RTMPï¼šå®æ—¶ä¿¡æ¯ä¼ è¾“åè®®ï¼ˆReal Time Message Protocolï¼‰åŸºäºTCPå®ç°æŒä¹…é“¾æ¥å’Œä½å»¶è¿Ÿé€šä¿¡ã€‚æµåˆ†è§£æˆç‰‡ï¼Œå®¢æˆ·ç«¯å’ŒæœåŠ¡ç«¯å¯è®¾ç½®å¤§å°ï¼ˆéŸ³ï¼š64ï¼Œè§†é¢‘ï¼š128ï¼‰ã€‚&lt;br&gt;&lt;a href=&quot;http://mingyangshang.github.io/2016/03/06/RTMPåè®®/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€1ï¼š&lt;/a&gt;&lt;br&gt;&lt;a href=&quot;https://translate.google.co.jp/translate?hl=zh-CN&amp;amp;sl=en&amp;amp;u=https://en.wikipedia.org/wiki/Real-Time_Messaging_Protocol&amp;amp;prev=search&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€2ï¼š&lt;/a&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;MMSï¼šä¸²æµåª’ä½“ä¼ é€åè®®ï¼ˆMicrosoft Media Serverï¼‰ç”¨æ¥è®¿é—®å¹¶æµå¼æ¥å— Windows Media æœåŠ¡å™¨ä¸­ .asf æ–‡ä»¶åè®®ã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/MMS_(åè®®&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;)&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;HLSï¼šæµåª’ä½“ç½‘ç»œä¼ è¾“åè®®ï¼ˆHTTP Live Streamingï¼‰æŠŠæ•°æ®æºåˆ†è§£ä¸ºåŸºäº HTTP çš„ç‰‡æ®µï¼Œæ¯æ¬¡ä¸‹è½½ä¸€äº›ã€‚ä¸‹è½½æ•°æ®ä¹‹å‰éœ€è¦ä¸€ä¸ªåŒ…å«æ•°æ®çš„ m3u8 playlistæ–‡ä»¶æ¥æŸ¥æ‰¾å¯ç”¨çš„åª’ä½“æµã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/HTTP_Live_Streaming&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;RTPï¼šå®æ—¶ä¼ è¾“åè®®ï¼ˆReal-time Transport Protocolï¼‰è¢«è®¾ç½®ä¸ºå¤šæ’­åè®®ï¼Œå’Œ RTP åè®®ã€RTP æ§åˆ¶åè®®ä¸€èµ·ä½¿ç”¨ã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/å®æ—¶ä¼ è¾“åè®®&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;RTCPï¼šå®æ—¶ä¼ è¾“æ§åˆ¶åè®®ï¼ˆReal-time Transport Protocolï¼‰æœé›†åª’ä½“é“¾æ¥ç»Ÿè®¡ä¿¡æ¯ï¼Œä¸º RTP æä¾›æœåŠ¡è´¨é‡åé¦ˆã€‚&lt;br&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/å®æ—¶ä¼ è¾“æ§åˆ¶åè®®&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;RTSPï¼šå®æ—¶æµåè®®ï¼Œç”¨äºå»ºç«‹å’Œæ§åˆ¶ç»ˆç«¯ä¹‹é—´çš„åª’ä½“ä¼šè¯ï¼Œå’Œ RTP ã€RTCP ç»“åˆçš„ï¼Œåª’ä½“æµä¼ è¾“ã€‚&lt;br&gt;&lt;a href=&quot;https://translate.google.co.jp/translate?hl=zh-CN&amp;amp;sl=en&amp;amp;u=https://en.wikipedia.org/wiki/Real_Time_Streaming_Protocol&amp;amp;prev=search&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å‚è€ƒåœ°å€ï¼š&lt;/a&gt;&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h3 id=&quot;åª’ä½“å°è£…æ ¼å¼&quot;&gt;&lt;a href=&quot;#åª’ä½“å°è£…æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;åª’ä½“å°è£…æ ¼å¼&quot;&gt;&lt;/a&gt;åª’ä½“å°è£…æ ¼å¼&lt;/h3&gt;&lt;p&gt;åª’ä½“å°è£…å°±æ˜¯æŠŠè§†é¢‘æ•°æ®å’ŒéŸ³é¢‘æ•°æ®è¿›è¡ŒæŒ‰ç…§ä¸€å®šçš„æ ¼å¼è¿›è¡Œå°è£…ã€‚æˆ‘ä»¬å¸¸è§çš„å°è£…æ ¼å¼ï¼š&lt;code&gt;AVI&lt;/code&gt;ã€&lt;code&gt;MP4&lt;/code&gt;ã€&lt;code&gt;TS&lt;/code&gt;ã€&lt;code&gt;FLV&lt;/code&gt;ã€&lt;code&gt;MKV&lt;/code&gt;å’Œ&lt;code&gt;RMVB&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;h4 id=&quot;åª’ä½“å°è£…æ ¼å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#åª’ä½“å°è£…æ ¼å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;åª’ä½“å°è£…æ ¼å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;åª’ä½“å°è£…æ ¼å¼ç®€ä»‹&lt;/h4&gt;&lt;p&gt;ä¸‹é¢æ˜¯å¯¹åª’ä½“å°è£…æ ¼å¼çš„æ•´ç†å’Œç®€ä»‹ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-0491caa322fa42c8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;åª’ä½“å°è£…æ ¼å¼æ•´ç†.png&quot;&gt;&lt;/p&gt;
&lt;h3 id=&quot;éŸ³è§†é¢‘ç¼–ç æ ¼å¼&quot;&gt;&lt;a href=&quot;#éŸ³è§†é¢‘ç¼–ç æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;éŸ³è§†é¢‘ç¼–ç æ ¼å¼&quot;&gt;&lt;/a&gt;éŸ³è§†é¢‘ç¼–ç æ ¼å¼&lt;/h3&gt;&lt;p&gt;åœ¨éŸ³è§†é¢‘å½•åˆ¶å®Œæˆåä¸ºæ–¹ä¾¿ä¼ è¾“éœ€è¦å¯¹å…¶è¿›è¡Œç¼–ç å‹ç¼©å¤„ç†ï¼Œæˆ‘ä»¬å¸¸è§çš„éŸ³è§†é¢‘ç¼–ç æ ¼å¼ï¼š&lt;/p&gt;
&lt;p&gt;è§†é¢‘ç¼–ç æ ¼å¼ï¼š&lt;code&gt;H.264&lt;/code&gt;ã€&lt;code&gt;H.265(HEVC)&lt;/code&gt;ã€&lt;code&gt;MPEG4&lt;/code&gt;ã€&lt;code&gt;MPEG2&lt;/code&gt;ã€&lt;code&gt;VP9&lt;/code&gt;ã€&lt;code&gt;VP8&lt;/code&gt;å’Œ&lt;code&gt;VC-1&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;éŸ³é¢‘ç¼–ç æ ¼å¼ï¼š&lt;code&gt;AAC&lt;/code&gt;ã€&lt;code&gt;AC-3&lt;/code&gt;ã€&lt;code&gt;MP3&lt;/code&gt;å’Œ&lt;code&gt;WMP&lt;/code&gt;&lt;/p&gt;
&lt;h4 id=&quot;è§†éŸ³é¢‘ç¼–ç æ ¼å¼&quot;&gt;&lt;a href=&quot;#è§†éŸ³é¢‘ç¼–ç æ ¼å¼&quot; class=&quot;headerlink&quot; title=&quot;è§†éŸ³é¢‘ç¼–ç æ ¼å¼&quot;&gt;&lt;/a&gt;è§†éŸ³é¢‘ç¼–ç æ ¼å¼&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-1e3ce321225f5706.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;è§†éŸ³é¢‘ç¼–ç æ ¼å¼.png&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;ç¼–ç æ ¼å¼åœ°å€&quot;&gt;&lt;a href=&quot;#ç¼–ç æ ¼å¼åœ°å€&quot; class=&quot;headerlink&quot; title=&quot;ç¼–ç æ ¼å¼åœ°å€&quot;&gt;&lt;/a&gt;ç¼–ç æ ¼å¼åœ°å€&lt;/h4&gt;&lt;p&gt;ä¸‹é¢æ˜¯ç¼–ç æ ¼å¼åœ°å€ï¼š&lt;/p&gt;
&lt;p&gt;H.264 :&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:center&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/H.264/MPEG-4_AVC&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://zh.wikipedia.org/wiki/H.264/MPEG-4_AVC&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€2&lt;/td&gt;
&lt;td style=&quot;text-align:center&quot;&gt;&lt;a href=&quot;https://abson.github.io/2016/11/15/æ·±å…¥æµ…å‡ºç†è§£è§†é¢‘ç¼–ç H264ç»“æ„/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://abson.github.io/2016/11/15/æ·±å…¥æµ…å‡ºç†è§£è§†é¢‘ç¼–ç H264ç»“æ„/&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;H.265 :&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;www.4k123.com/thread-6369-1-1.html&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;AACï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;www.4k123.com/thread-6369-1-1.html&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;AC-3ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;blog.csdn.net/leixiaohua1020/article/details/11822737&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;MP3ï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;åœ°å€&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;é“¾æ¥        &lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;åœ°å€1&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;https://zh.wikipedia.org/zh-hans/MP3&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://zh.wikipedia.org/zh-hans/MP3&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;è§£ç ç®€ä»‹&quot;&gt;&lt;a href=&quot;#è§£ç ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;è§£ç ç®€ä»‹&quot;&gt;&lt;/a&gt;è§£ç ç®€ä»‹&lt;/h3&gt;&lt;p&gt;åœ¨è§†é¢‘æ’­æ”¾è¿‡ç¨‹ä¸­æˆ‘ä»¬éœ€è¦å¯¹è§†é¢‘è¿›è¡Œè§£ç å¤„ç†ï¼Œå¸¸è§çš„è§£ç æ–¹å¼ï¼šç¡¬è§£ç å’Œè½¯è§£ç ã€‚&lt;/p&gt;
&lt;h4 id=&quot;è§£ç æ–¹å¼ç®€ä»‹&quot;&gt;&lt;a href=&quot;#è§£ç æ–¹å¼ç®€ä»‹&quot; class=&quot;headerlink&quot; title=&quot;è§£ç æ–¹å¼ç®€ä»‹&quot;&gt;&lt;/a&gt;è§£ç æ–¹å¼ç®€ä»‹&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-b70e26b3769a95c7.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;è½¯è§£ç &amp;amp;ç¡¬è§£ç å¯¹æ¯”.png&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;ç¼–ç èµ„æ–™åœ°å€&quot;&gt;&lt;a href=&quot;#ç¼–ç èµ„æ–™åœ°å€&quot; class=&quot;headerlink&quot; title=&quot;ç¼–ç èµ„æ–™åœ°å€&quot;&gt;&lt;/a&gt;ç¼–ç èµ„æ–™åœ°å€&lt;/h4&gt;&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¡†æ¶åç§°&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;èµ„æ–™åœ°å€-1&lt;/th&gt;
&lt;th&gt;èµ„æ–™åœ°å€-2&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;AVFoundation&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;http://yoferzhang.com/post/20160803AVFoundation01Introduction/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://yoferzhang.com/post/20160803AVFoundation01Introduction/&lt;/a&gt;&lt;/td&gt;
&lt;td&gt;&lt;a href=&quot;http://www.superqq.com/blog/2015/08/24/avfoundation-gpuimage-find/&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.superqq.com/blog/2015/08/24/avfoundation-gpuimage-find/&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;VideoToolBox&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;http://www.4k123.com/thread-6369-1-1.html&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;http://www.4k123.com/thread-6369-1-1.html&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;FFMpeg&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;blog.csdn.net/leixiaohua1020/article/category/1360795&lt;/td&gt;
&lt;td&gt;www.tuicool.com/articles/22A7na3&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;p&gt;&lt;code&gt;CPU&lt;/code&gt; &amp;amp; &lt;code&gt;GPU&lt;/code&gt; çš„å‚è€ƒï¼š&lt;/p&gt;
&lt;table&gt;
&lt;thead&gt;
&lt;tr&gt;
&lt;th&gt;æ¡†æ¶åç§°&lt;/th&gt;
&lt;th style=&quot;text-align:left&quot;&gt;èµ„æ–™åœ°å€-1&lt;/th&gt;
&lt;/tr&gt;
&lt;/thead&gt;
&lt;tbody&gt;
&lt;tr&gt;
&lt;td&gt;CPU&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;https://zh.wikipedia.org/wiki/ä¸­å¤®å¤„ç†å™¨&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://zh.wikipedia.org/wiki/ä¸­å¤®å¤„ç†å™¨&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;tr&gt;
&lt;td&gt;GPU&lt;/td&gt;
&lt;td style=&quot;text-align:left&quot;&gt;&lt;a href=&quot;https://zh.wikipedia.org/zh/åœ–å½¢è™•ç†å™¨&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;https://zh.wikipedia.org/zh/åœ–å½¢è™•ç†å™¨&lt;/a&gt;&lt;/td&gt;
&lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id=&quot;AVFoundation-æ¡†æ¶ä»‹ç»&quot;&gt;&lt;a href=&quot;#AVFoundation-æ¡†æ¶ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;AVFoundation æ¡†æ¶ä»‹ç»&quot;&gt;&lt;/a&gt;AVFoundation æ¡†æ¶ä»‹ç»&lt;/h3&gt;&lt;p&gt;AVFoundation å¯ä»¥ç”¨æ¥æ’­æ”¾å’Œåˆ›å»ºåŸºäºæ—¶é—´è§†å¬åª’ä½“çš„æ¡†æ¶ä¹‹ä¸€ï¼Œæä¾›åŸºäºæ—¶é—´çš„è§†å¬æ•°æ®è¯¦ç»†çš„ Objective-Cä¸Šçš„æ¥å£ã€‚&lt;/p&gt;
&lt;h4 id=&quot;AVFoundation-åŠŸèƒ½ä»‹ç»&quot;&gt;&lt;a href=&quot;#AVFoundation-åŠŸèƒ½ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;AVFoundation åŠŸèƒ½ä»‹ç»&quot;&gt;&lt;/a&gt;AVFoundation åŠŸèƒ½ä»‹ç»&lt;/h4&gt;&lt;p&gt;ä½¿ç”¨ &lt;code&gt;AVFoundation&lt;/code&gt; å¯ä»¥å®ç°è§†é¢‘çš„æ’­æ”¾ã€ç¼–è¾‘ã€é™æ€åª’ä½“çš„æ•æ‰ã€è¾“å‡ºå’Œæ—¶é—´åª’ä½“çš„è¡¨ç°ç­‰åŠŸèƒ½ï¼Œå¦‚æœä»…ä»…æ˜¯æ’­æ”¾ç”µå½±çš„è¯å¯ä»¥ä½¿ç”¨ &lt;code&gt;AVKit&lt;/code&gt;æ¡†æ¶ã€‚ &lt;/p&gt;
&lt;h4 id=&quot;AVFoundation-æ¥å£ä»‹ç»&quot;&gt;&lt;a href=&quot;#AVFoundation-æ¥å£ä»‹ç»&quot; class=&quot;headerlink&quot; title=&quot;AVFoundation æ¥å£ä»‹ç»&quot;&gt;&lt;/a&gt;AVFoundation æ¥å£ä»‹ç»&lt;/h4&gt;&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-c3069ae787712d75.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-AVFoundation-AVMutableComposition-AVAssetTrack.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-ed13785f38e3a77c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-AVFoundation-AVMutableComposition-AVMutableAudioMix.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-1ee84500bda738b3.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-AVFoundation-AVMutableComposition-AVMutableVideoComposition.png&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-9993bccb095d6642.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-AVFoundation-AVMutableComposition-AVAssetExportSession.png&quot;&gt;&lt;/p&gt;
&lt;h4 id=&quot;AVFoundation-ç±»ç»§æ‰¿å…³ç³»&quot;&gt;&lt;a href=&quot;#AVFoundation-ç±»ç»§æ‰¿å…³ç³»&quot; class=&quot;headerlink&quot; title=&quot;AVFoundation ç±»ç»§æ‰¿å…³ç³»&quot;&gt;&lt;/a&gt;AVFoundation ç±»ç»§æ‰¿å…³ç³»&lt;/h4&gt;&lt;p&gt;&lt;a href=&quot;https://github.com/boilWater/boilWater.github.io/tree/master/Images/PPT&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;å…¬å¸åˆ†äº« PPT ä¸‹è½½åœ°å€&lt;/a&gt;&lt;/p&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;æœ¬æ¬¡åšå®¢æ€è·¯æ¥è‡ªä¸å…¬å¸çš„ä¸€æ¬¡æŠ€æœ¯åˆ†äº«ã€‚å‰æ®µæ—¶é—´è¢«å…¬å¸å§”æ´¾åšè§†é¢‘ç›¸å…³çš„å¼€å‘ï¼Œå°±æŠŠè§†é¢‘æ€»ä½“å†…å®¹æ¢³ç†ä¸€ä¸‹å½“åšå¤‡å¿˜ã€‚&lt;/p&gt;
&lt;p&gt;ä¸‹é¢æ˜¯æœ¬åšæ–‡çš„å†™ä½œæ€è·¯ï¼š&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-bbdb773a30fc44a2.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOS-è§†é¢‘å¤§çº²æ€»ç»“.png&quot;&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
  <entry>
    <title>iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†</title>
    <link href="http://yoursite.com/2017/05/31/NSError(%E9%94%99%E8%AF%AF%E4%BF%A1%E6%81%AF)/"/>
    <id>http://yoursite.com/2017/05/31/NSError(é”™è¯¯ä¿¡æ¯)/</id>
    <published>2017-05-31T06:35:13.000Z</published>
    <updated>2017-06-01T09:51:07.000Z</updated>
    
    <content type="html">&lt;p&gt;å¼€å‘è¿‡è¿‡ç¨‹ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å¼‚å¸¸é—®é¢˜&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-ebec37c09e21ba91.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOSå¼‚å¸¸.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot;&gt;&lt;a href=&quot;#iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot; class=&quot;headerlink&quot; title=&quot;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot;&gt;&lt;/a&gt;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&lt;/h1&gt;&lt;a id=&quot;more&quot;&gt;&lt;/a&gt;
&lt;p&gt;æˆ‘ä»¬åœ¨ç¨‹åºå¼€å‘è¿‡ç¨‹ä¸­ç»å¸¸ä¼šé‡åˆ°å¼‚å¸¸ï¼Œå¯¹å¼‚å¸¸çš„å¤„ç†ä¸€èˆ¬é‡‡ç”¨æ‰“å°æˆ–è€…ç›´æ¥æŠ›å‡ºã€‚è¿™æ ·ä¹Ÿå¯ä»¥å¾ˆæ–¹ä¾¿æˆ‘ä»¬è°ƒè¯•è¿‡ç¨‹æœ‰æ‰€å‚è€ƒï¼Œè€Œä¸”æ–¹ä¾¿æˆ‘ä»¬æŸ¥çœ‹å¼‚å¸¸äº§ç”Ÿçš„ä½ç½®ä¿¡æ¯&lt;/p&gt;
&lt;h3 id=&quot;NSError-é”™è¯¯ä¿¡æ¯&quot;&gt;&lt;a href=&quot;#NSError-é”™è¯¯ä¿¡æ¯&quot; class=&quot;headerlink&quot; title=&quot;NSError(é”™è¯¯ä¿¡æ¯)&quot;&gt;&lt;/a&gt;NSError(é”™è¯¯ä¿¡æ¯)&lt;/h3&gt;&lt;h4 id=&quot;é‡‡ç”¨NSErrorçš„æƒ…å†µ&quot;&gt;&lt;a href=&quot;#é‡‡ç”¨NSErrorçš„æƒ…å†µ&quot; class=&quot;headerlink&quot; title=&quot;é‡‡ç”¨NSErrorçš„æƒ…å†µ&quot;&gt;&lt;/a&gt;é‡‡ç”¨NSErrorçš„æƒ…å†µ&lt;/h4&gt;&lt;p&gt;  ä½¿ç”¨ &lt;code&gt;NSError&lt;/code&gt; çš„å½¢å¼å¯ä»¥æŠŠç¨‹åºä¸­å¯¼è‡´é”™è¯¯åŸå› å›æŠ¥ç»™è°ƒç”¨è€…ï¼Œè€Œä¸”ä½¿ç¨‹åºæ­£å¸¸è¿è¡Œä¸ä¼šé€ æˆå¥”æºƒçš„åæœ&lt;/p&gt;
&lt;h4 id=&quot;NSErroråŒ…å«çš„å†…å®¹&quot;&gt;&lt;a href=&quot;#NSErroråŒ…å«çš„å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;NSErroråŒ…å«çš„å†…å®¹&quot;&gt;&lt;/a&gt;NSErroråŒ…å«çš„å†…å®¹&lt;/h4&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;class&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@interface&lt;/span&gt; &lt;span class=&quot;title&quot;&gt;NSError&lt;/span&gt; : &lt;span class=&quot;title&quot;&gt;NSObject&lt;/span&gt; &amp;lt;&lt;span class=&quot;title&quot;&gt;NSCopying&lt;/span&gt;, &lt;span class=&quot;title&quot;&gt;NSSecureCoding&lt;/span&gt;&amp;gt; &lt;/span&gt;&amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@private&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *_reserved;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; _code;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *_domain;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *_userInfo;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;NSError _code&lt;/code&gt;ï¼ˆé”™è¯¯ç ï¼Œ ç±»å‹ &lt;code&gt;NSInteger&lt;/code&gt;)  ï¼š ç‹¬æœ‰çš„é”™è¯¯ä»£ç ï¼ŒæŒ‡æ˜åœ¨æŸä¸ªèŒƒå›´å†…å…·ä½“å‘ç”Ÿçš„é”™è¯¯ã€‚å¯èƒ½æ˜¯ä¸€ç³»åˆ—çš„é”™è¯¯çš„é›†åˆï¼Œæ‰€ä»¥å¯ä»¥ä½¿ç”¨ Enum æ¥å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSError *_domain&lt;/code&gt; (é”™è¯¯èŒƒå›´ï¼Œç±»å‹ &lt;code&gt;NSString&lt;/code&gt;) ï¼šé”™è¯¯å‘ç”ŸèŒƒå›´ï¼Œé€šå¸¸ä½¿ç”¨ä¸€ä¸ªç‰¹æœ‰çš„å…¨å±€å˜é‡æ¥å®šä¹‰ã€‚&lt;/li&gt;
&lt;li&gt;&lt;code&gt;NSError *_userInfo&lt;/code&gt; (ç”¨æˆ·ä¿¡æ¯ï¼Œç±»å‹ &lt;code&gt;NSDictionary&lt;/code&gt;) ï¼šæœ‰å…³é”™è¯¯çš„é¢å¤–ä¿¡æ¯ï¼Œå…¶ä¸­åŒ…å«ä¸€æ®µâ€œæœ¬åœ°åŒ–çš„æè¿°â€ï¼Œè¿˜å¯èƒ½åŒ…å«å¯¼è‡´æ­¤é”™è¯¯å‘ç”Ÿçš„å¦ä¸€ä¸ªé”™è¯¯ã€‚userInfo å¯ä»¥æè¿°ä¸ºä¸€æ¡é”™è¯¯çš„é“¾æ¡&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id=&quot;NSErrorä½¿ç”¨çš„ä¸¤ç§æƒ…å†µ&quot;&gt;&lt;a href=&quot;#NSErrorä½¿ç”¨çš„ä¸¤ç§æƒ…å†µ&quot; class=&quot;headerlink&quot; title=&quot;NSErrorä½¿ç”¨çš„ä¸¤ç§æƒ…å†µ&quot;&gt;&lt;/a&gt;NSErrorä½¿ç”¨çš„ä¸¤ç§æƒ…å†µ&lt;/h4&gt;&lt;p&gt;   åœ¨æ–¹æ³•å®ç°æˆ–è€…æ˜¯ API è®¾è®¡æ—¶ï¼Œæˆ‘ä»¬å¯¹ &lt;code&gt;NSError&lt;/code&gt; çš„ä½¿ç”¨æƒ…å½¢æœ‰ä¸¤ç§ï¼šåœ¨åè®®ä¸­ä¼ é€’å’Œâ€œè¾“å‡ºå‚æ•°â€è¿”å›ç»™è°ƒç”¨è€…&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;é€šè¿‡å§”æ‰˜åè®®æ¥ä¼ é€’é”™è¯¯&lt;/li&gt;
&lt;/ol&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt;)connection:(&lt;span class=&quot;built_in&quot;&gt;NSURLConnection&lt;/span&gt; *)connection withError:(&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; *)error;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é€šè¿‡ä»£ç†åè®®çš„æ–¹å¼å¯ä»¥æŠŠé”™è¯¯æŠ¥å‘Šä¿¡æ¯ä¼ é€’&lt;/p&gt;
&lt;p&gt;  2.â€œè¾“å‡ºå‚æ•°â€è¿”å›ç»™è°ƒç”¨è€…&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;- (&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt;)doSomething:(&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; **)error;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;é”™è¯¯çš„ä¿¡æ¯ä½œä¸ºä¸€ä¸ªæŒ‡å‘æŒ‡é’ˆçš„æŒ‡é’ˆï¼ˆä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªæŒ‡é’ˆæŒ‡å‘é”™è¯¯çš„å¯¹è±¡ï¼‰&lt;/p&gt;
&lt;h3 id=&quot;throw-NSException-å¼‚å¸¸æŠ›å‡º&quot;&gt;&lt;a href=&quot;#throw-NSException-å¼‚å¸¸æŠ›å‡º&quot; class=&quot;headerlink&quot; title=&quot;@throw NSException (å¼‚å¸¸æŠ›å‡º)&quot;&gt;&lt;/a&gt;@throw NSException (å¼‚å¸¸æŠ›å‡º)&lt;/h3&gt;&lt;h4 id=&quot;é‡‡ç”¨-throw-æƒ…å†µ&quot;&gt;&lt;a href=&quot;#é‡‡ç”¨-throw-æƒ…å†µ&quot; class=&quot;headerlink&quot; title=&quot;é‡‡ç”¨ @throw æƒ…å†µ&quot;&gt;&lt;/a&gt;é‡‡ç”¨ @throw æƒ…å†µ&lt;/h4&gt;&lt;p&gt;åœ¨ APP è¿è¡ŒæœŸé—´é‡åˆ°é—®é¢˜ï¼Œéœ€è¦å¯¹é—®é¢˜è¿›è¡Œæ“ä½œç»ˆæ­¢ç¨‹åºæŠ›å‡ºå¼‚å¸¸ï¼Œå¯ä»¥ä½¿ç”¨ &lt;code&gt;@throw&lt;/code&gt; æ¥è¿›è¡Œ&lt;/p&gt;
&lt;h4 id=&quot;é‡‡ç”¨-throw-å¯èƒ½äº§ç”Ÿé—®é¢˜&quot;&gt;&lt;a href=&quot;#é‡‡ç”¨-throw-å¯èƒ½äº§ç”Ÿé—®é¢˜&quot; class=&quot;headerlink&quot; title=&quot;é‡‡ç”¨ @throw å¯èƒ½äº§ç”Ÿé—®é¢˜&quot;&gt;&lt;/a&gt;é‡‡ç”¨ @throw å¯èƒ½äº§ç”Ÿé—®é¢˜&lt;/h4&gt;&lt;p&gt;åœ¨å¼‚å¸¸æŠ›å‡ºå®ä¾‹ä¸­ï¼Œå¦‚æœæŠ›å‡ºå¼‚å¸¸ã€‚åœ¨å®ç°æŠ›å‡ºå¼‚å¸¸çš„ä»£ç åé¢çš„æ‰§è¡Œé‡Šæ”¾èµ„æºå°±ä¸ä¼šæ‰§è¡Œï¼Œè¿™æ ·æœ«å°¾çš„å¯¹è±¡å°±ä¸ä¼šè¢«é‡Šæ”¾ã€‚å¦‚æœæƒ³è¦ç”Ÿæˆâ€œå¼‚å¸¸å®‰å…¨â€çš„ä»£ç ï¼Œå¯ä»¥è®¾ç½®ç¼–è¯‘å™¨çš„æ ‡å¿— &lt;code&gt;-fobjc-arc-exceptions&lt;/code&gt; æ¥è¿›è¡Œå®ç°ã€‚ä¸è¿‡å°†è¦ä¸€å¦‚åŠ ä¸€äº›é¢å¤–çš„ä»£ç ï¼Œåœ¨ä¸æŠ›å‡ºå¼‚å¸¸æ—¶ä¹Ÿä¼šæ‰§è¡Œä»£ç ã€‚&lt;br&gt;åœ¨ä¸ä½¿ç”¨ ARC æ—¶ä¹Ÿå¾ˆéš¾å®ç°å¼‚å¸¸æŠ›å‡ºæƒ…å†µä¸‹å¯¹å†…å­˜è¿›è¡Œé‡Šæ”¾ã€‚&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt; * error = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;built_in&quot;&gt;BOOL&lt;/span&gt; success = [&lt;span class=&quot;keyword&quot;&gt;self&lt;/span&gt; doSomething:&amp;amp;error];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt;(error &amp;amp;&amp;amp; success) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;keyword&quot;&gt;@throw&lt;/span&gt;[&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; â€¦];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;[success release];&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æŒ‰ç…§ä¸Šé¢ğŸ‘†å®ç°å½“åœ¨å¼‚å¸¸æŠ›å‡ºçš„è¿‡ç¨‹æ—¶ï¼Œsuccess è¿˜æ¥ä¸åŠé‡Šæ”¾ã€‚æ‰€ä»¥è¦è§£å†³ä¸Šé¢çš„é—®é¢˜å¯ä»¥åœ¨å¼‚å¸¸æŠ›å‡ºä¹‹å‰å¯¹ success è¿›è¡Œé‡Šæ”¾ï¼Œä½†æ˜¯å½“éœ€è¦é‡Šæ”¾çš„èµ„æºæœ‰å¾ˆå¤šçš„æƒ…å†µä¸‹ï¼Œè¿™æ ·æ“ä½œèµ·æ¥å°±æ¯”è¾ƒå¤æ‚ã€‚&lt;/p&gt;
&lt;p&gt;åœ¨å¼€å‘è¿‡ç¨‹ä¸­å¼‚å¸¸æŠ›å‡ºå¯ä»¥ä½¿ç”¨åœ¨ æŠ½è±¡çš„åŸºç±» å®ä¾‹æ–¹æ³•ä¸­è¿›è¡Œè°ƒç”¨ã€‚å¦‚æœåŸºç±»ä¸­çš„æ–¹æ³•ä¸è¢« &lt;code&gt;override&lt;/code&gt; å°±è®¾ç½®æŠ›å‡ºå¼‚å¸¸ï¼Œè¿™æ ·å¯ä»¥ä¿è¯å®ä¾‹æ–¹æ³•è¢«é‡å†™ã€‚&lt;/p&gt;
&lt;h3 id=&quot;try-catch-finally-å¼‚å¸¸æ•æ‰&quot;&gt;&lt;a href=&quot;#try-catch-finally-å¼‚å¸¸æ•æ‰&quot; class=&quot;headerlink&quot; title=&quot;@try @catch @finally (å¼‚å¸¸æ•æ‰)&quot;&gt;&lt;/a&gt;@try @catch @finally (å¼‚å¸¸æ•æ‰)&lt;/h3&gt;&lt;h4 id=&quot;é‡‡ç”¨-try-catch-finally-æƒ…å†µ&quot;&gt;&lt;a href=&quot;#é‡‡ç”¨-try-catch-finally-æƒ…å†µ&quot; class=&quot;headerlink&quot; title=&quot;é‡‡ç”¨ @try @catch @finally æƒ…å†µ&quot;&gt;&lt;/a&gt;é‡‡ç”¨ @try @catch @finally æƒ…å†µ&lt;/h4&gt;&lt;p&gt;ä¸ªäººæ„Ÿè§‰ @try @catch @finally æ˜¯ @throw NSException çš„åŠ å¼ºç‰ˆã€‚å‰è€…å¯ä»¥å®ç°å¯¹å¼‚å¸¸çš„æ•æ‰ï¼Œç›¸å…³å¼‚å¸¸çš„è¾“å‡ºï¼Œå’Œå¼‚å¸¸è¾“å‡ºåæ‰§è¡Œçš„ @finally ç›¸å…³çš„å…·ä½“æ“ä½œã€‚åè€…æ˜¯å¯¹å…·ä½“æ•´ç† NSExpection æŠ›å‡ºï¼Œå¹¶æ²¡æœ‰å‰è€…æ¯”è¾ƒå®Œå–„çš„æµç¨‹åŒ–æ“ä½œæ­¥éª¤ã€‚&lt;/p&gt;
&lt;p&gt;å¦‚æœåœ¨åŸºç±»ä¸­å®ç° @throw è¿›è¡Œè®¾ç½® å¿…é¡» override åŸºç±»ä¸­çš„å®ä¾‹æ–¹æ³•ï¼Œé‚£ä¹ˆæ•è·å¼‚å¸¸çš„æ–¹æ³•ä¸­ä½¿ç”¨ @try @catch @finallyã€‚ä¾‹å¦‚ï¼šNSArrayï¼ŒNSDictionary åˆå§‹å˜é‡ä½¿ç”¨å­—é¢é‡æ¥è·å–å€¼æ—¶ï¼Œéœ€è¦åˆ¤æ–­è¿”å›æ•°æ®æ˜¯å¦ä¸º nil æ¥é˜²æ­¢ APP Crashã€‚ &lt;/p&gt;
&lt;h4 id=&quot;äº§ç”Ÿé—®é¢˜å’Œè§£å†³æ–¹å¼&quot;&gt;&lt;a href=&quot;#äº§ç”Ÿé—®é¢˜å’Œè§£å†³æ–¹å¼&quot; class=&quot;headerlink&quot; title=&quot;äº§ç”Ÿé—®é¢˜å’Œè§£å†³æ–¹å¼&quot;&gt;&lt;/a&gt;äº§ç”Ÿé—®é¢˜å’Œè§£å†³æ–¹å¼&lt;/h4&gt;&lt;p&gt;å½“ä½¿ç”¨ &lt;code&gt;@try @catch @finally&lt;/code&gt; æ—¶ï¼Œæœ‰ä¸¤ç§æƒ…å†µ &lt;code&gt;MRC&lt;/code&gt; å’Œ &lt;code&gt;ARC&lt;/code&gt;ã€‚&lt;/p&gt;
&lt;p&gt;&lt;code&gt;MRC&lt;/code&gt;ï¼ˆiOS 5 ä¹‹å‰ï¼‰ çš„ç¯å¢ƒä¸­ï¼Œä¸Šé¢çš„ä»£ç å¯ä»¥å±•ç¤ºä¸ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SomeClass *someClass = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       someClass = [[SomeClass alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [someClass doSomeThingsThatMayThrow];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt;() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(â€¦ â€¦);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     [someClass release];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;åœ¨ ARC çš„ç¯å¢ƒä¸­ï¼Œä¸Šé¢çš„ä»£ç å±•ç¤ºä¸ºï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;SomeClass *someClass = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       someClass = [[SomeClass alloc] init];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;       [someClass doSomeThingsThatMayThrow];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt;( â€¦ ) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;     &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(â€¦ â€¦);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;blockquote&gt;
&lt;p&gt;å¯ä»¥çœ‹å‡ºåœ¨ MRC çš„æƒ…å½¢ä¸‹å¯ä»¥å®ç°å¯¹äºå†…å­˜çš„é‡Šæ”¾ï¼Œåœ¨ ARC çš„æƒ…å½¢ä¸‹ä¼šç³»ç»Ÿä¼šå®ç°å¯¹å†…å­˜çš„é‡Šæ”¾? è¿™æ ·å‘æ­£ç¡®å—ï¼Ÿ&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;ç­”æ¡ˆæ˜¯ï¼šARC ä¸ä¼šè‡ªåŠ¨å¤„ç†ï¼Œå› ä¸ºå¦‚æœè¦å®ç°è‡ªåŠ¨å¤„ç†å¯èƒ½è¦åŠ å…¥å¤§é‡çš„ä»£ç ï¼Œæ‰å¯ä»¥æ¸…æ¥šå¯¹è±¡å®ç°æŠ›å‡ºå¼‚å¸¸æ—¶å°†å…¶æ¸…ç†ã€‚ä½†æ˜¯å¦‚æœåŠ å…¥ä»£ç å°±ä¼šå½±å“è¿è¡Œæ—¶çš„æ€§èƒ½ï¼Œåœ¨æ­£å¸¸è¿è¡Œæ—¶ä¹Ÿä¼šå¦‚æ­¤ã€‚&lt;br&gt;å¦‚æœåœ¨å½“å‰å®ç°ä¸­å¼€å¯ &lt;code&gt;-fobjc-arc-exception&lt;/code&gt; çš„æ¨¡å¼å¯ä»¥å®ç°åœ¨ &lt;code&gt;@try @catch @finally&lt;/code&gt; åœ¨å¼‚å¸¸æƒ…å†µä¸‹å®ç°å¯¹æœªé‡Šæ”¾çš„å¯¹è±¡è¿›è¡Œå†…å­˜çš„é‡Šæ”¾ç®¡ç†&lt;/p&gt;
&lt;h4 id=&quot;try-catch-finally-çš„-C-æºç &quot;&gt;&lt;a href=&quot;#try-catch-finally-çš„-C-æºç &quot; class=&quot;headerlink&quot; title=&quot;@try@catch@finally çš„ C++ æºç &quot;&gt;&lt;/a&gt;@try@catch@finally çš„ C++ æºç &lt;/h4&gt;&lt;p&gt;æŸ¥çœ‹å¼‚å¸¸æŠ›å‡ºçš„æºç ï¼š&lt;br&gt;å»ºç«‹é¡¹ç›®åœ¨ &lt;code&gt;main.m&lt;/code&gt; æ–‡ä»¶ä¸­å®ç°ä¸‹é¢ä»£ç ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main(&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; argc, &lt;span class=&quot;keyword&quot;&gt;char&lt;/span&gt; * argv[]) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;æ‰“å¼€ç»ˆç«¯åœ¨ &lt;code&gt;main.m&lt;/code&gt; ç»ˆç«¯çš„æ–‡ä»¶å¤¹è·¯å¾„æ‰§è¡Œä¸‹é¢çš„è¯­å¥&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;clang -x objective-c -rewrite-objc -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator.sdk main.m&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¼šç”Ÿæˆæ–‡ä»¶ &lt;code&gt;main.cpp&lt;/code&gt; çš„æ–‡ä»¶ï¼Œå¯ä»¥æ‰“å¼€æŸ¥çœ‹æ–‡ &lt;code&gt;@try @catch @fianlly&lt;/code&gt;&lt;/p&gt;
&lt;h5 id=&quot;NSExpection-å±æ€§å†…å®¹&quot;&gt;&lt;a href=&quot;#NSExpection-å±æ€§å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;NSExpection å±æ€§å†…å®¹&quot;&gt;&lt;/a&gt;NSExpection å±æ€§å†…å®¹&lt;/h5&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;__attribute__((__objc_exception__))&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#ifndef _REWRITER_typedef_NSException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#define _REWRITER_typedef_NSException&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_object &lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &amp;#123;&amp;#125; _objc_exc_NSException;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSException_IMPL&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSObject_IMPL&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSObject_IVARS&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//å®ä¾‹å˜é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *name;                      &lt;span class=&quot;comment&quot;&gt;//exception çš„åå­—&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *reason;                    &lt;span class=&quot;comment&quot;&gt;//exception äº§ç”Ÿçš„åŸå› &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *userInfo;              &lt;span class=&quot;comment&quot;&gt;//exception å±•ç¤ºä½¿ç”¨è¯¦ç»†çš„ä¿¡æ¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; reserved;                         &lt;span class=&quot;comment&quot;&gt;//&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;NSError-å±æ€§å†…å®¹&quot;&gt;&lt;a href=&quot;#NSError-å±æ€§å†…å®¹&quot; class=&quot;headerlink&quot; title=&quot;NSError å±æ€§å†…å®¹&quot;&gt;&lt;/a&gt;NSError å±æ€§å†…å®¹&lt;/h5&gt;&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#ifndef _REWRITER_typedef_NSError&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#define _REWRITER_typedef_NSError&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; objc_object &lt;span class=&quot;built_in&quot;&gt;NSError&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;typedef&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &amp;#123;&amp;#125; _objc_exc_NSError;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;meta&quot;&gt;#endif&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSError_IMPL&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSObject_IMPL&lt;/span&gt; &lt;span class=&quot;built_in&quot;&gt;NSObject_IVARS&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//å®ä¾‹å˜é‡&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *_reserved;                     &lt;span class=&quot;comment&quot;&gt;//å®ä¾‹è°ƒç”¨çš„æ–¹æ³•&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSInteger&lt;/span&gt; _code;                     &lt;span class=&quot;comment&quot;&gt;//error é”™è¯¯ç &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *_domain;                   &lt;span class=&quot;comment&quot;&gt;//error é”™è¯¯å‘ç”ŸèŒƒå›´&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *_userInfo;             &lt;span class=&quot;comment&quot;&gt;//error é”™è¯¯æè¿°çš„å…·ä½“ä¿¡æ¯&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ä¸‹é¢åœ¨ &lt;code&gt;main.m&lt;/code&gt; ä¸­ä½¿ç”¨ &lt;code&gt;Clang&lt;/code&gt; è§£æ &lt;code&gt;@try @catch @finally&lt;/code&gt; åœ¨ C++ ç¯å¢ƒä¸­è§£æ&lt;/p&gt;
&lt;ul&gt;&lt;br&gt;&lt;li&gt;æ²¡æœ‰å‚æ•°&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;br&gt;&lt;li&gt;æœ‰å‚æ•°&lt;br&gt;&lt;/li&gt;&lt;br&gt;&lt;/ul&gt;

&lt;h5 id=&quot;æ²¡æœ‰å‚æ•°&quot;&gt;&lt;a href=&quot;#æ²¡æœ‰å‚æ•°&quot; class=&quot;headerlink&quot; title=&quot;æ²¡æœ‰å‚æ•°&quot;&gt;&lt;/a&gt;æ²¡æœ‰å‚æ•°&lt;/h5&gt;&lt;p&gt;åœ¨æ²¡æœ‰å‚æ•°çš„æƒ…å†µä¸‹&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç»è¿‡ Clang è§£æåæºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#123; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;volatile&lt;/span&gt; _rethrow = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		         &lt;span class=&quot;comment&quot;&gt;//å¼‚å¸¸æ•è·&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    &amp;#125; catch (_objc_exc_NSException *_exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		         &lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception = (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt;*)_exception; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		         &lt;span class=&quot;comment&quot;&gt;//æ•è·å¼‚å¸¸ï¼Œå¹¶è¿›è¡ŒæŠ›å‡º&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	catch (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	     _rethrow = e;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#123;  &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	  &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; _FIN &amp;#123; _FIN(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; reth) : rethrow(reth) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		~_FIN() &amp;#123; &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (rethrow) objc_exception_throw(rethrow); &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; rethrow;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125; _fin_force_rethow(_rethrow);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		   &lt;span class=&quot;comment&quot;&gt;//å¼‚å¸¸æŠ›å‡ºåæ‰§è¡Œçš„ finally çš„å†…å®¹&lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; IMAGE_INFO &amp;#123; &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; version; &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; flag; &amp;#125; _OBJC_IMAGE_INFO = &amp;#123; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h5 id=&quot;æœ‰å‚æ•°&quot;&gt;&lt;a href=&quot;#æœ‰å‚æ•°&quot; class=&quot;headerlink&quot; title=&quot;æœ‰å‚æ•°&quot;&gt;&lt;/a&gt;æœ‰å‚æ•°&lt;/h5&gt;&lt;p&gt;åœ¨æœ‰å‚æ•°çš„æƒ…å†µä¸‹&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *dic = @&amp;#123;&lt;span class=&quot;string&quot;&gt;@&quot;name&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;@&quot;liang&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          &lt;span class=&quot;string&quot;&gt;@&quot;last name&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;@&quot;bai&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          &lt;span class=&quot;string&quot;&gt;@&quot;dream&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;@&quot;to be a bussinessman&quot;&lt;/span&gt;,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;                          &lt;span class=&quot;string&quot;&gt;@&quot;work&quot;&lt;/span&gt;:&lt;span class=&quot;string&quot;&gt;@&quot;IT&quot;&lt;/span&gt;&amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *salaryLiterals = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *salaryAtIndex = &lt;span class=&quot;literal&quot;&gt;nil&lt;/span&gt;;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;keyword&quot;&gt;@try&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        salaryAtIndex = [dic objectForKey:&lt;span class=&quot;string&quot;&gt;@&quot;salary&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        salaryLiterals = dic[&lt;span class=&quot;string&quot;&gt;@&quot;salary&quot;&lt;/span&gt;];&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@catch&lt;/span&gt; (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;(&lt;span class=&quot;string&quot;&gt;@&quot;error name is %@, reason : %@, userInfo : %@&quot;&lt;/span&gt;, exception.name, exception.reason, exception.userInfo);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125; &lt;span class=&quot;keyword&quot;&gt;@finally&lt;/span&gt; &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;        &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;p&gt;ç»è¿‡ Clang è§£æåæºç å¦‚ä¸‹ï¼š&lt;/p&gt;
&lt;figure class=&quot;highlight objc&quot;&gt;&lt;table&gt;&lt;tr&gt;&lt;td class=&quot;gutter&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;1&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;2&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;3&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;4&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;5&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;6&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;7&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;8&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;9&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;10&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;11&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;12&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;13&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;14&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;15&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;16&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;17&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;18&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;19&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;20&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;21&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;22&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;23&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;24&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;25&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;26&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;27&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;28&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;29&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;30&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;31&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;32&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;33&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;34&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;35&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;36&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;37&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;38&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;39&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;40&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;41&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;42&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;43&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;td class=&quot;code&quot;&gt;&lt;pre&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;int&lt;/span&gt; main() &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *dic = ((&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; *(*)(Class, SEL, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; ObjectType *, &lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; *, &lt;span class=&quot;built_in&quot;&gt;NSUInteger&lt;/span&gt;))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)(objc_getClass(&lt;span class=&quot;string&quot;&gt;&quot;NSDictionary&quot;&lt;/span&gt;), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;dictionaryWithObjects:forKeys:count:&quot;&lt;/span&gt;), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; *)__NSContainer_literal(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;U, (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_1,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_3, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_5, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_7).arr,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;keyword&quot;&gt;const&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; *)__NSContainer_literal(&lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;U, (&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_0, &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_2,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_4,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_6).arr, &lt;span class=&quot;number&quot;&gt;4&lt;/span&gt;U);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *salary = __null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;    &amp;#123; &lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;volatile&lt;/span&gt; _rethrow = &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;; &lt;span class=&quot;comment&quot;&gt;//ä½¿ç”¨ volatile ä¿®é¥°çš„ _rethrow è®°å½•å¼‚å¸¸çš„å±€éƒ¨å˜é‡ &lt;/span&gt;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			try &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			        salary = ((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;  _Nullable (*)(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;, SEL, KeyType))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)dic, sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;objectForKeyedSubscript:&quot;&lt;/span&gt;), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			  (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)(&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_8);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    catch (_objc_exc_NSException *_exception) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		     &lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt; *exception = (&lt;span class=&quot;built_in&quot;&gt;NSException&lt;/span&gt;*)_exception; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		     &lt;span class=&quot;built_in&quot;&gt;NSLog&lt;/span&gt;((&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; *)&amp;amp;__NSConstantStringImpl__var_folders_tv_4c43vcqx24vcxx6d51n4ntc00000gn_T_main_753a25_mi_9,&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		            ((&lt;span class=&quot;built_in&quot;&gt;NSExceptionName&lt;/span&gt; (*)(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;, SEL))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)exception, sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;name&quot;&lt;/span&gt;)), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		            ((&lt;span class=&quot;built_in&quot;&gt;NSString&lt;/span&gt; * _Nullable (*)(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;, SEL))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)exception, sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;reason&quot;&lt;/span&gt;)), &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		            ((&lt;span class=&quot;built_in&quot;&gt;NSDictionary&lt;/span&gt; * _Nullable (*)(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;, SEL))(&lt;span class=&quot;keyword&quot;&gt;void&lt;/span&gt; *)objc_msgSend)((&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt;)exception, sel_registerName(&lt;span class=&quot;string&quot;&gt;&quot;userInfo&quot;&lt;/span&gt;)));&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		catch (&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; e) &amp;#123;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		    _rethrow = e;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		 &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			 &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; _FIN &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			    _FIN(&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; reth) : rethrow(reth) &amp;#123;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				~_FIN() &amp;#123; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				  &lt;span class=&quot;keyword&quot;&gt;if&lt;/span&gt; (rethrow) objc_exception_throw(rethrow); &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;				&lt;span class=&quot;keyword&quot;&gt;id&lt;/span&gt; rethrow;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			 &amp;#125; &lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			 _fin_force_rethow(_rethrow);&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;			    salary = __null;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;		 &amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;	&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&amp;#125;&lt;/span&gt;&lt;br&gt;&lt;span class=&quot;line&quot;&gt;&lt;span class=&quot;keyword&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;keyword&quot;&gt;struct&lt;/span&gt; IMAGE_INFO &amp;#123; &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; version; &lt;span class=&quot;keyword&quot;&gt;unsigned&lt;/span&gt; flag; &amp;#125; _OBJC_IMAGE_INFO = &amp;#123; &lt;span class=&quot;number&quot;&gt;0&lt;/span&gt;, &lt;span class=&quot;number&quot;&gt;2&lt;/span&gt; &amp;#125;;&lt;/span&gt;&lt;br&gt;&lt;/pre&gt;&lt;/td&gt;&lt;/tr&gt;&lt;/table&gt;&lt;/figure&gt;
&lt;h3 id=&quot;æ€»ç»“ï¼š&quot;&gt;&lt;a href=&quot;#æ€»ç»“ï¼š&quot; class=&quot;headerlink&quot; title=&quot;æ€»ç»“ï¼š&quot;&gt;&lt;/a&gt;æ€»ç»“ï¼š&lt;/h3&gt;&lt;blockquote&gt;
&lt;p&gt;ï¼ˆ1ï¼‰é‡åˆ°å¥”æºƒé—®é¢˜æˆ–è€…æ˜¯é”™è¯¯é—®é¢˜ï¼Œä¼˜å…ˆä½¿ç”¨ &lt;code&gt;NSError&lt;/code&gt; æ¥å¯¹å¥”æºƒå’Œé”™è¯¯è¿›è¡Œå°è£…ï¼Œç„¶åä½¿ç”¨ &lt;code&gt;NSLog&lt;/code&gt; å¯¹å…¶è¿›è¡Œæ‰“å°&lt;/p&gt;
&lt;p&gt;ï¼ˆ2ï¼‰&lt;code&gt;@try @catch @finally&lt;/code&gt; åœ¨ä½¿ç”¨çš„è¿‡ç¨‹ä¸­å¾ˆæ–¹ä¾¿ï¼Œä½†æ˜¯ &lt;code&gt;MRC&lt;/code&gt; ä¸­å¦‚æœå˜é‡è¾ƒå¤šå¯èƒ½ä¼šæ¼æ‰å±€éƒ¨å˜é‡å†…å­˜é‡Šæ”¾é—®é¢˜å’Œ &lt;code&gt;ARC&lt;/code&gt; ä¸­å¦‚æœæŠ›å‡ºé—®é¢˜ï¼Œä¸ä¼šè‡ªåŠ¨å¯¹å±€éƒ¨å˜é‡é‡Šæ”¾ï¼ˆå¼€å¯ &lt;code&gt;-fobjc-arc-expections&lt;/code&gt; æ¨¡å¼ä¼šè¿›è¡Œé‡Šæ”¾ï¼Œä½†æ˜¯å¼•å…¥ä»£ç å¯¹æ€§èƒ½æœ‰æ‰€å½±å“ï¼‰&lt;/p&gt;
&lt;/blockquote&gt;
</content>
    
    <summary type="html">
    
      &lt;p&gt;å¼€å‘è¿‡è¿‡ç¨‹ä¸­æˆ‘ä»¬ç»å¸¸ä¼šé‡åˆ°å¼‚å¸¸é—®é¢˜&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;http://upload-images.jianshu.io/upload_images/1877765-ebec37c09e21ba91.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240&quot; alt=&quot;iOSå¼‚å¸¸.png&quot;&gt;&lt;/p&gt;
&lt;h1 id=&quot;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot;&gt;&lt;a href=&quot;#iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot; class=&quot;headerlink&quot; title=&quot;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&quot;&gt;&lt;/a&gt;iOS-å¼€å‘è¿‡ç¨‹ä¸­çš„é”™è¯¯å¤„ç†&lt;/h1&gt;
    
    </summary>
    
      <category term="iOS" scheme="http://yoursite.com/categories/iOS/"/>
    
    
      <category term="iOS" scheme="http://yoursite.com/tags/iOS/"/>
    
  </entry>
  
</feed>
